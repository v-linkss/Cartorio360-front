import{_ as L}from"./BW9DhXR-.js";import{_ as T,Y as j,n as q,Z as G,u as y,$ as J,I as K,o as f,c as I,x as n,G as k,t as O,J as $,w as t,F as Y,s as Z,a0 as H,a1 as Q,b as a,K as m,a2 as v,a as F,p as W,e as X}from"./BZTNwVvR.js";import{b as h,u as ee}from"./B5oO3n1S.js";import{V as u,_ as ae}from"./B7yLVG-_.js";import{_ as le}from"./37abXc2X.js";import{u as oe}from"./CtPXWs3V.js";import{V as te}from"./Bg7pj8Z0.js";import{V as i}from"./UwjzeoXS.js";import{V as b}from"./DnAiITvf.js";const se=p=>(W("data-v-2ad11e1d"),p=p(),X(),p),de={key:1},ie=se(()=>F("img",{class:"btn-pointer",src:ae,alt:"Sair"},null,-1)),me={__name:"[id]",emits:["saved"],async setup(p,{emit:ne}){let _,C;j();const{$toast:N}=q(),x=G(),{id:U}=x.params,r=Z(),w=r.public.updatePessoaUrl,S=r.public.listarEstadoCivilUrl,M=r.public.listarCapacidadeCivilUrl,A=r.public.listarCidadesUrl,B=r.public.getPessoaByIdUrl,D={nome:"",nome_pai:"",nome_mae:"",profissao:"",local_trabalho:"",data_nascimento:"",doc_identificacao:"",cpf_pai:"",cpf_mae:"",local_trabalho:"",tipo_pessoa:"FISICA",tabvalores_estadocivil_id:"",tabvalores_capacidadecivil_id:"",cidade_natural_id:"",cartorio_id:y("user-data").value.cartorio_id,user_id:y("user-data").value.usuario_id},l=J({...D});function R(s){if(s)return s.replace(/[.\-]/g,"");s=null}const{data:V,status:ue,pending:g,error:P}=([_,C]=K(async()=>h("cliente-dados",async()=>{const[s,e,d,c]=await Promise.all([$fetch(S),$fetch(M),$fetch(A),$fetch(`${B}/${U}`)]);return Object.assign(l,c),{estadoCivilItems:s,capacidadeCivilItems:e,cidadeNascimentoItems:d}})),_=await _,C(),_);oe(l);function z(s){const e={};for(const d in s)s[d]===""?e[d]=null:d==="doc_identificacao"||d==="cpf_pai"||d==="cpf_mae"?e[d]=R(s[d]):e[d]=s[d];return e}async function E(){const s=z(l);await ee(`${w}/${U}`,{method:"PUT",body:s},"$NdF8Uiv290"),N.success("Pessoa atualizada com sucesso!"),console.log(s)}return(s,e)=>{const d=L,c=H("mask");return f(),I(Y,null,[n(g)?(f(),k(Q,{key:0,class:"loading-spinner",indeterminate:"",size:"64"})):n(P)?(f(),I("div",de,O(n(P).message),1)):$("",!0),n(g)?$("",!0):(f(),k(te,{key:2,class:"mt-5"},{default:t(()=>[a(u,null,{default:t(()=>[a(i,{cols:"12",md:"8"},{default:t(()=>[a(m,{modelValue:l.nome,"onUpdate:modelValue":e[0]||(e[0]=o=>l.nome=o),label:"Nome"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[v(a(m,{modelValue:l.doc_identificacao,"onUpdate:modelValue":e[1]||(e[1]=o=>l.doc_identificacao=o),label:"CPF",required:""},null,8,["modelValue"]),[[c,"###.###.###-##"]])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[a(b,{modelValue:l.tabvalores_estadocivil_id,"onUpdate:modelValue":e[2]||(e[2]=o=>l.tabvalores_estadocivil_id=o),items:n(V).estadoCivilItems,"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:l.profissao,"onUpdate:modelValue":e[3]||(e[3]=o=>l.profissao=o),label:"Profissão"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:l.local_trabalho,"onUpdate:modelValue":e[4]||(e[4]=o=>l.local_trabalho=o),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:l.data_nascimento,"onUpdate:modelValue":e[5]||(e[5]=o=>l.data_nascimento=o),type:"date","prepend-icon":"",label:"Data de nascimento"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(b,{modelValue:l.tabvalores_capacidadecivil_id,"onUpdate:modelValue":e[6]||(e[6]=o=>l.tabvalores_capacidadecivil_id=o),items:n(V).capacidadeCivilItems,label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(b,{modelValue:l.cidade_natural_id,"onUpdate:modelValue":e[7]||(e[7]=o=>l.cidade_natural_id=o),items:n(V).cidadeNascimentoItems,label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[v(a(m,{modelValue:l.cpf_pai,"onUpdate:modelValue":e[8]||(e[8]=o=>l.cpf_pai=o),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[c,"###.###.###-##"]])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:l.nome_pai,"onUpdate:modelValue":e[9]||(e[9]=o=>l.nome_pai=o),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[v(a(m,{modelValue:l.cpf_mae,"onUpdate:modelValue":e[10]||(e[10]=o=>l.cpf_mae=o),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[c,"###.###.###-##"]])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:l.nome_mae,"onUpdate:modelValue":e[11]||(e[11]=o=>l.nome_mae=o),modelModifiers:{date:!0},label:"Nome da Mãe"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(d,{to:"/pessoas/registros"},{default:t(()=>[ie]),_:1}),F("img",{class:"btn-pointer",src:le,onClick:e[12]||(e[12]=o=>E())})]),_:1})]),_:1}))],64)}}},Ue=T(me,[["__scopeId","data-v-2ad11e1d"]]);export{Ue as default};
