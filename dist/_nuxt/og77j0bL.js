import{_ as L,L as R,C as $,r as i,o as p,c as J,a as v,b as t,E as K,x as a,V as E,w as n,A as I,z as P,H as f,I as T,d as _,s as V,G as y,y as x,p as z,e as F,B as S}from"./8Lc1Ye8d.js";import{a as j}from"./BatLNKDS.js";import{V as q}from"./3wJ_PxiT.js";import{V as w}from"./DNLTjn2t.js";const G=""+new URL("cartorio_logo.CfnnJMUp.jpeg",import.meta.url).href,b=c=>(z("data-v-e2e02109"),c=c(),F(),c),H={class:"container-main"},M={class:"container-form"},X=b(()=>v("div",{class:"text"},"Log in",-1)),Q=b(()=>v("a",{class:"text-decoration-none",rel:"noopener noreferrer",style:{color:"#429946"}}," Esqueceu a senha?",-1)),W=b(()=>v("div",{class:"background-image"},null,-1)),Y={__name:"index",setup(c){const N=R(),{$toast:B}=$(),l=i({senha:"",email:""}),u=i(!1),r=i(!1),h=i(!1),k=i(!1),d=i(!1),g=()=>{h.value=!1,k.value=!1,d.value=!1,r.value=!1},U=P().public.auth,A=async()=>{const{data:m,status:e,error:o}=await j(`${U}/login`,{method:"POST",body:{senha:l.value.senha,email:l.value.email}},"$iX10IJN3fa");if(console.log(m,o),e.value==="success"){const s=m.value[0].func_autentica_acesso_v1[0].registro[0],C=S("user-data");C.value=C.value=JSON.stringify({nome:s.nome,usuario_id:s.id,cartorio_id:s.cartorios[0].cartorio_id,cartorio_nome:s.cartorios[0].cartorio_descricao,cartorio_token:s.cartorios[0].cartorio_token}),B.success("Login realizado com sucesso!");const D=m.value[0].func_autentica_acesso_v1[0].registro[0].token,O=S("auth_token");O.value=D,N.push("/home")}else{e.value==="error"&&o.value.statusCode===500&&(d.value=!0);const s=o.value.data[0].func_autentica_acesso_v1[0];switch(s.status_mensagem){case"Esse email não está cadastrado no Durabil.":k.value=!0;break;case"Senha inválida.":h.value=!0;break;default:s.error==="Erro ao autenticar usuário"&&(d.value=!0);break}}};return(m,e)=>(p(),J("div",H,[v("div",M,[t(K,{class:"image",width:300,height:"230",src:G}),X,t(E,{autofocus:"",autocomplete:"email",type:"email",modelValue:a(l).email,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).email=o),"persistent-hint":"",class:"input",density:"compact",placeholder:"Email","prepend-inner-icon":"mdi-email-outline",variant:"outlined"},null,8,["modelValue"]),t(E,{modelValue:a(l).senha,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).senha=o),class:"input","append-inner-icon":a(u)?"mdi-eye-off":"mdi-eye",type:a(u)?"text":"password",density:"compact",placeholder:"Senha","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":e[2]||(e[2]=o=>u.value=!a(u))},null,8,["modelValue","append-inner-icon","type"]),t(q,{modelValue:a(r),"onUpdate:modelValue":e[4]||(e[4]=o=>I(r)?r.value=o:null),"max-width":"400",persistent:""},{activator:n(({props:o})=>[t(f,T({block:"",rounded:"",class:"button mb-10 mt-4"},o,{onClick:A,modelValue:a(r),"onUpdate:modelValue":e[3]||(e[3]=s=>I(r)?r.value=s:null)}),{default:n(()=>[_(" Acessar ")]),_:2},1040,["modelValue"])]),default:n(()=>[a(h)?(p(),V(w,{key:0,text:"Senha inválida."},{actions:n(()=>[t(y),t(f,{onClick:g,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[_(" OK ")]),_:1})]),_:1})):x("",!0),a(k)?(p(),V(w,{key:1,text:"Esse email não está cadastrado."},{actions:n(()=>[t(y),t(f,{onClick:g,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[_(" OK ")]),_:1})]),_:1})):x("",!0),a(d)?(p(),V(w,{key:2,text:"Erro no sistema, fora do ar."},{actions:n(()=>[t(y),t(f,{onClick:g,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[_(" OK ")]),_:1})]),_:1})):x("",!0)]),_:1},8,["modelValue"]),Q]),W]))}},se=L(Y,[["__scopeId","data-v-e2e02109"]]);export{se as default};
