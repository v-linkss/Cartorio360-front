import{_ as O}from"./BcRcl07G.js";import{_ as T,L as j,C as q,M as Q,B as $,N as G,v as H,o as f,c as U,x as n,s as I,t as J,y as k,w as t,F as K,z as W,O as X,P as Y,b as a,V as m,Q as v,a as N,p as Z,e as h}from"./DRtsUnge.js";import{b as ee,a as ae}from"./Cf69akfm.js";import{V as u,_ as oe}from"./DTRhw5di.js";import{_ as le}from"./37abXc2X.js";import{u as te}from"./B2I4Q4zO.js";import{V as se}from"./DjLbuLKQ.js";import{V as i}from"./-H-sMdQf.js";import{V as b}from"./DZ1Nt2xG.js";const de=p=>(Z("data-v-d5265d57"),p=p(),h(),p),ie={key:1},me=de(()=>N("img",{class:"btn-pointer",src:oe,alt:"Sair"},null,-1)),ne={__name:"[id]",emits:["saved"],async setup(p,{emit:ue}){let _,C;const F=j(),{$toast:x}=q(),w=Q(),{id:g}=w.params,r=W(),M=`${r.public.managemant}/updatePessoa`,S=`${r.public.managemant}/listarEstadoCivil`,B=`${r.public.managemant}/listarCapacidadeCivil`,A=`${r.public.managemant}/listarCidades`,D=`${r.public.managemant}/getPessoaById`,z={nome:"",nome_pai:"",nome_mae:"",profissao:"",local_trabalho:"",data_nascimento:"",doc_identificacao:"",cpf_pai:"",cpf_mae:"",local_trabalho:"",tipo_pessoa:"FISICA",tabvalores_estadocivil_id:"",tabvalores_capacidadecivil_id:"",cidade_natural_id:"",cartorio_id:$("user-data").value.cartorio_id,user_id:$("user-data").value.usuario_id},o=G({...z});function L(s){if(s)return s.replace(/[.\-]/g,"");s=null}const{data:V,status:re,pending:P,error:y}=([_,C]=H(async()=>ee("cliente-dados",async()=>{const[s,e,d,c]=await Promise.all([$fetch(S),$fetch(B),$fetch(A),$fetch(`${D}/${g}`)]);return Object.assign(o,c),{estadoCivilItems:s,capacidadeCivilItems:e,cidadeNascimentoItems:d}})),_=await _,C(),_);te(o);function R(s){const e={};for(const d in s)s[d]===""?e[d]=null:d==="doc_identificacao"||d==="cpf_pai"||d==="cpf_mae"?e[d]=L(s[d]):e[d]=s[d];return e}async function E(){const s=R(o);await ae(`${M}/${g}`,{method:"PUT",body:s},"$NdF8Uiv290"),x.success("Pessoa atualizada com sucesso!"),F.push("/pessoas/registros")}return(s,e)=>{const d=O,c=X("mask");return f(),U(K,null,[n(P)?(f(),I(Y,{key:0,class:"loading-spinner",indeterminate:"",size:"64"})):n(y)?(f(),U("div",ie,J(n(y).message),1)):k("",!0),n(P)?k("",!0):(f(),I(se,{key:2,class:"mt-5"},{default:t(()=>[a(u,null,{default:t(()=>[a(i,{cols:"12",md:"8"},{default:t(()=>[a(m,{modelValue:o.nome,"onUpdate:modelValue":e[0]||(e[0]=l=>o.nome=l),label:"Nome"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[v(a(m,{modelValue:o.doc_identificacao,"onUpdate:modelValue":e[1]||(e[1]=l=>o.doc_identificacao=l),label:"CPF",required:""},null,8,["modelValue"]),[[c,"###.###.###-##"]])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[a(b,{modelValue:o.tabvalores_estadocivil_id,"onUpdate:modelValue":e[2]||(e[2]=l=>o.tabvalores_estadocivil_id=l),items:n(V).estadoCivilItems,"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o.profissao,"onUpdate:modelValue":e[3]||(e[3]=l=>o.profissao=l),label:"Profissão"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o.local_trabalho,"onUpdate:modelValue":e[4]||(e[4]=l=>o.local_trabalho=l),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o.data_nascimento,"onUpdate:modelValue":e[5]||(e[5]=l=>o.data_nascimento=l),type:"date","prepend-icon":"",label:"Data de nascimento"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(b,{modelValue:o.tabvalores_capacidadecivil_id,"onUpdate:modelValue":e[6]||(e[6]=l=>o.tabvalores_capacidadecivil_id=l),items:n(V).capacidadeCivilItems,label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(b,{modelValue:o.cidade_natural_id,"onUpdate:modelValue":e[7]||(e[7]=l=>o.cidade_natural_id=l),items:n(V).cidadeNascimentoItems,label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[v(a(m,{modelValue:o.cpf_pai,"onUpdate:modelValue":e[8]||(e[8]=l=>o.cpf_pai=l),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[c,"###.###.###-##"]])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o.nome_pai,"onUpdate:modelValue":e[9]||(e[9]=l=>o.nome_pai=l),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[v(a(m,{modelValue:o.cpf_mae,"onUpdate:modelValue":e[10]||(e[10]=l=>o.cpf_mae=l),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[c,"###.###.###-##"]])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o.nome_mae,"onUpdate:modelValue":e[11]||(e[11]=l=>o.nome_mae=l),modelModifiers:{date:!0},label:"Nome da Mãe"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(d,{to:"/pessoas/registros"},{default:t(()=>[me]),_:1}),N("img",{class:"btn-pointer",src:le,onClick:e[12]||(e[12]=l=>E())})]),_:1})]),_:1}))],64)}}},Pe=T(ne,[["__scopeId","data-v-d5265d57"]]);export{Pe as default};
