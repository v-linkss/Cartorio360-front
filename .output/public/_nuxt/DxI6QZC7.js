import{_ as oe}from"./B63xm2e-.js";import{u as se,n as le,q as Q,r,s as re,o as z,v as ne,w as t,b as e,x as a,V as K,y as G,d as q,z as Z,A as M,B as X,a as c,C as me,c as L,D as te,E as qe,F as ze}from"./mCM5qAMN.js";import{u as v}from"./CIFrXdMb.js";import{V as w}from"./DXI6PwzM.js";import{V as E}from"./DOIkrPR8.js";import{V as de}from"./CC15gVms.js";import{V as ie}from"./BpbbXnhT.js";import{_ as Oe}from"./CqXMokaG.js";import{_ as Ee,a as Se,b as De,c as Ue,d as Re,e as Ie}from"./DzQDZn3Y.js";import{_ as pe}from"./UHe9fWmX.js";import{_ as ae,a as _e}from"./HBU26js5.js";import{_ as ve,a as je}from"./DZnXXQ3J.js";import{V as ge,a as fe}from"./BErdKuUz.js";import{_ as ye}from"./DfjuBLsA.js";import{c as Be,r as Me,u as Ne}from"./isTvPMt7.js";import{V as Fe,a as H,b as Ge,c as J}from"./CGb4PgD-.js";import"./qkyIzkMc.js";const Le={__name:"Dados",props:{item_dados:{type:Array,required:!0},item_situacoes:{type:Array,required:!0}},setup(W){const s=W,{$toast:y}=se(),$=Z(),p=le(),n=Q(),g=`${$.public.managemant}/updateAtos`,O=r(s.item_situacoes),x=re({dt_abertura:s.item_dados[0].dt_abertura||null,status:s.item_dados[0].status||null,mne:s.item_dados[0].mne||null});async function S(){const{data:k,error:u,status:V}=await v(`${g}/${n.query.id}`,{method:"PUT",body:{status:x.status,mne:x.mne}},"$EIT5jtTUdX");V.value==="success"&&y.success("Situação Atualizada com sucesso")}const D=()=>{const k=n.query.origem||"criar",u=n.query.id;k==="atualizar"?p.push(`/os/atualizar/${u}`):p.push("/os/criar-registro")};return(k,u)=>{const V=oe;return z(),ne(ie,null,{default:t(()=>[e(w,{class:"mt-5"},{default:t(()=>[e(E,{cols:"3"},{default:t(()=>[e(de,{label:"Situação",modelValue:a(x).status,"onUpdate:modelValue":u[0]||(u[0]=b=>a(x).status=b),items:a(O),"item-title":"descricao","item-value":"descricao",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(E,{cols:"5"},{default:t(()=>[e(K,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:a(x).mne,"onUpdate:modelValue":u[1]||(u[1]=b=>a(x).mne=b)},null,8,["modelValue"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(E,{cols:"2"},{default:t(()=>[e(K,{modelValue:a(x).dt_abertura,"onUpdate:modelValue":u[2]||(u[2]=b=>a(x).dt_abertura=b),type:"date",label:"Data Lavratura",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(w,{class:"mb-3"},{default:t(()=>[e(V,{onClick:D},{default:t(()=>[e(G,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1}),e(G,{class:"ml-10",onClick:S,size:"large",color:"green"},{default:t(()=>[q("Salvar")]),_:1})]),_:1})]),_:1})}}},He=["onClick"],Je=c("img",{style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar"},null,-1),Ke=[Je],Xe=["onClick"],We=c("img",{style:{width:"30px",height:"30px"},src:je,alt:"Visualizar"},null,-1),Ye=[We],Qe=["onClick"],Ze={key:0,style:{width:"30px",height:"30px"},src:ve,alt:"Visualizar",title:"Reativar"},et={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},tt=["onClick"],at=c("img",{style:{width:"30px",height:"30px"},src:De,alt:"Visualizar"},null,-1),ot=[at],st={__name:"Partes",props:{ato_token:{type:String,required:!0}},async setup(W){let s,y;const $=le(),p=Q(),n=Z(),{$toast:g}=se(),O=`${n.public.managemant}/pesquisarPessoas`,x=`${n.public.managemant}/listarPapeis`,S=`${n.public.managemant}/getLinkTipo`,D=`${n.public.managemant}/createAtosPessoa`,k=`${n.public.managemant}/updateAtosPessoa`,u=`${n.public.managemant}/getAtosPessoaById`,V=r(M("user-data").value.cartorio_token),b=r([]),P=r([]),I=r([]),A=r(!1),U=r(!1),f=r(!1),C=r(!1),N=r(null),R=r(null),o=r(null),i=r(null);r(null);const T=r("xkyaA"),m=r(null),j=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],h=re({papeis:null,nome:null,pessoa:null,documento:null}),{data:he}=([s,y]=X(()=>v(x,{method:"POST",body:{tipo_ato_token:"xkyaA"}},"$acoiTIUp00")),s=await s,y(),s);I.value=he.value;const ce=async()=>{const{data:d}=await v(`${u}/${p.query.ato_id}`,{method:"GET"},"$ypnU9hCpVn"),Y=(ee=>ee.map(B=>({...B,pessoa:{...B.pessoa,documento:B.pessoa.doc_identificacao},papel:{...B.partes_tipos}})))(d.value);P.value=Y};ce();async function xe(){try{const{data:d,error:l}=await v(O,{method:"POST",body:{cartorio_token:V.value,documento:h.documento,nome:h.nome}},"$pr30MyPXfY");d.value.length>0?(b.value=d.value,h.pessoa=b.value[0]):b.value=[]}catch(d){console.error("Erro na requisição",d)}}const be=()=>{U.value=!0},$e=async()=>{await ce()},ke=async()=>{await ce()},Ve=async()=>{const d={pessoa:h.pessoa,papel:I.value.find(F=>F.id===h.papeis),representante:{nome:null}},l=await v(`${u}/${p.query.ato_id}`,{method:"GET"},"$scHdIvxj2D");for(const F of l.data.value)if(F.pessoa_id===h.pessoa.id&&F.ato_id===Number(p.query.ato_id)&&F.tipo_parte_id===h.papeis){g.error("Pessoa Já Registrada Com Esse Papel!");return}const{data:Y,error:ee,status:B}=await v(D,{method:"POST",body:{ato_id:p.query.ato_id,pessoa_id:h.pessoa.id,tipo_parte_id:h.papeis,user_id:M("user-data").value.usuario_id}},"$18isAgOJxG");B.value==="success"&&(o.value=Y.value.id,g.success("Pessoa Registrada com Sucesso!"),P.value.push(d))},Pe=async d=>{f.value=!0,m.value=null;const{data:l}=await v(`${S}`,{method:"POST",body:{id:d.pessoa.id,tipo:"ficha"}},"$hmDzSF3F61");l.value&&l.value.link?m.value=`data:image/jpeg;base64,${l.value.link}`:m.value=null},we=d=>{console.log(d.id)},Ae=d=>{C.value=!0,i.value=d.id,R.value=d.pessoa.nome};async function Ce(d){d.excluido=!d.excluido;try{await v(`${k}/${d.id}`,{method:"PUT",body:JSON.stringify({excluido:d.excluido})},"$l09I6nLRfk")}catch(l){console.error("Erro ao excluir pessoa:",l)}}const Te=()=>{const d=p.query.origem||"criar",l=p.query.id;d==="atualizar"?$.push(`/os/atualizar/${l}`):$.push("/os/criar-registro")};return(d,l)=>{const Y=Oe,ee=Ee,B=Se,F=oe;return z(),ne(ie,null,{default:t(()=>[e(w,{class:"mt-5"},{default:t(()=>[e(E,{cols:"3"},{default:t(()=>[e(K,{label:"Documento",modelValue:a(h).documento,"onUpdate:modelValue":l[0]||(l[0]=_=>a(h).documento=_)},null,8,["modelValue"])]),_:1}),e(E,{cols:"4"},{default:t(()=>[e(K,{label:"Pessoa",modelValue:a(h).nome,"onUpdate:modelValue":l[1]||(l[1]=_=>a(h).nome=_)},null,8,["modelValue"])]),_:1}),c("div",null,[c("img",{class:"mt-3",src:pe,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:xe})]),c("div",null,[c("img",{class:"mt-3 ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:be})])]),_:1}),e(w,null,{default:t(()=>[e(E,{cols:"4"},{default:t(()=>[e(de,{label:"Selecione a Pessoa",modelValue:a(h).pessoa,"onUpdate:modelValue":l[2]||(l[2]=_=>a(h).pessoa=_),items:a(b),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(E,{cols:"3"},{default:t(()=>[e(de,{label:"Papel",modelValue:a(h).papeis,"onUpdate:modelValue":l[3]||(l[3]=_=>a(h).papeis=_),items:a(I),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),c("div",null,[c("img",{class:"mt-3",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Ve})])]),_:1}),e(w,null,{default:t(()=>[e(E,null,{default:t(()=>[e(me,{style:{height:"465px"},headers:j,items:a(P)},{"item.actions":t(({item:_})=>[e(w,null,{default:t(()=>[c("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ue=>Pe(_),title:"Visualizar Ficha"},Ke,8,He),c("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ue=>Ae(_),class:"mr-2",title:"Alterar Papel"},Ye,8,Xe),c("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ue=>Ce(_),title:"Deletar Pessoa"},[_.excluido?(z(),L("img",Ze)):(z(),L("img",et))],8,Qe),c("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ue=>we(_),title:"Selecionar Representante"},ot,8,tt)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(Y,{show:a(U),onClose:l[4]||(l[4]=_=>U.value=!1)},null,8,["show"]),e(ee,{representante_nome:a(R),representantes:a(N),ato_id:a(o),show:a(A),onClose:l[5]||(l[5]=_=>A.value=!1),onUpdateRepresentante:ke},null,8,["representante_nome","representantes","ato_id","show"]),e(B,{representante_nome:a(R),ato_token:a(T),ato_id:a(i),show:a(C),onClose:l[6]||(l[6]=_=>C.value=!1),onUpdatePapel:$e},null,8,["representante_nome","ato_token","ato_id","show"]),e(ge,{modelValue:a(f),"onUpdate:modelValue":l[8]||(l[8]=_=>te(f)?f.value=_:null),width:"600"},{default:t(()=>[e(fe,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(qe,{src:a(m)},null,8,["src"]),e(G,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:l[7]||(l[7]=_=>f.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(w,null,{default:t(()=>[e(F,{onClick:Te},{default:t(()=>[e(G,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},lt=["onClick"],rt={key:0,style:{width:"30px",height:"30px"},src:ve,alt:"Visualizar",title:"Reativar"},nt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},it={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(W){let s,y;const $=le(),p=Q(),n=Z(),{$toast:g}=se(),O=`${n.public.managemant}/listarEscrevente`;`${n.public.managemant}`;const x=`${n.public.managemant}/createAtosObservacao`,S=`${n.public.managemant}/updateAtosObservacao`,D=`${n.public.managemant}/getAtosObservacaoById`,k=r(M("user-data").value.cartorio_token),u=r([]),V=r([]),b=[{title:"Data",align:"start",key:"created"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],P=re({observacao:""}),I={observacao:{required:Be.withMessage("O campo é obrigatório",Me)}},A=Ne(I,P),{data:U}=([s,y]=X(()=>v(`${D}/${p.query.ato_id}`,{method:"GET"},"$HyzoO40swN")),s=await s,y(),s);u.value=U.value.map(o=>({...o,created:ye(o.created,"dd/mm/yyyy")}));async function f(){if(P.observacao.trim()===""){g.error("O campo de observação está vazio.");return}if(await A.value.$validate()){const{data:o,error:i,status:T}=await v(x,{method:"POST",body:{ato_id:p.query.ato_id,observacao:P.observacao,user_id:M("user-data").value.usuario_id}},"$gnHMo4uCXD");T.value==="success"&&(u.value.push({created:ye(o.value.created,"dd/mm/yyyy"),observacao:o.value.observacao,id:o.value.id,escrevente:M("user-data").value.nome}),P.observacao="",g.success("Observação registrada com sucesso"))}else g.error("Preencha os campos obrigatórios.")}async function C(o){o.excluido=!o.excluido;try{await v(`${S}/${o.id}`,{method:"PUT",body:JSON.stringify({excluido:o.excluido})},"$sP9AKdd3Ky")}catch(i){console.error("Erro ao excluir observação:",i)}}const{data:N}=([s,y]=X(()=>v(O,{method:"POST",body:{cartorio_token:k}},"$HL9pndqGh0")),s=await s,y(),s);V.value=N.value[0].func_json_escreventes;const R=()=>{const o=p.query.origem||"criar",i=p.query.id;o==="atualizar"?$.push(`/os/atualizar/${i}`):$.push("/os/criar-registro")};return(o,i)=>{const T=oe;return z(),ne(ie,null,{default:t(()=>[e(w,{class:"mt-5"},{default:t(()=>[e(K,{label:"Observação",modelValue:P.observacao,"onUpdate:modelValue":i[0]||(i[0]=m=>P.observacao=m),required:"","error-messages":a(A).observacao.$errors.length>0?a(A).observacao.$errors.map(m=>m.$message):[],onBlur:a(A).observacao.$touch,onInput:a(A).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),c("div",null,[c("img",{class:"btn-pointer ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:f})])]),_:1}),e(w,null,{default:t(()=>[e(E,null,{default:t(()=>[e(me,{style:{height:"465px"},headers:b,items:u.value},{"item.actions":t(({item:m})=>[c("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:j=>C(m),title:"Deletar Observação"},[m.excluido?(z(),L("img",rt)):(z(),L("img",nt))],8,lt)]),_:1},8,["items"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(T,{onClick:R},{default:t(()=>[e(G,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},ct=c("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Ue,alt:"Escanear"},null,-1),ut=[ct],dt=c("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ae,alt:"Criar"},null,-1),mt=[dt],pt=["onClick"],_t=c("img",{style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar"},null,-1),vt=[_t],ft=["onClick"],yt={key:0,style:{width:"30px",height:"30px"},src:ve,alt:"Visualizar",title:"Reativar"},gt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ht={__name:"Anexos",async setup(W){let s,y;const $=Z(),{$toast:p}=se(),n=le(),g=Q(),O=`${$.public.biometria}/run-scanner`,x=`${$.public.managemant}/atos_anexos`,S=`${$.public.managemant}/atos_anexos`,D=`${$.public.managemant}/atos_anexos`,k=r(!1),u=r([]),V=re({descricao:""}),b=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}],{data:P}=([s,y]=X(()=>v(`${D}/${g.query.ato_id}`,{method:"GET"},"$AOZpbz65MA")),s=await s,y(),s);u.value=P.value;async function I(){try{await A(),await U()}catch(o){console.error("Erro ao executar scanner ou listar arquivos:",o)}}async function A(){try{const{data:o}=await v(O,{method:"GET"},"$KttjFhHivJ")}catch(o){p.error("Erro ao acionar o scanner:",o)}}async function U(){try{const{data:o,status:i}=await v("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:g.query.ato_token_edit,cartorio_token:M("user-data").value.cartorio_token}},"$TqQrsgxUkd")}catch(o){console.error("Erro ao enviar o arquivo:",o)}}const f=async()=>{k.value=!0},C=async()=>{const{data:o,error:i,status:T}=await v(x,{method:"POST",body:{ato_id:g.query.ato_id,descricao:V.descricao,user_id:M("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$KDhIYzGKzM");T.value==="success"&&(p.success("Anexo registrado com sucesso!"),u.value.push(o.value))};async function N(o){o.excluido=!o.excluido;try{await v(`${S}/${o.id}`,{method:"PUT",body:JSON.stringify({excluido:o.excluido})},"$cdoFBGO0Ti")}catch(i){console.error("Erro ao excluir pessoa:",i)}}const R=()=>{const o=g.query.origem||"criar",i=g.query.id;o==="atualizar"?n.push(`/os/atualizar/${i}`):n.push("/os/criar-registro")};return(o,i)=>{const T=oe;return z(),ne(ie,null,{default:t(()=>[e(w,null,{default:t(()=>[e(E,{cols:"5"},{default:t(()=>[e(K,{modelValue:a(V).descricao,"onUpdate:modelValue":i[0]||(i[0]=m=>a(V).descricao=m),label:"Descrição"},null,8,["modelValue"])]),_:1}),c("div",{onClick:I,title:"Escanear"},ut),c("div",{onClick:C,title:"Criar"},mt)]),_:1}),e(me,{headers:b,items:a(u),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:m})=>[e(w,null,{default:t(()=>[c("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:j=>f(m),title:"Visualizar Anexo"},vt,8,pt),c("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:j=>N(m),title:"Deletar Pessoa"},[m.excluido?(z(),L("img",yt)):(z(),L("img",gt))],8,ft)]),_:2},1024)]),_:1},8,["items"]),e(ge,{modelValue:a(k),"onUpdate:modelValue":i[2]||(i[2]=m=>te(k)?k.value=m:null),width:"600"},{default:t(()=>[e(fe,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(G,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:i[1]||(i[1]=m=>k.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(T,{onClick:R},{default:t(()=>[e(G,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1})]),_:1})}}},xt=c("h1",{class:"mb-2"},"Procuração",-1),It={__name:"[id]",async setup(W){let s,y;const $=r(null),p=r(null),n=r(null),g=Z(),O=Q(),x=`${g.public.managemant}/listarSituacoes`,S=`${g.public.managemant}/getAtos`,D=r(M("user-data").value.cartorio_token),k=O.query.id?{ato_token:"xkyaA"}:{cartorio_token:D},u=r([]),V=r([]);async function b(){try{const{data:f}=await v(`${S}/${O.query.ato_id}`,{method:"GET"},"$j0JpHHj7PB");V.value=f.value}catch(f){console.log(f)}}[s,y]=X(()=>b()),await s,y();const{data:P,status:I}=([s,y]=X(()=>v(x,{method:"POST",body:k},"$mGbp7gAEjS")),s=await s,y(),s);u.value=P.value;const A=f=>{$.value=f},U=f=>{p.value=f};return(f,C)=>{const N=Le,R=st,o=Re,i=Ie,T=it,m=ht;return z(),L(ze,null,[xt,e(fe,{width:"1300"},{default:t(()=>[e(Fe,{modelValue:a(n),"onUpdate:modelValue":C[0]||(C[0]=j=>te(n)?n.value=j:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(H,{value:"dados"},{default:t(()=>[q("Dados")]),_:1}),e(H,{value:"partes"},{default:t(()=>[q("Partes")]),_:1}),e(H,{value:"minuta"},{default:t(()=>[q("Minuta")]),_:1}),e(H,{value:"livro"},{default:t(()=>[q("Livro")]),_:1}),e(H,{value:"observacao"},{default:t(()=>[q("Observações")]),_:1}),e(H,{value:"anexo"},{default:t(()=>[q("Anexos")]),_:1})]),_:1},8,["modelValue"]),e(Ge,{modelValue:a(n),"onUpdate:modelValue":C[1]||(C[1]=j=>te(n)?n.value=j:null)},{default:t(()=>[e(J,{value:"dados"},{default:t(()=>[e(N,{item_dados:a(V),item_situacoes:a(u)},null,8,["item_dados","item_situacoes"])]),_:1}),e(J,{value:"partes"},{default:t(()=>[e(R)]),_:1}),e(J,{value:"minuta"},{default:t(()=>[e(o,{onPage:A,onDoc:U})]),_:1}),e(J,{value:"livro"},{default:t(()=>[e(i,{pages:a($),document:a(p)},null,8,["pages","document"])]),_:1}),e(J,{value:"observacao"},{default:t(()=>[e(T)]),_:1}),e(J,{value:"anexo"},{default:t(()=>[e(m)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{It as default};
