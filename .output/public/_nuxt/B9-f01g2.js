import{r as i,u as q,P as U,m as y,g as j,o as h,p as O,w as s,b as t,a as g,q as n,s as m,V as w,d as S,v as z}from"./DP3qcOMz.js";import{u as p}from"./CtJXq5EX.js";import{V as D,c as F}from"./Ca0IpsuN.js";import{V as I}from"./cXFZDrSw.js";import{V as M}from"./0oLPtT-r.js";import{V as T}from"./D8SSUY1X.js";import{V as Q}from"./BUlLaMYO.js";const Y={__name:"TiposAtos",props:{show:Boolean,servicos:Array,tiposAtos:Array},emits:["close","update-ato"],setup(_,{emit:$}){const r=i(_.show),{$toast:C}=q(),x=U(),l=i(""),a=i(""),v=z(),V=y("auth_token").value,f=i(y("user-data").value.cartorio_token).value,c=i([]),d=i([]),b=$,P=`${v.public.managemant}/updateAtos`,k=`${v.public.managemant}/tipoAtos`,B=async()=>{const{data:e}=await p(k,{method:"POST",body:{usuario_token:V,cartorio_token:f}},"$6VlNS7ylT6");c.value=e.value,c.value.length>0&&(l.value=c.value[0])},N=async e=>{const{data:o}=await p(k,{method:"POST",body:{usuario_token:V,cartorio_token:f,servico_token:e}},"$pRqAaiCpuA");d.value=o.value},R=async()=>{const{data:e,status:o}=await p(`${P}/${x.query.ato_id}`,{method:"PUT",body:{ato_tipo_id:a.value.id}},"$Qxfq8aWnXP");o.value==="success"&&(C.success("Tipo de ato atualizado com Sucesso!"),b("update-ato",{descricao:`${l.value.descricao} - ${a.value.descricao}`,usaImoveisParams:a.value.usa_imoveis}),A())},A=()=>{r.value=!1,b("close")};return j(l,async e=>{e&&(await N(e.token),a.value=d.value.length>0?d.value[0]:null)}),B(),(e,o)=>(h(),O(Q,{persistent:"",modelValue:n(r),"onUpdate:modelValue":o[3]||(o[3]=u=>m(r)?r.value=u:null),"max-width":"500"},{default:s(()=>[t(D,null,{default:s(()=>[t(I,null,{default:s(()=>[t(M,{class:"mt-1 mb-3",style:{"justify-content":"space-between"}},{default:s(()=>o[4]||(o[4]=[g("h1",{class:"ml-4"},"Tipos de Atos",-1)])),_:1}),o[5]||(o[5]=g("hr",{class:"mb-5"},null,-1)),t(T,{"item-title":"descricao","item-value":"token",class:"mb-5",label:"Selecione o ServiÃ§o",modelValue:n(l),"onUpdate:modelValue":o[0]||(o[0]=u=>m(l)?l.value=u:null),items:n(c),"return-object":""},null,8,["modelValue","items"]),t(T,{"item-title":"descricao","item-value":"id",class:"mb-5",label:"Selecione o Tipo de Ato",modelValue:n(a),"onUpdate:modelValue":o[1]||(o[1]=u=>m(a)?a.value=u:null),items:n(d),"return-object":""},null,8,["modelValue","items"])]),_:1}),t(F,null,{default:s(()=>[t(w,{style:{"background-color":"red",color:"white"},onClick:A},{default:s(()=>o[6]||(o[6]=[S("Voltar")])),_:1}),t(w,{style:{"background-color":"green",color:"white"},onClick:o[2]||(o[2]=u=>R())},{default:s(()=>o[7]||(o[7]=[S("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{Y as _};
