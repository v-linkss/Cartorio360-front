import{_ as E}from"./DG_nEjos.js";import{_ as T}from"./DAf26lno.js";import{_ as F,u as L,E as N,r as n,D as _,F as P,G as R,o as z,A as U,x as X,w as p,b as r,a as c,q as t,s as j,p as D,e as G}from"./BylS_fme.js";import{u as g}from"./Dsfu_ZAk.js";import{_ as J}from"./ToPptOUL.js";import{c as K,r as Q,u as W,V as H,_ as Y}from"./DxFev1kB.js";import{V as Z}from"./CH1h7jxy.js";import{V as ee}from"./CBiiH4Ve.js";import{a as te}from"./CLjXR-zX.js";const oe=l=>(D("data-v-9c011fc2"),l=l(),G(),l),ae={style:{width:"600px","margin-top":"10px"}},se={style:{width:"180px","margin-top":"20px"}},ne=oe(()=>c("img",{class:"btn-pointer mt-10 mb-5",src:J,alt:"Sair"},null,-1)),re={__name:"autenticacao",async setup(l){let d,b;const w=L(),V=N(),v=X(),$=`${v.public.managemant}/listarEscrevente`,f=n(_("user-data").value.cartorio_token).value,x=n(_("user-service").value.token).value||n(_("user-service").value).value,y=_("auth_token").value,A=`${v.public.managemant}/atoAutentica`,C=`${v.public.managemant}/etiquetaAutentica`,k=n(!1),h=n(""),a=P({escrevente:null,quantidade:1}),q=n([]),{data:I}=([d,b]=R(()=>g($,{method:"POST",body:{cartorio_token:f}},"$nXL9eJBhI7")),d=await d,b(),d);q.value=I.value[0].func_json_escreventes;const S={escrevente:{required:K.withMessage("O campo é obrigatorio",Q)}},m=W(S,a),B=async()=>{if(await m.value.$validate()){const{data:o,status:e,error:u}=await g(A,{method:"POST",body:{usuario_token:y,cartorio_token:f,quantidade:Number(a.quantidade),ordemserv_token:x,ato_tipo_token:"bFsdV"}},"$dpfLzAlO85");e.value==="success"&&o.value.status==="OK"?M(o.value.token):(k.value=!0,h.value=o.value.status_mensagem||u.value.data.details)}},M=async o=>{const{data:e,status:u}=await g(C,{method:"POST",body:{escrevente_token:a.escrevente,cartorio_token:f,ato_token:o}},"$fPnSl9XMLA");if(u.value==="success"){const i=window.open("","_blank");i.document.open(),i.document.write(e.value.etiqueta),i.document.close()}},O=()=>{const o=V.query.origem||"criar",e=V.query.id;o==="atualizar"?w.push(`/ordens-servicos/atualizar/${e}`):w.push("/ordens-servicos/criar-registro")};return(o,e)=>{const u=E,i=T;return z(),U(te,{class:"mt-10",title:"Autenticação"},{default:p(()=>[r(ee,null,{default:p(()=>[c("div",ae,[r(H,{label:"Tabelião/escrivão",modelValue:t(a).escrevente,"onUpdate:modelValue":e[0]||(e[0]=s=>t(a).escrevente=s),items:t(q),"item-title":"nome","item-value":"token",required:"","error-messages":t(m).escrevente.$errors.map(s=>s.$message),onBlur:t(m).escrevente.$touch,onInput:t(m).escrevente.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),c("div",se,[r(j,{type:"number",label:"Quantidade",modelValue:t(a).quantidade,"onUpdate:modelValue":e[1]||(e[1]=s=>t(a).quantidade=s)},null,8,["modelValue"])]),r(Z,null,{default:p(()=>[c("div",null,[r(u,{onClick:O},{default:p(()=>[ne]),_:1})]),c("img",{class:"btn-pointer mt-10",src:Y,onClick:B})]),_:1})]),_:1}),r(i,{show:t(k),errorMessage:t(h),onClose:e[2]||(e[2]=s=>k.value=!1)},null,8,["show","errorMessage"])]),_:1})}}},fe=F(re,[["__scopeId","data-v-9c011fc2"]]);export{fe as default};
