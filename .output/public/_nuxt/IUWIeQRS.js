import{_ as K,u as L,n as H,r as c,o as v,c as W,a as g,b as s,V as X,q as t,s as I,w as n,v as U,x as Z,y as h,z as j,d as k,A as w,B as x,C,p as G,e as Q,D as E}from"./1M8GdJrq.js";import{u as Y,a as ee}from"./B5s2eAE8.js";import{_ as ae}from"./BAmOjtif.js";import{V as oe}from"./dwAFyvZN.js";import{V as S}from"./BooaNLMk.js";const N=p=>(G("data-v-7b59faf6"),p=p(),Q(),p),te={class:"container-main"},se={class:"container-form"},ne=N(()=>g("div",{class:"text"},"Log in",-1)),ie=N(()=>g("a",{class:"text-decoration-none",rel:"noopener noreferrer",style:{color:"#429946"}}," Esqueceu a senha?",-1)),le=N(()=>g("div",{class:"background-image"},null,-1)),re={__name:"index",setup(p){const O=L(),{$toast:A}=H(),r=c({senha:"",email:""}),f=c(!1),i=c(!1),V=c(!1),y=c(!1),u=c(!1),b=()=>{V.value=!1,y.value=!1,u.value=!1,i.value=!1},B=Z(),M=`${B.public.managemant}/listarMenu`,P=B.public.auth,R=async()=>{const{data:o,status:e,error:a}=await ee(`${P}/login`,{method:"POST",body:{senha:r.value.senha,email:r.value.email}},"$iX10IJN3fa");return{data:o==null?void 0:o.value,status:e==null?void 0:e.value,error:a==null?void 0:a.value}},T=o=>{const e=E("user-data");e.value=JSON.stringify({nome:o.nome,usuario_id:o.id,cartorio_id:o.cartorios[0].cartorio_id,cartorio_nome:o.cartorios[0].cartorio_descricao,cartorio_token:o.cartorios[0].cartorio_token});const a=E("auth_token");a.value=o.token},q=o=>{var l,d,m;const e=(m=(d=(l=o==null?void 0:o.data)==null?void 0:l[0])==null?void 0:d.func_autentica_acesso_v1)==null?void 0:m[0],a=e==null?void 0:e.status_mensagem;if(!e){u.value=!0;return}switch(a){case"Esse email não está cadastrado no Durabil.":y.value=!0;break;case"Senha inválida.":V.value=!0;break;default:u.value=!0;break}},z=async()=>{var l,d,m,$;const{data:o,status:e,error:a}=await R();if(e==="success"){const _=($=(m=(d=(l=o==null?void 0:o[0])==null?void 0:l.func_autentica_acesso_v1)==null?void 0:d[0])==null?void 0:m.registro)==null?void 0:$[0];if(T(_),_.cartorios.length>1){O.push({path:"/login/tipo-perfil",query:{cartorios:JSON.stringify(_.cartorios)}});return}A.success("Login realizado com sucesso!");const{data:D,status:F}=await Y(M,{method:"POST",body:{perfil_descricao:_.cartorios[0].perfil_descricao}},"$ZtHWy4R1Ea");if(F.value==="success"){const J=E("menu-navbar");J.value=D.value,O.push({path:"/"})}}else e==="error"&&(a==null?void 0:a.statusCode)===500?u.value=!0:q(a)};return(o,e)=>(v(),W("div",te,[g("div",se,[s(X,{class:"image",width:300,height:"230",src:ae}),ne,s(I,{autofocus:"",autocomplete:"email",type:"email",modelValue:t(r).email,"onUpdate:modelValue":e[0]||(e[0]=a=>t(r).email=a),"persistent-hint":"",class:"input",density:"compact",placeholder:"Email","prepend-inner-icon":"mdi-email-outline",variant:"outlined"},null,8,["modelValue"]),s(I,{modelValue:t(r).senha,"onUpdate:modelValue":e[1]||(e[1]=a=>t(r).senha=a),class:"input","append-inner-icon":t(f)?"mdi-eye-off":"mdi-eye",type:t(f)?"text":"password",density:"compact",placeholder:"Senha","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":e[2]||(e[2]=a=>f.value=!t(f))},null,8,["modelValue","append-inner-icon","type"]),s(oe,{modelValue:t(i),"onUpdate:modelValue":e[4]||(e[4]=a=>U(i)?i.value=a:null),"max-width":"400",persistent:""},{activator:n(({props:a})=>[s(h,j({block:"",rounded:"",class:"button mb-10 mt-4"},a,{onClick:z,modelValue:t(i),"onUpdate:modelValue":e[3]||(e[3]=l=>U(i)?i.value=l:null)}),{default:n(()=>[k(" Acessar ")]),_:2},1040,["modelValue"])]),default:n(()=>[t(V)?(v(),w(S,{key:0,text:"Senha inválida."},{actions:n(()=>[s(x),s(h,{onClick:b,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[k(" OK ")]),_:1})]),_:1})):C("",!0),t(y)?(v(),w(S,{key:1,text:"Esse email não está cadastrado."},{actions:n(()=>[s(x),s(h,{onClick:b,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[k(" OK ")]),_:1})]),_:1})):C("",!0),t(u)?(v(),w(S,{key:2,text:"Erro no sistema, fora do ar."},{actions:n(()=>[s(x),s(h,{onClick:b,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[k(" OK ")]),_:1})]),_:1})):C("",!0)]),_:1},8,["modelValue"]),ie]),le]))}},fe=K(re,[["__scopeId","data-v-7b59faf6"]]);export{fe as default};
