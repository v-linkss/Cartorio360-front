import{_ as X}from"./BtT1aVM4.js";import{c as _e,r as ve,u as fe}from"./D9rZ6LwO.js";import{g as De,C as J,H as Y,u as H,r as u,m as S,D as ee,I as Q,o as z,G,w as t,b as e,v as o,V as K,A as F,d as U,s as Z,a as _,c as L,x as ge,L as Me,M as Re,K as ye,F as be,N as pe,t as ne}from"./DDtKO7-0.js";import{u as k}from"./D3BRDNO8.js";import{V as E}from"./BI5L87bv.js";import{V as j}from"./DeW8--ZD.js";import{V as ie}from"./Ci3nKxz8.js";import{V as oe}from"./D_1A8m3V.js";import{_ as Ie}from"./BjvDUOMs.js";import{_ as Ne,a as je,b as Be,T as Fe,W as Ue,r as xe,D as he,c as Le,d as We}from"./DedqstRa.js";import{_ as le}from"./CeXvRNTp.js";import{_ as te,a as ue,b as ce}from"./BP1uhy__.js";import{_ as Ge}from"./BAL0c-DX.js";import{V as de}from"./CqSkn-a9.js";import{V as ke}from"./sTLtLu4i.js";import{V as me}from"./Pu_Wl7e0.js";import{V as Ke}from"./D1ocbu1M.js";import{_ as Je}from"./Cp8vZqz9.js";import{_ as Ye}from"./CdP3NN9a.js";const St={__name:"Dados",props:{ato_token:{type:String,required:!0},ato_tipo_id:{type:Number}},emits:["saved"],async setup(B,{emit:f}){let y,g;const b=B;De(()=>b.ato_tipo_id,v=>{T.value={id:v}});const w=f,x=J(),$=Y(),D=Z(),{$toast:h}=H(),P=`${D.public.managemant}/listarSituacoes`,A=`${D.public.managemant}/createAtos`;`${D.public.managemant}`;const q=u(S("user-data").value.cartorio_token),M=u(S("user-service").value.id).value||u(S("user-service").value).value,R=u([]),T=u(b.ato_tipo_id?{id:b.ato_tipo_id}:null),d=ee({dt_abertura:null,status:"EM EDIÇÃO",mne:null}),I={status:{required:_e.withMessage("O campo é obrigatorio",ve)}},n=fe(I,d);async function c(){if(await n.value.$validate()){const{data:v,error:s,status:i}=await k(A,{method:"POST",body:{ato_tipo_id:T.value.id,cartorio_id:S("user-data").value.cartorio_id,ordemserv_id:M,status:d.status,dt_abertura:d.dt_abertura,mne:d.mne,user_id:S("user-data").value.usuario_id,user_alteracao_id:S("user-data").value.usuario_id}},"$9ZmTYsLk0K");i.value==="success"&&(h.success("Ato registrado com sucesso!"),w("saved",{id:v.value.id,token:v.value.token}))}else h.error("Preencha os campos obrigatorios.")}const{data:a}=([y,g]=Q(()=>k(P,{method:"POST",body:{cartorio_token:q.value}},"$hyq5YcBEjF")),y=await y,g(),y);R.value=a.value;const l=()=>{const v=$.query.origem||"criar",s=$.query.id;v==="atualizar"?x.push(`/os/atualizar/${s}`):x.push("/os/criar-registro")};return(v,s)=>{const i=X;return z(),G(oe,null,{default:t(()=>[e(E,{class:"mt-5"},{default:t(()=>[e(j,{cols:"3"},{default:t(()=>[e(ie,{label:"Situação",modelValue:o(d).status,"onUpdate:modelValue":s[0]||(s[0]=p=>o(d).status=p),items:o(R),"item-title":"descricao","item-value":"descricao",required:"","error-messages":o(n).status.$errors.map(p=>p.$message),onBlur:o(n).status.$touch,onInput:o(n).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),e(E,null,{default:t(()=>[e(j,{cols:"5"},{default:t(()=>[e(K,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:o(d).mne,"onUpdate:modelValue":s[1]||(s[1]=p=>o(d).mne=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(E,null,{default:t(()=>[e(j,{cols:"2"},{default:t(()=>[e(K,{modelValue:o(d).dt_abertura,"onUpdate:modelValue":s[2]||(s[2]=p=>o(d).dt_abertura=p),type:"date",label:"Data Lavratura",disabled:"",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(E,{class:"mb-3"},{default:t(()=>[e(i,{onClick:l},{default:t(()=>[e(F,{size:"large",color:"red"},{default:t(()=>s[3]||(s[3]=[U("Voltar")])),_:1})]),_:1}),e(F,{class:"ml-10",onClick:c,size:"large",color:"green"},{default:t(()=>s[4]||(s[4]=[U("Salvar")])),_:1})]),_:1})]),_:1})}}},He=["onClick"],Ze=["onClick"],Qe=["onClick"],Xe={key:0,style:{width:"30px",height:"30px"},src:ue,alt:"Visualizar",title:"Reativar"},et={key:1,src:ce,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},tt=["onClick"],qt={__name:"Partes",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(B){let f,y;const g=B,b=J(),w=Y(),x=Z(),{$toast:$}=H(),D=`${x.public.managemant}/pesquisarPessoas`,h=`${x.public.managemant}/listarPapeis`,P=`${x.public.managemant}/getLinkTipo`,A=`${x.public.managemant}/createAtosPessoa`,q=`${x.public.managemant}/getAtosPessoaById`,M=`${x.public.managemant}/updateAtosPessoa`,R=u(S("user-data").value.cartorio_token),T=u([]),d=u([]),I=u([]),n=u(!1),c=u(!1),a=u(!1),l=u(!1),v=u(null),s=u(null),i=u(null),p=u(null);u(null);const N=u(null),W=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],O=ee({papeis:null,nome:null,pessoa:null,documento:null}),{data:$e}=([f,y]=Q(()=>k(h,{method:"POST",body:{tipo_ato_token:g.ato_token}},"$fFKndZhA4W")),f=await f,y(),f);I.value=$e.value;async function we(){try{const{data:m,error:r}=await k(D,{method:"POST",body:{cartorio_token:R.value,documento:O.documento,nome:O.nome}},"$o3ZL1rvYrY");m.value.length>0?(T.value=m.value,O.pessoa=T.value[0]):T.value=[]}catch(m){console.error("Erro na requisição",m)}}const Ve=()=>{c.value=!0},Ce=m=>{d.value=d.value.map(r=>r.id===i.value?{...r,papel:{...r.papel,descricao:m}}:r)},Ee=m=>{const r=d.value.find(V=>V.pessoa.id===p.value);r.representante.nome=m},Pe=async()=>{const m={pessoa:O.pessoa,papel:I.value.find(V=>V.id===O.papeis),representante:{nome:null}},r=await k(`${q}/${g.ato_id}`,{method:"GET"},"$kXSxUa4grs");for(const V of r.data.value)if(V.pessoa_id===O.pessoa.id&&V.ato_id===g.ato_id&&V.tipo_parte_id===O.papeis){$.error("Pessoa Já Registrada Com Esse Papel!");return}try{const{data:V,error:ae,status:se}=await k(A,{method:"POST",body:{ato_id:Number(g.ato_id),pessoa_id:O.pessoa.id,tipo_parte_id:O.papeis,user_id:Number(S("user-data").value.usuario_id)}},"$So3qnQu7ek");se.value==="success"?(m.id=V.value.id,$.success("Pessoa Registrada com Sucesso!"),d.value.push(m)):$.error(ae.value.message)}catch{$.error("Erro no servidor. Tente novamente.")}},Ae=async m=>{a.value=!0,N.value=null;const{data:r}=await k(`${P}`,{method:"POST",body:{id:m.pessoa.id,tipo:"ficha"}},"$Q3kbIwtd9t");r.value&&r.value.link?N.value=`data:image/jpeg;base64,${r.value.link}`:N.value=null},Te=m=>{const r=d.value.filter(V=>V.pessoa.id!==m.pessoa.id).map(V=>({id:V.pessoa.id,nome:V.pessoa.nome}));i.value=m.id,v.value=r,n.value=!0,s.value=m.pessoa.nome,p.value=m.pessoa.id},Se=m=>{i.value=m.id,l.value=!0,s.value=m.pessoa.nome};async function qe(m){m.excluido=!m.excluido;try{await k(`${M}/${i.value}`,{method:"PUT",body:JSON.stringify({excluido:m.excluido})},"$9xStKwGd7o")}catch(r){console.error("Erro ao excluir pessoa:",r)}}const Oe=()=>{const m=w.query.origem||"criar",r=w.query.id;m==="atualizar"?b.push(`/os/atualizar/${r}`):b.push("/os/criar-registro")};return(m,r)=>{const V=Ie,ae=je,se=Be,ze=X;return z(),G(oe,null,{default:t(()=>[e(E,{class:"mt-5"},{default:t(()=>[e(j,{cols:"3"},{default:t(()=>[e(K,{label:"Documento",modelValue:o(O).documento,"onUpdate:modelValue":r[0]||(r[0]=C=>o(O).documento=C)},null,8,["modelValue"])]),_:1}),e(j,{cols:"4"},{default:t(()=>[e(K,{label:"Pessoa",modelValue:o(O).nome,"onUpdate:modelValue":r[1]||(r[1]=C=>o(O).nome=C)},null,8,["modelValue"])]),_:1}),_("div",null,[_("img",{class:"mt-3",src:le,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:we})]),_("div",null,[_("img",{class:"mt-3 ml-2",src:te,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Ve})])]),_:1}),e(E,null,{default:t(()=>[e(j,{cols:"4"},{default:t(()=>[e(ie,{label:"Selecione a Pessoa",modelValue:o(O).pessoa,"onUpdate:modelValue":r[2]||(r[2]=C=>o(O).pessoa=C),items:o(T),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),_("div",null,[_("img",{class:"mt-3",src:te,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Pe})])]),_:1}),e(E,null,{default:t(()=>[e(j,null,{default:t(()=>[e(de,{style:{height:"465px"},headers:W,items:o(d)},{"item.actions":t(({item:C})=>[e(E,null,{default:t(()=>[_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:re=>Ae(C),title:"Visualizar Ficha"},r[8]||(r[8]=[_("img",{style:{width:"30px",height:"30px"},src:le,alt:"Visualizar"},null,-1)]),8,He),_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:re=>Se(C),class:"mr-2",title:"Alterar Papel"},r[9]||(r[9]=[_("img",{style:{width:"30px",height:"30px"},src:Ge,alt:"Visualizar"},null,-1)]),8,Ze),_("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:re=>qe(C),title:"Deletar Pessoa"},[C.excluido?(z(),L("img",Xe)):(z(),L("img",et))],8,Qe),_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:re=>Te(C),title:"Selecionar Representante"},r[10]||(r[10]=[_("img",{style:{width:"30px",height:"30px"},src:Ne,alt:"Visualizar"},null,-1)]),8,tt)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(V,{show:o(c),onClose:r[3]||(r[3]=C=>c.value=!1)},null,8,["show"]),e(ae,{representante_nome:o(s),representantes:o(v),ato_id:o(i),show:o(n),onClose:r[4]||(r[4]=C=>n.value=!1),onUpdateRepresentante:Ee},null,8,["representante_nome","representantes","ato_id","show"]),e(se,{representante_nome:o(s),ato_token:g.ato_token,ato_id:o(i),show:o(l),onClose:r[5]||(r[5]=C=>l.value=!1),onUpdatePapel:Ce},null,8,["representante_nome","ato_token","ato_id","show"]),e(ke,{modelValue:o(a),"onUpdate:modelValue":r[7]||(r[7]=C=>ge(a)?a.value=C:null),width:"600"},{default:t(()=>[e(me,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(Ke,{src:o(N)},null,8,["src"]),e(F,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:r[6]||(r[6]=C=>a.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(E,null,{default:t(()=>[e(ze,{onClick:Oe},{default:t(()=>[e(F,{size:"large",color:"red"},{default:t(()=>r[11]||(r[11]=[U("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},ot={key:0,class:"loading-overlay"},at="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",Ot={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(B,{emit:f}){const y=B;Me("DocumentEditorContainer",[Fe,Ue]);const g=Z(),{$toast:b}=H(),w=J(),x=Y(),$=f;xe(`${g.public.docEditor}`);const D=`${g.public.managemant}/upload`,h=u(null),P=u(!1),A=async()=>{const c=await h.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),a=new FileReader;a.onload=()=>{const l=a.result;$("doc",l)},a.readAsText(c)},q=async()=>{P.value=!0;try{const c=await h.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),a=new FormData;a.append("file",c,"anexo.docx"),a.append("cartorio_token",S("user-data").value.cartorio_token),a.append("token",y.ato_token),a.append("tipo","ato_minuta");const{data:l,status:v}=await k(D,{method:"POST",body:a},"$071xxdqs20");if(v.value==="success"){b.success("Documento enviado!");const i=h.value.ej2Instances.documentEditor.pageCount;A(),$("page",i)}else b.error("Erro ao enviar documento para o sistema.")}catch(n){b.error("Erro ao salvar documento."),console.error(n)}finally{P.value=!1}},M=async()=>{d(!0);try{await R(),d(!0);const{data:n,status:c}=await k(substituirModelo,{method:"POST",body:{ato_token:y.ato_token}},"$0ktpWliD4l");n.value&&T(n.value)}catch(n){console.error("Erro ao gerar a minuta:",n),b.error("Ocorreu um erro ao gerar a minuta.")}finally{d(!1)}},R=async()=>{try{const{data:n}=await k(baixarDocumento,{method:"POST",body:{bucket:"qvgjz",path:"provider/modeloAto.sfdt"}},"$jXVvQjEE6u"),c=await fetchBlobFromMinIO(n.value);if(c){const a=new FileReader;a.onload=()=>{const l=a.result;h.value.ej2Instances.documentEditor.open(l),$("doc",l)},a.readAsText(c)}}catch(n){console.error("Erro ao carregar o modelo de minuta:",n),b.error("Falha ao carregar o modelo de minuta.")}},T=n=>{const c=h.value.ej2Instances.documentEditor,a=l=>{for(const[v,s]of Object.entries(l))if(/^<<.+>>$/.test(v))try{c.search.findAll(v),c.search.searchResults.length>0&&c.search.searchResults.replaceAll(s)}catch(i){console.error(`Erro ao substituir o marcador ${v}:`,i)}else if(v==="partes"&&Array.isArray(s)&&s.length>0)for(const i of s)typeof i=="object"&&a(i)};a(n)},d=n=>{P.value=n},I=()=>{const n=x.query.origem||"criar",c=x.query.id;n==="atualizar"?w.push(`/os/atualizar/${c}`):w.push("/os/criar-registro")};return(n,c)=>{const a=X;return z(),L(be,null,[e(o(he),{height:"900px",ref_key:"documentEditorContainer",ref:h,serviceUrl:at,enableToolbar:!0,enableWordExport:!0},null,512),o(P)?(z(),L("div",ot,[e(Re,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):ye("",!0),e(E,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(a,{class:"mr-4"},{default:t(()=>[e(F,{size:"large",onClick:I,color:"red"},{default:t(()=>c[0]||(c[0]=[U("Voltar")])),_:1})]),_:1}),e(F,{size:"large",color:"green",onClick:q,disabled:o(P)},{default:t(()=>c[1]||(c[1]=[U("Salvar")])),_:1},8,["disabled"]),e(F,{class:"ml-4",size:"large",color:"blue",onClick:M},{default:t(()=>c[2]||(c[2]=[U("Gerar Minuta")])),_:1})]),_:1})],64)}}},st=["innerHTML"],zt={__name:"Livro",props:{ato_token:{type:String,required:!0},pages:{type:Number,required:!0},document:{type:String,required:!0}},async setup(B){let f,y;const g=B,b=Z();xe(`${b.public.docEditor}`);const{$toast:w}=H(),x=J(),$=Y(),D=`${b.public.managemant}/listarEscrevente`,h=`${b.public.managemant}/lavrarAto`,P=u("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),A=u(!1),q=u(null),M=u(null),R=u(null),T=u(S("user-data").value.cartorio_token),d=S("auth_token").value,I=u([]),n=ee({escrevente:null}),c=async()=>{try{const{data:i,status:p}=await k(h,{method:"POST",body:{ato_token:g.ato_token,qtd_paginas:g.pages,escrevente_token:n.escrevente,usuario_token:d,cartorio_token:T}},"$ZKnVBNYxp9");p.value==="success"?(q.value=i.value,M.value=i.value[0].selo,w.success("Ato lavrado com sucesso!")):w.error("Falha ao lavrar o ato.")}catch{w.error("Erro ao conectar com o servidor.")}},a=()=>{A.value=!1,c()},{data:l}=([f,y]=Q(()=>k(D,{method:"POST",body:{cartorio_token:T}},"$XouuxOFIWh")),f=await f,y(),f);I.value=l.value[0].func_json_escreventes;const v=function(){R.value.ej2Instances.documentEditor.open(g.document)},s=()=>{const i=$.query.origem||"criar",p=$.query.id;i==="atualizar"?x.push(`/os/atualizar/${p}`):x.push("/os/criar-registro")};return(i,p)=>{const N=Je;return z(),L(be,null,[e(E,null,{default:t(()=>[e(j,null,{default:t(()=>[(z(),G(o(he),{restrictEditing:!0,enableToolbar:!1,created:g.document?v:null,ref_key:"documentEditorContainer",ref:R,height:"850px",width:"850px",key:g.document},null,8,["created"]))]),_:1}),e(j,null,{default:t(()=>[e(ie,{class:"mt-15",label:"Tabelião/escrevente",modelValue:o(n).escrevente,"onUpdate:modelValue":p[0]||(p[0]=W=>o(n).escrevente=W),items:o(I),"item-title":"nome","item-value":"token",required:""},null,8,["modelValue","items"]),_("div",null,[_("div",null,[_("img",{onClick:p[1]||(p[1]=W=>A.value=!0),class:"ml-2",style:{height:"80px",width:"80px",cursor:"pointer","margin-top":"40px"},src:Le}),o(q)?(z(),G(me,{key:0,class:"mr-16"},{default:t(()=>[e(E,{"no-gutters":""},{default:t(()=>[e(j,null,{default:t(()=>[e(pe,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[U(" Livro: "+ne(o(q)[0].livro_numero),1)]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(pe,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[U(" Folhas : "+ne(o(q)[0].pagina_inicial)+" A "+ne(o(q)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),_("div",{innerHTML:o(M)},null,8,st)]),_:1})):ye("",!0)])])]),_:1})]),_:1}),e(F,{class:"mt-5 ml-7 mb-5",color:"red",size:"large",onClick:s},{default:t(()=>p[3]||(p[3]=[U("Voltar")])),_:1}),e(N,{show:o(A),condMessage:o(P),onClose:p[2]||(p[2]=W=>A.value=!1),onConfirm:a},null,8,["show","condMessage"])],64)}}},rt=["onClick"],nt={key:0,style:{width:"30px",height:"30px"},src:ue,alt:"Visualizar",title:"Reativar"},lt={key:1,src:ce,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Dt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(B){let f,y;const g=B,b=J(),w=Y(),x=Z(),{$toast:$}=H(),D=`${x.public.managemant}/listarEscrevente`,h=`${x.public.managemant}/getAtosTiposByToken`,P=`${x.public.managemant}/createAtosObservacao`,A=`${x.public.managemant}/updateAtosObservacao`,q=u(S("user-data").value.cartorio_token),M=u([]),R=u([]),T=[{title:"Data",align:"start",key:"data"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],d=ee({observacao:null}),I={observacao:{required:_e.withMessage("O campo é obrigatorio",ve)}},n=fe(I,d);[f,y]=Q(()=>k(`${h}/${g.ato_token}`,{method:"GET"},"$aJM1TL1buW")),f=await f,y();async function c(){if(await n.value.$validate()){const{data:s,error:i,status:p}=await k(P,{method:"POST",body:{ato_id:g.ato_id,observacao:d.observacao,user_id:S("user-data").value.usuario_id}},"$dMg99jeUNP");p.value==="success"&&(M.value.push({data:Ye(s.value.created,"dd/mm/yyyy hh:mm"),observacao:s.value.observacao,id:s.value.id,escrevente:S("user-data").value.nome}),$.success("Observação registrada com sucesso"))}else $.error("Preencha os campos obrigatorios.")}async function a(s){s.excluido=!s.excluido;try{await k(`${A}/${s.id}`,{method:"PUT",body:JSON.stringify({excluido:s.excluido})},"$B6PdRx8Gp4")}catch(i){console.error("Erro ao excluir observacao:",i)}}const{data:l}=([f,y]=Q(()=>k(D,{method:"POST",body:{cartorio_token:q}},"$xFHPGua26S")),f=await f,y(),f);R.value=l.value[0].func_json_escreventes;const v=()=>{const s=w.query.origem||"criar",i=w.query.id;s==="atualizar"?b.push(`/os/atualizar/${i}`):b.push("/os/criar-registro")};return(s,i)=>{const p=X;return z(),G(oe,null,{default:t(()=>[e(E,{class:"mt-5"},{default:t(()=>[e(K,{label:"Observação",modelValue:o(d).observacao,"onUpdate:modelValue":i[0]||(i[0]=N=>o(d).observacao=N),required:"","error-messages":o(n).observacao.$errors.map(N=>N.$message),onBlur:o(n).observacao.$touch,onInput:o(n).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),_("div",null,[_("img",{class:"btn-pointer ml-2",src:te,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:c})])]),_:1}),e(E,null,{default:t(()=>[e(j,null,{default:t(()=>[e(de,{style:{height:"465px"},headers:T,items:o(M)},{"item.actions":t(({item:N})=>[_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:W=>a(N),title:"Deletar Observação"},[N.excluido?(z(),L("img",nt)):(z(),L("img",lt))],8,rt)]),_:1},8,["items"])]),_:1})]),_:1}),e(E,null,{default:t(()=>[e(p,{onClick:v},{default:t(()=>[e(F,{size:"large",color:"red"},{default:t(()=>i[1]||(i[1]=[U("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},it=["onClick"],ut=["onClick"],ct={key:0,style:{width:"30px",height:"30px"},src:ue,alt:"Visualizar",title:"Reativar"},dt={key:1,src:ce,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Mt={__name:"Anexos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(B){const f=B,y=Z(),{$toast:g}=H(),b=J(),w=Y(),x=`${y.public.biometria}/run-scanner`,$=`${y.public.managemant}/atos_anexos`,D=`${y.public.managemant}/atos_anexos`,h=u(!1),P=u([]),A=ee({descricao:""}),q=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}];async function M(){try{await R(),await T()}catch(a){console.error("Erro ao executar scanner ou listar arquivos:",a)}}async function R(){try{const{data:a}=await k(x,{method:"GET"},"$WazoKp68Tw")}catch(a){g.error("Erro ao acionar o scanner:",a)}}async function T(){try{const{data:a,status:l}=await k("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:f.ato_token,cartorio_token:S("user-data").value.cartorio_token}},"$03Wxiia3aI")}catch(a){console.error("Erro ao enviar o arquivo:",a)}}const d=async()=>{h.value=!0},I=async()=>{const{data:a,error:l,status:v}=await k($,{method:"POST",body:{ato_id:f.ato_id,descricao:A.descricao,user_id:S("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$D2PdkmlmwW");v.value==="success"&&(g.success("Anexo registrado com sucesso!"),P.value.push(a.value))};async function n(a){a.excluido=!a.excluido;try{await k(`${D}/${a.id}`,{method:"PUT",body:JSON.stringify({excluido:a.excluido})},"$WyW0hasRPI")}catch(l){console.error("Erro ao excluir pessoa:",l)}}const c=()=>{const a=w.query.origem||"criar",l=w.query.id;a==="atualizar"?b.push(`/os/atualizar/${l}`):b.push("/os/criar-registro")};return(a,l)=>{const v=X;return z(),G(oe,null,{default:t(()=>[e(E,null,{default:t(()=>[e(j,{cols:"5"},{default:t(()=>[e(K,{modelValue:o(A).descricao,"onUpdate:modelValue":l[0]||(l[0]=s=>o(A).descricao=s),label:"Descrição"},null,8,["modelValue"])]),_:1}),_("div",{onClick:M,title:"Escanear"},l[3]||(l[3]=[_("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:We,alt:"Escanear"},null,-1)])),_("div",{onClick:I,title:"Criar"},l[4]||(l[4]=[_("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:te,alt:"Criar"},null,-1)]))]),_:1}),e(de,{headers:q,items:o(P),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:s})=>[e(E,null,{default:t(()=>[_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:i=>d(s),title:"Visualizar Anexo"},l[5]||(l[5]=[_("img",{style:{width:"30px",height:"30px"},src:le,alt:"Visualizar"},null,-1)]),8,it),_("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:i=>n(s),title:"Deletar Pessoa"},[s.excluido?(z(),L("img",ct)):(z(),L("img",dt))],8,ut)]),_:2},1024)]),_:1},8,["items"]),e(ke,{modelValue:o(h),"onUpdate:modelValue":l[2]||(l[2]=s=>ge(h)?h.value=s:null),width:"600"},{default:t(()=>[e(me,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(F,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:l[1]||(l[1]=s=>h.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(v,{onClick:c},{default:t(()=>[e(F,{size:"large",color:"red"},{default:t(()=>l[6]||(l[6]=[U("Voltar")])),_:1})]),_:1})]),_:1})}}};export{St as _,qt as a,Ot as b,zt as c,Dt as d,Mt as e};
