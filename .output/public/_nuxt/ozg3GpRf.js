import{_ as pe,a as ve,b as fe,c as be,d as ge,e as Ve}from"./CfPeZexu.js";import{_ as ye}from"./ClD36q83.js";import{f as Ae,r,D as ke,K,u as $e,l as qe,A as we,o as q,h as R,w as o,b as e,s as N,i as t,p as B,V as O,d,k as W,e as ze,y as G,c as j,F as Pe,a as x,t as Te,j as C,v as De}from"./czsslhLh.js";import{f as $}from"./Dkdv2D5h.js";import{u as xe}from"./jCyskkpA.js";import{V as U}from"./CZhpwwnu.js";import{V as b}from"./CpY2pdlu.js";import{V as M}from"./DxXialVn.js";import{V as Y}from"./BiVaMwpv.js";import{_ as Ce,a as Re,b as Be}from"./Bdcn1Lch.js";import{_ as Ue}from"./DlIoLBKE.js";import{_ as Me}from"./CV6r6dNV.js";import{V as Se}from"./DpLnPnSw.js";import{a as he,V as p,b as Ee,c as v}from"./Czl3-l3W.js";import"./CVDZtJr5.js";import"./Fsjn0wK4.js";import"./LnEupjmK.js";import"./CyjRL74M.js";import"./B0IxRygJ.js";import"./-jM4pxFB.js";import"./32XbL-gM.js";import"./B5pilP8e.js";import"./BO-Sp0Nn.js";import"./5XsviE_6.js";import"./BEWMfxr-.js";import"./crmYuR1w.js";import"./BVz1G1IN.js";import"./DJvq3mCv.js";import"./BcKnJfRX.js";import"./BI4o55M4.js";import"./CMChQ6Zu.js";import"./TDtrdbi3.js";import"./CnLGw_oF.js";import"./OVZRKi-E.js";import"./JF78NSSV.js";import"./jUPHS8PY.js";import"./DtwipwlP.js";import"./CevOMSIV.js";import"./BX0P_1bI.js";import"./-zgYk4Vu.js";import"./C5psOgEG.js";import"./NDABk2jR.js";import"./CZeTZmue.js";import"./BiJyGLPy.js";const Fe={__name:"SeparacaoDivorcio",setup(H){const c=W(),i=Ae({dt_casamento:null,tabvalores_regimecasamento_id:null,qtd_filhos_maiores:null,qtd_filhos_menores:null,responsavel_menores_id:null}),y=r([]),A=ke(),u=K(),{$toast:P}=$e(),g=`${c.public.auth}/service/gerencia/getAtos/${u.query.ato_id}`,S=`${c.public.auth}/service/gerencia/regime_casamento`,T=`${c.public.auth}/service/gerencia/getAtosPessoaById/${u.query.ato_id}`,h=`${c.public.managemant}/updateAtos`;r(""),r(""),r(!1),r(!1),r(null),qe(async()=>{const[l,s,n]=await Promise.all([$(g,{method:"GET"}),$(S,{method:"GET"}),$(T,{method:"GET"})]);l.data.value&&Object.assign(i,l.data.value[0]||l.data.value),s.data.value&&(y.value=s.data.value),n.data.value&&(w.value=n.data.value)});const E=async()=>{try{const{data:l}=await $(T,{method:"GET"});w.value=l.value||[]}catch{}},w=r([]),z=we(()=>{var l;return((l=w.value)==null?void 0:l.map(s=>{var n;return{id:s.id,nome:((n=s.pessoa)==null?void 0:n.nome)||"Sem nome"}}))||[]}),f=()=>{const l=u.query.origem||"criar",s=u.query.id;switch(l){case"atualizar":case"vizualizar":A.push(`/os/atualizar/${s}`);break;case"atualizar-lista":case"vizualizar-lista":A.push("/atos/lista");break;default:A.push("/os/criar-registro");break}};async function k(){const{data:l,error:s,status:n}=await xe(`${h}/${u.query.ato_id}`,{method:"PUT",body:{dt_casamento:i.dt_casamento,tabvalores_regimecasamento_id:i.tabvalores_regimecasamento_id,qtd_filhos_maiores:i.qtd_filhos_maiores,qtd_filhos_menores:i.qtd_filhos_menores,responsavel_menores_id:i.responsavel_menores_id}},"$sJMejO9HYY");n.value==="success"&&P.success("Divórcio salvo com sucesso")}const D=l=>{const s=["Backspace","Tab","ArrowLeft","ArrowRight","Delete"];!/[0-9]/.test(l.key)&&!s.includes(l.key)&&l.preventDefault()};return(l,s)=>{const n=ye;return q(),R(Y,{class:"mt-5"},{default:o(()=>[e(U,{dense:""},{default:o(()=>[e(b,{cols:"12",sm:"4",md:"3"},{default:o(()=>[e(N,{modelValue:t(i).dt_casamento,"onUpdate:modelValue":s[0]||(s[0]=_=>t(i).dt_casamento=_),type:"date",label:"Data Casamento"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"4"},{default:o(()=>[t(y).length?(q(),R(M,{key:0,label:"Regime Bens",modelValue:t(i).tabvalores_regimecasamento_id,"onUpdate:modelValue":s[1]||(s[1]=_=>t(i).tabvalores_regimecasamento_id=_),items:t(y),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])):B("",!0)]),_:1}),e(b,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(N,{label:"Filhos Maiores",modelValue:t(i).qtd_filhos_maiores,"onUpdate:modelValue":s[2]||(s[2]=_=>t(i).qtd_filhos_maiores=_),modelModifiers:{number:!0},type:"number",min:"0",onKeydown:D},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(N,{label:"Filhos Menores",modelValue:t(i).qtd_filhos_menores,"onUpdate:modelValue":s[3]||(s[3]=_=>t(i).qtd_filhos_menores=_),modelModifiers:{number:!0},type:"number",min:"0",onKeydown:D},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"4"},{default:o(()=>[t(z).length?(q(),R(M,{key:0,onFocus:E,label:"Responsável",modelValue:t(i).responsavel_menores_id,"onUpdate:modelValue":s[4]||(s[4]=_=>t(i).responsavel_menores_id=_),items:t(z),"item-title":"nome","item-value":"id",required:""},null,8,["modelValue","items"])):B("",!0)]),_:1})]),_:1}),e(U,{class:"mt-5",justify:"start",align:"center"},{default:o(()=>[e(b,{cols:"auto"},{default:o(()=>[e(n,{onClick:f},{default:o(()=>[e(O,{size:"large",color:"red"},{default:o(()=>s[5]||(s[5]=[d("Voltar")])),_:1})]),_:1})]),_:1}),e(b,{cols:"auto"},{default:o(()=>[e(O,{class:"ml-2",onClick:k,size:"large",color:"green"},{default:o(()=>s[6]||(s[6]=[d("Salvar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Ie={class:"mb-10"},Le={style:{color:"red","margin-left":"30px"}},Ne={key:0},Mo={__name:"[id]",async setup(H){let c,i;const y=r(null),A=r(null),u=r(null),P=W(),g=K(),S=r(g.query.origem==="vizualizar"),T=`${P.public.auth}/service/gerencia/listarSituacoes`,h=`${P.public.auth}/service/gerencia/getAtos`,E=r(ze("user-data").value.cartorio_token),w=g.query.id?{ato_token:g.query.tipo_ato_token}:{cartorio_token:E},z=r([]),f=r([]),k=r(!1),D=g.query.tipo_ato||"",l=r(null),s=r(null),n=r(null),[_,J]=D.split(" - "),F=r(0);l.value=_||"",n.value=J||"";async function Q(){try{const{data:m}=await $(`${h}/${g.query.ato_id}`,{method:"GET"});f.value=m.value,s.value=f.value[0].link_livro}catch(m){console.error(m)}}[c,i]=G(()=>Q()),await c,i();const{data:X,status:Oe}=([c,i]=G(()=>$(T,{method:"POST",body:w})),c=await c,i(),c);z.value=X.value;const Z=m=>{y.value=m},ee=m=>{A.value=m};function oe(){f.dt_lavratura||(k.value=!0)}function ae(m){m==="divorcio"&&F.value++}function te(){F.value++}function se({descricao:m,usaImoveisParams:a}){const[I,L]=m.split(" - ");l.value=I||"",n.value=L||""}return(m,a)=>{const I=pe,L=ve,le=Fe,ie=Ce,re=Re,ne=fe,ue=be,me=ge,de=Ve,ce=Be,_e=Ue;return q(),j(Pe,null,[e(Y,null,{default:o(()=>[x("div",Ie,[e(U,{class:"mb-5 mt-5"},{default:o(()=>[a[5]||(a[5]=x("h1",null,"Ordem de Serviço nº",-1)),x("h1",Le,Te(t(g).query.numero_os),1)]),_:1}),e(U,null,{default:o(()=>[e(b,{md:"6"},{default:o(()=>[e(M,{label:"Serviço",class:"mr-5",modelValue:t(l),"onUpdate:modelValue":a[0]||(a[0]=V=>C(l)?l.value=V:null),disabled:""},null,8,["modelValue"])]),_:1}),e(b,{md:"5"},{default:o(()=>[e(M,{modelValue:t(n),"onUpdate:modelValue":a[1]||(a[1]=V=>C(n)?n.value=V:null),label:"Tipo de Ato",disabled:""},null,8,["modelValue"])]),_:1}),t(S)?B("",!0):(q(),j("div",Ne,[x("img",{class:"mt-2",style:De({cursor:t(f).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:Me,alt:"Editar",onClick:oe},null,4)]))]),_:1})]),e(Se,{width:"1300"},{default:o(()=>[e(he,{modelValue:t(u),"onUpdate:modelValue":a[2]||(a[2]=V=>C(u)?u.value=V:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(p,{value:"dados"},{default:o(()=>a[6]||(a[6]=[d("Dados")])),_:1}),e(p,{value:"partes"},{default:o(()=>a[7]||(a[7]=[d("Partes")])),_:1}),e(p,{value:"bens"},{default:o(()=>a[8]||(a[8]=[d("Bens")])),_:1}),e(p,{value:"imoveis"},{default:o(()=>a[9]||(a[9]=[d("Imoveis")])),_:1}),e(p,{onClick:te,value:"divorcio"},{default:o(()=>a[10]||(a[10]=[d("Matrimônio")])),_:1}),e(p,{value:"minuta"},{default:o(()=>a[11]||(a[11]=[d("Minuta")])),_:1}),e(p,{value:"livro"},{default:o(()=>a[12]||(a[12]=[d("Livro")])),_:1}),e(p,{value:"observacao"},{default:o(()=>a[13]||(a[13]=[d("Observações")])),_:1}),e(p,{value:"anexo"},{default:o(()=>a[14]||(a[14]=[d("Anexos")])),_:1}),e(p,{value:"outros"},{default:o(()=>a[15]||(a[15]=[d("Outros")])),_:1})]),_:1},8,["modelValue"]),e(Ee,{modelValue:t(u),"onUpdate:modelValue":[a[3]||(a[3]=V=>C(u)?u.value=V:null),ae]},{default:o(()=>[e(v,{value:"dados"},{default:o(()=>[e(I,{item_dados:t(f),item_situacoes:t(z)},null,8,["item_dados","item_situacoes"])]),_:1}),e(v,{value:"partes"},{default:o(()=>[e(L)]),_:1}),e(v,{value:"divorcio"},{default:o(()=>[e(le,{"tab-event":t(F)},null,8,["tab-event"])]),_:1}),e(v,{value:"bens"},{default:o(()=>[e(ie)]),_:1}),e(v,{value:"imoveis"},{default:o(()=>[e(re)]),_:1}),e(v,{value:"minuta"},{default:o(()=>[e(ne,{onPage:Z,onDoc:ee})]),_:1}),e(v,{value:"livro"},{default:o(()=>[e(ue,{pages:t(y),document:t(A),linkLivro:t(s)},null,8,["pages","document","linkLivro"])]),_:1}),e(v,{value:"observacao"},{default:o(()=>[e(me)]),_:1}),e(v,{value:"anexo"},{default:o(()=>[e(de)]),_:1}),e(v,{value:"outros"},{default:o(()=>[e(ce)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(k)?(q(),R(_e,{key:0,show:t(k),servicos:t(f).servicos||[],tiposAtos:t(f).tiposAtos||[],onClose:a[4]||(a[4]=V=>k.value=!1),onUpdateAto:se},null,8,["show","servicos","tiposAtos"])):B("",!0)],64)}}};export{Mo as default};
