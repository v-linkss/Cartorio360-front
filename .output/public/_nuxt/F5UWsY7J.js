import{c as N,r as T,u as M}from"./Yj1LSECv.js";import{r as d,n as _,p as q,g as F,o as I,x as R,w as o,b as a,a as i,t as V,d as c,A as t,F as g,J as U,y as z}from"./D2uGBfno.js";import{u as k}from"./DqOM1bED.js";import{V as w,b as D}from"./CVJPmcj0.js";import{V as C}from"./CXo5kPoz.js";import{V as P}from"./CRVYtyGn.js";import{V as j}from"./4YJDhSw9.js";import{V as A}from"./vOHzmBp0.js";const J={style:{color:"red","margin-left":"18px"}},W={class:"mb-5",style:{display:"flex","justify-content":"flex-start"}},X={class:"ml-6"},E={class:"ml-6"},ae={__name:"Ordem",props:{show:Boolean,numero_os:Number,ordemserv_token:String},emits:["close"],setup(b,{emit:h}){const l=b,n=d(l.show),v=z();d(_("user-data").value.cartorio_token).value;const $=_("auth_token").value,x=`${v.public.managemant}/analisaCancelamento`,y=`${v.public.managemant}/cancelaOs`,m=q({motivo:null}),f=d(null),O=h,B={motivo:{required:N.withMessage("O campo é obrigatorio",T)}},u=M(B,m);F(()=>l.show,s=>{n.value=s});const p=()=>{n.value=!1,O("close")};(async()=>{const{data:s,error:e}=await k(`${x}`,{method:"POST",body:{ordemserv_token:l.ordemserv_token}},"$1fnrIk2fgs");f.value=s.value.mensagem})();const S=async()=>{if(await u.value.$validate()){const{status:s}=await k(`${y}`,{method:"POST",body:{usuario_token:$,motivo:m.motivo,ordemserv_token:l.ordemserv_token}},"$21WlhUNXeM");s.value==="success"&&(window.location.reload(),p())}};return(s,e)=>(I(),R(A,{persistent:"",modelValue:t(n),"onUpdate:modelValue":e[1]||(e[1]=r=>U(n)?n.value=r:null),"max-width":"650"},{default:o(()=>[a(w,null,{default:o(()=>[a(C,null,{default:o(()=>[a(P,{class:"mb-5 mt-1 ml-2"},{default:o(()=>[e[2]||(e[2]=i("h1",null,"Cancelamento da OS nº",-1)),i("h1",J,V(l.numero_os),1)]),_:1}),a(C,null,{default:o(()=>[a(w,{variant:"outlined",class:"mb-5"},{default:o(()=>[a(D,null,{default:o(()=>[c(V(t(f)),1)]),_:1})]),_:1}),a(j,{label:"Motivo",modelValue:t(m).motivo,"onUpdate:modelValue":e[0]||(e[0]=r=>t(m).motivo=r),required:"","error-messages":t(u).motivo.$errors.map(r=>r.$message),onBlur:t(u).motivo.$touch,onInput:t(u).motivo.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1})]),_:1}),i("div",W,[i("div",X,[a(g,{size:"large",color:"red",onClick:p},{default:o(()=>e[3]||(e[3]=[c("Fechar")])),_:1})]),i("div",E,[a(g,{size:"large",color:"green",onClick:S},{default:o(()=>e[4]||(e[4]=[c("Salvar")])),_:1})])])]),_:1})]),_:1},8,["modelValue"]))}};export{ae as _};
