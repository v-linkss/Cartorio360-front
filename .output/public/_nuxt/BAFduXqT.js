import{_ as Ve,a as ge,b as xe,c as be,d as $e,e as ke,f as we}from"./Ctfn43_r.js";import{_ as Ce}from"./B4VlNjL4.js";import{_ as se}from"./BZKJGd1O.js";import{_ as ie,a as re,b as ne}from"./BP1uhy__.js";import{_ as ue}from"./aYyiUlRS.js";import{_ as Y}from"./NqSOLEfL.js";import{C as de,H as Z,u as Ae,r as c,m as X,D as he,I as G,o as x,G as M,w as o,b as e,v as l,a as r,t as ee,c as J,x as R,d as V,J as Te,A as W,s as te,p as Pe,V as ae,K as q,F as ze,y as Be}from"./DbQfKAp2.js";import{u as F}from"./pq8W2NpX.js";import{V as A}from"./CFvqIVi2.js";import{V as le}from"./Du57cjRX.js";import{V as h}from"./B08az7LV.js";import{V as K}from"./BC-AGza3.js";import{V as ce}from"./CMFBXA7a.js";import{V as Ue}from"./FTeBW6wZ.js";import{V as me,a as De,b as Ie,c as Oe}from"./B8a9Z5mE.js";import{V as pe}from"./hO0nBb7e.js";import{_ as Se,a as Me}from"./B73ofRQ6.js";import{f as j}from"./FC2YjqTU.js";import{V as qe,a as B,b as Re,c as U}from"./tFX_QxXW.js";import"./DHD4BXG7.js";import"./jZIOj7D8.js";import"./D2icnSgA.js";import"./Bb0_jWQM.js";import"./CT5dGhr7.js";import"./MRaHBJ8x.js";import"./DYtzO2me.js";import"./CdP3NN9a.js";import"./DYjeSXWH.js";import"./BTtddWDW.js";const Ee={style:{width:"800px","font-weight":"500"}},Le=["onClick"],Ne=["onClick"],Fe=["onClick"],je={key:0,style:{width:"30px",height:"30px"},src:re,alt:"Reativar",title:"Reativar"},Ge={key:1,src:ne,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},Je={__name:"Bens",async setup(oe){let n,g;const T=de(),b=Z(),v=te(),{$toast:$}=Ae(),_=`${v.public.managemant}/atos_bens`,k=`${v.public.managemant}/atos_bens`,P=`${v.public.managemant}/listarBens`,D=`${v.public.managemant}/listarTipoBens`,I=c(X("user-data").value.cartorio_token),O=c(X("user-data").value.usuario_id).value,f=c([]),m=c([]),y=c(!1),w=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"vlr_alienacao"},{align:"end",value:"actions"}],u=he({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),E=async()=>{if(!u.vlr_alienacao&&!u.descricao){$.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:a,status:t}=await F(`${_}`,{method:"POST",body:{descricao:u.descricao,tipo_id:u.tipo_id,valor_mercado:"0.00",vlr_alienacao:u.vlr_alienacao.replace(/,/g,""),user_id:O,ato_id:Number.parseInt(b.query.ato_id),token:b.query.ato_token_edit}},"$aGIwRtPn6M");t.value==="success"&&($.success("Bem registrado com sucesso!"),f.value.push(a.value),Object.assign(u,{vlr_alienacao:null,descricao:null,tipo_id:null}))},L=async a=>{const{status:t}=await F(`${k}/${a}`,{method:"PUT",body:{descricao:m.value.descricao,tipo_id:m.value.tipo_id,vlr_alienacao:m.value.vlr_alienacao.replace(/,/g,"")}},"$4hUMyAQlzU");t.value==="success"&&($.success("Bem Atualizado com sucesso!"),y.value=!1)},N=a=>{const t=f.value.find(C=>C.id===a);t&&(m.value=t,y.value=!0)},{data:d}=([n,g]=G(()=>F(`${D}`,{method:"POST",body:{cartorio_token:I.value,imoveis:!1}},"$da802I2H8c")),n=await n,g(),n);u.tiposBens=d.value;const{data:s}=([n,g]=G(()=>F(`${P}`,{method:"POST",body:{ato_token:b.query.ato_token_edit}},"$iXfJJrO35d")),n=await n,g(),n);f.value=s.value&&Object.keys(s.value).length===0?[]:s.value;async function S(a){a.excluido=!a.excluido;try{await F(`${k}/${a.id}`,{method:"PUT",body:JSON.stringify({excluido:a.excluido})},"$PGKHfsa7Pl")}catch(t){console.error("Erro ao excluir pessoa:",t)}}const p=()=>{const a=b.query.origem||"criar",t=b.query.id;a==="atualizar"?T.push(`/os/atualizar/${t}`):T.push("/os/criar-registro")};return(a,t)=>{const C=Ce,Q=se;return x(),M(pe,null,{default:o(()=>[e(A,{class:"mt-5",cols:"12"},{default:o(()=>[e(le,{label:"Descrição",modelValue:l(u).descricao,"onUpdate:modelValue":t[0]||(t[0]=i=>l(u).descricao=i)},null,8,["modelValue"])]),_:1}),e(h,{class:"ml-1 mb-3"},{default:o(()=>[e(A,{class:"mt-6",cols:"8"},{default:o(()=>[e(K,{label:"Selecione o Tipo",items:l(u).tiposBens,modelValue:l(u).tipo_id,"onUpdate:modelValue":t[1]||(t[1]=i=>l(u).tipo_id=i),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(A,{class:"ml-5",cols:"3"},{default:o(()=>[t[9]||(t[9]=r("label",null,"Valor",-1)),e(C,{modelValue:l(u).vlr_alienacao,"onUpdate:modelValue":t[2]||(t[2]=i=>l(u).vlr_alienacao=i)},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-7 ml-4",src:ie,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:E})])]),_:1}),e(h,null,{default:o(()=>[e(A,null,{default:o(()=>[e(ce,{style:{height:"465px"},headers:w,items:l(f)},{"item.descricao":o(({item:i})=>[r("h3",Ee,ee(i.descricao),1)]),"item.actions":o(({item:i})=>[e(h,{style:{"margin-top":"-8px"},justify:"end"},{default:o(()=>[r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:H=>a.redirectToFicha(i),title:"Visualizar Ficha"},t[10]||(t[10]=[r("img",{style:{width:"30px",height:"30px"},src:ue,alt:"Visualizar"},null,-1)]),8,Le),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:H=>N(i.id),title:"Alterar Papel"},t[11]||(t[11]=[r("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Editar"},null,-1)]),8,Ne),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:H=>S(i),title:"Deletar Pessoa"},[i.excluido?(x(),J("img",je)):(x(),J("img",Ge))],8,Fe)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(Ue,{modelValue:l(y),"onUpdate:modelValue":t[8]||(t[8]=i=>R(y)?y.value=i:null),"max-width":"600px"},{default:o(()=>[e(me,null,{default:o(()=>[e(De,{style:{color:"green"}},{default:o(()=>t[12]||(t[12]=[V("Atualizar Bem")])),_:1}),e(Ie,null,{default:o(()=>[e(A,{class:"mt-1",cols:"12"},{default:o(()=>[e(le,{label:"Descrição",modelValue:l(m).descricao,"onUpdate:modelValue":t[3]||(t[3]=i=>l(m).descricao=i)},null,8,["modelValue"])]),_:1}),e(h,null,{default:o(()=>[e(A,{class:"mt-6 ml-3",cols:"8"},{default:o(()=>[e(K,{label:"Selecione o Tipo",items:l(u).tiposBens,modelValue:l(m).tipo_id,"onUpdate:modelValue":t[4]||(t[4]=i=>l(m).tipo_id=i),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(A,{class:"ml-5",cols:"3"},{default:o(()=>[t[13]||(t[13]=r("label",null,"Valor",-1)),e(C,{modelValue:l(m).vlr_alienacao,"onUpdate:modelValue":t[5]||(t[5]=i=>l(m).vlr_alienacao=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Oe,null,{default:o(()=>[e(Te),e(W,{color:"green",text:"",onClick:t[6]||(t[6]=i=>y.value=!1)},{default:o(()=>t[14]||(t[14]=[V("Cancelar")])),_:1}),e(W,{color:"green",text:"",onClick:t[7]||(t[7]=i=>L(l(m).id))},{default:o(()=>t[15]||(t[15]=[V("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(h,null,{default:o(()=>[e(Q,{onClick:p},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>t[16]||(t[16]=[V("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},He={style:{width:"200px"}},We={style:{width:"300px"}},Ke={style:{width:"800px","font-weight":"500"}},Qe=["onClick"],Xe=["onClick"],Ye=["onClick"],Ze={key:0,style:{width:"30px",height:"30px"},src:re,alt:"Visualizar",title:"Reativar"},et={key:1,src:ne,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},tt={__name:"Imoveis",async setup(oe){let n,g;const T=te(),b=`${T.public.auth}/service/gerencia/atos_imoveis`,v=`${T.public.auth}/service/gerencia/atos_bens`,$=de(),_=Z(),k=c(""),P=c(""),D=c(!1),I=c(!1),O=c(null),f=[{title:"Matrícula",value:"registro_matricula"},{title:"Descrição",value:"descricao"},{value:"actions"}],{data:m,status:y}=([n,g]=G(()=>j(b,{method:"POST",body:{ato_token:_.query.ato_token_edit}})),n=await n,g(),n),w=Pe(()=>{if(Object.keys(m.value).length!==0)return m.value.filter(d=>{const s=d.matricula?d.matricula.toLowerCase():"",S=d.descricao?d.descricao.toLowerCase():"",p=s.includes(P.value.toLowerCase()),a=S.includes(k.value.toLowerCase());return p&&a})});async function u(d){d.excluido=!d.excluido;try{await j(`${v}/${d.id}`,{method:"PUT",body:{excluido:d.excluido}})}catch(s){console.error("Erro ao excluir pessoa:",s)}}function E(d){O.value=d,I.value=!0}const L=async()=>{await j(b,{method:"POST",body:{ato_token:_.query.ato_token_edit}})},N=()=>{const d=_.query.origem||"criar",s=_.query.id;d==="atualizar"?$.push(`/os/atualizar/${s}`):$.push("/os/criar-registro")};return(d,s)=>{const S=se,p=Se,a=Me;return l(y)==="success"?(x(),M(pe,{key:0,class:"mt-5"},{default:o(()=>[r("img",{onClick:s[0]||(s[0]=t=>D.value=!0),style:{cursor:"pointer"},src:ie,alt:"Cadastro"}),e(h,{style:{gap:"3rem"}},{default:o(()=>[r("div",He,[e(ae,{class:"mt-7 mb-4",modelValue:l(P),"onUpdate:modelValue":s[1]||(s[1]=t=>R(P)?P.value=t:null),label:"Matrícula","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),r("div",We,[e(ae,{class:"mt-7 mb-4",modelValue:l(k),"onUpdate:modelValue":s[2]||(s[2]=t=>R(k)?k.value=t:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),e(ce,{density:"compact",headers:f,items:l(w),"item-key":"id"},{"item.descricao":o(({item:t})=>[r("h3",Ke,ee(t.descricao),1)]),"item.actions":o(({item:t})=>[e(h,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:o(()=>[r("div",{style:{cursor:"pointer"},onClick:C=>d.redirectToView(t.id),title:"Visualizar"},s[5]||(s[5]=[r("img",{style:{width:"30px",height:"30px"},src:ue,alt:"Visualizar"},null,-1)]),8,Qe),r("div",{style:{cursor:"pointer"},onClick:C=>E(t.id),title:"Atualizar"},s[6]||(s[6]=[r("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Atualizar"},null,-1)]),8,Xe),r("div",{style:{cursor:"pointer"},onClick:C=>u(t),title:"Deletar"},[t.excluido?(x(),J("img",Ze)):(x(),J("img",et))],8,Ye)]),_:2},1024)]),_:1},8,["items"]),e(S,{onClick:N},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>s[7]||(s[7]=[V("Voltar")])),_:1})]),_:1}),e(p,{onRefresh:L,show:l(D),onClose:s[3]||(s[3]=t=>D.value=!1)},null,8,["show"]),e(a,{onRefresh:L,imovel_id:l(O),show:l(I),onClose:s[4]||(s[4]=t=>I.value=!1)},null,8,["imovel_id","show"])]),_:1})):q("",!0)}}},ot={class:"mb-10"},at={style:{color:"red","margin-left":"30px"}},Dt={__name:"[id]",async setup(oe){let n,g;const T=c(null),b=c(null),v=c(null),$=te(),_=Z(),k=`${$.public.auth}/service/gerencia/listarSituacoes`,P=`${$.public.auth}/service/gerencia/getAtos`,D=c(X("user-data").value.cartorio_token),I=_.query.id?{ato_token:_.query.tipo_ato_token}:{cartorio_token:D},O=c([]),f=c([]),m=c("PROCURAÇÕES"),y=c(!1),w=c(_.query.usa_imoveis==="true");async function u(){try{const{data:p}=await j(`${P}/${_.query.ato_id}`,{method:"GET"});f.value=p.value}catch(p){console.log(p)}}[n,g]=G(()=>u()),await n,g();const{data:E,status:L}=([n,g]=G(()=>j(k,{method:"POST",body:I})),n=await n,g(),n);O.value=E.value;const N=p=>{T.value=p},d=p=>{b.value=p};function s(){f.dt_lavratura||(y.value=!0)}function S(p){w.value=p}return(p,a)=>{const t=ge,C=xe,Q=Je,i=tt,H=be,_e=$e,ve=ke,fe=we,ye=Ve;return x(),J(ze,null,[r("div",ot,[e(h,{class:"mb-5 mt-5"},{default:o(()=>[a[5]||(a[5]=r("h1",null,"Ordem de Serviço nº",-1)),r("h1",at,ee(l(_).query.numero_os),1)]),_:1}),e(h,null,{default:o(()=>[e(A,{md:"6"},{default:o(()=>[e(K,{class:"mr-5",modelValue:l(m),"onUpdate:modelValue":a[0]||(a[0]=z=>R(m)?m.value=z:null),disabled:""},null,8,["modelValue"])]),_:1}),e(A,{md:"5"},{default:o(()=>[e(K,{modelValue:l(_).query.tipo_ato,"onUpdate:modelValue":a[1]||(a[1]=z=>l(_).query.tipo_ato=z),disabled:""},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-2",style:Be({cursor:l(f).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:Y,alt:"Editar",onClick:s},null,4)])]),_:1})]),e(me,{width:"1300"},{default:o(()=>[e(qe,{modelValue:l(v),"onUpdate:modelValue":a[2]||(a[2]=z=>R(v)?v.value=z:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(B,{value:"dados"},{default:o(()=>a[6]||(a[6]=[V("Dados")])),_:1}),e(B,{value:"partes"},{default:o(()=>a[7]||(a[7]=[V("Partes")])),_:1}),l(w)?(x(),M(B,{key:0,value:"bens"},{default:o(()=>a[8]||(a[8]=[V("Bens")])),_:1})):q("",!0),l(w)?(x(),M(B,{key:1,value:"imoveis"},{default:o(()=>a[9]||(a[9]=[V("Imoveis")])),_:1})):q("",!0),e(B,{value:"minuta"},{default:o(()=>a[10]||(a[10]=[V("Minuta")])),_:1}),e(B,{value:"livro"},{default:o(()=>a[11]||(a[11]=[V("Livro")])),_:1}),e(B,{value:"observacao"},{default:o(()=>a[12]||(a[12]=[V("Observações")])),_:1}),e(B,{value:"anexo"},{default:o(()=>a[13]||(a[13]=[V("Anexos")])),_:1})]),_:1},8,["modelValue"]),e(Re,{modelValue:l(v),"onUpdate:modelValue":a[3]||(a[3]=z=>R(v)?v.value=z:null)},{default:o(()=>[e(U,{value:"dados"},{default:o(()=>[e(t,{item_dados:l(f),item_situacoes:l(O)},null,8,["item_dados","item_situacoes"])]),_:1}),e(U,{value:"partes"},{default:o(()=>[e(C)]),_:1}),l(w)?(x(),M(U,{key:0,value:"bens"},{default:o(()=>[e(Q)]),_:1})):q("",!0),l(w)?(x(),M(U,{key:1,value:"imoveis"},{default:o(()=>[e(i)]),_:1})):q("",!0),e(U,{value:"minuta"},{default:o(()=>[e(H,{onPage:N,onDoc:d})]),_:1}),e(U,{value:"livro"},{default:o(()=>[e(_e,{pages:l(T),document:l(b)},null,8,["pages","document"])]),_:1}),e(U,{value:"observacao"},{default:o(()=>[e(ve)]),_:1}),e(U,{value:"anexo"},{default:o(()=>[e(fe)]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(y)?(x(),M(ye,{key:0,show:l(y),servicos:l(f).servicos||[],tiposAtos:l(f).tiposAtos||[],onClose:a[4]||(a[4]=z=>y.value=!1),onUpdateAto:S},null,8,["show","servicos","tiposAtos"])):q("",!0)],64)}}};export{Dt as default};
