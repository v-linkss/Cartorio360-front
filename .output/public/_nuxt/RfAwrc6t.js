import{_ as D}from"./BRyL8DGd.js";import{u as k,p as w,r as x,v as N,y as b,w as o,A as B,o as c,b as e,B as v,V as y,x as l,d as h,c as V,a as E,t as T,n as F}from"./BqasVYkr.js";import{u as C}from"./DOEnMSZY.js";import{V as O}from"./DqpAygDQ.js";import{V as u}from"./DBEuzolY.js";import{V as I}from"./BLEQRdX3.js";import{a as P,b as R,V as A}from"./_447HpgJ.js";import"./B5A4-IOV.js";import"./-JpVPHTC.js";const U={key:0},j={key:1},W={__name:"censec",setup(J){const m=B(),{$toast:f}=k(),S=`${m.public.managemant}/integra_censec_cep`,$=`${m.public.ws}/censec/enviar`,i=w({data_inicio:_(),data_fim:_()}),d=x(null);function _(){const t=new Date,a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0");return`${String(t.getDate()).padStart(2,"0")}-${s}-${a}`}function p(t){if(!t)return null;const[a,s,n]=t.split("/");return`${n}-${s}-${a}`}const g=async()=>{const{data:t,status:a}=await C(`${S}`,{method:"POST",body:{cartorio_token:F("user-data").value.cartorio_token,data_inicio:p(i.data_inicio),data_fim:p(i.data_fim)}},"$prCSPBNmKL"),s=t.value;if(a.value==="success"){const{data:n,status:r}=await C(`${$}`,{method:"POST",body:{value:s}},"$IBf41hwtjc");r.value==="success"?(f.success("Dados enviados com sucesso!"),d.value=n.value):f.error("Erro ao enviar dados para CENSEC.")}};return(t,a)=>{const s=D,n=N("mask");return c(),b(O,null,{default:o(()=>[e(I,null,{default:o(()=>[e(u,{class:"mt-1"},{default:o(()=>[v(e(y,{modelValue:l(i).data_inicio,"onUpdate:modelValue":a[0]||(a[0]=r=>l(i).data_inicio=r),label:"Data Inicio",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[n,"##/##/####"]])]),_:1}),e(u,{class:"mt-1"},{default:o(()=>[v(e(y,{modelValue:l(i).data_fim,"onUpdate:modelValue":a[1]||(a[1]=r=>l(i).data_fim=r),label:"Data Fim",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[n,"##/##/####"]])]),_:1}),e(u,null,{default:o(()=>[e(s,{text:"Confirmar",onSave:g})]),_:1})]),_:1}),e(A,null,{default:o(()=>[e(P,null,{default:o(()=>a[2]||(a[2]=[h("Dados CENSEC")])),_:1}),e(R,null,{default:o(()=>[l(d)?(c(),V("div",U,[E("pre",null,T(JSON.stringify(l(d),null,2)),1)])):(c(),V("div",j,"Nenhum dado dispon√≠vel."))]),_:1})]),_:1})]),_:1})}}};export{W as default};
