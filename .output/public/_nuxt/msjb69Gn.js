import{_ as ae}from"./B1YR8Srb.js";import{u as ee,n as te,q as W,r as n,s as le,o as S,v as oe,w as t,b as e,x as a,V as Q,y as F,d as O,z as X,A as G,B as K,a as m,C as _e,c as N,D as re,E as Ie,F as Me,G as Ue,H as Re,I as xe,J as ve,K as he,t as me}from"./B4qBQJ0R.js";import{u as b}from"./CRpnKbp9.js";import{V as D}from"./Depwsngq.js";import{V as j}from"./Cl88KlW1.js";import{V as pe}from"./D8rY_2MO.js";import{V as ie}from"./DdAUVMNN.js";import{_ as Be}from"./Bs0gycdH.js";import{_ as Fe,a as Ne,b as Le,T as Ge,W as He,r as $e,D as ke,c as Je,d as Ke,e as We}from"./B33ViDRQ.js";import{_ as fe}from"./CXYL-dx9.js";import{_ as ne,a as ge}from"./HBU26js5.js";import{_ as ye,a as Xe}from"./u3cg_e8Q.js";import{V as we,a as ce}from"./CK8E0jME.js";import{_ as be}from"./DfjuBLsA.js";import{c as Ye,r as Ze,u as Qe}from"./DCG_1Neu.js";import{V as et,a as Y,b as tt,c as Z}from"./CeUZxCd_.js";import"./CI4RR3KJ.js";const at={__name:"Dados",props:{item_dados:{type:Array,required:!0},item_situacoes:{type:Array,required:!0}},setup(L){const r=L,{$toast:x}=ee(),y=X(),c=te(),l=W(),h=`${y.public.managemant}/updateAtos`,A=n(r.item_situacoes),k=le({dt_abertura:r.item_dados[0].dt_abertura||null,status:r.item_dados[0].status||null,mne:r.item_dados[0].mne||null});async function I(){const{data:p,error:u,status:w}=await b(`${h}/${l.query.id}`,{method:"PUT",body:{status:k.status,mne:k.mne}},"$EIT5jtTUdX");w.value==="success"&&x.success("Situação Atualizada com sucesso")}const E=()=>{const p=l.query.origem||"criar",u=l.query.id;p==="atualizar"?c.push(`/os/atualizar/${u}`):c.push("/os/criar-registro")};return(p,u)=>{const w=ae;return S(),oe(ie,null,{default:t(()=>[e(D,{class:"mt-5"},{default:t(()=>[e(j,{cols:"3"},{default:t(()=>[e(pe,{label:"Situação",modelValue:a(k).status,"onUpdate:modelValue":u[0]||(u[0]=$=>a(k).status=$),items:a(A),"item-title":"descricao","item-value":"descricao",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(j,{cols:"5"},{default:t(()=>[e(Q,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:a(k).mne,"onUpdate:modelValue":u[1]||(u[1]=$=>a(k).mne=$)},null,8,["modelValue"])]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(j,{cols:"2"},{default:t(()=>[e(Q,{modelValue:a(k).dt_abertura,"onUpdate:modelValue":u[2]||(u[2]=$=>a(k).dt_abertura=$),type:"date",label:"Data Lavratura",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(D,{class:"mb-3"},{default:t(()=>[e(w,{onClick:E},{default:t(()=>[e(F,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1}),e(F,{class:"ml-10",onClick:I,size:"large",color:"green"},{default:t(()=>[O("Salvar")]),_:1})]),_:1})]),_:1})}}},ot=["onClick"],st=m("img",{style:{width:"30px",height:"30px"},src:fe,alt:"Visualizar"},null,-1),rt=[st],nt=["onClick"],lt=m("img",{style:{width:"30px",height:"30px"},src:Xe,alt:"Visualizar"},null,-1),it=[lt],ct=["onClick"],ut={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},dt={key:1,src:ge,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},mt=["onClick"],pt=m("img",{style:{width:"30px",height:"30px"},src:Le,alt:"Visualizar"},null,-1),_t=[pt],vt={__name:"Partes",props:{ato_token:{type:String,required:!0}},async setup(L){let r,x;const y=te(),c=W(),l=X(),{$toast:h}=ee(),A=`${l.public.managemant}/pesquisarPessoas`,k=`${l.public.managemant}/listarPapeis`,I=`${l.public.managemant}/getLinkTipo`,E=`${l.public.managemant}/createAtosPessoa`,p=`${l.public.managemant}/updateAtosPessoa`,u=`${l.public.managemant}/getAtosPessoaById`,w=n(G("user-data").value.cartorio_token),$=n([]),V=n([]),M=n([]),d=n(!1),g=n(!1),s=n(!1),_=n(!1),T=n(null),q=n(null),o=n(null),f=n(null),U=n(null),C=n("xkyaA"),R=n(null),Ve=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],z=le({papeis:null,nome:null,pessoa:null,documento:null}),{data:Ce}=([r,x]=K(()=>b(k,{method:"POST",body:{tipo_ato_token:"xkyaA"}},"$acoiTIUp00")),r=await r,x(),r);M.value=Ce.value;const ue=async()=>{const{data:v}=await b(`${u}/${c.query.ato_id}`,{method:"GET"},"$ypnU9hCpVn"),B=(se=>se.map(H=>({...H,pessoa:{...H.pessoa,documento:H.pessoa.doc_identificacao},papel:{...H.partes_tipos}})))(v.value);V.value=B};ue();async function Pe(){try{const{data:v,error:i}=await b(A,{method:"POST",body:{cartorio_token:w.value,documento:z.documento,nome:z.nome}},"$pr30MyPXfY");v.value.length>0?($.value=v.value,z.pessoa=$.value[0]):$.value=[]}catch(v){console.error("Erro na requisição",v)}}const Ae=()=>{g.value=!0},Ee=async()=>{await ue()},Te=async()=>{await ue()},qe=async()=>{const v={pessoa:z.pessoa,papel:M.value.find(J=>J.id===z.papeis),representante:{nome:null}},i=await b(`${u}/${c.query.ato_id}`,{method:"GET"},"$scHdIvxj2D");for(const J of i.data.value)if(J.pessoa_id===z.pessoa.id&&J.ato_id===Number(c.query.ato_id)&&J.tipo_parte_id===z.papeis){h.error("Pessoa Já Registrada Com Esse Papel!");return}const{data:B,error:se,status:H}=await b(E,{method:"POST",body:{ato_id:c.query.ato_id,pessoa_id:z.pessoa.id,tipo_parte_id:z.papeis,user_id:G("user-data").value.usuario_id}},"$18isAgOJxG");H.value==="success"&&(o.value=B.value.id,h.success("Pessoa Registrada com Sucesso!"),V.value.push(v))},ze=async v=>{s.value=!0,R.value=null;const{data:i}=await b(`${I}`,{method:"POST",body:{id:v.pessoa.id,tipo:"ficha"}},"$hmDzSF3F61");i.value&&i.value.link?R.value=`data:image/jpeg;base64,${i.value.link}`:R.value=null},Oe=v=>{const i=V.value.filter(B=>B.pessoa.id!==v.pessoa.id).map(B=>({id:B.pessoa.id,nome:B.pessoa.nome}));o.value=v.id,T.value=i,d.value=!0,q.value=v.pessoa.nome,U.value=v.pessoa.id},De=v=>{_.value=!0,f.value=v.id,q.value=v.pessoa.nome};async function Se(v){v.excluido=!v.excluido;try{await b(`${p}/${v.id}`,{method:"PUT",body:JSON.stringify({excluido:v.excluido})},"$l09I6nLRfk")}catch(i){console.error("Erro ao excluir pessoa:",i)}}const je=()=>{const v=c.query.origem||"criar",i=c.query.id;v==="atualizar"?y.push(`/os/atualizar/${i}`):y.push("/os/criar-registro")};return(v,i)=>{const B=Be,se=Fe,H=Ne,J=ae;return S(),oe(ie,null,{default:t(()=>[e(D,{class:"mt-5"},{default:t(()=>[e(j,{cols:"3"},{default:t(()=>[e(Q,{label:"Documento",modelValue:a(z).documento,"onUpdate:modelValue":i[0]||(i[0]=P=>a(z).documento=P)},null,8,["modelValue"])]),_:1}),e(j,{cols:"4"},{default:t(()=>[e(Q,{label:"Pessoa",modelValue:a(z).nome,"onUpdate:modelValue":i[1]||(i[1]=P=>a(z).nome=P)},null,8,["modelValue"])]),_:1}),m("div",null,[m("img",{class:"mt-3",src:fe,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Pe})]),m("div",null,[m("img",{class:"mt-3 ml-2",src:ne,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Ae})])]),_:1}),e(D,null,{default:t(()=>[e(j,{cols:"4"},{default:t(()=>[e(pe,{label:"Selecione a Pessoa",modelValue:a(z).pessoa,"onUpdate:modelValue":i[2]||(i[2]=P=>a(z).pessoa=P),items:a($),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(j,{cols:"3"},{default:t(()=>[e(pe,{label:"Papel",modelValue:a(z).papeis,"onUpdate:modelValue":i[3]||(i[3]=P=>a(z).papeis=P),items:a(M),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),m("div",null,[m("img",{class:"mt-3",src:ne,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:qe})])]),_:1}),e(D,null,{default:t(()=>[e(j,null,{default:t(()=>[e(_e,{style:{height:"465px"},headers:Ve,items:a(V)},{"item.actions":t(({item:P})=>[e(D,null,{default:t(()=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:de=>ze(P),title:"Visualizar Ficha"},rt,8,ot),m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:de=>De(P),class:"mr-2",title:"Alterar Papel"},it,8,nt),m("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:de=>Se(P),title:"Deletar Pessoa"},[P.excluido?(S(),N("img",ut)):(S(),N("img",dt))],8,ct),m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:de=>Oe(P),title:"Selecionar Representante"},_t,8,mt)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(B,{show:a(g),onClose:i[4]||(i[4]=P=>g.value=!1)},null,8,["show"]),e(se,{representante_nome:a(q),representantes:a(T),ato_id:a(o),show:a(d),onClose:i[5]||(i[5]=P=>d.value=!1),onUpdateRepresentante:Te},null,8,["representante_nome","representantes","ato_id","show"]),e(H,{representante_nome:a(q),ato_token:a(C),ato_id:a(f),show:a(_),onClose:i[6]||(i[6]=P=>_.value=!1),onUpdatePapel:Ee},null,8,["representante_nome","ato_token","ato_id","show"]),e(we,{modelValue:a(s),"onUpdate:modelValue":i[8]||(i[8]=P=>re(s)?s.value=P:null),width:"600"},{default:t(()=>[e(ce,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(Ie,{src:a(R)},null,8,["src"]),e(F,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:i[7]||(i[7]=P=>s.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(D,null,{default:t(()=>[e(J,{onClick:je},{default:t(()=>[e(F,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},ft={key:0,class:"loading-overlay"},gt={class:"mt-4 mb-4 justify-end fixed-buttons",style:{bottom:"0",left:"0",width:"100%","background-color":"#fff",padding:"16px","z-index":"1000"}},yt="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",ht={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(L,{emit:r}){const x=L;Me("DocumentEditorContainer",[Ge,He]);const y=X(),{$toast:c}=ee(),l=te(),h=W(),A=r;$e(`${y.public.docEditor}`);const k=`${y.public.managemant}/download`,I=`${y.public.managemant}/upload`,E=n(null),p=n(!1),u=async d=>{try{const g=await fetch(d);if(!g.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await g.blob()}catch(g){return console.error(g),c.error("Erro ao carregar o documento inicial."),null}},w=async()=>{p.value=!0;try{const{data:d,status:g}=await b(k,{method:"POST",body:{bucket:"qvgjz",path:"ato/fKumj/66398.sfdt"}},"$5jxI4TvFse"),s=d.value,_=await u(s);if(_){const T=new FileReader;T.onload=()=>{const q=T.result;E.value.ej2Instances.documentEditor.open(q)},T.readAsText(_)}else c.error("Erro ao carregar o documento do MinIO.")}catch(d){console.error("Erro ao carregar o documento:",d),c.error("Erro ao carregar o documento.")}finally{p.value=!1}},$=async()=>{const d=E.value.ej2Instances.documentEditor;await d.saveAsBlob("Docx");const g=await d.saveAsBlob("Sfdt"),s=new FileReader;s.onload=()=>{const _=s.result,q=E.value.ej2Instances.documentEditor.pageCount;A("doc",_),A("page",q)},s.readAsText(g)},V=async()=>{p.value=!0;try{const g=await E.value.ej2Instances.documentEditor.saveAsBlob("Docx"),s=new FormData;s.append("file",g,"anexo.docx"),s.append("cartorio_token",G("user-data").value.cartorio_token),s.append("token",x.ato_token),s.append("tipo","ato_minuta");const{data:_,status:T}=await b(I,{method:"POST",body:s},"$dvNFfvmIJC");if(T.value==="success"){c.success("Documento enviado!");const o=E.value.ej2Instances.documentEditor.pageCount;$(),A("page",o)}else c.error("Erro ao enviar documento para o sistema.")}catch(d){c.error("Erro ao salvar documento."),console.error(d)}finally{p.value=!1}},M=()=>{const d=h.query.origem||"criar",g=h.query.id;d==="atualizar"?l.push(`/os/atualizar/${g}`):l.push("/os/criar-registro")};return Ue(async()=>{await w(),$()}),(d,g)=>{const s=ae;return S(),N(ve,null,[e(a(ke),{height:"900px",ref_key:"documentEditorContainer",ref:E,serviceUrl:yt,enableToolbar:!0,enableWordExport:!0},null,512),a(p)?(S(),N("div",ft,[e(Re,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):xe("",!0),m("div",gt,[e(F,{size:"large",color:"green",onClick:V,disabled:a(p)},{default:t(()=>[O(" Salvar ")]),_:1},8,["disabled"]),e(s,{class:"ml-4"},{default:t(()=>[e(F,{size:"large",onClick:M,color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})])],64)}}},bt={class:"d-flex align-center justify-center"},xt=["innerHTML"],$t={__name:"Livro",props:{pages:{type:Number,required:!0},document:{type:String,required:!0}},async setup(L){let r,x;const y=L,c=X();$e(`${c.public.docEditor}`);const{$toast:l}=ee(),h=te(),A=W(),k=`${c.public.managemant}/download`,I=`${c.public.managemant}/lavrarAto`,E=n("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),p=n(!1),u=n(null),w=n(null),$=n(null);[r,x]=K(()=>b(k,{method:"POST",body:{bucket:"qvgjz",path:"ato/fKumj/ato_minuta-2024-12-13T14:57:36.974Z"}},"$FnEbAJEARP")),r=await r,x();const V=async()=>{try{const{data:s,status:_}=await b(I,{method:"POST",body:{ato_token:A.query.ato_token_edit,qtd_paginas:y.pages}},"$7ljqltMqa0");_.value==="success"?(u.value=s.value,w.value=s.value[0].selo,l.success("Ato lavrado com sucesso!")):l.error("Falha ao lavrar o ato.")}catch{l.error("Erro ao conectar com o servidor.")}},M=()=>{p.value=!1,V()},d=function(){$.value.ej2Instances.documentEditor.open(y.document)},g=()=>{const s=A.query.origem||"criar",_=A.query.id;s==="atualizar"?h.push(`/os/atualizar/${_}`):h.push("/os/criar-registro")};return(s,_)=>{const T=Ke;return S(),N(ve,null,[e(D,null,{default:t(()=>[e(j,null,{default:t(()=>[e(a(ke),{restrictEditing:!0,enableToolbar:!1,created:y.document?d:null,ref_key:"documentEditorContainer",ref:$,height:"850px",width:"850px"},null,8,["created"])]),_:1}),e(j,null,{default:t(()=>[m("div",bt,[m("div",null,[m("img",{onClick:_[0]||(_[0]=q=>p.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:Je}),a(u)?(S(),oe(ce,{key:0,class:"ml-8 mt-5"},{default:t(()=>[e(D,{"no-gutters":""},{default:t(()=>[e(j,null,{default:t(()=>[e(he,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[O(" Livro: "+me(a(u)[0].livro_numero),1)]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(he,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[O(" Folhas : "+me(a(u)[0].pagina_inicial)+" Á "+me(a(u)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),m("div",{innerHTML:a(w)},null,8,xt)]),_:1})):xe("",!0)])])]),_:1})]),_:1}),e(F,{color:"red",size:"large",onClick:g},{default:t(()=>[O("Voltar")]),_:1}),e(T,{show:a(p),condMessage:a(E),onClose:_[1]||(_[1]=q=>p.value=!1),onConfirm:M},null,8,["show","condMessage"])],64)}}},kt=["onClick"],wt={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},Vt={key:1,src:ge,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Ct={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(L){let r,x;const y=te(),c=W(),l=X(),{$toast:h}=ee(),A=`${l.public.managemant}/listarEscrevente`;`${l.public.managemant}`;const k=`${l.public.managemant}/createAtosObservacao`,I=`${l.public.managemant}/updateAtosObservacao`,E=`${l.public.managemant}/getAtosObservacaoById`,p=n(G("user-data").value.cartorio_token),u=n([]),w=n([]),$=[{title:"Data",align:"start",key:"created"},{title:"Escrevente",align:"start",key:"users.nome"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],V=le({observacao:""}),M={observacao:{required:Ye.withMessage("O campo é obrigatório",Ze)}},d=Qe(M,V),{data:g}=([r,x]=K(()=>b(`${E}/${c.query.ato_id}`,{method:"GET"},"$HyzoO40swN")),r=await r,x(),r);u.value=g.value.map(o=>({...o,created:be(o.created,"dd/mm/yyyy hh:mm")}));async function s(){if(V.observacao.trim()===""){h.error("O campo de observação está vazio.");return}if(await d.value.$validate()){const{data:o,error:f,status:U}=await b(k,{method:"POST",body:{ato_id:c.query.ato_id,observacao:V.observacao,user_id:G("user-data").value.usuario_id}},"$gnHMo4uCXD");U.value==="success"&&(u.value.push({created:be(o.value.created,"dd/mm/yyyy hh:mm"),observacao:o.value.observacao,id:o.value.id,escrevente:G("user-data").value.nome}),V.observacao="",h.success("Observação registrada com sucesso"))}else h.error("Preencha os campos obrigatórios.")}async function _(o){o.excluido=!o.excluido;try{await b(`${I}/${o.id}`,{method:"PUT",body:JSON.stringify({excluido:o.excluido})},"$sP9AKdd3Ky")}catch(f){console.error("Erro ao excluir observação:",f)}}const{data:T}=([r,x]=K(()=>b(A,{method:"POST",body:{cartorio_token:p}},"$HL9pndqGh0")),r=await r,x(),r);w.value=T.value[0].func_json_escreventes;const q=()=>{const o=c.query.origem||"criar",f=c.query.id;o==="atualizar"?y.push(`/os/atualizar/${f}`):y.push("/os/criar-registro")};return(o,f)=>{const U=ae;return S(),oe(ie,null,{default:t(()=>[e(D,{class:"mt-5"},{default:t(()=>[e(Q,{label:"Observação",modelValue:V.observacao,"onUpdate:modelValue":f[0]||(f[0]=C=>V.observacao=C),required:"","error-messages":a(d).observacao.$errors.length>0?a(d).observacao.$errors.map(C=>C.$message):[],onBlur:a(d).observacao.$touch,onInput:a(d).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),m("div",null,[m("img",{class:"btn-pointer ml-2",src:ne,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:s})])]),_:1}),e(D,null,{default:t(()=>[e(j,null,{default:t(()=>[e(_e,{style:{height:"465px"},headers:$,items:u.value},{"item.actions":t(({item:C})=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:R=>_(C),title:"Deletar Observação"},[C.excluido?(S(),N("img",wt)):(S(),N("img",Vt))],8,kt)]),_:1},8,["items"])]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(U,{onClick:q},{default:t(()=>[e(F,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Pt=m("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:We,alt:"Escanear"},null,-1),At=[Pt],Et=m("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ne,alt:"Criar"},null,-1),Tt=[Et],qt=["onClick"],zt=m("img",{style:{width:"30px",height:"30px"},src:fe,alt:"Visualizar"},null,-1),Ot=[zt],Dt=["onClick"],St={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},jt={key:1,src:ge,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},It={__name:"Anexos",async setup(L){let r,x;const y=X(),{$toast:c}=ee(),l=te(),h=W(),A=`${y.public.biometria}/run-scanner`,k=`${y.public.managemant}/atos_anexos`,I=`${y.public.managemant}/atos_anexos`,E=`${y.public.managemant}/atos_anexos`,p=n(!1),u=n([]),w=le({descricao:""}),$=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}],{data:V}=([r,x]=K(()=>b(`${E}/${h.query.ato_id}`,{method:"GET"},"$AOZpbz65MA")),r=await r,x(),r);u.value=V.value;async function M(){try{await d(),await g()}catch(o){console.error("Erro ao executar scanner ou listar arquivos:",o)}}async function d(){try{const{data:o}=await b(A,{method:"GET"},"$KttjFhHivJ")}catch(o){c.error("Erro ao acionar o scanner:",o)}}async function g(){try{const{data:o,status:f}=await b("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:h.query.ato_token_edit,cartorio_token:G("user-data").value.cartorio_token}},"$TqQrsgxUkd")}catch(o){console.error("Erro ao enviar o arquivo:",o)}}const s=async()=>{p.value=!0},_=async()=>{const{data:o,error:f,status:U}=await b(k,{method:"POST",body:{ato_id:h.query.ato_id,descricao:w.descricao,user_id:G("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$KDhIYzGKzM");U.value==="success"&&(c.success("Anexo registrado com sucesso!"),u.value.push(o.value))};async function T(o){o.excluido=!o.excluido;try{await b(`${I}/${o.id}`,{method:"PUT",body:JSON.stringify({excluido:o.excluido})},"$cdoFBGO0Ti")}catch(f){console.error("Erro ao excluir pessoa:",f)}}const q=()=>{const o=h.query.origem||"criar",f=h.query.id;o==="atualizar"?l.push(`/os/atualizar/${f}`):l.push("/os/criar-registro")};return(o,f)=>{const U=ae;return S(),oe(ie,null,{default:t(()=>[e(D,null,{default:t(()=>[e(j,{cols:"5"},{default:t(()=>[e(Q,{modelValue:a(w).descricao,"onUpdate:modelValue":f[0]||(f[0]=C=>a(w).descricao=C),label:"Descrição"},null,8,["modelValue"])]),_:1}),m("div",{onClick:M,title:"Escanear"},At),m("div",{onClick:_,title:"Criar"},Tt)]),_:1}),e(_e,{headers:$,items:a(u),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:C})=>[e(D,null,{default:t(()=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:R=>s(C),title:"Visualizar Anexo"},Ot,8,qt),m("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:R=>T(C),title:"Deletar Pessoa"},[C.excluido?(S(),N("img",St)):(S(),N("img",jt))],8,Dt)]),_:2},1024)]),_:1},8,["items"]),e(we,{modelValue:a(p),"onUpdate:modelValue":f[2]||(f[2]=C=>re(p)?p.value=C:null),width:"600"},{default:t(()=>[e(ce,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(F,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:f[1]||(f[1]=C=>p.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(U,{onClick:q},{default:t(()=>[e(F,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})}}},Mt=m("h1",{class:"mb-2"},"Procuração",-1),aa={__name:"[id]",async setup(L){let r,x;const y=n(null),c=n(null),l=n(null),h=X(),A=W(),k=`${h.public.managemant}/listarSituacoes`,I=`${h.public.managemant}/getAtos`,E=n(G("user-data").value.cartorio_token),p=A.query.id?{ato_token:"xkyaA"}:{cartorio_token:E},u=n([]),w=n([]);async function $(){try{const{data:s}=await b(`${I}/${A.query.ato_id}`,{method:"GET"},"$j0JpHHj7PB");w.value=s.value}catch(s){console.log(s)}}[r,x]=K(()=>$()),await r,x();const{data:V,status:M}=([r,x]=K(()=>b(k,{method:"POST",body:p},"$mGbp7gAEjS")),r=await r,x(),r);u.value=V.value;const d=s=>{y.value=s},g=s=>{c.value=s};return(s,_)=>{const T=at,q=vt,o=ht,f=$t,U=Ct,C=It;return S(),N(ve,null,[Mt,e(ce,{width:"1300"},{default:t(()=>[e(et,{modelValue:a(l),"onUpdate:modelValue":_[0]||(_[0]=R=>re(l)?l.value=R:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(Y,{value:"dados"},{default:t(()=>[O("Dados")]),_:1}),e(Y,{value:"partes"},{default:t(()=>[O("Partes")]),_:1}),e(Y,{value:"minuta"},{default:t(()=>[O("Minuta")]),_:1}),e(Y,{value:"livro"},{default:t(()=>[O("Livro")]),_:1}),e(Y,{value:"observacao"},{default:t(()=>[O("Observações")]),_:1}),e(Y,{value:"anexo"},{default:t(()=>[O("Anexos")]),_:1})]),_:1},8,["modelValue"]),e(tt,{modelValue:a(l),"onUpdate:modelValue":_[1]||(_[1]=R=>re(l)?l.value=R:null)},{default:t(()=>[e(Z,{value:"dados"},{default:t(()=>[e(T,{item_dados:a(w),item_situacoes:a(u)},null,8,["item_dados","item_situacoes"])]),_:1}),e(Z,{value:"partes"},{default:t(()=>[e(q)]),_:1}),e(Z,{value:"minuta"},{default:t(()=>[e(o,{onPage:d,onDoc:g})]),_:1}),e(Z,{value:"livro"},{default:t(()=>[e(f,{pages:a(y),document:a(c)},null,8,["pages","document"])]),_:1}),e(Z,{value:"observacao"},{default:t(()=>[e(U)]),_:1}),e(Z,{value:"anexo"},{default:t(()=>[e(C)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{aa as default};
