import{V as D,a as I}from"./oBLl7Jua.js";import{_ as M,p as v,r as c,g as j,m as q,o as V,C as A,w as a,b as t,d as f,s as o,v as w,c1 as L,a as U,c as b,y as E,J as H,z as x,A as J}from"./BMpR6Kkb.js";import{u as y}from"./DJReksQT.js";import{V as W,a as X,c as Z}from"./B3iwCL_0.js";import{V as G}from"./DhKTmLgc.js";import{V as K}from"./CHOcgw8N.js";import{V as C}from"./CXAsmq6V.js";import{V as Q}from"./bpzHQSni.js";const Y={class:"d-flex justify-center align-center"},ee={key:0,class:"ml-5 mt-15"},te=["src"],ae={__name:"FichaCard",props:{show:Boolean,item:Object},emits:["close","confirmar"],setup(B,{emit:T}){const m=B,_=J(),$=`${_.public.managemant}/getLinkTipo`,R=`${_.public.managemant}/download`,z=v(()=>!!u.value),F=v(()=>!!d.value),r=c(m.show),u=c(null),d=c(null),l=c(.8),s=c(0),g=T,S=v(()=>(l.value-1)*-50);j(()=>m.show,async n=>{r.value=n,u.value=null,await O()});const N=()=>{g("confirmar"),k()},O=async()=>{var h;if(!m.item.id)return;const{data:n}=await y($,{method:"POST",body:{tipo:"ficha",id:m.item.id}},"$4omB3S9Tg3");if(!((h=n.value)!=null&&h.link))return;const{data:e}=await y(R,{method:"POST",body:{bucket:q("user-data").value.cartorio_token,path:n.value.link}},"$yanMHqBuqW"),p=n.value.link,i=e.value;/\.(tr7|tiff)$/i.test(p)?u.value=i:d.value=i},k=()=>{r.value=!1,u.value=null,d.value=null,l.value=.8,s.value=0,g("close")},P=()=>{s.value+=90,s.value>=360&&(s.value=0)};return(n,e)=>{const p=I;return V(),A(Q,{persistent:"",modelValue:o(r),"onUpdate:modelValue":e[1]||(e[1]=i=>w(r)?r.value=i:null),"max-width":"850"},{default:a(()=>[t(W,null,{default:a(()=>[t(X,{class:"text-h5"},{default:a(()=>e[2]||(e[2]=[f("Ficha de Firma")])),_:1}),t(G,null,{default:a(()=>[t(K,null,{default:a(()=>[t(C,{cols:"10"},{default:a(()=>[t(D,{modelValue:o(l),"onUpdate:modelValue":e[0]||(e[0]=i=>w(l)?l.value=i:null),min:"0.5",max:"1.1",step:"0.1",label:"Zoom",class:"mt-3"},null,8,["modelValue"])]),_:1}),t(C,{cols:"2"},{default:a(()=>[t(L,{class:"ml-6",size:"50px",onClick:P},{default:a(()=>e[3]||(e[3]=[f("mdi-rotate-right")])),_:1})]),_:1})]),_:1})]),_:1}),U("div",Y,[o(z)?(V(),b("div",ee,[t(p,{"tiff-url":o(u),"is-modal":!0,"zoom-level":o(l),"rotation-degree":o(s),"translate-x":o(S)},null,8,["tiff-url","zoom-level","rotation-degree","translate-x"])])):o(F)?(V(),b("img",{key:1,src:o(d),style:E({width:"70%",height:"70%",transform:`scale(${o(l)}) rotate(${o(s)}deg)`})},null,12,te)):H("",!0)]),t(Z,null,{default:a(()=>[t(x,{style:{"background-color":"#429946",color:"white"},onClick:N},{default:a(()=>e[4]||(e[4]=[f("Reconhecer")])),_:1}),t(x,{style:{"background-color":"red",color:"white"},onClick:k},{default:a(()=>e[5]||(e[5]=[f("Voltar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},me=M(ae,[["__scopeId","data-v-68117252"]]);export{me as _};
