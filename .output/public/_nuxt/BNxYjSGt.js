import{_ as U}from"./DrUMFZEv.js";import{f as D,r as y,C as E,J as M,u as P,s as S,y as I,H as K,o as j,j as G,w as t,b as o,V as _,i as l,v as h,d as k,l as L}from"./CDlHCEl8.js";import{f as q}from"./B_1S8mr-.js";import{u as H}from"./fvJrwL2f.js";import{V as w}from"./CzO7qxOb.js";import{V as i}from"./DwHHh2ji.js";import{V as N}from"./C5k2ji7Q.js";import{V as J}from"./3vQEY0SP.js";const ae={__name:"SeparacaoDivorcio",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0},tabEvent:{type:Number,default:0}},async setup(A){let m,p;const u=A,d=L(),a=D({dt_casamento:null,tabvalores_regimecasamento_id:null,qtd_filhos_maiores:null,qtd_filhos_menores:null,responsavel_menores_id:null}),f=y([]),c=E(),v=M(),{$toast:B}=P(),R=`${d.public.auth}/service/gerencia/regime_casamento`,x=`${d.public.auth}/service/gerencia/getAtosPessoaById/${u.ato_id}`,z=`${d.public.managemant}/updateAtos`,{data:b}=([m,p]=S(()=>q(R,{method:"GET"})),m=await m,p(),m);async function C(){const{data:s}=await q(x,{method:"GET"});s.value&&(V.value=s.value)}const V=y([]),$=I(()=>{var s;return((s=V.value)==null?void 0:s.map(e=>{var n;return{id:e.pessoa_id,nome:((n=e.pessoa)==null?void 0:n.nome)||"Sem nome"}}))||[]});b.value&&(f.value=b.value);const T=()=>{const s=v.query.origem||"criar",e=v.query.id;switch(s){case"atualizar":case"vizualizar":c.push(`/os/atualizar/${e}`);break;case"atualizar-lista":case"vizualizar-lista":c.push("/atos/lista");break;default:c.push("/os/criar-registro");break}};async function F(){const{data:s,error:e,status:n}=await H(`${z}/${Number.parseInt(u.ato_id)}`,{method:"PUT",body:{dt_casamento:a.dt_casamento,tabvalores_regimecasamento_id:a.tabvalores_regimecasamento_id,qtd_filhos_maiores:Number(a.qtd_filhos_maiores),qtd_filhos_menores:Number(a.qtd_filhos_menores),responsavel_menores_id:a.responsavel_menores_id}},"$2MFTkguIXN");n.value==="success"&&B.success("Divórcio salvo com sucesso")}K(()=>u.tabEvent,async()=>{await C()},{immediate:!0});const g=s=>{const e=["Backspace","Tab","ArrowLeft","ArrowRight","Delete"];!/[0-9]/.test(s.key)&&!e.includes(s.key)&&s.preventDefault()};return(s,e)=>{const n=U;return j(),G(J,{class:"mt-5"},{default:t(()=>[o(w,{dense:""},{default:t(()=>[o(i,{cols:"12",sm:"4",md:"3"},{default:t(()=>[o(_,{modelValue:l(a).dt_casamento,"onUpdate:modelValue":e[0]||(e[0]=r=>l(a).dt_casamento=r),type:"date",label:"Data Casamento"},null,8,["modelValue"])]),_:1}),o(i,{cols:"12",sm:"6",md:"4"},{default:t(()=>[o(N,{label:"Regime Bens",modelValue:l(a).tabvalores_regimecasamento_id,"onUpdate:modelValue":e[1]||(e[1]=r=>l(a).tabvalores_regimecasamento_id=r),items:l(f),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),o(i,{cols:"12",sm:"6",md:"3"},{default:t(()=>[o(_,{label:"Filhos Maiores",modelValue:l(a).qtd_filhos_maiores,"onUpdate:modelValue":e[2]||(e[2]=r=>l(a).qtd_filhos_maiores=r),modelModifiers:{number:!0},type:"number",min:"0",onKeydown:g},null,8,["modelValue"])]),_:1}),o(i,{cols:"12",sm:"6",md:"3"},{default:t(()=>[o(_,{label:"Filhos Menores",modelValue:l(a).qtd_filhos_menores,"onUpdate:modelValue":e[3]||(e[3]=r=>l(a).qtd_filhos_menores=r),type:"number",min:"0",onKeydown:g},null,8,["modelValue"])]),_:1}),o(i,{cols:"12",sm:"6",md:"4"},{default:t(()=>[o(N,{label:"Responsável",modelValue:l(a).responsavel_menores_id,"onUpdate:modelValue":e[4]||(e[4]=r=>l(a).responsavel_menores_id=r),items:l($),"item-title":"nome","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),o(w,{class:"mt-5",justify:"start",align:"center"},{default:t(()=>[o(i,{cols:"auto"},{default:t(()=>[o(n,{onClick:T},{default:t(()=>[o(h,{size:"large",color:"red"},{default:t(()=>e[5]||(e[5]=[k("Voltar")])),_:1})]),_:1})]),_:1}),o(i,{cols:"auto"},{default:t(()=>[o(h,{class:"ml-2",onClick:F,size:"large",color:"green"},{default:t(()=>e[6]||(e[6]=[k("Salvar")])),_:1})]),_:1})]),_:1})]),_:1})}}};export{ae as _};
