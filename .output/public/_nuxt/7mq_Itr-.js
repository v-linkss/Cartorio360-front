import{_ as T}from"./BEkt7YfX.js";import{r,u as i,m as q,n as A,p as B,q as E,o as O,w as o,a as P,b as a,V as C,s as l,v as b,d as g,x as F,y as M}from"./CXy-O3pO.js";import{u as y}from"./D9ECQSBA.js";import{V as d}from"./BxTbtGjW.js";import{V as n}from"./fA9_M00z.js";import{V as R}from"./3l9EdeBY.js";import{V as z}from"./DpcPpjGE.js";import{V as I}from"./DNIXRYd8.js";import"./B0Yjsr4p.js";import"./BFhcHmwz.js";import"./BK9WUwmv.js";import"./BpyMifUh.js";const ea={__name:"index",async setup(G){let c,p;const _=E(),k=`${_.public.managemant}/caixasLanctos`,w=`${_.public.managemant}/classes-despesas`,v=r(i("user-data").value||{}),D=r(i("user-data").value.cartorio_id||null),S=r(i("caixa-service").value)||null;r(i("auth_token").value);const U=r(i("user-data").value.cartorio_token)||null,f=r([]),{$toast:V}=q(),s=r({data:null,classe_despesa_id:null,descricao:"",valor:null}),x={cartorio_token:U.value};console.log("token",x);const{data:$}=([c,p]=A(()=>y(`${w}`,{method:"POST",body:x},"$lCSZvX2UQJ")),c=await c,p(),c);f.value=$.value||[];const N=async()=>{try{const u={data:s.value.data,classe_despesa_id:s.value.classe_despesa_id,descricao:s.value.descricao,valor:s.value.valor,user_id:v.value.usuario_id,user_alteracao_id:v.value.usuario_id,cartorio_id:D.value,caixa_id:S.value.caixa_id},{data:e,error:m}=await y(k,{method:"POST",body:u},"$MWUNioyuGO");if(console.log("data:",e.value),m.value)throw new Error(m.value.message||"Erro desconhecido na API");V.success("Caixa cadastrada com sucesso"),M("/caixas/lista")}catch(u){console.error("Erro ao criar caixa:",u),V.error(u.message||"Erro ao cadastrar caixa")}};return(u,e)=>{const m=T;return O(),B(I,null,{default:o(()=>[e[6]||(e[6]=P("h1",{class:"mb-5"},"Criar lançamento do caixa Caixa",-1)),a(z,{onSubmit:F(N,["prevent"])},{default:o(()=>[a(d,{cols:"6"},{default:o(()=>[a(n,null,{default:o(()=>[a(C,{modelValue:l(s).data,"onUpdate:modelValue":e[0]||(e[0]=t=>l(s).data=t),type:"date",label:"Data"},null,8,["modelValue"])]),_:1})]),_:1}),a(n,null,{default:o(()=>[a(d,{cols:"6"},{default:o(()=>[a(R,{modelValue:l(s).classe_despesa_id,"onUpdate:modelValue":e[1]||(e[1]=t=>l(s).classe_despesa_id=t),items:l(f),"item-title":"descricao","item-value":"id",label:"Serviço",required:"",outlined:""},null,8,["modelValue","items"])]),_:1})]),_:1}),a(n,null,{default:o(()=>[a(d,{cols:"6"},{default:o(()=>[a(m,{required:"",modelValue:l(s).valor,"onUpdate:modelValue":e[2]||(e[2]=t=>l(s).valor=t),label:"Valor"},null,8,["modelValue"])]),_:1})]),_:1}),a(n,null,{default:o(()=>[a(d,{cols:"6"},{default:o(()=>[a(C,{modelValue:l(s).descricao,"onUpdate:modelValue":e[3]||(e[3]=t=>l(s).descricao=t),label:"Descrição",required:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1}),a(n,null,{default:o(()=>[a(d,null,{default:o(()=>[a(b,{size:"large",color:"red",to:"/caixas/caixasRecebimentoOs"},{default:o(()=>e[4]||(e[4]=[g("Voltar")])),_:1}),a(b,{type:"submit",class:"ml-4",size:"large",color:"green"},{default:o(()=>e[5]||(e[5]=[g("Salvar")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{ea as default};
