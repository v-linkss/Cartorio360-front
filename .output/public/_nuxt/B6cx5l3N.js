import{_ as ae}from"./9FT2BGcq.js";import{n as Q,q as X,u as ee,r as l,A as F,s as ne,B as Z,o as h,v as U,w as t,b as e,x as o,V as oe,y as G,d as A,z as te,a as d,c as K,C as se,t as de,D as Re,E as Ie,G as je,H as W,I as $e,J as xe}from"./w3NWm4HW.js";import{u as V}from"./DOLxPJ5L.js";import{c as Ve,r as we,u as Ce}from"./DzWo8pPo.js";import{V as S}from"./Ba9CZdDb.js";import{V as B}from"./BlVTgBiw.js";import{V as re}from"./Dat9v9YZ.js";import{V as ie}from"./V8CB7uvp.js";import{_ as Ne,a as Y,V as Fe,c as H,b as Le}from"./xFMdNX_5.js";import{_ as We,a as Ge,b as Je,T as Ke,W as Ye,r as Pe,D as Ee,c as He,d as Ze,e as Qe}from"./DPDjNT_L.js";import{_ as me}from"./DEOpz1QL.js";import{_ as le,V as pe,a as _e,b as ve,c as Te}from"./DiC6tfvJ.js";import{V as he,a as ue,b as Xe,c as et,d as tt}from"./D_bWhZb6.js";import{V as ot}from"./ARp0-J0n.js";import{_ as at}from"./-MLJy1Cb.js";import{V as ke}from"./Bcwz0w56.js";import{_ as st}from"./DfjuBLsA.js";import"./CsBA56Xu.js";import"./CHF_v-Wu.js";import"./CmjBZBZA.js";import"./Bvu8p2Ty.js";const rt={__name:"Dados",props:{ato_token:{type:String,required:!0}},emits:["saved"],async setup(L,{emit:u}){let c,f;const w=L,E=u,g=Q(),m=X(),O=te(),{$toast:b}=ee(),q=`${O.public.managemant}/listarSituacoes`,I=`${O.public.managemant}/createAtos`,D=`${O.public.managemant}/getAtosTiposByToken`,z=l(F("user-data").value.cartorio_token),j=l(F("user-service").value.id).value||l(F("user-service").value).value,k=l([]),r=ne({dt_abertura:null,status:"EM EDIÇÃO",mne:null}),C={status:{required:Ve.withMessage("O campo é obrigatorio",we)}},a=Ce(C,r),{data:x}=([c,f]=Z(()=>V(`${D}/${w.ato_token}`,{method:"GET"},"$9ZmTYsLk0K")),c=await c,f(),c);async function s(){if(await a.value.$validate()){const{data:n,error:p,status:J}=await V(I,{method:"POST",body:{ato_tipo_id:x.value.id,cartorio_id:F("user-data").value.cartorio_id,ordemserv_id:j,status:r.status,dt_abertura:r.dt_abertura,mne:r.mne,user_id:F("user-data").value.usuario_id,user_alteracao_id:F("user-data").value.usuario_id}},"$hyq5YcBEjF");J.value==="success"&&(b.success("Ato registrado com sucesso!"),E("saved",{id:n.value.id,token:n.value.token}))}else b.error("Preencha os campos obrigatorios.")}const{data:_}=([c,f]=Z(()=>V(q,{method:"POST",body:{cartorio_token:z.value}},"$S3qwbpImEh")),c=await c,f(),c);k.value=_.value;const M=()=>{const n=m.query.origem||"criar",p=m.query.id;n==="atualizar"?g.push(`/os/atualizar/${p}`):g.push("/os/criar-registro")};return(n,p)=>{const J=ae;return h(),U(ie,null,{default:t(()=>[e(S,{class:"mt-5"},{default:t(()=>[e(B,{cols:"3"},{default:t(()=>[e(re,{label:"Situação",modelValue:o(r).status,"onUpdate:modelValue":p[0]||(p[0]=v=>o(r).status=v),items:o(k),"item-title":"descricao","item-value":"descricao",required:"","error-messages":o(a).status.$errors.map(v=>v.$message),onBlur:o(a).status.$touch,onInput:o(a).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(B,{cols:"5"},{default:t(()=>[e(oe,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:o(r).mne,"onUpdate:modelValue":p[1]||(p[1]=v=>o(r).mne=v)},null,8,["modelValue"])]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(B,{cols:"2"},{default:t(()=>[e(oe,{modelValue:o(r).dt_abertura,"onUpdate:modelValue":p[2]||(p[2]=v=>o(r).dt_abertura=v),type:"date",label:"Data Lavratura",disabled:"",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(S,{class:"mb-3"},{default:t(()=>[e(J,{onClick:M},{default:t(()=>[e(G,{size:"large",color:"red"},{default:t(()=>[A("Voltar")]),_:1})]),_:1}),e(G,{class:"ml-10",onClick:s,size:"large",color:"green"},{default:t(()=>[A("Salvar")]),_:1})]),_:1})]),_:1})}}},lt=["onClick"],nt=d("img",{style:{width:"30px",height:"30px"},src:me,alt:"Visualizar"},null,-1),it=[nt],ut=["onClick"],ct=d("img",{style:{width:"30px",height:"30px"},src:Te,alt:"Visualizar"},null,-1),dt=[ct],mt=["onClick"],pt={key:0,style:{width:"30px",height:"30px"},src:_e,alt:"Visualizar",title:"Reativar"},_t={key:1,src:ve,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},vt=["onClick"],ft=d("img",{style:{width:"30px",height:"30px"},src:Je,alt:"Visualizar"},null,-1),gt=[ft],yt={__name:"Partes",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(L){let u,c;const f=L,w=Q(),E=X(),g=te(),{$toast:m}=ee(),O=`${g.public.managemant}/pesquisarPessoas`,b=`${g.public.managemant}/listarPapeis`,q=`${g.public.managemant}/getLinkTipo`,I=`${g.public.managemant}/createAtosPessoa`,D=`${g.public.managemant}/getAtosPessoaById`,z=`${g.public.managemant}/updateAtosPessoa`,j=l(F("user-data").value.cartorio_token),k=l([]),r=l([]),C=l([]),a=l(!1),x=l(!1),s=l(!1),_=l(!1),M=l(null),n=l(null),p=l(null),J=l(null);l(null);const v=l(null),y=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],T=ne({papeis:null,nome:null,pessoa:null,documento:null}),{data:fe}=([u,c]=Z(()=>V(b,{method:"POST",body:{tipo_ato_token:f.ato_token}},"$fFKndZhA4W")),u=await u,c(),u);C.value=fe.value;async function P(){try{const{data:$,error:i}=await V(O,{method:"POST",body:{cartorio_token:j.value,documento:T.documento,nome:T.nome}},"$o3ZL1rvYrY");$.value.length>0?(k.value=$.value,T.pessoa=k.value[0]):k.value=[]}catch($){console.error("Erro na requisição",$)}}const ce=()=>{x.value=!0},Ae=$=>{r.value=r.value.map(i=>i.id===p.value?{...i,papel:{...i.papel,descricao:$}}:i)},Se=$=>{const i=r.value.find(N=>N.pessoa.id===J.value);i.representante.nome=$},Oe=async()=>{const $={pessoa:T.pessoa,papel:C.value.find(N=>N.id===T.papeis),representante:{nome:null}},i=await V(`${D}/${f.ato_id}`,{method:"GET"},"$kXSxUa4grs");for(const N of i.data.value)if(N.pessoa_id===T.pessoa.id&&N.ato_id===f.ato_id&&N.tipo_parte_id===T.papeis){m.error("Pessoa Já Registrada Com Esse Papel!");return}try{const{data:N,error:be,status:ge}=await V(I,{method:"POST",body:{ato_id:f.ato_id,pessoa_id:T.pessoa.id,tipo_parte_id:T.papeis,user_id:F("user-data").value.usuario_id}},"$So3qnQu7ek");ge.value==="success"?($.id=N.value.id,m.success("Pessoa Registrada com Sucesso!"),r.value.push($)):m.error("Erro ao registrar a pessoa!")}catch{m.error("Erro no servidor. Tente novamente.")}},qe=async $=>{s.value=!0,v.value=null;const{data:i}=await V(`${q}`,{method:"POST",body:{id:$.pessoa.id,tipo:"ficha"}},"$Q3kbIwtd9t");i.value&&i.value.link?v.value=`data:image/jpeg;base64,${i.value.link}`:v.value=null},ze=$=>{const i=r.value.filter(N=>N.pessoa.id!==$.pessoa.id).map(N=>({id:N.pessoa.id,nome:N.pessoa.nome}));p.value=$.id,M.value=i,a.value=!0,n.value=$.pessoa.nome,J.value=$.pessoa.id},Be=$=>{p.value=$.id,_.value=!0,n.value=$.pessoa.nome};async function De($){$.excluido=!$.excluido;try{await V(`${z}/${p.value}`,{method:"PUT",body:JSON.stringify({excluido:$.excluido})},"$9xStKwGd7o")}catch(i){console.error("Erro ao excluir pessoa:",i)}}const Me=()=>{const $=E.query.origem||"criar",i=E.query.id;$==="atualizar"?w.push(`/os/atualizar/${i}`):w.push("/os/criar-registro")};return($,i)=>{const N=Ne,be=We,ge=Ge,Ue=ae;return h(),U(ie,null,{default:t(()=>[e(S,{class:"mt-5"},{default:t(()=>[e(B,{cols:"3"},{default:t(()=>[e(oe,{label:"Documento",modelValue:o(T).documento,"onUpdate:modelValue":i[0]||(i[0]=R=>o(T).documento=R)},null,8,["modelValue"])]),_:1}),e(B,{cols:"4"},{default:t(()=>[e(oe,{label:"Pessoa",modelValue:o(T).nome,"onUpdate:modelValue":i[1]||(i[1]=R=>o(T).nome=R)},null,8,["modelValue"])]),_:1}),d("div",null,[d("img",{class:"mt-3",src:me,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:P})]),d("div",null,[d("img",{class:"mt-3 ml-2",src:le,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:ce})])]),_:1}),e(S,null,{default:t(()=>[e(B,{cols:"4"},{default:t(()=>[e(re,{label:"Selecione a Pessoa",modelValue:o(T).pessoa,"onUpdate:modelValue":i[2]||(i[2]=R=>o(T).pessoa=R),items:o(k),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(B,{cols:"3"},{default:t(()=>[e(re,{label:"Papel",modelValue:o(T).papeis,"onUpdate:modelValue":i[3]||(i[3]=R=>o(T).papeis=R),items:o(C),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),d("div",null,[d("img",{class:"mt-3",src:le,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Oe})])]),_:1}),e(S,null,{default:t(()=>[e(B,null,{default:t(()=>[e(pe,{style:{height:"465px"},headers:y,items:o(r)},{"item.actions":t(({item:R})=>[e(S,null,{default:t(()=>[d("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ye=>qe(R),title:"Visualizar Ficha"},it,8,lt),d("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ye=>Be(R),class:"mr-2",title:"Alterar Papel"},dt,8,ut),d("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ye=>De(R),title:"Deletar Pessoa"},[R.excluido?(h(),K("img",pt)):(h(),K("img",_t))],8,mt),d("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ye=>ze(R),title:"Selecionar Representante"},gt,8,vt)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(N,{show:o(x),onClose:i[4]||(i[4]=R=>x.value=!1)},null,8,["show"]),e(be,{representante_nome:o(n),representantes:o(M),ato_id:o(p),show:o(a),onClose:i[5]||(i[5]=R=>a.value=!1),onUpdateRepresentante:Se},null,8,["representante_nome","representantes","ato_id","show"]),e(ge,{representante_nome:o(n),ato_token:f.ato_token,ato_id:o(p),show:o(_),onClose:i[6]||(i[6]=R=>_.value=!1),onUpdatePapel:Ae},null,8,["representante_nome","ato_token","ato_id","show"]),e(he,{modelValue:o(s),"onUpdate:modelValue":i[8]||(i[8]=R=>se(s)?s.value=R:null),width:"600"},{default:t(()=>[e(ue,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(ot,{src:o(v)},null,8,["src"]),e(G,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:i[7]||(i[7]=R=>s.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(S,null,{default:t(()=>[e(Ue,{onClick:Me},{default:t(()=>[e(G,{size:"large",color:"red"},{default:t(()=>[A("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},ht=d("label",null,"Valor",-1),bt={style:{width:"800px","font-weight":"500"}},xt=["onClick"],kt=d("img",{style:{width:"30px",height:"30px"},src:me,alt:"Visualizar"},null,-1),$t=[kt],Vt=["onClick"],wt=d("img",{style:{width:"30px",height:"30px"},src:Te,alt:"Editar"},null,-1),Ct=[wt],Pt=["onClick"],Et={key:0,style:{width:"30px",height:"30px"},src:_e,alt:"Reativar",title:"Reativar"},Tt={key:1,src:ve,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},At=d("label",null,"Valor",-1),St={__name:"Bens",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(L){let u,c;const f=L,w=Q(),E=X(),g=te(),{$toast:m}=ee(),O=`${g.public.managemant}/atos_bens`,b=`${g.public.managemant}/atos_bens`,q=`${g.public.managemant}/atos_bens`,I=`${g.public.managemant}/listarTipoBens`,D=l(F("user-data").value.cartorio_token),z=l(F("user-data").value.usuario_id).value,j=l([]),k=l([]),r=l(!1),C=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"valor_mercado"},{align:"end",value:"actions"}],a=ne({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),x=async()=>{if(!a.vlr_alienacao&&!a.descricao){m.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:v,status:y}=await V(`${O}`,{method:"POST",body:{descricao:a.descricao,tipo_id:a.tipo_id,valor_mercado:a.vlr_alienacao,user_id:z,ato_id:Number.parseInt(f.ato_id),token:f.ato_token}},"$TVfAAEMyym");y.value==="success"&&(m.success("Bem registrado com sucesso!"),j.value.push(v.value),Object.assign(a,{vlr_alienacao:null,descricao:null,tipo_id:null}))},s=async v=>{const{status:y}=await V(`${b}/${v}`,{method:"PUT",body:{descricao:k.value.descricao,tipo_id:k.value.tipo_id,valor_mercado:k.value.valor_mercado}},"$TRbOfiOtJ9");y.value==="success"&&(m.success("Bem Atualizado com sucesso!"),r.value=!1)},_=v=>{const y=j.value.find(T=>T.id===v);y&&(k.value=y,r.value=!0)},{data:M}=([u,c]=Z(()=>V(`${I}`,{method:"POST",body:{cartorio_token:D.value,imoveis:!1}},"$rrOfkMLqML")),u=await u,c(),u);a.tiposBens=M.value;const{data:n}=([u,c]=Z(()=>V(`${q}/${f.ato_id}`,{method:"GET"},"$qhjPuJWFwD")),u=await u,c(),u);j.value=n.value;async function p(v){v.excluido=!v.excluido;try{await V(`${b}/${v.id}`,{method:"PUT",body:JSON.stringify({excluido:v.excluido})},"$1s7uo0EeAe")}catch(y){console.error("Erro ao excluir pessoa:",y)}}const J=()=>{const v=E.query.origem||"criar",y=E.query.id;v==="atualizar"?w.push(`/os/atualizar/${y}`):w.push("/os/criar-registro")};return(v,y)=>{const T=at,fe=ae;return h(),U(ie,null,{default:t(()=>[e(B,{class:"mt-5",cols:"12"},{default:t(()=>[e(ke,{label:"Descrição",modelValue:o(a).descricao,"onUpdate:modelValue":y[0]||(y[0]=P=>o(a).descricao=P)},null,8,["modelValue"])]),_:1}),e(S,{class:"ml-1 mb-3"},{default:t(()=>[e(B,{class:"mt-6",cols:"8"},{default:t(()=>[e(re,{label:"Selecione o Tipo",items:o(a).tiposBens,modelValue:o(a).tipo_id,"onUpdate:modelValue":y[1]||(y[1]=P=>o(a).tipo_id=P),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(B,{class:"ml-5",cols:"3"},{default:t(()=>[ht,e(T,{modelValue:o(a).vlr_alienacao,"onUpdate:modelValue":y[2]||(y[2]=P=>o(a).vlr_alienacao=P)},null,8,["modelValue"])]),_:1}),d("div",null,[d("img",{class:"mt-7 ml-4",src:le,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:x})])]),_:1}),e(S,null,{default:t(()=>[e(B,null,{default:t(()=>[e(pe,{style:{height:"465px"},headers:C,items:o(j)},{"item.descricao":t(({item:P})=>[d("h3",bt,de(P.descricao),1)]),"item.actions":t(({item:P})=>[e(S,{style:{"margin-top":"-8px"},justify:"end"},{default:t(()=>[d("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ce=>v.redirectToFicha(P),title:"Visualizar Ficha"},$t,8,xt),d("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ce=>_(P.id),title:"Alterar Papel"},Ct,8,Vt),d("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ce=>p(P),title:"Deletar Pessoa"},[P.excluido?(h(),K("img",Et)):(h(),K("img",Tt))],8,Pt)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(he,{modelValue:o(r),"onUpdate:modelValue":y[8]||(y[8]=P=>se(r)?r.value=P:null),"max-width":"600px"},{default:t(()=>[e(ue,null,{default:t(()=>[e(Xe,{style:{color:"green"}},{default:t(()=>[A("Atualizar Bem")]),_:1}),e(et,null,{default:t(()=>[e(B,{class:"mt-1",cols:"12"},{default:t(()=>[e(ke,{label:"Descrição",modelValue:o(k).descricao,"onUpdate:modelValue":y[3]||(y[3]=P=>o(k).descricao=P)},null,8,["modelValue"])]),_:1}),e(S,null,{default:t(()=>[e(B,{class:"mt-6 ml-3",cols:"8"},{default:t(()=>[e(re,{label:"Selecione o Tipo",items:o(a).tiposBens,modelValue:o(k).tipo_id,"onUpdate:modelValue":y[4]||(y[4]=P=>o(k).tipo_id=P),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(B,{class:"ml-5",cols:"3"},{default:t(()=>[At,e(T,{modelValue:o(k).valor_mercado,"onUpdate:modelValue":y[5]||(y[5]=P=>o(k).valor_mercado=P)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(tt,null,{default:t(()=>[e(Re),e(G,{color:"green",text:"",onClick:y[6]||(y[6]=P=>r.value=!1)},{default:t(()=>[A("Cancelar")]),_:1}),e(G,{color:"green",text:"",onClick:y[7]||(y[7]=P=>s(o(k).id))},{default:t(()=>[A("Salvar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(S,null,{default:t(()=>[e(fe,{onClick:J},{default:t(()=>[e(G,{size:"large",color:"red"},{default:t(()=>[A("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Ot={key:0,class:"loading-overlay"},qt="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",zt={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(L,{emit:u}){const c=L;Ie("DocumentEditorContainer",[Ke,Ye]);const f=te(),{$toast:w}=ee(),E=Q(),g=X(),m=u;Pe(`${f.public.docEditor}`);const O=`${f.public.managemant}/upload`,b=l(null),q=l(!1),I=async()=>{const x=await b.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),s=new FileReader;s.onload=()=>{const _=s.result;m("doc",_)},s.readAsText(x)},D=async()=>{q.value=!0;try{const x=await b.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),s=new FormData;s.append("file",x,"anexo.docx"),s.append("cartorio_token",F("user-data").value.cartorio_token),s.append("token",c.ato_token),s.append("tipo","ato_minuta");const{data:_,status:M}=await V(O,{method:"POST",body:s},"$071xxdqs20");if(M.value==="success"){w.success("Documento enviado!");const p=b.value.ej2Instances.documentEditor.pageCount;I(),m("page",p)}else w.error("Erro ao enviar documento para o sistema.")}catch(a){w.error("Erro ao salvar documento."),console.error(a)}finally{q.value=!1}},z=async()=>{r(!0);try{await j(),r(!0);const{data:a,status:x}=await V(substituirModelo,{method:"POST",body:{ato_token:c.ato_token}},"$0ktpWliD4l");a.value&&k(a.value)}catch(a){console.error("Erro ao gerar a minuta:",a),w.error("Ocorreu um erro ao gerar a minuta.")}finally{r(!1)}},j=async()=>{try{const{data:a}=await V(baixarDocumento,{method:"POST",body:{bucket:"qvgjz",path:"provider/modeloAto.sfdt"}},"$jXVvQjEE6u"),x=await fetchBlobFromMinIO(a.value);if(x){const s=new FileReader;s.onload=()=>{const _=s.result;b.value.ej2Instances.documentEditor.open(_),m("doc",_)},s.readAsText(x)}}catch(a){console.error("Erro ao carregar o modelo de minuta:",a),w.error("Falha ao carregar o modelo de minuta.")}},k=a=>{const x=b.value.ej2Instances.documentEditor,s=_=>{for(const[M,n]of Object.entries(_))if(/^<<.+>>$/.test(M))try{x.search.findAll(M),x.search.searchResults.length>0&&x.search.searchResults.replaceAll(n)}catch(p){console.error(`Erro ao substituir o marcador ${M}:`,p)}else if(M==="partes"&&Array.isArray(n)&&n.length>0)for(const p of n)typeof p=="object"&&s(p)};s(a)},r=a=>{q.value=a},C=()=>{const a=g.query.origem||"criar",x=g.query.id;a==="atualizar"?E.push(`/os/atualizar/${x}`):E.push("/os/criar-registro")};return(a,x)=>{const s=ae;return h(),K($e,null,[e(o(Ee),{height:"900px",ref_key:"documentEditorContainer",ref:b,serviceUrl:qt,enableToolbar:!0,enableWordExport:!0},null,512),o(q)?(h(),K("div",Ot,[e(je,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):W("",!0),e(S,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(s,{class:"mr-4"},{default:t(()=>[e(G,{size:"large",onClick:C,color:"red"},{default:t(()=>[A("Voltar")]),_:1})]),_:1}),e(G,{size:"large",color:"green",onClick:D,disabled:o(q)},{default:t(()=>[A("Salvar")]),_:1},8,["disabled"]),e(G,{class:"ml-4",size:"large",color:"blue",onClick:z},{default:t(()=>[A("Gerar Minuta")]),_:1})]),_:1})],64)}}},Bt={class:"d-flex align-center justify-center"},Dt=["innerHTML"],Mt={__name:"Livro",props:{ato_token:{type:String,required:!0},pages:{type:Number,required:!0},document:{type:String,required:!0}},setup(L){const u=L,c=te();Pe(`${c.public.docEditor}`);const{$toast:f}=ee(),w=Q(),E=X(),g=`${c.public.managemant}/lavrarAto`,m=l("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),O=l(!1),b=l(null),q=l(null),I=l(null),D=async()=>{try{const{data:r,status:C}=await V(g,{method:"POST",body:{ato_token:u.ato_token,qtd_paginas:u.pages}},"$ZKnVBNYxp9");C.value==="success"?(b.value=r.value,q.value=r.value[0].selo,f.success("Ato lavrado com sucesso!")):f.error("Falha ao lavrar o ato.")}catch{f.error("Erro ao conectar com o servidor.")}},z=()=>{O.value=!1,D()},j=function(){I.value.ej2Instances.documentEditor.open(u.document)},k=()=>{const r=E.query.origem||"criar",C=E.query.id;r==="atualizar"?w.push(`/os/atualizar/${C}`):w.push("/os/criar-registro")};return(r,C)=>{const a=Ze;return h(),K($e,null,[e(S,null,{default:t(()=>[e(B,null,{default:t(()=>[(h(),U(o(Ee),{restrictEditing:!0,enableToolbar:!1,created:u.document?j:null,ref_key:"documentEditorContainer",ref:I,height:"850px",width:"850px",key:u.document},null,8,["created"]))]),_:1}),e(B,null,{default:t(()=>[d("div",Bt,[d("div",null,[d("img",{onClick:C[0]||(C[0]=x=>O.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:He}),o(b)?(h(),U(ue,{key:0,class:"mr-16"},{default:t(()=>[e(S,{"no-gutters":""},{default:t(()=>[e(B,null,{default:t(()=>[e(xe,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[A(" Livro: "+de(o(b)[0].livro_numero),1)]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(xe,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[A(" Folhas : "+de(o(b)[0].pagina_inicial)+" Á "+de(o(b)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),d("div",{innerHTML:o(q)},null,8,Dt)]),_:1})):W("",!0)])])]),_:1})]),_:1}),e(G,{color:"red",size:"large",onClick:k},{default:t(()=>[A("Voltar")]),_:1}),e(a,{show:o(O),condMessage:o(m),onClose:C[1]||(C[1]=x=>O.value=!1),onConfirm:z},null,8,["show","condMessage"])],64)}}},Ut=["onClick"],Rt={key:0,style:{width:"30px",height:"30px"},src:_e,alt:"Visualizar",title:"Reativar"},It={key:1,src:ve,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},jt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(L){let u,c;const f=L,w=Q(),E=X(),g=te(),{$toast:m}=ee(),O=`${g.public.managemant}/listarEscrevente`,b=`${g.public.managemant}/getAtosTiposByToken`,q=`${g.public.managemant}/createAtosObservacao`,I=`${g.public.managemant}/updateAtosObservacao`,D=l(F("user-data").value.cartorio_token),z=l([]),j=l([]),k=[{title:"Data",align:"start",key:"data"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],r=ne({observacao:null}),C={observacao:{required:Ve.withMessage("O campo é obrigatorio",we)}},a=Ce(C,r);[u,c]=Z(()=>V(`${b}/${f.ato_token}`,{method:"GET"},"$aJM1TL1buW")),u=await u,c();async function x(){if(await a.value.$validate()){const{data:n,error:p,status:J}=await V(q,{method:"POST",body:{ato_id:f.ato_id,observacao:r.observacao,user_id:F("user-data").value.usuario_id}},"$dMg99jeUNP");J.value==="success"&&(z.value.push({data:st(n.value.created,"dd/mm/yyyy hh:mm"),observacao:n.value.observacao,id:n.value.id,escrevente:F("user-data").value.nome}),m.success("Observação registrada com sucesso"))}else m.error("Preencha os campos obrigatorios.")}async function s(n){n.excluido=!n.excluido;try{await V(`${I}/${n.id}`,{method:"PUT",body:JSON.stringify({excluido:n.excluido})},"$B6PdRx8Gp4")}catch(p){console.error("Erro ao excluir observacao:",p)}}const{data:_}=([u,c]=Z(()=>V(O,{method:"POST",body:{cartorio_token:D}},"$xFHPGua26S")),u=await u,c(),u);j.value=_.value[0].func_json_escreventes;const M=()=>{const n=E.query.origem||"criar",p=E.query.id;n==="atualizar"?w.push(`/os/atualizar/${p}`):w.push("/os/criar-registro")};return(n,p)=>{const J=ae;return h(),U(ie,null,{default:t(()=>[e(S,{class:"mt-5"},{default:t(()=>[e(oe,{label:"Observação",modelValue:o(r).observacao,"onUpdate:modelValue":p[0]||(p[0]=v=>o(r).observacao=v),required:"","error-messages":o(a).observacao.$errors.map(v=>v.$message),onBlur:o(a).observacao.$touch,onInput:o(a).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),d("div",null,[d("img",{class:"btn-pointer ml-2",src:le,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:x})])]),_:1}),e(S,null,{default:t(()=>[e(B,null,{default:t(()=>[e(pe,{style:{height:"465px"},headers:k,items:o(z)},{"item.actions":t(({item:v})=>[d("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:y=>s(v),title:"Deletar Observação"},[v.excluido?(h(),K("img",Rt)):(h(),K("img",It))],8,Ut)]),_:1},8,["items"])]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(J,{onClick:M},{default:t(()=>[e(G,{size:"large",color:"red"},{default:t(()=>[A("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Nt=d("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Qe,alt:"Escanear"},null,-1),Ft=[Nt],Lt=d("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:le,alt:"Criar"},null,-1),Wt=[Lt],Gt=["onClick"],Jt=d("img",{style:{width:"30px",height:"30px"},src:me,alt:"Visualizar"},null,-1),Kt=[Jt],Yt=["onClick"],Ht={key:0,style:{width:"30px",height:"30px"},src:_e,alt:"Visualizar",title:"Reativar"},Zt={key:1,src:ve,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Qt={__name:"Anexos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(L){const u=L,c=te(),{$toast:f}=ee(),w=Q(),E=X(),g=`${c.public.biometria}/run-scanner`,m=`${c.public.managemant}/atos_anexos`,O=`${c.public.managemant}/atos_anexos`,b=l(!1),q=l([]),I=ne({descricao:""}),D=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}];async function z(){try{await j(),await k()}catch(s){console.error("Erro ao executar scanner ou listar arquivos:",s)}}async function j(){try{const{data:s}=await V(g,{method:"GET"},"$WazoKp68Tw")}catch(s){f.error("Erro ao acionar o scanner:",s)}}async function k(){try{const{data:s,status:_}=await V("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:u.ato_token,cartorio_token:F("user-data").value.cartorio_token}},"$03Wxiia3aI")}catch(s){console.error("Erro ao enviar o arquivo:",s)}}const r=async()=>{b.value=!0},C=async()=>{const{data:s,error:_,status:M}=await V(m,{method:"POST",body:{ato_id:u.ato_id,descricao:I.descricao,user_id:F("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$D2PdkmlmwW");M.value==="success"&&(f.success("Anexo registrado com sucesso!"),q.value.push(s.value))};async function a(s){s.excluido=!s.excluido;try{await V(`${O}/${s.id}`,{method:"PUT",body:JSON.stringify({excluido:s.excluido})},"$WyW0hasRPI")}catch(_){console.error("Erro ao excluir pessoa:",_)}}const x=()=>{const s=E.query.origem||"criar",_=E.query.id;s==="atualizar"?w.push(`/os/atualizar/${_}`):w.push("/os/criar-registro")};return(s,_)=>{const M=ae;return h(),U(ie,null,{default:t(()=>[e(S,null,{default:t(()=>[e(B,{cols:"5"},{default:t(()=>[e(oe,{modelValue:o(I).descricao,"onUpdate:modelValue":_[0]||(_[0]=n=>o(I).descricao=n),label:"Descrição"},null,8,["modelValue"])]),_:1}),d("div",{onClick:z,title:"Escanear"},Ft),d("div",{onClick:C,title:"Criar"},Wt)]),_:1}),e(pe,{headers:D,items:o(q),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:n})=>[e(S,null,{default:t(()=>[d("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:p=>r(n),title:"Visualizar Anexo"},Kt,8,Gt),d("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:p=>a(n),title:"Deletar Pessoa"},[n.excluido?(h(),K("img",Ht)):(h(),K("img",Zt))],8,Yt)]),_:2},1024)]),_:1},8,["items"]),e(he,{modelValue:o(b),"onUpdate:modelValue":_[2]||(_[2]=n=>se(b)?b.value=n:null),width:"600"},{default:t(()=>[e(ue,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(G,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:_[1]||(_[1]=n=>b.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(M,{onClick:x},{default:t(()=>[e(G,{size:"large",color:"red"},{default:t(()=>[A("Voltar")]),_:1})]),_:1})]),_:1})}}},xo={__name:"procuracao",props:{ato_token:{type:String,required:!0}},setup(L){const u=L,c=l(null),f=l(null),w=l(null),E=l(null),g=l(null),m=l(!1),O=l(u.ato_token),b=({id:D,token:z})=>{c.value=D,f.value=z,m.value=!0},q=D=>{w.value=D},I=D=>{E.value=D};return(D,z)=>{const j=rt,k=yt,r=St,C=zt,a=Mt,x=jt,s=Qt;return h(),U(ue,{width:"1300"},{default:t(()=>[e(Fe,{modelValue:o(g),"onUpdate:modelValue":z[0]||(z[0]=_=>se(g)?g.value=_:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(Y,{value:"dados"},{default:t(()=>[A("Dados")]),_:1}),o(m)?(h(),U(Y,{key:0,value:"partes"},{default:t(()=>[A("Partes")]),_:1})):W("",!0),o(m)?(h(),U(Y,{key:1,value:"bens"},{default:t(()=>[A("Bens")]),_:1})):W("",!0),o(m)?(h(),U(Y,{key:2,value:"minuta"},{default:t(()=>[A("Minuta")]),_:1})):W("",!0),o(m)?(h(),U(Y,{key:3,value:"livro"},{default:t(()=>[A("Livro")]),_:1})):W("",!0),o(m)?(h(),U(Y,{key:4,value:"observacao"},{default:t(()=>[A("Observações")]),_:1})):W("",!0),o(m)?(h(),U(Y,{key:5,value:"anexo"},{default:t(()=>[A("Anexos")]),_:1})):W("",!0)]),_:1},8,["modelValue"]),e(Le,{modelValue:o(g),"onUpdate:modelValue":z[1]||(z[1]=_=>se(g)?g.value=_:null)},{default:t(()=>[e(H,{value:"dados"},{default:t(()=>[e(j,{onSaved:b,ato_token:o(O)},null,8,["ato_token"])]),_:1}),o(m)?(h(),U(H,{key:0,value:"partes"},{default:t(()=>[e(k,{ato_token:o(O),ato_id:o(c)},null,8,["ato_token","ato_id"])]),_:1})):W("",!0),o(m)?(h(),U(H,{key:1,value:"bens"},{default:t(()=>[e(r,{ato_token:o(f),ato_id:o(c)},null,8,["ato_token","ato_id"])]),_:1})):W("",!0),o(m)?(h(),U(H,{key:2,value:"minuta"},{default:t(()=>[e(C,{onPage:q,onDoc:I,ato_token:o(f)},null,8,["ato_token"])]),_:1})):W("",!0),o(m)?(h(),U(H,{key:3,value:"livro"},{default:t(()=>[e(a,{pages:o(w),ato_token:o(f),document:o(E)},null,8,["pages","ato_token","document"])]),_:1})):W("",!0),o(m)?(h(),U(H,{key:4,value:"observacao"},{default:t(()=>[e(x,{ato_id:o(c)},null,8,["ato_id"])]),_:1})):W("",!0),o(m)?(h(),U(H,{key:5,value:"anexo"},{default:t(()=>[e(s,{ato_token:o(f),ato_id:o(c)},null,8,["ato_token","ato_id"])]),_:1})):W("",!0)]),_:1},8,["modelValue"])]),_:1})}}};export{xo as default};
