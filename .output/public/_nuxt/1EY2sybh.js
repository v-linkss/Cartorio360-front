import{_ as ye,a as Ve,b as ge,c as xe,d as be,e as $e,f as ke}from"./Cjx19yyD.js";import{_ as we}from"./G0zxqJhO.js";import{_ as se}from"./CoonJgjK.js";import{_ as ie,a as re,b as ne}from"./BP1uhy__.js";import{_ as ue}from"./-1f5zArc.js";import{_ as Y}from"./0MPb7dCQ.js";import{C as de,H as Z,u as Ce,r as d,m as X,D as Ae,I as G,o as b,G as M,w as o,b as e,v as a,a as r,t as ee,c as J,x as R,d as g,J as he,A as W,s as te,p as Pe,V as ae,K as q,F as Te,y as ze}from"./DY54ehnO.js";import{u as F,V as h}from"./THVQ871j.js";import{V as A}from"./PPz9g0JV.js";import{V as le}from"./PEotR85d.js";import{V as K}from"./BNqD-WM_.js";import{V as ce}from"./BSyF_vjp.js";import{V as Be,a as me,b as Oe,c as Ue,d as De}from"./ClzTxQtv.js";import{V as pe}from"./DvqkBjmY.js";import{_ as Ie,a as Se}from"./sJ20YimE.js";import{f as j}from"./DvLOpsrx.js";import{V as Me,a as O,b as qe,c as U}from"./DKQUCqUv.js";import"./DX74Ip2f.js";import"./BoisAW-l.js";import"./CdP3NN9a.js";import"./DSYGaSid.js";import"./aUxphXLk.js";import"./Kh8uami_.js";import"./m-z-4UwC.js";import"./CaCjnPme.js";import"./BQswrt_R.js";import"./CFZ8qDYH.js";const Re={style:{width:"800px","font-weight":"500"}},Ee=["onClick"],Le=["onClick"],Ne=["onClick"],Fe={key:0,style:{width:"30px",height:"30px"},src:re,alt:"Reativar",title:"Reativar"},je={key:1,src:ne,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},Ge={__name:"Bens",async setup(oe){let n,x;const P=de(),$=Z(),f=te(),{$toast:k}=Ce(),_=`${f.public.managemant}/atos_bens`,w=`${f.public.managemant}/atos_bens`,T=`${f.public.managemant}/listarBens`,D=`${f.public.managemant}/listarTipoBens`,I=d(X("user-data").value.cartorio_token),S=d(X("user-data").value.usuario_id).value,y=d([]),p=d([]),V=d(!1),z=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"vlr_alienacao"},{align:"end",value:"actions"}],c=Ae({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),E=async()=>{if(!c.vlr_alienacao&&!c.descricao){k.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:u,status:t}=await F(`${_}`,{method:"POST",body:{descricao:c.descricao,tipo_id:c.tipo_id,valor_mercado:"0.00",vlr_alienacao:c.vlr_alienacao.replace(/,/g,""),user_id:S,ato_id:Number.parseInt($.query.ato_id),token:$.query.ato_token_edit}},"$aGIwRtPn6M");t.value==="success"&&(k.success("Bem registrado com sucesso!"),y.value.push(u.value),Object.assign(c,{vlr_alienacao:null,descricao:null,tipo_id:null}))},L=async u=>{const{status:t}=await F(`${w}/${u}`,{method:"PUT",body:{descricao:p.value.descricao,tipo_id:p.value.tipo_id,vlr_alienacao:p.value.vlr_alienacao.replace(/,/g,"")}},"$4hUMyAQlzU");t.value==="success"&&(k.success("Bem Atualizado com sucesso!"),V.value=!1)},N=u=>{const t=y.value.find(C=>C.id===u);t&&(p.value=t,V.value=!0)},{data:m}=([n,x]=G(()=>F(`${D}`,{method:"POST",body:{cartorio_token:I.value,imoveis:!1}},"$da802I2H8c")),n=await n,x(),n);c.tiposBens=m.value;const{data:s}=([n,x]=G(()=>F(`${T}`,{method:"POST",body:{ato_token:$.query.ato_token_edit}},"$iXfJJrO35d")),n=await n,x(),n);y.value=s.value&&Object.keys(s.value).length===0?[]:s.value;async function v(u){u.excluido=!u.excluido;try{await F(`${w}/${u.id}`,{method:"PUT",body:JSON.stringify({excluido:u.excluido})},"$PGKHfsa7Pl")}catch(t){console.error("Erro ao excluir pessoa:",t)}}const l=()=>{const u=$.query.origem||"criar",t=$.query.id;u==="atualizar"?P.push(`/os/atualizar/${t}`):P.push("/os/criar-registro")};return(u,t)=>{const C=we,Q=se;return b(),M(pe,null,{default:o(()=>[e(A,{class:"mt-5",cols:"12"},{default:o(()=>[e(le,{label:"Descrição",modelValue:a(c).descricao,"onUpdate:modelValue":t[0]||(t[0]=i=>a(c).descricao=i)},null,8,["modelValue"])]),_:1}),e(h,{class:"ml-1 mb-3"},{default:o(()=>[e(A,{class:"mt-6",cols:"8"},{default:o(()=>[e(K,{label:"Selecione o Tipo",items:a(c).tiposBens,modelValue:a(c).tipo_id,"onUpdate:modelValue":t[1]||(t[1]=i=>a(c).tipo_id=i),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(A,{class:"ml-5",cols:"3"},{default:o(()=>[t[9]||(t[9]=r("label",null,"Valor",-1)),e(C,{modelValue:a(c).vlr_alienacao,"onUpdate:modelValue":t[2]||(t[2]=i=>a(c).vlr_alienacao=i)},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-7 ml-4",src:ie,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:E})])]),_:1}),e(h,null,{default:o(()=>[e(A,null,{default:o(()=>[e(ce,{style:{height:"465px"},headers:z,items:a(y)},{"item.descricao":o(({item:i})=>[r("h3",Re,ee(i.descricao),1)]),"item.actions":o(({item:i})=>[e(h,{style:{"margin-top":"-8px"},justify:"end"},{default:o(()=>[r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:H=>u.redirectToFicha(i),title:"Visualizar Ficha"},t[10]||(t[10]=[r("img",{style:{width:"30px",height:"30px"},src:ue,alt:"Visualizar"},null,-1)]),8,Ee),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:H=>N(i.id),title:"Alterar Papel"},t[11]||(t[11]=[r("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Editar"},null,-1)]),8,Le),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:H=>v(i),title:"Deletar Pessoa"},[i.excluido?(b(),J("img",Fe)):(b(),J("img",je))],8,Ne)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(Be,{modelValue:a(V),"onUpdate:modelValue":t[8]||(t[8]=i=>R(V)?V.value=i:null),"max-width":"600px"},{default:o(()=>[e(me,null,{default:o(()=>[e(Oe,{style:{color:"green"}},{default:o(()=>t[12]||(t[12]=[g("Atualizar Bem")])),_:1}),e(Ue,null,{default:o(()=>[e(A,{class:"mt-1",cols:"12"},{default:o(()=>[e(le,{label:"Descrição",modelValue:a(p).descricao,"onUpdate:modelValue":t[3]||(t[3]=i=>a(p).descricao=i)},null,8,["modelValue"])]),_:1}),e(h,null,{default:o(()=>[e(A,{class:"mt-6 ml-3",cols:"8"},{default:o(()=>[e(K,{label:"Selecione o Tipo",items:a(c).tiposBens,modelValue:a(p).tipo_id,"onUpdate:modelValue":t[4]||(t[4]=i=>a(p).tipo_id=i),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(A,{class:"ml-5",cols:"3"},{default:o(()=>[t[13]||(t[13]=r("label",null,"Valor",-1)),e(C,{modelValue:a(p).vlr_alienacao,"onUpdate:modelValue":t[5]||(t[5]=i=>a(p).vlr_alienacao=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(De,null,{default:o(()=>[e(he),e(W,{color:"green",text:"",onClick:t[6]||(t[6]=i=>V.value=!1)},{default:o(()=>t[14]||(t[14]=[g("Cancelar")])),_:1}),e(W,{color:"green",text:"",onClick:t[7]||(t[7]=i=>L(a(p).id))},{default:o(()=>t[15]||(t[15]=[g("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(h,null,{default:o(()=>[e(Q,{onClick:l},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>t[16]||(t[16]=[g("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Je={style:{width:"200px"}},He={style:{width:"300px"}},We={style:{width:"800px","font-weight":"500"}},Ke=["onClick"],Qe=["onClick"],Xe=["onClick"],Ye={key:0,style:{width:"30px",height:"30px"},src:re,alt:"Visualizar",title:"Reativar"},Ze={key:1,src:ne,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},et={__name:"Imoveis",async setup(oe){let n,x;const P=te(),$=`${P.public.auth}/service/gerencia/atos_imoveis`,f=`${P.public.auth}/service/gerencia/atos_bens`,k=de(),_=Z(),w=d(""),T=d(""),D=d(!1),I=d(!1),S=d(null),y=[{title:"Matrícula",value:"registro_matricula"},{title:"Descrição",value:"descricao"},{value:"actions"}],{data:p,status:V}=([n,x]=G(()=>j($,{method:"POST",body:{ato_token:_.query.ato_token_edit}})),n=await n,x(),n),z=Pe(()=>{if(Object.keys(p.value).length!==0)return p.value.filter(m=>{const s=m.matricula?m.matricula.toLowerCase():"",v=m.descricao?m.descricao.toLowerCase():"",l=s.includes(T.value.toLowerCase()),u=v.includes(w.value.toLowerCase());return l&&u})});async function c(m){m.excluido=!m.excluido;try{await j(`${f}/${m.id}`,{method:"PUT",body:{excluido:m.excluido}})}catch(s){console.error("Erro ao excluir pessoa:",s)}}function E(m){S.value=m,I.value=!0}const L=async()=>{await j($,{method:"POST",body:{ato_token:_.query.ato_token_edit}})},N=()=>{const m=_.query.origem||"criar",s=_.query.id;m==="atualizar"?k.push(`/os/atualizar/${s}`):k.push("/os/criar-registro")};return(m,s)=>{const v=se,l=Ie,u=Se;return a(V)==="success"?(b(),M(pe,{key:0,class:"mt-5"},{default:o(()=>[r("img",{onClick:s[0]||(s[0]=t=>D.value=!0),style:{cursor:"pointer"},src:ie,alt:"Cadastro"}),e(h,{style:{gap:"3rem"}},{default:o(()=>[r("div",Je,[e(ae,{class:"mt-7 mb-4",modelValue:a(T),"onUpdate:modelValue":s[1]||(s[1]=t=>R(T)?T.value=t:null),label:"Matrícula","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),r("div",He,[e(ae,{class:"mt-7 mb-4",modelValue:a(w),"onUpdate:modelValue":s[2]||(s[2]=t=>R(w)?w.value=t:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),e(ce,{density:"compact",headers:y,items:a(z),"item-key":"id"},{"item.descricao":o(({item:t})=>[r("h3",We,ee(t.descricao),1)]),"item.actions":o(({item:t})=>[e(h,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:o(()=>[r("div",{style:{cursor:"pointer"},onClick:C=>m.redirectToView(t.id),title:"Visualizar"},s[5]||(s[5]=[r("img",{style:{width:"30px",height:"30px"},src:ue,alt:"Visualizar"},null,-1)]),8,Ke),r("div",{style:{cursor:"pointer"},onClick:C=>E(t.id),title:"Atualizar"},s[6]||(s[6]=[r("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Atualizar"},null,-1)]),8,Qe),r("div",{style:{cursor:"pointer"},onClick:C=>c(t),title:"Deletar"},[t.excluido?(b(),J("img",Ye)):(b(),J("img",Ze))],8,Xe)]),_:2},1024)]),_:1},8,["items"]),e(v,{onClick:N},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>s[7]||(s[7]=[g("Voltar")])),_:1})]),_:1}),e(l,{onRefresh:L,show:a(D),onClose:s[3]||(s[3]=t=>D.value=!1)},null,8,["show"]),e(u,{onRefresh:L,imovel_id:a(S),show:a(I),onClose:s[4]||(s[4]=t=>I.value=!1)},null,8,["imovel_id","show"])]),_:1})):q("",!0)}}},tt={class:"mb-10"},ot={style:{color:"red","margin-left":"30px"}},zt={__name:"[id]",async setup(oe){let n,x;const P=d(null),$=d(null),f=d(null),k=te(),_=Z(),w=`${k.public.auth}/service/gerencia/listarSituacoes`,T=`${k.public.auth}/service/gerencia/getAtos`,D=d(X("user-data").value.cartorio_token),I=_.query.id?{ato_token:_.query.tipo_ato_token}:{cartorio_token:D},S=d([]),y=d([]),p=d("PROCURAÇÕES");d("PROCURAÇÃO COM BENS");const V=d(!1),z=d(_.query.usa_imoveis==="true");async function c(){try{const{data:v}=await j(`${T}/${_.query.ato_id}`,{method:"GET"});y.value=v.value}catch(v){console.log(v)}}[n,x]=G(()=>c()),await n,x();const{data:E,status:L}=([n,x]=G(()=>j(w,{method:"POST",body:I})),n=await n,x(),n);S.value=E.value;const N=v=>{P.value=v},m=v=>{$.value=v};function s(){y.dt_lavratura||(V.value=!0)}return(v,l)=>{const u=Ve,t=ge,C=Ge,Q=et,i=xe,H=be,_e=$e,ve=ke,fe=ye;return b(),J(Te,null,[r("div",tt,[e(h,{class:"mb-5 mt-5"},{default:o(()=>[l[5]||(l[5]=r("h1",null,"Ordem de Serviço nº",-1)),r("h1",ot,ee(a(_).query.numero_os),1)]),_:1}),e(h,null,{default:o(()=>[e(A,{md:"6"},{default:o(()=>[e(K,{class:"mr-5",modelValue:a(p),"onUpdate:modelValue":l[0]||(l[0]=B=>R(p)?p.value=B:null),disabled:""},null,8,["modelValue"])]),_:1}),e(A,{md:"5"},{default:o(()=>[e(K,{modelValue:a(_).query.tipo_ato,"onUpdate:modelValue":l[1]||(l[1]=B=>a(_).query.tipo_ato=B),disabled:""},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-2",style:ze({cursor:a(y).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:Y,alt:"Editar",onClick:s},null,4)])]),_:1})]),e(me,{width:"1300"},{default:o(()=>[e(Me,{modelValue:a(f),"onUpdate:modelValue":l[2]||(l[2]=B=>R(f)?f.value=B:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(O,{value:"dados"},{default:o(()=>l[6]||(l[6]=[g("Dados")])),_:1}),e(O,{value:"partes"},{default:o(()=>l[7]||(l[7]=[g("Partes")])),_:1}),a(z)?(b(),M(O,{key:0,value:"bens"},{default:o(()=>l[8]||(l[8]=[g("Bens")])),_:1})):q("",!0),a(z)?(b(),M(O,{key:1,value:"imoveis"},{default:o(()=>l[9]||(l[9]=[g("Imoveis")])),_:1})):q("",!0),e(O,{value:"minuta"},{default:o(()=>l[10]||(l[10]=[g("Minuta")])),_:1}),e(O,{value:"livro"},{default:o(()=>l[11]||(l[11]=[g("Livro")])),_:1}),e(O,{value:"observacao"},{default:o(()=>l[12]||(l[12]=[g("Observações")])),_:1}),e(O,{value:"anexo"},{default:o(()=>l[13]||(l[13]=[g("Anexos")])),_:1})]),_:1},8,["modelValue"]),e(qe,{modelValue:a(f),"onUpdate:modelValue":l[3]||(l[3]=B=>R(f)?f.value=B:null)},{default:o(()=>[e(U,{value:"dados"},{default:o(()=>[e(u,{item_dados:a(y),item_situacoes:a(S)},null,8,["item_dados","item_situacoes"])]),_:1}),e(U,{value:"partes"},{default:o(()=>[e(t)]),_:1}),a(z)?(b(),M(U,{key:0,value:"bens"},{default:o(()=>[e(C)]),_:1})):q("",!0),a(z)?(b(),M(U,{key:1,value:"imoveis"},{default:o(()=>[e(Q)]),_:1})):q("",!0),e(U,{value:"minuta"},{default:o(()=>[e(i,{onPage:N,onDoc:m})]),_:1}),e(U,{value:"livro"},{default:o(()=>[e(H,{pages:a(P),document:a($)},null,8,["pages","document"])]),_:1}),e(U,{value:"observacao"},{default:o(()=>[e(_e)]),_:1}),e(U,{value:"anexo"},{default:o(()=>[e(ve)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(V)?(b(),M(fe,{key:0,show:a(V),servicos:a(y).servicos||[],tiposAtos:a(y).tiposAtos||[],onClose:l[4]||(l[4]=B=>V.value=!1)},null,8,["show","servicos","tiposAtos"])):q("",!0)],64)}}};export{zt as default};
