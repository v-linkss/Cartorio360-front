import{r as n,u as P,I as U,f as y,M as q,o as h,k as M,w as a,b as t,a as w,j as i,B as m,x as g,d as S,m as O}from"./CFGvv8Yg.js";import{u as p}from"./NvLKEaP_.js";import{V as z,c as D}from"./DvfTT86a.js";import{V as F}from"./XTcrwiEU.js";import{V as I}from"./CCx48mrt.js";import{V as T}from"./BfUFlISF.js";import{V as Q}from"./vvu8DHSl.js";const Y={__name:"TiposAtos",props:{show:Boolean,servicos:Array,tiposAtos:Array},emits:["close","update-ato"],setup($,{emit:C}){const r=n($.show),{$toast:_}=P(),x=U(),s=n(""),l=n(""),v=O(),f=y("auth_token").value,V=n(y("user-data").value.cartorio_token).value,c=n([]),d=n([]),k=C,B=`${v.public.managemant}/updateAtos`,b=`${v.public.managemant}/tipoAtos`,N=async()=>{const{data:e}=await p(b,{method:"POST",body:{usuario_token:f,cartorio_token:V}},"$6VlNS7ylT6");c.value=e.value,c.value.length>0&&(s.value=c.value[0])},R=async e=>{const{data:o}=await p(b,{method:"POST",body:{usuario_token:f,cartorio_token:V,servico_token:e}},"$pRqAaiCpuA");d.value=o.value},j=async()=>{const{data:e,status:o}=await p(`${B}/${x.query.ato_id}`,{method:"PUT",body:{ato_tipo_id:l.value.id}},"$Qxfq8aWnXP");o.value==="success"&&(_.success("Tipo de ato atualizado com Sucesso!"),k("update-ato",{descricao:`${s.value.descricao} - ${l.value.descricao}`}),A())},A=()=>{r.value=!1,k("close")};return q(s,async e=>{e&&(await R(e.token),l.value=d.value.length>0?d.value[0]:null)}),N(),(e,o)=>(h(),M(Q,{persistent:"",modelValue:i(r),"onUpdate:modelValue":o[3]||(o[3]=u=>m(r)?r.value=u:null),"max-width":"500"},{default:a(()=>[t(z,null,{default:a(()=>[t(F,null,{default:a(()=>[t(I,{class:"mt-1 mb-3",style:{"justify-content":"space-between"}},{default:a(()=>o[4]||(o[4]=[w("h1",{class:"ml-4"},"Tipos de Atos",-1)])),_:1}),o[5]||(o[5]=w("hr",{class:"mb-5"},null,-1)),t(T,{"item-title":"descricao","item-value":"token",class:"mb-5",label:"Selecione o ServiÃ§o",modelValue:i(s),"onUpdate:modelValue":o[0]||(o[0]=u=>m(s)?s.value=u:null),items:i(c),"return-object":""},null,8,["modelValue","items"]),t(T,{"item-title":"descricao","item-value":"id",class:"mb-5",label:"Selecione o Tipo de Ato",modelValue:i(l),"onUpdate:modelValue":o[1]||(o[1]=u=>m(l)?l.value=u:null),items:i(d),"return-object":""},null,8,["modelValue","items"])]),_:1}),t(D,null,{default:a(()=>[t(g,{style:{"background-color":"red",color:"white"},onClick:A},{default:a(()=>o[6]||(o[6]=[S("Voltar")])),_:1}),t(g,{style:{"background-color":"green",color:"white"},onClick:o[2]||(o[2]=u=>j())},{default:a(()=>o[7]||(o[7]=[S("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{Y as _};
