import{_ as le}from"./BwUEpsib.js";import{u as te,n as oe,q as K,r as c,s as ue,o as R,v as ie,w as t,b as e,x as a,V as se,y as B,d as q,z as X,A as H,B as re,a as n,c as N,C as ae,t as ee,D as Ue,E as je,F as Ie,G as ke,H as be,h as Fe,I as xe}from"./BEd1cr51.js";import{u as k}from"./D8N2zCOm.js";import{V as A}from"./CrN9gLBw.js";import{V as O}from"./ZcDPUhnn.js";import{V as ne}from"./DpAvue5S.js";import{V as de}from"./RSWOkkjW.js";import{_ as Be,V as Ne,a as Q,b as Le,c as Z}from"./CXyoh3fX.js";import{_ as Ge,a as He,b as Je,T as We,W as Ke,S as Xe,r as we,D as Ve,c as Ye,d as Qe,e as Ze}from"./jE4ZQ_pJ.js";import{_ as pe}from"./Cbd4pulh.js";import{_ as ce,V as _e,a as ve,b as fe,c as Ce}from"./BaWtNHOH.js";import{V as Pe,a as ge}from"./C-liFcwM.js";import{V as et}from"./qGN1dptX.js";import{_ as tt}from"./BcpUXzGy.js";import{V as ot}from"./CzQbT91S.js";import{_ as $e}from"./DfjuBLsA.js";import{c as at,r as st,u as rt}from"./Br_1pbYC.js";import"./DUNWT362.js";import"./D4y7GR1l.js";import"./CV43BUDh.js";import"./C2ikpqBy.js";const nt={__name:"Dados",props:{item_dados:{type:Array,required:!0},item_situacoes:{type:Array,required:!0}},setup(J){const l=J,{$toast:v}=te(),m=X(),b=oe(),i=K(),w=`${m.public.managemant}/updateAtos`,S=c(l.item_situacoes),x=ue({dt_abertura:l.item_dados[0].dt_abertura||null,status:l.item_dados[0].status||null,mne:l.item_dados[0].mne||null});async function U(){const{data:p,error:r,status:f}=await k(`${w}/${i.query.ato_id}`,{method:"PUT",body:{status:x.status,mne:x.mne,dt_abertura:x.dt_abertura}},"$EIT5jtTUdX");f.value==="success"&&v.success("Ato Atualizado com sucesso")}const M=()=>{const p=i.query.origem||"criar",r=i.query.id;p==="atualizar"?b.push(`/os/atualizar/${r}`):b.push("/os/criar-registro")};return(p,r)=>{const f=le;return R(),ie(de,null,{default:t(()=>[e(A,{class:"mt-5"},{default:t(()=>[e(O,{cols:"3"},{default:t(()=>[e(ne,{label:"Situação",modelValue:a(x).status,"onUpdate:modelValue":r[0]||(r[0]=C=>a(x).status=C),items:a(S),"item-title":"descricao","item-value":"descricao",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(O,{cols:"5"},{default:t(()=>[e(se,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:a(x).mne,"onUpdate:modelValue":r[1]||(r[1]=C=>a(x).mne=C)},null,8,["modelValue"])]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(O,{cols:"2"},{default:t(()=>[e(se,{modelValue:a(x).dt_abertura,"onUpdate:modelValue":r[2]||(r[2]=C=>a(x).dt_abertura=C),type:"date",label:"Data Lavratura",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(A,{class:"mb-3"},{default:t(()=>[e(f,{onClick:M},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1}),e(B,{class:"ml-10",onClick:U,size:"large",color:"green"},{default:t(()=>[q("Atualizar")]),_:1})]),_:1})]),_:1})}}},lt=["onClick"],it=n("img",{style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar"},null,-1),ct=[it],ut=["onClick"],dt=n("img",{style:{width:"30px",height:"30px"},src:Ce,alt:"Visualizar"},null,-1),mt=[dt],pt=["onClick"],_t={key:0,style:{width:"30px",height:"30px"},src:ve,alt:"Visualizar",title:"Reativar"},vt={key:1,src:fe,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ft=["onClick"],gt=n("img",{style:{width:"30px",height:"30px"},src:Je,alt:"Visualizar"},null,-1),yt=[gt],ht={__name:"Partes",async setup(J){let l,v;const m=oe(),b=K(),i=X(),{$toast:w}=te(),S=`${i.public.managemant}/pesquisarPessoas`,x=`${i.public.managemant}/listarPapeis`,U=`${i.public.managemant}/getLinkTipo`,M=`${i.public.managemant}/createAtosPessoa`,p=`${i.public.managemant}/updateAtosPessoa`,r=`${i.public.managemant}/getAtosPessoaById`,f=c(H("user-data").value.cartorio_token),C=c([]),P=c([]),$=c([]),z=c(!1),F=c(!1),j=c(!1),y=c(!1),u=c(null),E=c(null),o=c(null),s=c(null),d=c(null),g=c("xkyaA"),T=c(null),I=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],h=ue({papeis:null,nome:null,pessoa:null,documento:null}),{data:L}=([l,v]=re(()=>k(x,{method:"POST",body:{tipo_ato_token:"xkyaA"}},"$acoiTIUp00")),l=await l,v(),l);$.value=L.value;const ye=async()=>{const{data:V}=await k(`${r}/${b.query.ato_id}`,{method:"GET"},"$ypnU9hCpVn"),G=(me=>me.map(W=>({...W,pessoa:{...W.pessoa,documento:W.pessoa.doc_identificacao},papel:{...W.partes_tipos}})))(V.value);P.value=G};ye();async function Ae(){try{const{data:V,error:_}=await k(S,{method:"POST",body:{cartorio_token:f.value,documento:h.documento,nome:h.nome}},"$pr30MyPXfY");V.value.length>0?(C.value=V.value,h.pessoa=C.value[0]):C.value=[]}catch(V){console.error("Erro na requisição",V)}}const Ee=()=>{F.value=!0},Te=async()=>{await ye()},ze=async()=>{await ye()},qe=async()=>{const V={pessoa:h.pessoa,papel:$.value.find(Y=>Y.id===h.papeis),representante:{nome:null}},_=await k(`${r}/${b.query.ato_id}`,{method:"GET"},"$scHdIvxj2D");for(const Y of _.data.value)if(Y.pessoa_id===h.pessoa.id&&Y.ato_id===Number(b.query.ato_id)&&Y.tipo_parte_id===h.papeis){w.error("Pessoa Já Registrada Com Esse Papel!");return}const{data:G,error:me,status:W}=await k(M,{method:"POST",body:{ato_id:b.query.ato_id,pessoa_id:h.pessoa.id,tipo_parte_id:h.papeis,user_id:H("user-data").value.usuario_id}},"$18isAgOJxG");W.value==="success"&&(V.id=G.value.id,w.success("Pessoa Registrada com Sucesso!"),P.value.push(V))},Oe=async V=>{j.value=!0,T.value=null;const{data:_}=await k(`${U}`,{method:"POST",body:{id:V.pessoa.id,tipo:"ficha"}},"$hmDzSF3F61");_.value&&_.value.link?T.value=`data:image/jpeg;base64,${_.value.link}`:T.value=null},De=V=>{const _=P.value.filter(G=>G.pessoa.id!==V.pessoa.id).map(G=>({id:G.pessoa.id,nome:G.pessoa.nome}));o.value=V.id,u.value=_,z.value=!0,E.value=V.pessoa.nome,d.value=V.pessoa.id},Se=V=>{y.value=!0,s.value=V.id,E.value=V.pessoa.nome};async function Me(V){V.excluido=!V.excluido;try{await k(`${p}/${V.id}`,{method:"PUT",body:JSON.stringify({excluido:V.excluido})},"$l09I6nLRfk")}catch(_){console.error("Erro ao excluir pessoa:",_)}}const Re=()=>{const V=b.query.origem||"criar",_=b.query.id;V==="atualizar"?m.push(`/os/atualizar/${_}`):m.push("/os/criar-registro")};return(V,_)=>{const G=Be,me=Ge,W=He,Y=le;return R(),ie(de,null,{default:t(()=>[e(A,{class:"mt-5"},{default:t(()=>[e(O,{cols:"3"},{default:t(()=>[e(se,{label:"Documento",modelValue:a(h).documento,"onUpdate:modelValue":_[0]||(_[0]=D=>a(h).documento=D)},null,8,["modelValue"])]),_:1}),e(O,{cols:"4"},{default:t(()=>[e(se,{label:"Pessoa",modelValue:a(h).nome,"onUpdate:modelValue":_[1]||(_[1]=D=>a(h).nome=D)},null,8,["modelValue"])]),_:1}),n("div",null,[n("img",{class:"mt-1",src:pe,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Ae})]),n("div",null,[n("img",{class:"mt-1 ml-2",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Ee})])]),_:1}),e(A,null,{default:t(()=>[e(O,{cols:"4"},{default:t(()=>[e(ne,{label:"Selecione a Pessoa",modelValue:a(h).pessoa,"onUpdate:modelValue":_[2]||(_[2]=D=>a(h).pessoa=D),items:a(C),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(O,{cols:"3"},{default:t(()=>[e(ne,{label:"Papel",modelValue:a(h).papeis,"onUpdate:modelValue":_[3]||(_[3]=D=>a(h).papeis=D),items:a($),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),n("div",null,[n("img",{class:"mt-1",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:qe})])]),_:1}),e(A,null,{default:t(()=>[e(O,null,{default:t(()=>[e(_e,{style:{height:"465px"},headers:I,items:a(P)},{"item.actions":t(({item:D})=>[e(A,null,{default:t(()=>[n("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:he=>Oe(D),title:"Visualizar Ficha"},ct,8,lt),n("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:he=>Se(D),class:"mr-2",title:"Alterar Papel"},mt,8,ut),n("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:he=>Me(D),title:"Deletar Pessoa"},[D.excluido?(R(),N("img",_t)):(R(),N("img",vt))],8,pt),n("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:he=>De(D),title:"Selecionar Representante"},yt,8,ft)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(G,{show:a(F),onClose:_[4]||(_[4]=D=>F.value=!1)},null,8,["show"]),e(me,{representante_nome:a(E),representantes:a(u),ato_id:a(o),show:a(z),onClose:_[5]||(_[5]=D=>z.value=!1),onUpdateRepresentante:ze},null,8,["representante_nome","representantes","ato_id","show"]),e(W,{representante_nome:a(E),ato_token:a(g),ato_id:a(s),show:a(y),onClose:_[6]||(_[6]=D=>y.value=!1),onUpdatePapel:Te},null,8,["representante_nome","ato_token","ato_id","show"]),e(Pe,{modelValue:a(j),"onUpdate:modelValue":_[8]||(_[8]=D=>ae(j)?j.value=D:null),width:"600"},{default:t(()=>[e(ge,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(et,{src:a(T)},null,8,["src"]),e(B,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:_[7]||(_[7]=D=>j.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(A,null,{default:t(()=>[e(Y,{onClick:Re},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},bt=n("label",null,"Valor",-1),xt={class:"text-end"},$t={class:"text-end"},kt=["onClick"],wt=n("img",{style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar"},null,-1),Vt=[wt],Ct=["onClick"],Pt=n("img",{style:{width:"30px",height:"30px"},src:Ce,alt:"Editar"},null,-1),At=[Pt],Et=["onClick"],Tt={key:0,style:{width:"30px",height:"30px"},src:ve,alt:"Reativar",title:"Reativar"},zt={key:1,src:fe,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},qt={__name:"Bens",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(J){const l=oe(),v=K(),m=X();te();const b=`${m.public.managemant}/updateAtosPessoa`;c(H("user-data").value.cartorio_token);const i=c([{pessoa:{descricao:"João Silva",valor:1500}},{pessoa:{descricao:"Maria Oliveira",valor:2300}},{pessoa:{descricao:"Carlos Souza",valor:1800}},{pessoa:{descricao:"Ana Lima",valor:2100}},{pessoa:{descricao:"Fernando Costa",valor:1750}}]),w=c(null),S=[{title:"Descrição",align:"start",key:"pessoa.descricao"},{title:"Valor",align:"end",key:"pessoa.valor"},{align:"end",value:"actions"}],x=ue({papeis:null,nome:null,pessoa:null,documento:null}),U=async()=>{};async function M(r){r.excluido=!r.excluido;try{await k(`${b}/${w.value}`,{method:"PUT",body:JSON.stringify({excluido:r.excluido})},"$aGIwRtPn6M")}catch(f){console.error("Erro ao excluir pessoa:",f)}}const p=()=>{const r=v.query.origem||"criar",f=v.query.id;r==="atualizar"?l.push(`/os/atualizar/${f}`):l.push("/os/criar-registro")};return(r,f)=>{const C=tt,P=le;return R(),ie(de,null,{default:t(()=>[e(O,{class:"mt-5",cols:"12"},{default:t(()=>[e(ot,{label:"Descrição",modelValue:a(x).documento,"onUpdate:modelValue":f[0]||(f[0]=$=>a(x).documento=$)},null,8,["modelValue"])]),_:1}),e(A,{class:"ml-1 mb-3"},{default:t(()=>[e(O,{class:"mt-6",cols:"8"},{default:t(()=>[e(ne,{label:"Selecione o Tipo",modelValue:a(x).pessoa,"onUpdate:modelValue":f[1]||(f[1]=$=>a(x).pessoa=$),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue"])]),_:1}),e(O,{class:"ml-5",cols:"3"},{default:t(()=>[bt,e(C,{modelValue:a(x).valor,"onUpdate:modelValue":f[2]||(f[2]=$=>a(x).valor=$)},null,8,["modelValue"])]),_:1}),n("div",null,[n("img",{class:"mt-7",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:U})])]),_:1}),e(A,null,{default:t(()=>[e(O,null,{default:t(()=>[e(_e,{style:{height:"465px"},headers:S,items:a(i)},{item:t(({item:$})=>[n("tr",null,[n("td",null,ee($.pessoa.descricao),1),n("td",xt,ee($.pessoa.valor),1),n("td",$t,[e(A,{justify:"end"},{default:t(()=>[n("div",{style:{cursor:"pointer"},class:"mr-2",onClick:z=>r.redirectToFicha($),title:"Visualizar Ficha"},Vt,8,kt),n("div",{style:{cursor:"pointer"},class:"mr-2",onClick:z=>r.redirectToPapel($),title:"Alterar Papel"},At,8,Ct),n("div",{style:{cursor:"pointer"},class:"mr-2",onClick:z=>M($),title:"Deletar Pessoa"},[$.excluido?(R(),N("img",Tt)):(R(),N("img",zt))],8,Et)]),_:2},1024)])])]),_:1},8,["items"])]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(P,{onClick:p},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Ot={key:0,class:"loading-overlay"},Dt="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",St={__name:"Minuta",emits:["page","doc"],setup(J,{emit:l}){Ue("DocumentEditorContainer",[We,Ke,Xe]);const v=X(),{$toast:m}=te(),b=oe(),i=K(),w=l;we(`${v.public.docEditor}`);const S=`${v.public.managemant}/download`,x=`${v.public.managemant}/atos/files`,U=`${v.public.managemant}/subitituirModelo`,M=`${v.public.managemant}/upload`,p=c(null),r=c(!1),f=async o=>{try{const s=await fetch(o);if(!s.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await s.blob()}catch(s){return console.error(s),m.error("Erro ao carregar o documento inicial."),null}},C=async()=>{try{const{data:o}=await k(`${x}/${i.query.ato_token_edit}`,{method:"GET"},"$5jxI4TvFse");return o.value.link_ato}catch(o){console.error("Erro ao carregar o documento:",o),m.error(o)}},P=async()=>{r.value=!0;try{const o=await C(),{data:s,status:d}=await k(S,{method:"POST",body:{bucket:"qvgjz",path:o}},"$dvNFfvmIJC"),g=s.value,T=await f(g);if(T){const I=new FileReader;I.onload=()=>{const h=I.result;p.value.ej2Instances.documentEditor.open(h),w("doc",h)},I.readAsText(T)}}catch{m.error("Erro ao carregar o documento.")}finally{r.value=!1}},$=async()=>{const o=p.value.ej2Instances.documentEditor;console.log(o);const s=await o.saveAsBlob("Sfdt"),d=new FileReader;d.onload=()=>{const g=d.result,I=p.value.ej2Instances.documentEditor.pageCount;w("page",I),w("doc",g)},d.readAsText(s)},z=async()=>{r.value=!0;try{const s=await p.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),d=new FormData;d.append("file",s,"anexo.sfdt"),d.append("cartorio_token",H("user-data").value.cartorio_token),d.append("token",i.query.ato_token_edit),d.append("tipo","ato_minuta");const{data:g,status:T}=await k(M,{method:"POST",body:d},"$xv11VtUdMy");if(T.value==="success"){m.success("Documento enviado!");const h=p.value.ej2Instances.documentEditor.pageCount;$(),w("page",h)}else m.error("Erro ao enviar documento para o sistema.")}catch(o){m.error("Erro ao salvar documento."),console.error(o)}finally{r.value=!1}},F=async()=>{u(!0);try{await j(),u(!0);const{data:o,status:s}=await k(U,{method:"POST",body:{ato_token:i.query.ato_token_edit}},"$zyzWHTXTBW");o.value&&y(o.value)}catch(o){console.error("Erro ao gerar a minuta:",o),m.error("Ocorreu um erro ao gerar a minuta.")}finally{u(!1)}},j=async()=>{try{const{data:o}=await k(S,{method:"POST",body:{bucket:"qvgjz",path:"provider/modeloAto.sfdt"}},"$KreLE0Ys81"),s=await f(o.value);if(s){const d=new FileReader;d.onload=()=>{const g=d.result;p.value.ej2Instances.documentEditor.open(g),w("doc",g)},d.readAsText(s)}}catch(o){console.error("Erro ao carregar o modelo de minuta:",o),m.error("Falha ao carregar o modelo de minuta.")}},y=o=>{const s=p.value.ej2Instances.documentEditor,d=g=>{for(const[T,I]of Object.entries(g))if(/^<<.+>>$/.test(T))try{s.search.findAll(T),s.search.searchResults.length>0&&s.search.searchResults.replaceAll(I)}catch(h){console.error(`Erro ao substituir o marcador ${T}:`,h)}else if(T==="partes"&&Array.isArray(I)&&I.length>0)for(const h of I)typeof h=="object"&&d(h)};d(o)},u=o=>{r.value=o},E=()=>{const o=i.query.origem||"criar",s=i.query.id;o==="atualizar"?b.push(`/os/atualizar/${s}`):b.push("/os/criar-registro")};return je(async()=>{await P(),$()}),(o,s)=>{const d=le;return R(),N(be,null,[e(a(Ve),{height:"900px",ref_key:"documentEditorContainer",ref:p,serviceUrl:Dt,enableToolbar:!0,enableWordExport:!0},null,512),a(r)?(R(),N("div",Ot,[e(Ie,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):ke("",!0),e(A,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(d,{class:"mr-4"},{default:t(()=>[e(B,{size:"large",onClick:E,color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1}),e(B,{size:"large",color:"green",onClick:z,disabled:a(r)},{default:t(()=>[q("Atualizar")]),_:1},8,["disabled"]),e(B,{class:"ml-4",size:"large",color:"blue",onClick:F},{default:t(()=>[q("Gerar Minuta")]),_:1})]),_:1})],64)}}},Mt={class:"d-flex align-center justify-center"},Rt=["innerHTML"],Ut={__name:"Livro",props:{pages:{type:Number,required:!0},document:{type:String,required:!0}},setup(J){const l=J,v=X();we(`${v.public.docEditor}`);const{$toast:m}=te(),b=oe(),i=K(),w=`${v.public.managemant}/download`,S=`${v.public.managemant}/atos/files`,x=`${v.public.managemant}/lavrarAto`,U=c("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),M=c(!1),p=c(null),r=c(null),f=c(null),C=async y=>{try{const u=await fetch(y);if(!u.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await u.blob()}catch(u){return console.error(u),m.error("Erro ao carregar o documento inicial."),null}},P=async()=>{try{const{data:y}=await k(`${S}/${i.query.ato_token_edit}`,{method:"GET"},"$FnEbAJEARP");return y.value.link_ato}catch(y){console.error("Erro ao carregar o documento:",y),m.error(y)}},$=async()=>{try{const y=await P(),{data:u,status:E}=await k(w,{method:"POST",body:{bucket:"qvgjz",path:y}},"$7ljqltMqa0"),o=u.value,s=await C(o);if(s){const d=new FileReader;d.onload=()=>{const g=d.result;f.value.ej2Instances.documentEditor.open(g),console.log("asdfdsf")},d.readAsText(s)}}catch{m.error("Erro ao carregar o documento.")}};$();const z=async()=>{try{const{data:y,status:u}=await k(x,{method:"POST",body:{ato_token:i.query.ato_token_edit,qtd_paginas:l.pages}},"$OWxZSQkyX8");u.value==="success"?(p.value=y.value,r.value=y.value[0].selo,m.success("Ato lavrado com sucesso!")):m.error("Falha ao lavrar o ato.")}catch{m.error("Erro ao conectar com o servidor.")}},F=()=>{M.value=!1,z()},j=()=>{const y=i.query.origem||"criar",u=i.query.id;y==="atualizar"?b.push(`/os/atualizar/${u}`):b.push("/os/criar-registro")};return Fe(()=>l.document,(y,u)=>{$()}),(y,u)=>{const E=Qe;return R(),N(be,null,[e(A,null,{default:t(()=>[e(O,null,{default:t(()=>[e(a(Ve),{restrictEditing:!0,enableToolbar:!1,ref_key:"documentEditorContainer",ref:f,height:"850px",width:"850px"},null,512)]),_:1}),e(O,null,{default:t(()=>[n("div",Mt,[n("div",null,[n("img",{onClick:u[0]||(u[0]=o=>M.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:Ye}),a(p)?(R(),ie(ge,{key:0,width:"360px",class:"mr-16"},{default:t(()=>[e(A,null,{default:t(()=>[e(O,null,{default:t(()=>[e(xe,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[q(" Livro: "+ee(a(p)[0].livro_numero),1)]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(xe,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[q(" Folhas : "+ee(a(p)[0].pagina_inicial)+" Á "+ee(a(p)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),n("div",{style:{border:"1px solid black","border-radius":"8px","padding-bottom":"20px","margin-top":"-10px"},class:"ml-2 mb-2 mr-2",innerHTML:a(r)},null,8,Rt)]),_:1})):ke("",!0)])])]),_:1})]),_:1}),q(" "+ee(l.pages)+" ",1),e(B,{class:"mt-5 ml-7 mb-5",color:"red",size:"large",onClick:j},{default:t(()=>[q("Voltar")]),_:1}),e(E,{show:a(M),condMessage:a(U),onClose:u[1]||(u[1]=o=>M.value=!1),onConfirm:F},null,8,["show","condMessage"])],64)}}},jt=["onClick"],It={key:0,style:{width:"30px",height:"30px"},src:ve,alt:"Visualizar",title:"Reativar"},Ft={key:1,src:fe,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Bt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(J){let l,v;const m=oe(),b=K(),i=X(),{$toast:w}=te(),S=`${i.public.managemant}/listarEscrevente`;`${i.public.managemant}`;const x=`${i.public.managemant}/createAtosObservacao`,U=`${i.public.managemant}/updateAtosObservacao`,M=`${i.public.managemant}/getAtosObservacaoById`,p=c(H("user-data").value.cartorio_token),r=c([]),f=c([]),C=[{title:"Data",align:"start",key:"created"},{title:"Escrevente",align:"start",key:"users.nome"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],P=ue({observacao:""}),$={observacao:{required:at.withMessage("O campo é obrigatório",st)}},z=rt($,P),{data:F}=([l,v]=re(()=>k(`${M}/${b.query.ato_id}`,{method:"GET"},"$HyzoO40swN")),l=await l,v(),l);r.value=F.value.map(o=>({...o,created:$e(o.created,"dd/mm/yyyy hh:mm")}));async function j(){if(P.observacao.trim()===""){w.error("O campo de observação está vazio.");return}if(await z.value.$validate()){const{data:o,error:s,status:d}=await k(x,{method:"POST",body:{ato_id:b.query.ato_id,observacao:P.observacao,user_id:H("user-data").value.usuario_id}},"$gnHMo4uCXD");d.value==="success"&&(r.value.push({created:$e(o.value.created,"dd/mm/yyyy hh:mm"),observacao:o.value.observacao,id:o.value.id,escrevente:H("user-data").value.nome}),P.observacao="",w.success("Observação registrada com sucesso"))}else w.error("Preencha os campos obrigatórios.")}async function y(o){o.excluido=!o.excluido;try{await k(`${U}/${o.id}`,{method:"PUT",body:JSON.stringify({excluido:o.excluido})},"$sP9AKdd3Ky")}catch(s){console.error("Erro ao excluir observação:",s)}}const{data:u}=([l,v]=re(()=>k(S,{method:"POST",body:{cartorio_token:p}},"$HL9pndqGh0")),l=await l,v(),l);f.value=u.value[0].func_json_escreventes;const E=()=>{const o=b.query.origem||"criar",s=b.query.id;o==="atualizar"?m.push(`/os/atualizar/${s}`):m.push("/os/criar-registro")};return(o,s)=>{const d=le;return R(),ie(de,null,{default:t(()=>[e(A,{class:"mt-5"},{default:t(()=>[e(se,{label:"Observação",modelValue:P.observacao,"onUpdate:modelValue":s[0]||(s[0]=g=>P.observacao=g),required:"","error-messages":a(z).observacao.$errors.length>0?a(z).observacao.$errors.map(g=>g.$message):[],onBlur:a(z).observacao.$touch,onInput:a(z).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),n("div",null,[n("img",{class:"btn-pointer ml-2",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:j})])]),_:1}),e(A,null,{default:t(()=>[e(O,null,{default:t(()=>[e(_e,{style:{height:"465px"},headers:C,items:r.value},{"item.actions":t(({item:g})=>[n("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:T=>y(g),title:"Deletar Observação"},[g.excluido?(R(),N("img",It)):(R(),N("img",Ft))],8,jt)]),_:1},8,["items"])]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(d,{onClick:E},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Nt=n("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Ze,alt:"Escanear"},null,-1),Lt=[Nt],Gt=n("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ce,alt:"Criar"},null,-1),Ht=[Gt],Jt=["onClick"],Wt=n("img",{style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar"},null,-1),Kt=[Wt],Xt=["onClick"],Yt={key:0,style:{width:"30px",height:"30px"},src:ve,alt:"Visualizar",title:"Reativar"},Qt={key:1,src:fe,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Zt={__name:"Anexos",async setup(J){let l,v;const m=X(),{$toast:b}=te(),i=oe(),w=K(),S=`${m.public.biometria}/run-scanner`,x=`${m.public.managemant}/atos_anexos`,U=`${m.public.managemant}/atos_anexos`,M=`${m.public.managemant}/atos_anexos`,p=c(!1),r=c([]),f=ue({descricao:""}),C=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}],{data:P}=([l,v]=re(()=>k(`${M}/${w.query.ato_id}`,{method:"GET"},"$AOZpbz65MA")),l=await l,v(),l);r.value=P.value;async function $(){try{await z(),await F()}catch(o){console.error("Erro ao executar scanner ou listar arquivos:",o)}}async function z(){try{const{data:o}=await k(S,{method:"GET"},"$KttjFhHivJ")}catch(o){b.error("Erro ao acionar o scanner:",o)}}async function F(){try{const{data:o,status:s}=await k("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:w.query.ato_token_edit,cartorio_token:H("user-data").value.cartorio_token}},"$TqQrsgxUkd")}catch(o){console.error("Erro ao enviar o arquivo:",o)}}const j=async()=>{p.value=!0},y=async()=>{const{data:o,error:s,status:d}=await k(x,{method:"POST",body:{ato_id:w.query.ato_id,descricao:f.descricao,user_id:H("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$KDhIYzGKzM");d.value==="success"&&(b.success("Anexo registrado com sucesso!"),r.value.push(o.value))};async function u(o){o.excluido=!o.excluido;try{await k(`${U}/${o.id}`,{method:"PUT",body:JSON.stringify({excluido:o.excluido})},"$cdoFBGO0Ti")}catch(s){console.error("Erro ao excluir pessoa:",s)}}const E=()=>{const o=w.query.origem||"criar",s=w.query.id;o==="atualizar"?i.push(`/os/atualizar/${s}`):i.push("/os/criar-registro")};return(o,s)=>{const d=le;return R(),ie(de,null,{default:t(()=>[e(A,null,{default:t(()=>[e(O,{cols:"5"},{default:t(()=>[e(se,{modelValue:a(f).descricao,"onUpdate:modelValue":s[0]||(s[0]=g=>a(f).descricao=g),label:"Descrição"},null,8,["modelValue"])]),_:1}),n("div",{onClick:$,title:"Escanear"},Lt),n("div",{onClick:y,title:"Criar"},Ht)]),_:1}),e(_e,{headers:C,items:a(r),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:g})=>[e(A,null,{default:t(()=>[n("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:T=>j(g),title:"Visualizar Anexo"},Kt,8,Jt),n("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:T=>u(g),title:"Deletar Pessoa"},[g.excluido?(R(),N("img",Yt)):(R(),N("img",Qt))],8,Xt)]),_:2},1024)]),_:1},8,["items"]),e(Pe,{modelValue:a(p),"onUpdate:modelValue":s[2]||(s[2]=g=>ae(p)?p.value=g:null),width:"600"},{default:t(()=>[e(ge,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(B,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:s[1]||(s[1]=g=>p.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(d,{onClick:E},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1})]),_:1})}}},eo={class:"mb-10"},to=n("h1",null,"Ordem de Serviço nº",-1),oo={style:{color:"red","margin-left":"30px"}},Vo={__name:"[id]",async setup(J){let l,v;const m=c(null),b=c(null),i=c(null),w=X(),S=K(),x=`${w.public.managemant}/listarSituacoes`,U=`${w.public.managemant}/getAtos`,M=c(H("user-data").value.cartorio_token),p=S.query.id?{ato_token:"xkyaA"}:{cartorio_token:M},r=c([]),f=c([]),C=c("PROCURAÇÕES"),P=c("PROCURAÇÃO");async function $(){try{const{data:u}=await k(`${U}/${S.query.ato_id}`,{method:"GET"},"$j0JpHHj7PB");f.value=u.value}catch(u){console.log(u)}}[l,v]=re(()=>$()),await l,v();const{data:z,status:F}=([l,v]=re(()=>k(x,{method:"POST",body:p},"$mGbp7gAEjS")),l=await l,v(),l);r.value=z.value;const j=u=>{m.value=u},y=u=>{b.value=u};return(u,E)=>{const o=nt,s=ht,d=qt,g=St,T=Ut,I=Bt,h=Zt;return R(),N(be,null,[n("div",eo,[e(A,{class:"mb-5 mt-5"},{default:t(()=>[to,n("h1",oo,ee(a(S).query.numero_os),1)]),_:1}),e(A,null,{default:t(()=>[e(O,{md:"6"},{default:t(()=>[e(ne,{class:"mr-5",modelValue:a(C),"onUpdate:modelValue":E[0]||(E[0]=L=>ae(C)?C.value=L:null),disabled:""},null,8,["modelValue"])]),_:1}),e(O,{md:"6"},{default:t(()=>[e(ne,{modelValue:a(P),"onUpdate:modelValue":E[1]||(E[1]=L=>ae(P)?P.value=L:null),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),e(ge,{width:"1300"},{default:t(()=>[e(Ne,{modelValue:a(i),"onUpdate:modelValue":E[2]||(E[2]=L=>ae(i)?i.value=L:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(Q,{value:"dados"},{default:t(()=>[q("Dados")]),_:1}),e(Q,{value:"partes"},{default:t(()=>[q("Partes")]),_:1}),e(Q,{value:"bens"},{default:t(()=>[q("Bens")]),_:1}),e(Q,{value:"minuta"},{default:t(()=>[q("Minuta")]),_:1}),e(Q,{value:"livro"},{default:t(()=>[q("Livro")]),_:1}),e(Q,{value:"observacao"},{default:t(()=>[q("Observações")]),_:1}),e(Q,{value:"anexo"},{default:t(()=>[q("Anexos")]),_:1})]),_:1},8,["modelValue"]),e(Le,{modelValue:a(i),"onUpdate:modelValue":E[3]||(E[3]=L=>ae(i)?i.value=L:null)},{default:t(()=>[e(Z,{value:"dados"},{default:t(()=>[e(o,{item_dados:a(f),item_situacoes:a(r)},null,8,["item_dados","item_situacoes"])]),_:1}),e(Z,{value:"partes"},{default:t(()=>[e(s)]),_:1}),e(Z,{value:"bens"},{default:t(()=>[e(d)]),_:1}),e(Z,{value:"minuta"},{default:t(()=>[e(g,{onPage:j,onDoc:y})]),_:1}),e(Z,{value:"livro"},{default:t(()=>[e(T,{pages:a(m),document:a(b)},null,8,["pages","document"])]),_:1}),e(Z,{value:"observacao"},{default:t(()=>[e(I)]),_:1}),e(Z,{value:"anexo"},{default:t(()=>[e(h)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{Vo as default};
