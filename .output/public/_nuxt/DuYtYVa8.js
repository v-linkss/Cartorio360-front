import{_ as B}from"./BZKJGd1O.js";import{_ as D,a as R,b as U}from"./BP1uhy__.js";import{_ as A}from"./aYyiUlRS.js";import{_ as E}from"./NqSOLEfL.js";import{m as x,C as M,r as y,I,p as P,G as S,w as r,s as j,o as d,b as i,a,V as v,v as p,x as C,c as g}from"./DbQfKAp2.js";import{_ as F}from"./CdP3NN9a.js";import{f as G}from"./FC2YjqTU.js";import{V as O}from"./hO0nBb7e.js";import{V as k}from"./B08az7LV.js";import{V as W}from"./CMFBXA7a.js";import"./pq8W2NpX.js";import"./Bb0_jWQM.js";import"./CT5dGhr7.js";import"./MRaHBJ8x.js";import"./DYtzO2me.js";const q={style:{width:"200px"}},H={style:{width:"300px"}},J=["onClick"],K=["onClick"],Q=["onClick"],X={key:0,style:{width:"30px",height:"30px"},src:R,alt:"Visualizar",title:"Reativar"},Y={key:1,src:U,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ht={__name:"index",async setup(Z){let s,_;const h=j(),V=`${h.public.auth}/service/gerencia/listar_matriculas`,w=`${h.public.auth}/service/gerencia/matriculas`,$=x("auth_token"),f=M(),l=y(""),n=y(""),b=[{title:"Número",value:"numero"},{title:"CNM",value:"cnm"},{title:"Data",value:"data"},{title:"Situação",value:"situacao"},{title:"Protocolo",value:"protocolo"},{title:"Descrição",value:"descricao"},{value:"actions"}],u=([s,_]=I(()=>$fetch(`${V}?pageNumber=1&pageSize=1000000`,{method:"POST",body:{cartorio_token:x("user-data").value.cartorio_token},headers:{Authorization:`Bearer ${$.value}`}})),s=await s,_(),s),z=P(()=>!u||u.length===0?[]:u.filter(t=>{const e=t.numero?t.numero.toLowerCase():"",m=t.cnm?t.cnm.toLowerCase():"",o=e.includes(n.value.toLowerCase()),c=m.includes(l.value.toLowerCase());return o&&c}).map(t=>({...t,data:F(t.data,"dd/mm/yyyy")})));async function N(t){t.excluido=!t.excluido;try{await G(`${w}/${t.id}`,{method:"PUT",body:{excluido:t.excluido}})}catch(e){console.error("Erro ao excluir pessoa:",e)}}function T(t){console.log("id:",t),f.push({path:`/matriculas/vizualizar/${t}`})}function L(t){f.push({path:`/matriculas/atualizar/${t}`})}return(t,e)=>{const m=B;return d(),S(O,{class:"mt-5"},{default:r(()=>[i(m,{to:"/matriculas/cadastro"},{default:r(()=>e[2]||(e[2]=[a("img",{style:{cursor:"pointer"},src:D,alt:"Cadastro"},null,-1)])),_:1}),i(k,{style:{gap:"3rem"}},{default:r(()=>[a("div",q,[i(v,{class:"mt-7 mb-4",modelValue:p(n),"onUpdate:modelValue":e[0]||(e[0]=o=>C(n)?n.value=o:null),label:"Numero","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),a("div",H,[i(v,{class:"mt-7 mb-4",modelValue:p(l),"onUpdate:modelValue":e[1]||(e[1]=o=>C(l)?l.value=o:null),label:"CNM","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),i(W,{density:"compact",headers:b,items:p(z),"item-key":"id"},{"item.actions":r(({item:o})=>[i(k,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:r(()=>[a("div",{style:{cursor:"pointer"},onClick:c=>T(o.id),title:"Visualizar"},e[3]||(e[3]=[a("img",{style:{width:"30px",height:"30px"},src:A,alt:"Visualizar"},null,-1)]),8,J),a("div",{style:{cursor:"pointer"},onClick:c=>L(o.id),title:"Atualizar"},e[4]||(e[4]=[a("img",{style:{width:"30px",height:"30px"},src:E,alt:"Atualizar"},null,-1)]),8,K),a("div",{style:{cursor:"pointer"},onClick:c=>N(o),title:"Deletar"},[o.excluido?(d(),g("img",X)):(d(),g("img",Y))],8,Q)]),_:2},1024)]),_:1},8,["items"])]),_:1})}}};export{ht as default};
