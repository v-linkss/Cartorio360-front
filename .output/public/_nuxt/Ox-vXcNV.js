import{_ as e}from"./4de_rhUN.js";import{_ as a}from"./DJIqEjZF.js";import{n as t,E as r,u as s,r as o,D as l,F as n,G as i,o as u,A as d,w as c,x as m,H as p,b as _,a as f,t as v,q as g,I as h,s as b,J as x,K as y,L as $,c as k}from"./Cqiv77yc.js";import{u as V}from"./D0-0VRaN.js";import{c as w,r as j,u as E,_ as C}from"./CnBBmU9u.js";import{_ as O,a as I,b as S,c as q}from"./CBYd86re.js";import{_ as U}from"./DmmIIbRx.js";import{_ as A}from"./ToPptOUL.js";import{V as B}from"./sftuTnbG.js";import{V as R}from"./B5iMDmra.js";import{V as T}from"./03NkGgWs.js";import{V as G}from"./DGrEsPnk.js";import"./oKXwpsuu.js";const P=f("h1",null,"Ordem de Serviço nº",-1),z={style:{color:"red","margin-left":"30px"}},D=f("h1",{class:"ml-5"},"Atos",-1),F=f("img",{style:{width:"45px",height:"45px",cursor:"pointer"},src:I,alt:"novo"},null,-1),K=["onClick"],N=[f("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:U,alt:"Receber"},null,-1)],L=["onClick","title"],M=["disabled","onClick"],Q={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:S,alt:"Visualizar",title:"Reativar"},H={key:1,src:q,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},J=f("img",{class:"btn-pointer mt-5",src:A,alt:"Sair"},null,-1),Z={__name:"[id]",async setup(I){let S,q;const{$toast:U}=t(),A=r(),{id:Z}=A.params,W=s(),X=m(),Y=`${X.public.managemant}/updateOrdensServico`,ee=`${X.public.managemant}/getOrdensServicoById`,ae=`${X.public.managemant}/listarAtos`,te=o(l("user-data").value.cartorio_id),re=o(l("user-data").value.usuario_id),se=o(l("user-service").value).value||null,oe=o(l("user-data").value.cartorio_token).value,le=o([]),ne=o(!1),ie=o(null),ue=o(null),de=n({nacionalidade:"brasileiro",apresentante_nome:null,apresentante_cpf:null,documento:null}),ce=[{title:"Protocolo",value:"protocolo"},{title:"Usuario",value:"usuario_nome"},{title:"Situação",value:"situacao"},{title:"Valor",value:"valor"},{title:"Tipo",value:"tipo"},{value:"actions"}],me=[{title:"BRASILEIRO",value:"brasileiro"},{title:"ESTRANGEIRO",value:"estrangeiro"}],pe={apresentante_nome:{required:w.withMessage("O campo é obrigatorio",j)},apresentante_cpf:{required:w.withMessage("O campo é obrigatorio",j)}},_e=E(pe,de);function fe(e){if(e)return e.replace(/[.\-]/g,"");e=null}const{data:ve}=([S,q]=i((()=>V(`${ee}/${Z}`,{method:"GET"},"$Q22OaB87ZU"))),S=await S,q(),S);ue.value=ve.value.numero,de.apresentante_cpf=ve.value.apresentante_cpf,de.apresentante_nome=ve.value.apresentante_nome;const{data:ge}=([S,q]=i((()=>V(ae,{method:"POST",body:{cartorio_token:oe,ordemserv_token:se}},"$Fci2yt5KvV"))),S=await S,q(),S);return ge.value.length>0?le.value=ge.value:le.value=[],(t,r)=>{const s=e,o=a,l=p("mask");return u(),d(B,{class:"mt-5"},{default:c((()=>[_(R,{class:"mb-5"},{default:c((()=>[P,f("h1",z,v(g(ue)),1)])),_:1}),_(R,null,{default:c((()=>[_(T,{md:"3"},{default:c((()=>[_(G,{label:"Nacionalidade",items:me,modelValue:g(de).nacionalidade,"onUpdate:modelValue":r[0]||(r[0]=e=>g(de).nacionalidade=e)},null,8,["modelValue"])])),_:1}),_(T,{md:"2"},{default:c((()=>["brasileiro"===g(de).nacionalidade?h((u(),d(b,{key:0,autofocus:"",modelValue:g(de).apresentante_cpf,"onUpdate:modelValue":r[1]||(r[1]=e=>g(de).apresentante_cpf=e),label:"CPF",required:"","error-messages":g(_e).apresentante_cpf.$errors.map((e=>e.$message)),onBlur:g(_e).apresentante_cpf.$touch,onInput:g(_e).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])),[[l,"###.###.###-##"]]):(u(),d(b,{key:1,autofocus:"",modelValue:g(de).apresentante_cpf,"onUpdate:modelValue":r[2]||(r[2]=e=>g(de).apresentante_cpf=e),label:"Documento",required:"","error-messages":g(_e).apresentante_cpf.$errors.map((e=>e.$message)),onBlur:g(_e).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur"]))])),_:1}),_(T,{md:"4"},{default:c((()=>[_(b,{modelValue:g(de).apresentante_nome,"onUpdate:modelValue":r[3]||(r[3]=e=>g(de).apresentante_nome=e),label:"Nome Apresentante",required:"","error-messages":g(_e).apresentante_nome.$errors.map((e=>e.$message)),onInput:g(_e).apresentante_nome.$touch},null,8,["modelValue","error-messages","onInput"])])),_:1}),_(T,null,{default:c((()=>[f("div",null,[f("img",{style:{width:"40px",height:"40px",cursor:"pointer"},src:C,alt:"Salvar",onClick:r[4]||(r[4]=e=>async function(){const e={apresentante_cpf:fe(de.apresentante_cpf),apresentante_nome:de.apresentante_nome,user_id:re.value,cartorio_id:te.value};if(await _e.value.$validate()){const{data:a,error:t,status:r}=await V(`${Y}/${Z}`,{method:"PUT",body:e},"$K99ffdcGQC");"error"===r.value&&500===t.value.statusCode?U.error("Erro ao cadastrar ordem,erro no sistema."):(U.success("Ordem Atualizada com sucesso!"),W.push({path:"/ordens-servicos"}))}}())})])])),_:1})])),_:1}),_(R,{style:{display:"flex","margin-bottom":"10px",gap:"2rem"}},{default:c((()=>[D,_(s,{to:{path:"/ordens-servicos/criar-ato",query:{origem:"atualizar",id:g(Z)}}},{default:c((()=>[F])),_:1},8,["to"]),_(x,{headers:ce,items:g(le),"item-key":"id"},{"item.actions":c((({item:e})=>[_(R,{style:{display:"flex",gap:"10px","margin-top":"-5px"}},{default:c((()=>[f("div",{onClick:a=>{return t=e.token,ie.value=t,void(ne.value=!0);var t},title:"Receber"},N,8,K),f("div",{class:$({disabled:!e.btn_editar}),onClick:a=>e.btn_editar?t.redirectToUpdate(e.id):null,title:e.btn_editar?"Editar":"Desabilitado"},[f("img",{style:y({cursor:e.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:O,alt:"Editar"},null,4)],10,L),f("div",{disabled:!e.btn_cancelar,onClick:a=>e.btn_cancelar?t.deleteEndereco(e):null,title:"Excluir"},[e.excluido?(u(),k("img",Q)):(u(),k("img",H))],8,M)])),_:2},1024)])),_:1},8,["items"]),_(o,{show:g(ne),ato_token:g(ie),onClose:r[5]||(r[5]=e=>ne.value=!1)},null,8,["show","ato_token"])])),_:1}),_(s,{to:"/ordens-servicos"},{default:c((()=>[J])),_:1})])),_:1})}}};export{Z as default};
