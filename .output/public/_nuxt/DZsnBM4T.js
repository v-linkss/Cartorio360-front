import{_ as el}from"./CMPI3Fq4.js";import{_ as ol}from"./BwB64cc6.js";import{_ as kl,a as al,b as tl,c as il}from"./Dq2VWso_.js";import{_ as sl}from"./Y1AsfL9W.js";import{z as rl,D as ul,u as dl,r as _,m as F,A as nl,E as h,o as U,q as ml,w as a,b as l,v as o,a as d,t as cl,c as D,F as pl,d as B,G as _l,H as A,s as vl,n as Bl,I as Cl,V as b}from"./C6-xj6dC.js";import{u as k}from"./B46E6hcQ.js";import{V as r}from"./Du9JpyT5.js";import{V as j}from"./BN6mL46F.js";import{V}from"./-Iw3tsMd.js";import{V as x}from"./B_K5vkAR.js";import{V as Vl}from"./WySpUdis.js";import{V as fl,a as gl,b as bl,c as yl,d as xl}from"./oCOf458z.js";import{V as $l}from"./5pnvPwY4.js";const Ul={style:{width:"800px","font-weight":"500"}},Tl=["onClick"],wl=["onClick"],Al=["onClick"],zl={key:0,style:{width:"30px",height:"30px"},src:tl,alt:"Reativar",title:"Reativar"},Il={key:1,src:il,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},Yl={__name:"Bens",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(J){let f,C;const z=J,I=rl(),S=ul(),g=vl(),{$toast:P}=dl(),G=`${g.public.managemant}/atos_bens`,O=`${g.public.managemant}/atos_bens`,Q=`${g.public.managemant}/atos_bens`,W=`${g.public.managemant}/listarTipoBens`,X=_(F("user-data").value.cartorio_token),Z=_(F("user-data").value.usuario_id).value,T=_([]),v=_([]),n=_(!1),E=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"valor_mercado"},{align:"end",value:"actions"}],m=nl({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),M=async()=>{if(!m.vlr_alienacao&&!m.descricao){P.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:c,status:i}=await k(`${G}`,{method:"POST",body:{descricao:m.descricao,tipo_id:m.tipo_id,vlr_alienacao:m.vlr_alienacao,user_id:Z,ato_id:Number.parseInt(z.ato_id),token:z.ato_token}},"$TVfAAEMyym");i.value==="success"&&(P.success("Bem registrado com sucesso!"),T.value.push(c.value),Object.assign(m,{vlr_alienacao:null,descricao:null,tipo_id:null}))},N=async c=>{const{status:i}=await k(`${O}/${c}`,{method:"PUT",body:{descricao:v.value.descricao,tipo_id:v.value.tipo_id,valor_mercado:v.value.valor_mercado}},"$TRbOfiOtJ9");i.value==="success"&&(P.success("Bem Atualizado com sucesso!"),n.value=!1)},R=c=>{const i=T.value.find(w=>w.id===c);i&&(v.value=i,n.value=!0)},{data:$}=([f,C]=h(()=>k(`${W}`,{method:"POST",body:{cartorio_token:X.value,imoveis:!1}},"$rrOfkMLqML")),f=await f,C(),f);m.tiposBens=$.value;const{data:q}=([f,C]=h(()=>k(`${Q}/${z.ato_id}`,{method:"GET"},"$qhjPuJWFwD")),f=await f,C(),f);T.value=q.value;async function H(c){c.excluido=!c.excluido;try{await k(`${O}/${c.id}`,{method:"PUT",body:JSON.stringify({excluido:c.excluido})},"$1s7uo0EeAe")}catch(i){console.error("Erro ao excluir pessoa:",i)}}const s=()=>{const c=S.query.origem||"criar",i=S.query.id;c==="atualizar"?I.push(`/os/atualizar/${i}`):I.push("/os/criar-registro")};return(c,i)=>{const w=el,K=ol;return U(),ml($l,null,{default:a(()=>[l(r,{class:"mt-5",cols:"12"},{default:a(()=>[l(j,{label:"Descrição",modelValue:o(m).descricao,"onUpdate:modelValue":i[0]||(i[0]=u=>o(m).descricao=u)},null,8,["modelValue"])]),_:1}),l(V,{class:"ml-1 mb-3"},{default:a(()=>[l(r,{class:"mt-6",cols:"8"},{default:a(()=>[l(x,{label:"Selecione o Tipo",items:o(m).tiposBens,modelValue:o(m).tipo_id,"onUpdate:modelValue":i[1]||(i[1]=u=>o(m).tipo_id=u),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),l(r,{class:"ml-5",cols:"3"},{default:a(()=>[i[9]||(i[9]=d("label",null,"Valor",-1)),l(w,{modelValue:o(m).vlr_alienacao,"onUpdate:modelValue":i[2]||(i[2]=u=>o(m).vlr_alienacao=u)},null,8,["modelValue"])]),_:1}),d("div",null,[d("img",{class:"mt-7 ml-4",src:kl,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:M})])]),_:1}),l(V,null,{default:a(()=>[l(r,null,{default:a(()=>[l(Vl,{style:{height:"465px"},headers:E,items:o(T)},{"item.descricao":a(({item:u})=>[d("h3",Ul,cl(u.descricao),1)]),"item.actions":a(({item:u})=>[l(V,{style:{"margin-top":"-8px"},justify:"end"},{default:a(()=>[d("div",{style:{cursor:"pointer"},class:"mr-2",onClick:L=>c.redirectToFicha(u),title:"Visualizar Ficha"},i[10]||(i[10]=[d("img",{style:{width:"30px",height:"30px"},src:sl,alt:"Visualizar"},null,-1)]),8,Tl),d("div",{style:{cursor:"pointer"},class:"mr-2",onClick:L=>R(u.id),title:"Alterar Papel"},i[11]||(i[11]=[d("img",{style:{width:"30px",height:"30px"},src:al,alt:"Editar"},null,-1)]),8,wl),d("div",{style:{cursor:"pointer"},class:"mr-2",onClick:L=>H(u),title:"Deletar Pessoa"},[u.excluido?(U(),D("img",zl)):(U(),D("img",Il))],8,Al)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),l(fl,{modelValue:o(n),"onUpdate:modelValue":i[8]||(i[8]=u=>pl(n)?n.value=u:null),"max-width":"600px"},{default:a(()=>[l(gl,null,{default:a(()=>[l(bl,{style:{color:"green"}},{default:a(()=>i[12]||(i[12]=[B("Atualizar Bem")])),_:1}),l(yl,null,{default:a(()=>[l(r,{class:"mt-1",cols:"12"},{default:a(()=>[l(j,{label:"Descrição",modelValue:o(v).descricao,"onUpdate:modelValue":i[3]||(i[3]=u=>o(v).descricao=u)},null,8,["modelValue"])]),_:1}),l(V,null,{default:a(()=>[l(r,{class:"mt-6 ml-3",cols:"8"},{default:a(()=>[l(x,{label:"Selecione o Tipo",items:o(m).tiposBens,modelValue:o(v).tipo_id,"onUpdate:modelValue":i[4]||(i[4]=u=>o(v).tipo_id=u),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),l(r,{class:"ml-5",cols:"3"},{default:a(()=>[i[13]||(i[13]=d("label",null,"Valor",-1)),l(w,{modelValue:o(v).valor_mercado,"onUpdate:modelValue":i[5]||(i[5]=u=>o(v).valor_mercado=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(xl,null,{default:a(()=>[l(_l),l(A,{color:"green",text:"",onClick:i[6]||(i[6]=u=>n.value=!1)},{default:a(()=>i[14]||(i[14]=[B("Cancelar")])),_:1}),l(A,{color:"green",text:"",onClick:i[7]||(i[7]=u=>N(o(v).id))},{default:a(()=>i[15]||(i[15]=[B("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(V,null,{default:a(()=>[l(K,{onClick:s},{default:a(()=>[l(A,{size:"large",color:"red"},{default:a(()=>i[16]||(i[16]=[B("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Sl={key:0,class:"d-flex justify-center"},Pl={style:{width:"800px","font-weight":"500"}},ql=["onClick"],Dl=["onClick"],Ol=["onClick"],El={key:0,style:{width:"30px",height:"30px"},src:tl,alt:"Reativar",title:"Reativar"},Ml={key:1,src:il,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},hl={__name:"Imoveis",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(J){let f,C;const z=J,I=rl(),S=ul(),g=vl(),{$toast:P}=dl(),G=`${g.public.managemant}/registro_imoveis`,O=`${g.public.managemant}/natureza_imoveis`,Q=`${g.public.managemant}/tipo_logradouros`,W=`${g.public.managemant}/situacao_imoveis`,X=`${g.public.managemant}/listarCidades`,Z=`${g.public.managemant}/listarTipoBens`,T=_(F("user-data").value.cartorio_token);_(F("user-data").value.usuario_id).value;const v=_([]),n=_([]),E=_([]),m=_([]),M=_([]),N=_([]),R=_([]),$=_(!1),q=_(!0),H=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"valor_mercado"},{title:"%",align:"end",key:"valor_mercado"},{align:"end",value:"actions"}],s=nl({vlr_alienacao:null,tabvalores_tipo_regimovel_id:null,registro_cartorio:null,registro_matricula:null,registro_matricula_letra:null,tabvalores_nat_imovel_id:null,cib:null,end_cidade_id:null,end_quadra:null,end_lote:null,tabvalores_tipologradouro_id:null,end_logradouro:null,end_logradouro_numero:null,end_bairro:null,end_cep:null,end_complemento:null,tipo_id:null,descricao:null,inscricao_estadual:null,tabvalores_situacao_imoveis_id:null,tipo_id:null,vlr_alienacao:null,vlr_mercado:null,aliq_itbi:null,vlr_itbi:null}),c=async p=>{const{status:e}=await k(`${updateAtosBens}/${p}`,{method:"PUT",body:{descricao:n.value.descricao,tipo_id:n.value.tipo_id,valor_mercado:n.value.valor_mercado}},"$5vOsfPutkW");e.value==="success"&&(P.success("Bem Atualizado com sucesso!"),$.value=!1)},i=p=>{const e=v.value.find(y=>y.id===p);e&&(n.value=e,$.value=!0)},{data:w}=([f,C]=h(()=>k(`${Z}`,{method:"POST",body:{cartorio_token:T.value,imoveis:!0}},"$RZpQXdI40b")),f=await f,C(),f);s.tiposBens=w.value;async function K(p){p.excluido=!p.excluido;try{await k(`${updateAtosBens}/${p.id}`,{method:"PUT",body:JSON.stringify({excluido:p.excluido})},"$2X0Zo2w1OO")}catch(e){console.error("Erro ao excluir pessoa:",e)}}async function u(){try{const[p,e,y,Y,t]=await Promise.all([$fetch(O),$fetch(G),$fetch(W),$fetch(Q),$fetch(X)]);m.value=p,E.value=e,R.value=y,M.value=Y,N.value=t}catch(p){console.error("Erro ao carregar os dados de imoveis pessoa:",p)}finally{q.value=!1}}const L=()=>{const p=S.query.origem||"criar",e=S.query.id;p==="atualizar"?I.push(`/os/atualizar/${e}`):I.push("/os/criar-registro")};return Bl(()=>{z.ato_id?u():q.value=!1}),(p,e)=>{const y=el,Y=ol;return o(q)?(U(),D("div",Sl,[l(Cl,{indeterminate:"",class:"loading-spinner",size:"64"})])):(U(),ml($l,{key:1},{default:a(()=>[l(V,null,{default:a(()=>[l(r,{class:"mt-5",cols:"12"},{default:a(()=>[l(j,{label:"Descrição",modelValue:o(s).descricao,"onUpdate:modelValue":e[0]||(e[0]=t=>o(s).descricao=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(V,null,{default:a(()=>[l(r,{cols:"3"},{default:a(()=>[l(x,{label:"Selecione o Tipo de Registro",modelValue:o(s).tabvalores_tipo_regimovel_id,"onUpdate:modelValue":e[1]||(e[1]=t=>o(s).tabvalores_tipo_regimovel_id=t),items:o(E),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(r,{cols:"2"},{default:a(()=>[l(b,{label:"Cartório",modelValue:o(s).registro_cartorio,"onUpdate:modelValue":e[2]||(e[2]=t=>o(s).registro_cartorio=t)},null,8,["modelValue"])]),_:1}),l(r,{cols:"2"},{default:a(()=>[l(b,{label:"Matricula",modelValue:o(s).registro_matricula,"onUpdate:modelValue":e[3]||(e[3]=t=>o(s).registro_matricula=t)},null,8,["modelValue"])]),_:1}),l(r,null,{default:a(()=>[l(b,{label:"Letra",modelValue:o(s).registro_matricula_letra,"onUpdate:modelValue":e[4]||(e[4]=t=>o(s).registro_matricula_letra=t)},null,8,["modelValue"])]),_:1}),l(r,{cols:"2"},{default:a(()=>[l(x,{label:"Natureza",modelValue:o(s).tabvalores_nat_imovel_id,"onUpdate:modelValue":e[5]||(e[5]=t=>o(s).tabvalores_nat_imovel_id=t),items:o(m),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(r,{cols:"2"},{default:a(()=>[l(b,{label:"CIB",modelValue:o(s).cib,"onUpdate:modelValue":e[6]||(e[6]=t=>o(s).cib=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(V,null,{default:a(()=>[l(r,{cols:"3"},{default:a(()=>[l(x,{label:"Selecione a Cidade",modelValue:o(s).end_cidade_id,"onUpdate:modelValue":e[7]||(e[7]=t=>o(s).end_cidade_id=t),items:o(N),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(r,{cols:"2"},{default:a(()=>[l(b,{label:"Quadra",modelValue:o(s).end_quadra,"onUpdate:modelValue":e[8]||(e[8]=t=>o(s).end_quadra=t)},null,8,["modelValue"])]),_:1}),l(r,{cols:"2"},{default:a(()=>[l(b,{label:"Lote",modelValue:o(s).end_lote,"onUpdate:modelValue":e[9]||(e[9]=t=>o(s).end_lote=t)},null,8,["modelValue"])]),_:1}),l(r,{cols:"4"},{default:a(()=>[l(x,{label:"Logradouro",modelValue:o(s).tabvalores_tipologradouro_id,"onUpdate:modelValue":e[10]||(e[10]=t=>o(s).tabvalores_tipologradouro_id=t),items:o(M),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(r,{cols:"1"},{default:a(()=>[l(b,{label:"N*",modelValue:o(s).end_logradouro_numero,"onUpdate:modelValue":e[11]||(e[11]=t=>o(s).end_logradouro_numero=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(V,null,{default:a(()=>[l(r,null,{default:a(()=>[l(b,{label:"Bairro",modelValue:o(s).end_bairro,"onUpdate:modelValue":e[12]||(e[12]=t=>o(s).end_bairro=t)},null,8,["modelValue"])]),_:1}),l(r,null,{default:a(()=>[l(b,{label:"CEP",modelValue:o(s).end_cep,"onUpdate:modelValue":e[13]||(e[13]=t=>o(s).end_cep=t)},null,8,["modelValue"])]),_:1}),l(r,null,{default:a(()=>[l(b,{label:"Complemento",modelValue:o(s).end_complemento,"onUpdate:modelValue":e[14]||(e[14]=t=>o(s).end_complemento=t)},null,8,["modelValue"])]),_:1}),l(r,{cols:"3"},{default:a(()=>[l(x,{modelValue:o(s).tipo_id,"onUpdate:modelValue":e[15]||(e[15]=t=>o(s).tipo_id=t),label:"Selecione o tipo de imovel","item-title":"descricao","item-value":"id"},null,8,["modelValue"])]),_:1}),l(r,{cols:"3"},{default:a(()=>[l(b,{label:"Inscrição Municipal"})]),_:1})]),_:1}),l(V,null,{default:a(()=>[l(r,{class:"mt-6",cols:"3"},{default:a(()=>[l(x,{label:"Selecione a Situação",items:o(R),"item-title":"descricao","item-value":"id"},null,8,["items"])]),_:1}),l(r,null,{default:a(()=>[e[27]||(e[27]=d("label",null,"Valor Alienação",-1)),l(y,{label:"Valor Alienação",modelValue:o(s).vlr_alienacao,"onUpdate:modelValue":e[16]||(e[16]=t=>o(s).vlr_alienacao=t)},null,8,["modelValue"])]),_:1}),l(r,null,{default:a(()=>[e[28]||(e[28]=d("label",null,"Valor Avaliação",-1)),l(y,{label:"Valor Avaliação",modelValue:o(s).vlr_avaliacao,"onUpdate:modelValue":e[17]||(e[17]=t=>o(s).vlr_avaliacao=t)},null,8,["modelValue"])]),_:1}),l(r,null,{default:a(()=>[e[29]||(e[29]=d("label",null,"Valor Mercado",-1)),l(y,{label:"Valor Mercado",modelValue:o(s).vlr_mercado,"onUpdate:modelValue":e[18]||(e[18]=t=>o(s).vlr_mercado=t)},null,8,["modelValue"])]),_:1}),l(r,{cols:"1"},{default:a(()=>[e[30]||(e[30]=d("label",null,"%ITB",-1)),l(y,{label:"%ITB",modelValue:o(s).aliq_itbi,"onUpdate:modelValue":e[19]||(e[19]=t=>o(s).aliq_itbi=t)},null,8,["modelValue"])]),_:1}),l(r,null,{default:a(()=>[e[31]||(e[31]=d("label",null,"Valor ITB",-1)),l(y,{label:"Valor ITB",modelValue:o(s).vlr_itbi,"onUpdate:modelValue":e[20]||(e[20]=t=>o(s).vlr_itbi=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(V,null,{default:a(()=>[l(r,null,{default:a(()=>[l(Vl,{style:{height:"465px"},headers:H,items:o(v)},{"item.descricao":a(({item:t})=>[d("h3",Pl,cl(t.descricao),1)]),"item.actions":a(({item:t})=>[l(V,{style:{"margin-top":"-8px"},justify:"end"},{default:a(()=>[d("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ll=>p.redirectToFicha(t),title:"Visualizar Ficha"},e[32]||(e[32]=[d("img",{style:{width:"30px",height:"30px"},src:sl,alt:"Visualizar"},null,-1)]),8,ql),d("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ll=>i(t.id),title:"Alterar Papel"},e[33]||(e[33]=[d("img",{style:{width:"30px",height:"30px"},src:al,alt:"Editar"},null,-1)]),8,Dl),d("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ll=>K(t),title:"Deletar Pessoa"},[t.excluido?(U(),D("img",El)):(U(),D("img",Ml))],8,Ol)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),l(fl,{modelValue:o($),"onUpdate:modelValue":e[26]||(e[26]=t=>pl($)?$.value=t:null),"max-width":"600px"},{default:a(()=>[l(gl,null,{default:a(()=>[l(bl,{style:{color:"green"}},{default:a(()=>e[34]||(e[34]=[B("Atualizar Bem")])),_:1}),l(yl,null,{default:a(()=>[l(r,{class:"mt-1",cols:"12"},{default:a(()=>[l(j,{label:"Descrição",modelValue:o(n).descricao,"onUpdate:modelValue":e[21]||(e[21]=t=>o(n).descricao=t)},null,8,["modelValue"])]),_:1}),l(V,null,{default:a(()=>[l(r,{class:"mt-6 ml-3",cols:"8"},{default:a(()=>[l(x,{label:"Selecione o Tipo",items:o(s).tiposBens,modelValue:o(n).tipo_id,"onUpdate:modelValue":e[22]||(e[22]=t=>o(n).tipo_id=t),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),l(r,{class:"ml-5",cols:"3"},{default:a(()=>[e[35]||(e[35]=d("label",null,"Valor",-1)),l(y,{modelValue:o(n).valor_mercado,"onUpdate:modelValue":e[23]||(e[23]=t=>o(n).valor_mercado=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(xl,null,{default:a(()=>[l(_l),l(A,{color:"green",text:"",onClick:e[24]||(e[24]=t=>$.value=!1)},{default:a(()=>e[36]||(e[36]=[B("Cancelar")])),_:1}),l(A,{color:"green",text:"",onClick:e[25]||(e[25]=t=>c(o(n).id))},{default:a(()=>e[37]||(e[37]=[B("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(V,null,{default:a(()=>[l(Y,{onClick:L},{default:a(()=>[l(A,{size:"large",color:"red"},{default:a(()=>e[38]||(e[38]=[B("Voltar")])),_:1})]),_:1})]),_:1})]),_:1}))}}};export{Yl as _,hl as a};
