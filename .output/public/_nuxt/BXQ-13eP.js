import{_ as ue}from"./BkuDY5N6.js";import{u as K,C as re,H as ee,r as u,D as ce,o as N,G as ne,w as t,b as e,v as o,V as ae,A as L,d as B,s as te,m as W,I as ie,a as A,c as G,x as le,N as je,n as Ne,O as Ie,K as Ce,F as Ve,g as $e,P as we,t as ye}from"./CixPJBQW.js";import{u as _}from"./CpfKoSN8.js";import{V as z}from"./iK49xZYE.js";import{V as U}from"./DY-_DUDd.js";import{V as se}from"./DkRQYkrI.js";import{V as de}from"./CsH5sN0o.js";import{_ as Je,a as Ue}from"./CU6ASRRk.js";import{_ as Le,a as Be,b as Ye,T as We,W as Ze,S as Qe,r as Te,D as Se,c as Xe,d as Ge}from"./DQm-mCFG.js";import{_ as _e}from"./CkmYh2HC.js";import{_ as me,a as be,b as Ae}from"./BP1uhy__.js";import{_ as He}from"./DaS-fp9Y.js";import{V as ke}from"./BX0YqjZh.js";import{V as he}from"./BmF9TWVd.js";import{V as pe,c as Ke}from"./Yv4vTj4r.js";import{_ as Pe}from"./UAs9W3lW.js";import{c as et,r as tt,u as ot}from"./DUSONwZ2.js";import{_ as ge}from"./CVilXGDu.js";const Ft={__name:"Dados",props:{item_dados:{type:Array,required:!0},item_situacoes:{type:Array,required:!0}},setup(X){const f=X,{$toast:T}=K(),h=te(),g=re(),d=ee(),y=`${h.public.managemant}/updateAtos`,V=u(f.item_situacoes),S=ce({dt_abertura:f.item_dados[0].dt_abertura||null,status:f.item_dados[0].status||null,mne:f.item_dados[0].mne||null});async function I(){const{data:b,error:i,status:M}=await _(`${y}/${d.query.ato_id}`,{method:"PUT",body:{status:S.status,mne:S.mne,dt_abertura:S.dt_abertura}},"$EIT5jtTUdX");M.value==="success"&&T.success("Ato Atualizado com sucesso")}const J=()=>{const b=d.query.origem||"criar",i=d.query.id;b==="atualizar"?g.push(`/os/atualizar/${i}`):g.push("/os/criar-registro")};return(b,i)=>{const M=ue;return N(),ne(de,null,{default:t(()=>[e(z,{class:"mt-5"},{default:t(()=>[e(U,{cols:"3"},{default:t(()=>[e(se,{label:"Situação",modelValue:o(S).status,"onUpdate:modelValue":i[0]||(i[0]=$=>o(S).status=$),items:o(V),"item-title":"descricao","item-value":"descricao",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(U,{cols:"5"},{default:t(()=>[e(ae,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:o(S).mne,"onUpdate:modelValue":i[1]||(i[1]=$=>o(S).mne=$)},null,8,["modelValue"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(U,{cols:"2"},{default:t(()=>[e(ae,{modelValue:o(S).dt_abertura,"onUpdate:modelValue":i[2]||(i[2]=$=>o(S).dt_abertura=$),type:"date",label:"Data Lavratura",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(z,{class:"mb-3"},{default:t(()=>[e(M,{onClick:J},{default:t(()=>[e(L,{size:"large",color:"red"},{default:t(()=>i[3]||(i[3]=[B("Voltar")])),_:1})]),_:1}),e(L,{class:"ml-10",onClick:I,size:"large",color:"green"},{default:t(()=>i[4]||(i[4]=[B("Atualizar")])),_:1})]),_:1})]),_:1})}}},at=["onClick"],st=["onClick"],rt=["onClick"],nt={key:0,style:{width:"30px",height:"30px"},src:be,alt:"Visualizar",title:"Reativar"},lt={key:1,src:Ae,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},it=["onClick"],jt={__name:"Partes",async setup(X){let f,T;const h=re(),g=ee(),d=te(),{$toast:y}=K(),V=`${d.public.managemant}/pesquisarPessoas`,S=`${d.public.managemant}/listarPapeis`,I=`${d.public.managemant}/getLinkTipo`,J=`${d.public.managemant}/createAtosPessoa`,b=`${d.public.managemant}/updateAtosPessoa`,i=`${d.public.managemant}/getAtosPessoaById`,M=`${d.public.managemant}/download`,$=u(W("user-data").value.cartorio_token),w=u([]),O=u([]),q=u([]),P=u(!1),j=u(!1),C=u(!1),v=u(!1),R=u(null),x=u(null),r=u(null),c=u(null),a=u(null),s=u(g.query.tipo_ato_token),n=u(null),m=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],p=ce({papeis:null,nome:null,pessoa:null,documento:null}),{data:E}=([f,T]=ie(()=>_(S,{method:"POST",body:{tipo_ato_token:g.query.tipo_ato_token}},"$acoiTIUp00")),f=await f,T(),f);q.value=E.value;const F=async()=>{const{data:k}=await _(`${i}/${g.query.ato_id}`,{method:"GET"},"$ypnU9hCpVn"),Y=(H=>H.map(Z=>({...Z,pessoa:{...Z.pessoa,documento:Z.pessoa.doc_identificacao},papel:{...Z.partes_tipos}})))(k.value);O.value=Y};F();async function oe(){try{const{data:k,error:l}=await _(V,{method:"POST",body:{cartorio_token:$.value,documento:p.documento,nome:p.nome}},"$pr30MyPXfY");k.value.length>0?(w.value=k.value,p.pessoa=w.value[0]):w.value=[]}catch(k){console.error("Erro na requisição",k)}}const fe=()=>{j.value=!0},xe=async()=>{await F()},Ee=async()=>{await F()},De=async()=>{const k={pessoa:p.pessoa,papel:q.value.find(Q=>Q.id===p.papeis),representante:{nome:null}},l=await _(`${i}/${g.query.ato_id}`,{method:"GET"},"$scHdIvxj2D");for(const Q of l.data.value)if(Q.pessoa_id===p.pessoa.id&&Q.ato_id===Number(g.query.ato_id)&&Q.tipo_parte_id===p.papeis){y.error("Pessoa Já Registrada Com Esse Papel!");return}const{data:Y,error:H,status:Z}=await _(J,{method:"POST",body:{ato_id:Number(g.query.ato_id),pessoa_id:p.pessoa.id,tipo_parte_id:p.papeis,user_id:W("user-data").value.usuario_id}},"$18isAgOJxG");Z.value==="success"?(k.id=Y.value.id,y.success("Pessoa Registrada com Sucesso!"),O.value.push(k)):y.error(H.value.message)},Me=async k=>{var Q;if(C.value=!0,n.value=null,!k.pessoa.id)return;const{data:l}=await _(I,{method:"POST",body:{tipo:"ficha",id:k.pessoa.id}},"$hmDzSF3F61");if(!((Q=l.value)!=null&&Q.link))return;const{data:Y}=await _(M,{method:"POST",body:{bucket:"qvgjz",path:l.value.link}},"$l09I6nLRfk"),H=l.value.link,Z=Y.value;/\.(tr7|tiff)$/i.test(H)?n.value=Z:fotoRender.value=`data:image/jpeg;base64,${Z}`},Oe=k=>{const l=O.value.filter(Y=>Y.pessoa.id!==k.pessoa.id).map(Y=>({id:Y.pessoa.id,nome:Y.pessoa.nome}));r.value=k.id,R.value=l,P.value=!0,x.value=k.pessoa.nome,a.value=k.pessoa.id},qe=k=>{v.value=!0,c.value=k.id,x.value=k.pessoa.nome};async function ze(k){k.excluido=!k.excluido;try{await _(`${b}/${k.id}`,{method:"PUT",body:JSON.stringify({excluido:k.excluido})},"$PUt0nEhmBF")}catch(l){console.error("Erro ao excluir pessoa:",l)}}const Re=()=>{const k=g.query.origem||"criar",l=g.query.id;k==="atualizar"?h.push(`/os/atualizar/${l}`):h.push("/os/criar-registro")};return(k,l)=>{const Y=Je,H=Be,Z=Ye,Q=Ue,Fe=ue;return N(),ne(de,null,{default:t(()=>[e(z,{class:"mt-5"},{default:t(()=>[e(U,{cols:"3"},{default:t(()=>[e(ae,{label:"Documento",modelValue:o(p).documento,"onUpdate:modelValue":l[0]||(l[0]=D=>o(p).documento=D)},null,8,["modelValue"])]),_:1}),e(U,{cols:"4"},{default:t(()=>[e(ae,{label:"Pessoa",modelValue:o(p).nome,"onUpdate:modelValue":l[1]||(l[1]=D=>o(p).nome=D)},null,8,["modelValue"])]),_:1}),A("div",null,[A("img",{class:"mt-1",src:_e,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:oe})]),A("div",null,[A("img",{class:"mt-1 ml-2",src:me,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:fe})])]),_:1}),e(z,null,{default:t(()=>[e(U,{cols:"4"},{default:t(()=>[e(se,{label:"Selecione a Pessoa",modelValue:o(p).pessoa,"onUpdate:modelValue":l[2]||(l[2]=D=>o(p).pessoa=D),items:o(w),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(U,{cols:"3"},{default:t(()=>[e(se,{label:"Papel",modelValue:o(p).papeis,"onUpdate:modelValue":l[3]||(l[3]=D=>o(p).papeis=D),items:o(q),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),A("div",null,[A("img",{class:"mt-1",src:me,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:De})])]),_:1}),e(z,null,{default:t(()=>[e(U,null,{default:t(()=>[e(ke,{style:{height:"465px"},headers:m,items:o(O)},{"item.actions":t(({item:D})=>[e(z,null,{default:t(()=>[A("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ve=>Me(D),title:"Visualizar Ficha"},l[9]||(l[9]=[A("img",{style:{width:"30px",height:"30px"},src:_e,alt:"Visualizar"},null,-1)]),8,at),A("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ve=>qe(D),class:"mr-2",title:"Alterar Papel"},l[10]||(l[10]=[A("img",{style:{width:"30px",height:"30px"},src:He,alt:"Visualizar"},null,-1)]),8,st),A("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ve=>ze(D),title:"Deletar Pessoa"},[D.excluido?(N(),G("img",nt)):(N(),G("img",lt))],8,rt),A("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ve=>Oe(D),title:"Selecionar Representante"},l[11]||(l[11]=[A("img",{style:{width:"30px",height:"30px"},src:Le,alt:"Visualizar"},null,-1)]),8,it)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(Y,{show:o(j),onClose:l[4]||(l[4]=D=>j.value=!1)},null,8,["show"]),e(H,{representante_nome:o(x),representantes:o(R),ato_id:o(r),show:o(P),onClose:l[5]||(l[5]=D=>P.value=!1),onUpdateRepresentante:Ee},null,8,["representante_nome","representantes","ato_id","show"]),e(Z,{representante_nome:o(x),ato_token:o(s),ato_id:o(c),show:o(v),onClose:l[6]||(l[6]=D=>v.value=!1),onUpdatePapel:xe},null,8,["representante_nome","ato_token","ato_id","show"]),e(he,{modelValue:o(C),"onUpdate:modelValue":l[8]||(l[8]=D=>le(C)?C.value=D:null),width:"600"},{default:t(()=>[e(pe,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(Q,{"tiff-url":o(n)},null,8,["tiff-url"]),e(L,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:l[7]||(l[7]=D=>C.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(z,null,{default:t(()=>[e(Fe,{onClick:Re},{default:t(()=>[e(L,{size:"large",color:"red"},{default:t(()=>l[12]||(l[12]=[B("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},ut={key:0,class:"loading-overlay"},ct="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",Nt={__name:"Minuta",emits:["page","doc"],setup(X,{emit:f}){je("DocumentEditorContainer",[We,Ze,Qe]);const T=te(),{$toast:h}=K(),g=re(),d=ee(),y=f;Te(`${T.public.docEditor}`);const V=`${T.public.managemant}/download`,S=`${T.public.managemant}/atos/files`,I=`${T.public.managemant}/subitituirModelo`,J=`${T.public.managemant}/upload`,b=u(null),i=u(!1),M=u("Ao executar a geração, a minuta atual será substituída e não poderá ser recuperada.Confirma ?"),$=u(!1),w=async a=>{try{const s=await fetch(a);if(!s.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await s.blob()}catch(s){return console.error(s),null}},O=async()=>{try{const{data:a}=await _(`${S}/${d.query.ato_token_edit}`,{method:"GET"},"$5jxI4TvFse");return a.value.link_ato}catch(a){console.error("Erro ao carregar o documento:",a),h.error(a)}},q=async()=>{$.value=!0;try{const a=await O(),{data:s,status:n}=await _(V,{method:"POST",body:{bucket:"qvgjz",path:a}},"$dvNFfvmIJC"),m=s.value,p=await w(m);if(p){const E=new FileReader;E.onload=()=>{const F=E.result;b.value.ej2Instances.documentEditor.open(F),y("doc",F)},E.readAsText(p)}}catch{console.error("Erro ao carregar o documento.")}finally{$.value=!1}},P=async()=>{const s=await b.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),n=new FileReader;n.onload=()=>{const m=n.result,E=b.value.ej2Instances.documentEditor.pageCount;y("page",E),y("doc",m)},n.readAsText(s)},j=async()=>{$.value=!0;try{const s=await b.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),n=new FormData;n.append("file",s,"anexo.sfdt"),n.append("cartorio_token",W("user-data").value.cartorio_token),n.append("token",d.query.ato_token_edit),n.append("tipo","ato_minuta");const{data:m,status:p}=await _(J,{method:"POST",body:n},"$xv11VtUdMy");if(p.value==="success"){h.success("Documento enviado!");const F=b.value.ej2Instances.documentEditor.pageCount;P(),y("page",F)}else h.error("Erro ao enviar documento para o sistema.")}catch(a){h.error("Erro ao salvar documento."),console.error(a)}finally{$.value=!1}},C=()=>{i.value=!1,v()},v=async()=>{r(!0);try{await R(),r(!0);const{data:a,status:s}=await _(I,{method:"POST",body:{ato_token:d.query.ato_token_edit}},"$zyzWHTXTBW");a.value&&x(a.value)}catch(a){console.error("Erro ao gerar a minuta:",a),h.error("Ocorreu um erro ao gerar a minuta.")}finally{r(!1)}},R=async()=>{try{const{data:a}=await _(V,{method:"POST",body:{bucket:"qvgjz",path:"provider/modeloAto.sfdt"}},"$KreLE0Ys81"),s=await w(a.value);if(s){const n=new FileReader;n.onload=()=>{const m=n.result;b.value.ej2Instances.documentEditor.open(m),y("doc",m)},n.readAsText(s)}}catch(a){console.error("Erro ao carregar o modelo de minuta:",a)}},x=a=>{const s=b.value.ej2Instances.documentEditor,n=m=>{for(const[p,E]of Object.entries(m))if(/^<<.+>>$/.test(p))try{s.search.findAll(p),s.search.searchResults.length>0&&s.search.searchResults.replaceAll(E)}catch(F){console.error(`Erro ao substituir o marcador ${p}:`,F)}else if(p==="partes"&&Array.isArray(E)&&E.length>0)for(const F of E)typeof F=="object"&&n(F)};n(a)},r=a=>{$.value=a},c=()=>{const a=d.query.origem||"criar",s=d.query.id;a==="atualizar"?g.push(`/os/atualizar/${s}`):g.push("/os/criar-registro")};return Ne(async()=>{await q(),P()}),(a,s)=>{const n=ue,m=Pe;return N(),G(Ve,null,[e(o(Se),{height:"900px",ref_key:"documentEditorContainer",ref:b,serviceUrl:ct,enableToolbar:!0,enableWordExport:!0},null,512),o($)?(N(),G("div",ut,[e(Ie,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):Ce("",!0),e(z,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(n,{class:"mr-4"},{default:t(()=>[e(L,{size:"large",onClick:c,color:"red"},{default:t(()=>s[2]||(s[2]=[B("Voltar")])),_:1})]),_:1}),e(L,{size:"large",color:"green",onClick:j,disabled:o($)},{default:t(()=>s[3]||(s[3]=[B("Atualizar")])),_:1},8,["disabled"]),e(L,{class:"ml-4",size:"large",color:"blue",onClick:s[0]||(s[0]=p=>i.value=!0)},{default:t(()=>s[4]||(s[4]=[B("Gerar Minuta")])),_:1})]),_:1}),e(m,{onConfirm:C,condMessage:o(M),show:o(i),onClose:s[1]||(s[1]=p=>i.value=!1)},null,8,["condMessage","show"])],64)}}},dt=["innerHTML"],It={__name:"Livro",props:{pages:{type:Number,required:!0},document:{type:String,required:!0}},async setup(X){let f,T;const h=X,g=te();Te(`${g.public.docEditor}`);const{$toast:d}=K(),y=re(),V=ee(),S=`${g.public.managemant}/download`,I=`${g.public.managemant}/atos/files`,J=`${g.public.managemant}/lavrarAto`,b=`${g.public.managemant}/listarEscrevente`,i=u(W("user-data").value.cartorio_token),M=W("auth_token").value,$=u("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),w=u(!1),O=u(null),q=u(null),P=u(null),j=u([]),C=ce({escrevente:null}),v=async n=>{try{const m=await fetch(n);if(!m.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await m.blob()}catch(m){return console.error(m),null}},R=async()=>{try{const{data:n}=await _(`${I}/${V.query.ato_token_edit}`,{method:"GET"},"$FnEbAJEARP");return n.value.link_ato}catch(n){console.error("Erro ao carregar o documento:",n),d.error(n)}},x=async()=>{try{const n=await R(),{data:m,status:p}=await _(S,{method:"POST",body:{bucket:"qvgjz",path:n}},"$7ljqltMqa0"),E=m.value,F=await v(E);if(F){const oe=new FileReader;oe.onload=()=>{const fe=oe.result;P.value.ej2Instances.documentEditor.open(fe)},oe.readAsText(F)}}catch{d.error("Erro ao carregar o documento.")}};x();const r=async()=>{try{const{data:n,status:m}=await _(J,{method:"POST",body:{ato_token:V.query.ato_token_edit,qtd_paginas:h.pages,escrevente_token:C.escrevente,usuario_token:M,cartorio_token:i}},"$OWxZSQkyX8");m.value==="success"?(O.value=n.value,q.value=n.value[0].selo,d.success("Ato lavrado com sucesso!")):d.error("Falha ao lavrar o ato.")}catch{d.error("Erro ao conectar com o servidor.")}},c=()=>{w.value=!1,r()},{data:a}=([f,T]=ie(()=>_(b,{method:"POST",body:{cartorio_token:i}},"$sMqfUUQcBM")),f=await f,T(),f);j.value=a.value[0].func_json_escreventes;const s=()=>{const n=V.query.origem||"criar",m=V.query.id;n==="atualizar"?y.push(`/os/atualizar/${m}`):y.push("/os/criar-registro")};return $e(()=>h.document,(n,m)=>{x()}),(n,m)=>{const p=Pe;return N(),G(Ve,null,[e(z,null,{default:t(()=>[e(U,null,{default:t(()=>[e(o(Se),{restrictEditing:!0,enableToolbar:!1,ref_key:"documentEditorContainer",ref:P,height:"850px",width:"850px"},null,512)]),_:1}),e(U,null,{default:t(()=>[e(se,{class:"mt-15",label:"Tabelião/escrevente",modelValue:o(C).escrevente,"onUpdate:modelValue":m[0]||(m[0]=E=>o(C).escrevente=E),items:o(j),"item-title":"nome","item-value":"token",required:""},null,8,["modelValue","items"]),A("img",{onClick:m[1]||(m[1]=E=>w.value=!0),style:{height:"80px",width:"80px",cursor:"pointer","margin-top":"40px"},src:Xe}),o(O)?(N(),ne(pe,{key:0,width:"360"},{default:t(()=>[e(z,null,{default:t(()=>[e(U,null,{default:t(()=>[e(we,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[B(" Livro: "+ye(o(O)[0].livro_numero),1)]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(we,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[B(" Folhas : "+ye(o(O)[0].pagina_inicial)+" A "+ye(o(O)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),A("div",{style:{"margin-left":"10px","padding-bottom":"20px","margin-top":"-10px"},innerHTML:o(q)},null,8,dt)]),_:1})):Ce("",!0)]),_:1})]),_:1}),e(L,{class:"mt-5 ml-7 mb-5",color:"red",size:"large",onClick:s},{default:t(()=>m[3]||(m[3]=[B("Voltar")])),_:1}),e(p,{show:o(w),condMessage:o($),onClose:m[2]||(m[2]=E=>w.value=!1),onConfirm:c},null,8,["show","condMessage"])],64)}}},mt=["onClick"],pt={key:0,style:{width:"30px",height:"30px"},src:be,alt:"Visualizar",title:"Reativar"},ft={key:1,src:Ae,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Jt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(X){let f,T;const h=re(),g=ee(),d=te(),{$toast:y}=K(),V=`${d.public.managemant}/listarEscrevente`;`${d.public.managemant}`;const S=`${d.public.managemant}/atos_observacao`,I=`${d.public.managemant}/atos_observacao`,J=`${d.public.managemant}/atos_observacao`,b=u(W("user-data").value.cartorio_token),i=u([]),M=u([]),$=[{title:"Data",align:"start",key:"created"},{title:"Escrevente",align:"start",key:"users.nome"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],w=ce({observacao:""}),O={observacao:{required:et.withMessage("O campo é obrigatório",tt)}},q=ot(O,w),{data:P}=([f,T]=ie(()=>_(`${J}/${g.query.ato_id}`,{method:"GET"},"$HyzoO40swN")),f=await f,T(),f);Array.isArray(P.value)?i.value=P.value.map(x=>({...x,created:ge(x.created,"dd/mm/yyyy hh:mm")})):P.value&&typeof P.value=="object"&&(i.value=[{...P.value,created:ge(P.value.created,"dd/mm/yyyy hh:mm")}]);async function j(){if(w.observacao.trim()===""){y.error("O campo de observação está vazio.");return}if(await q.value.$validate()){const{data:x,error:r,status:c}=await _(S,{method:"POST",body:{ato_id:Number(g.query.ato_id),observacao:w.observacao,user_id:W("user-data").value.usuario_id}},"$gnHMo4uCXD");c.value==="success"&&(i.value.push({created:ge(x.value.created,"dd/mm/yyyy hh:mm"),observacao:x.value.observacao,id:x.value.id,escrevente:W("user-data").value.nome}),w.observacao="",y.success("Observação registrada com sucesso"))}else y.error("Preencha os campos obrigatórios.")}async function C(x){x.excluido=!x.excluido;try{await _(`${I}/${x.id}`,{method:"PUT",body:JSON.stringify({excluido:x.excluido})},"$sP9AKdd3Ky")}catch(r){console.error("Erro ao excluir observação:",r)}}const{data:v}=([f,T]=ie(()=>_(V,{method:"POST",body:{cartorio_token:b}},"$HL9pndqGh0")),f=await f,T(),f);M.value=v.value[0].func_json_escreventes;const R=()=>{const x=g.query.origem||"criar",r=g.query.id;x==="atualizar"?h.push(`/os/atualizar/${r}`):h.push("/os/criar-registro")};return(x,r)=>{const c=ue;return N(),ne(de,null,{default:t(()=>[e(z,{class:"mt-5"},{default:t(()=>[e(ae,{label:"Observação",modelValue:w.observacao,"onUpdate:modelValue":r[0]||(r[0]=a=>w.observacao=a),required:"","error-messages":o(q).observacao.$errors.length>0?o(q).observacao.$errors.map(a=>a.$message):[],onBlur:o(q).observacao.$touch,onInput:o(q).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),A("div",null,[A("img",{class:"btn-pointer ml-2",src:me,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:j})])]),_:1}),e(z,null,{default:t(()=>[e(U,null,{default:t(()=>[e(ke,{style:{height:"465px"},headers:$,items:i.value},{"item.actions":t(({item:a})=>[A("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:s=>C(a),title:"Deletar Observação"},[a.excluido?(N(),G("img",pt)):(N(),G("img",ft))],8,mt)]),_:1},8,["items"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(c,{onClick:R},{default:t(()=>[e(L,{size:"large",color:"red"},{default:t(()=>r[1]||(r[1]=[B("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},vt="data:image/png;base64,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",yt=["onClick"],gt=["onClick"],_t={key:0,style:{width:"30px",height:"30px"},src:be,alt:"Visualizar",title:"Reativar"},bt={key:1,src:Ae,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Ut={__name:"Anexos",async setup(X){let f,T;const h=te(),{$toast:g}=K(),d=re(),y=ee(),V=`${h.public.biometria}/run-scanner`,S=`${h.public.managemant}/atos_anexos`,I=`${h.public.managemant}/atos_anexos`,J=`${h.public.managemant}/atos_anexos`,b=u(!1),i=u([]),M=ce({descricao:""}),$=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}],{data:w}=([f,T]=ie(()=>_(`${J}/${y.query.ato_id}`,{method:"GET"},"$AOZpbz65MA")),f=await f,T(),f);i.value=w.value;async function O(){try{await q(),await P()}catch(r){console.error("Erro ao executar scanner ou listar arquivos:",r)}}async function q(){try{const{data:r}=await _(V,{method:"GET"},"$KttjFhHivJ")}catch(r){g.error("Erro ao acionar o scanner:",r)}}async function P(){try{const{data:r,status:c}=await _("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:y.query.ato_token_edit,cartorio_token:W("user-data").value.cartorio_token}},"$TqQrsgxUkd")}catch(r){console.error("Erro ao enviar o arquivo:",r)}}async function j(){try{const r=document.createElement("input");r.type="file",r.accept="*/*",r.onchange=async c=>{const a=c.target.files[0];a&&console.log(a)},r.click()}catch(r){console.error("Erro ao abrir o explorador de arquivos:",r)}}const C=async()=>{b.value=!0},v=async()=>{const{data:r,error:c,status:a}=await _(S,{method:"POST",body:{ato_id:y.query.ato_id,descricao:M.descricao,user_id:W("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$KDhIYzGKzM");a.value==="success"&&(g.success("Anexo registrado com sucesso!"),i.value.push(r.value))};async function R(r){r.excluido=!r.excluido;try{await _(`${I}/${r.id}`,{method:"PUT",body:JSON.stringify({excluido:r.excluido})},"$cdoFBGO0Ti")}catch(c){console.error("Erro ao excluir pessoa:",c)}}const x=()=>{const r=y.query.origem||"criar",c=y.query.id;r==="atualizar"?d.push(`/os/atualizar/${c}`):d.push("/os/criar-registro")};return(r,c)=>{const a=ue;return N(),ne(de,null,{default:t(()=>[e(z,null,{default:t(()=>[e(U,{cols:"5",class:"mt-2"},{default:t(()=>[e(ae,{modelValue:o(M).descricao,"onUpdate:modelValue":c[0]||(c[0]=s=>o(M).descricao=s),label:"Descrição"},null,8,["modelValue"])]),_:1}),A("div",{onClick:O,title:"Escanear"},c[3]||(c[3]=[A("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Ge,alt:"Escanear"},null,-1)])),A("div",{onClick:j,title:"Criar"},c[4]||(c[4]=[A("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:vt,alt:"Criar"},null,-1)])),A("div",{onClick:v,title:"Criar"},c[5]||(c[5]=[A("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:me,alt:"Criar"},null,-1)]))]),_:1}),e(ke,{headers:$,items:o(i),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:s})=>[e(z,null,{default:t(()=>[A("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:n=>C(s),title:"Visualizar Anexo"},c[6]||(c[6]=[A("img",{style:{width:"30px",height:"30px"},src:_e,alt:"Visualizar"},null,-1)]),8,yt),A("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:n=>R(s),title:"Deletar Pessoa"},[s.excluido?(N(),G("img",_t)):(N(),G("img",bt))],8,gt)]),_:2},1024)]),_:1},8,["items"]),e(he,{modelValue:o(b),"onUpdate:modelValue":c[2]||(c[2]=s=>le(b)?b.value=s:null),width:"600"},{default:t(()=>[e(pe,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(L,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:c[1]||(c[1]=s=>b.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(a,{onClick:x},{default:t(()=>[e(L,{size:"large",color:"red"},{default:t(()=>c[7]||(c[7]=[B("Voltar")])),_:1})]),_:1})]),_:1})}}},Lt={__name:"TiposAtos",props:{show:Boolean,servicos:Array,tiposAtos:Array},emits:["close","update-ato"],setup(X,{emit:f}){const h=u(X.show),{$toast:g}=K(),d=ee(),y=u(""),V=u(""),S=te(),I=W("auth_token").value,J=u(W("user-data").value.cartorio_token).value,b=u([]),i=u([]),M=f,$=`${S.public.managemant}/updateAtos`,w=`${S.public.managemant}/tipoAtos`,O=async()=>{const{data:C}=await _(w,{method:"POST",body:{usuario_token:I,cartorio_token:J}},"$6VlNS7ylT6");b.value=C.value,b.value.length>0&&(y.value=b.value[0])},q=async C=>{const{data:v}=await _(w,{method:"POST",body:{usuario_token:I,cartorio_token:J,servico_token:C}},"$pRqAaiCpuA");i.value=v.value},P=async()=>{const{data:C,status:v}=await _(`${$}/${d.query.ato_id}`,{method:"PUT",body:{ato_tipo_id:V.value.id}},"$Qxfq8aWnXP");v.value==="success"&&(g.success("Tipo de ato atualizado com Sucesso!"),M("update-ato",{descricao:`${y.value.descricao} - ${V.value.descricao}`,usaImoveisParams:V.value.usa_imoveis}),j())},j=()=>{h.value=!1,M("close")};return $e(y,async C=>{C&&(await q(C.token),V.value=i.value.length>0?i.value[0]:null)}),O(),(C,v)=>(N(),ne(he,{persistent:"",modelValue:o(h),"onUpdate:modelValue":v[3]||(v[3]=R=>le(h)?h.value=R:null),"max-width":"500"},{default:t(()=>[e(pe,null,{default:t(()=>[e(de,null,{default:t(()=>[e(z,{class:"mt-1 mb-3",style:{"justify-content":"space-between"}},{default:t(()=>v[4]||(v[4]=[A("h1",{class:"ml-4"},"Tipos de Atos",-1)])),_:1}),v[5]||(v[5]=A("hr",{class:"mb-5"},null,-1)),e(se,{"item-title":"descricao","item-value":"token",class:"mb-5",label:"Selecione o Serviço",modelValue:o(y),"onUpdate:modelValue":v[0]||(v[0]=R=>le(y)?y.value=R:null),items:o(b),"return-object":""},null,8,["modelValue","items"]),e(se,{"item-title":"descricao","item-value":"id",class:"mb-5",label:"Selecione o Tipo de Ato",modelValue:o(V),"onUpdate:modelValue":v[1]||(v[1]=R=>le(V)?V.value=R:null),items:o(i),"return-object":""},null,8,["modelValue","items"])]),_:1}),e(Ke,null,{default:t(()=>[e(L,{style:{"background-color":"red",color:"white"},onClick:j},{default:t(()=>v[6]||(v[6]=[B("Voltar")])),_:1}),e(L,{style:{"background-color":"green",color:"white"},onClick:v[2]||(v[2]=R=>P())},{default:t(()=>v[7]||(v[7]=[B("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{Lt as _,Ft as a,jt as b,Nt as c,It as d,Jt as e,Ut as f};
