import{_ as N}from"./Bar5RyOb.js";import{_ as L}from"./B2OP79gw.js";import{_ as P,u as R,E as F,r as n,D as m,G as U,H as X,o as j,A as D,x as G,w as u,b as o,a as $,q as t,s as H,y as h,d as x}from"./1M8GdJrq.js";import{a as p}from"./B5s2eAE8.js";import{c as J,r as K,u as Q}from"./D2ldJ2oq.js";import{V as W}from"./BLM_4RUo.js";import{V as Y}from"./Zm7qMNOC.js";import{V as Z}from"./CV9mWZ11.js";import{V as ee}from"./BooaNLMk.js";import"./dwAFyvZN.js";const te={style:{width:"600px","margin-top":"10px"}},ae={style:{width:"180px","margin-top":"20px"}},oe={__name:"autenticacao",props:{ato_token:{type:String,required:!0}},async setup(y){let l,f;const w=y,k=R(),g=F(),d=G(),A=`${d.public.managemant}/listarEscrevente`,_=n(m("user-data").value.cartorio_token).value,C=n(m("user-service").value.token).value||n(m("user-service").value).value,B=m("auth_token").value,M=`${d.public.managemant}/atoAutentica`,O=`${d.public.managemant}/etiquetaAutentica`,v=n(!1),V=n(""),s=U({escrevente:null,quantidade:1}),b=n([]),{data:S}=([l,f]=X(()=>p(A,{method:"POST",body:{cartorio_token:_}},"$nXL9eJBhI7")),l=await l,f(),l);b.value=S.value[0].func_json_escreventes;const T={escrevente:{required:J.withMessage("O campo é obrigatorio",K)}},c=Q(T,s),z=async()=>{if(await c.value.$validate()){const{data:a,status:e,error:i}=await p(M,{method:"POST",body:{usuario_token:B,cartorio_token:_,quantidade:Number(s.quantidade),ordemserv_token:C,ato_tipo_token:w.ato_token}},"$dpfLzAlO85");e.value==="success"&&a.value.status==="OK"?E(a.value.token):(v.value=!0,V.value=a.value.status_mensagem||i.value.data.details)}},E=async a=>{const{data:e,status:i}=await p(O,{method:"POST",body:{escrevente_token:s.escrevente,cartorio_token:_,ato_token:a}},"$fPnSl9XMLA");i.value==="success"&&(q(),console.log(e.value))},q=()=>{const a=g.query.origem||"criar",e=g.query.id;a==="atualizar"?k.push(`/os/atualizar/${e}`):k.push("/os/criar-registro")};return(a,e)=>{const i=N,I=L;return j(),D(ee,{class:"mt-10",title:"Autenticação"},{default:u(()=>[o(Z,null,{default:u(()=>[$("div",te,[o(W,{label:"Tabelião/escrivão",modelValue:t(s).escrevente,"onUpdate:modelValue":e[0]||(e[0]=r=>t(s).escrevente=r),items:t(b),"item-title":"nome","item-value":"token",required:"","error-messages":t(c).escrevente.$errors.map(r=>r.$message),onBlur:t(c).escrevente.$touch,onInput:t(c).escrevente.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),$("div",ae,[o(H,{type:"number",label:"Quantidade",modelValue:t(s).quantidade,"onUpdate:modelValue":e[1]||(e[1]=r=>t(s).quantidade=r)},null,8,["modelValue"])]),o(Y,{class:"mb-3 mt-2"},{default:u(()=>[o(i,{onClick:q},{default:u(()=>[o(h,{class:"ml-4",size:"large",color:"red"},{default:u(()=>[x("Voltar")]),_:1})]),_:1}),o(h,{class:"ml-4",size:"large",color:"green",onClick:z},{default:u(()=>[x("Salvar")]),_:1})]),_:1})]),_:1}),o(I,{show:t(v),errorMessage:t(V),onClose:e[2]||(e[2]=r=>v.value=!1)},null,8,["show","errorMessage"])]),_:1})}}},ve=P(oe,[["__scopeId","data-v-17ca1ed9"]]);export{ve as default};
