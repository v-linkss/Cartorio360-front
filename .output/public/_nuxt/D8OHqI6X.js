import{_ as Q}from"./CxqckAzS.js";import{c as pe,r as _e,u as ve}from"./CyuTucyo.js";import{C as K,H as J,u as Y,r as d,m as D,D as ee,I as Z,o as z,G as W,w as t,b as e,v as o,V as G,A as j,d as F,s as H,a as p,c as L,x as fe,L as De,M as Me,K as ge,F as ye,N as me,t as re}from"./CahgHD4s.js";import{u as x,V as P}from"./CqXH_2-Y.js";import{V as M}from"./CXKKc63K.js";import{V as be}from"./CrqZoQ3P.js";import{V as te}from"./CvQ3xxjU.js";import{_ as Re}from"./DVjPvVU6.js";import{_ as Ie,a as Be,b as Ne,T as je,W as Fe,r as xe,D as he,c as Ue,d as Le}from"./xMfB1hex.js";import{_ as ne}from"./g2JvG76Y.js";import{_ as X}from"./BVz1G1IN.js";import{_ as We,a as le,b as ie}from"./B7VgIJPM.js";import{V as ue}from"./DHJGDUzK.js";import{V as $e,a as ce}from"./BMiOKdmx.js";import{V as Ge}from"./DFrhZmaR.js";import{_ as Ke}from"./Daq06LZN.js";import{_ as Je}from"./CdP3NN9a.js";const Pt={__name:"Dados",props:{ato_token:{type:String,required:!0}},emits:["saved"],async setup(I,{emit:_}){let v,g;const h=I,A=_,y=K(),k=J(),T=H(),{$toast:f}=Y(),V=`${T.public.managemant}/listarSituacoes`,O=`${T.public.managemant}/createAtos`,B=`${T.public.managemant}/getAtosTiposByToken`,R=d(D("user-data").value.cartorio_token),N=d(D("user-service").value.id).value||d(D("user-service").value).value,S=d([]),i=ee({dt_abertura:null,status:"EM EDIÇÃO",mne:null}),b={status:{required:pe.withMessage("O campo é obrigatorio",_e)}},n=ve(b,i),{data:c}=([v,g]=Z(()=>x(`${B}/${h.ato_token}`,{method:"GET"},"$9ZmTYsLk0K")),v=await v,g(),v);async function a(){if(await n.value.$validate()){const{data:l,error:r,status:U}=await x(O,{method:"POST",body:{ato_tipo_id:c.value.id,cartorio_id:D("user-data").value.cartorio_id,ordemserv_id:N,status:i.status,dt_abertura:i.dt_abertura,mne:i.mne,user_id:D("user-data").value.usuario_id,user_alteracao_id:D("user-data").value.usuario_id}},"$hyq5YcBEjF");U.value==="success"&&(f.success("Ato registrado com sucesso!"),A("saved",{id:l.value.id,token:l.value.token}))}else f.error("Preencha os campos obrigatorios.")}const{data:u}=([v,g]=Z(()=>x(V,{method:"POST",body:{cartorio_token:R.value}},"$S3qwbpImEh")),v=await v,g(),v);S.value=u.value;const w=()=>{const l=k.query.origem||"criar",r=k.query.id;l==="atualizar"?y.push(`/os/atualizar/${r}`):y.push("/os/criar-registro")};return(l,r)=>{const U=Q;return z(),W(te,null,{default:t(()=>[e(P,{class:"mt-5"},{default:t(()=>[e(M,{cols:"3"},{default:t(()=>[e(be,{label:"Situação",modelValue:o(i).status,"onUpdate:modelValue":r[0]||(r[0]=$=>o(i).status=$),items:o(S),"item-title":"descricao","item-value":"descricao",required:"","error-messages":o(n).status.$errors.map($=>$.$message),onBlur:o(n).status.$touch,onInput:o(n).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(M,{cols:"5"},{default:t(()=>[e(G,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:o(i).mne,"onUpdate:modelValue":r[1]||(r[1]=$=>o(i).mne=$)},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(M,{cols:"2"},{default:t(()=>[e(G,{modelValue:o(i).dt_abertura,"onUpdate:modelValue":r[2]||(r[2]=$=>o(i).dt_abertura=$),type:"date",label:"Data Lavratura",disabled:"",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(P,{class:"mb-3"},{default:t(()=>[e(U,{onClick:w},{default:t(()=>[e(j,{size:"large",color:"red"},{default:t(()=>r[3]||(r[3]=[F("Voltar")])),_:1})]),_:1}),e(j,{class:"ml-10",onClick:a,size:"large",color:"green"},{default:t(()=>r[4]||(r[4]=[F("Salvar")])),_:1})]),_:1})]),_:1})}}},Ye=["onClick"],He=["onClick"],Ze=["onClick"],Qe={key:0,style:{width:"30px",height:"30px"},src:le,alt:"Visualizar",title:"Reativar"},Xe={key:1,src:ie,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},et=["onClick"],At={__name:"Partes",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(I){let _,v;const g=I,h=K(),A=J(),y=H(),{$toast:k}=Y(),T=`${y.public.managemant}/pesquisarPessoas`,f=`${y.public.managemant}/listarPapeis`,V=`${y.public.managemant}/getLinkTipo`,O=`${y.public.managemant}/createAtosPessoa`,B=`${y.public.managemant}/getAtosPessoaById`,R=`${y.public.managemant}/updateAtosPessoa`,N=d(D("user-data").value.cartorio_token),S=d([]),i=d([]),b=d([]),n=d(!1),c=d(!1),a=d(!1),u=d(!1),w=d(null),l=d(null),r=d(null),U=d(null);d(null);const $=d(null),de=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],q=ee({papeis:null,nome:null,pessoa:null,documento:null}),{data:ke}=([_,v]=Z(()=>x(f,{method:"POST",body:{tipo_ato_token:g.ato_token}},"$fFKndZhA4W")),_=await _,v(),_);b.value=ke.value;async function we(){try{const{data:m,error:s}=await x(T,{method:"POST",body:{cartorio_token:N.value,documento:q.documento,nome:q.nome}},"$o3ZL1rvYrY");m.value.length>0?(S.value=m.value,q.pessoa=S.value[0]):S.value=[]}catch(m){console.error("Erro na requisição",m)}}const Ve=()=>{c.value=!0},Ce=m=>{i.value=i.value.map(s=>s.id===r.value?{...s,papel:{...s.papel,descricao:m}}:s)},Ee=m=>{const s=i.value.find(C=>C.pessoa.id===U.value);s.representante.nome=m},Pe=async()=>{const m={pessoa:q.pessoa,papel:b.value.find(C=>C.id===q.papeis),representante:{nome:null}},s=await x(`${B}/${g.ato_id}`,{method:"GET"},"$kXSxUa4grs");for(const C of s.data.value)if(C.pessoa_id===q.pessoa.id&&C.ato_id===g.ato_id&&C.tipo_parte_id===q.papeis){k.error("Pessoa Já Registrada Com Esse Papel!");return}try{const{data:C,error:oe,status:ae}=await x(O,{method:"POST",body:{ato_id:Number(g.ato_id),pessoa_id:q.pessoa.id,tipo_parte_id:q.papeis,user_id:Number(D("user-data").value.usuario_id)}},"$So3qnQu7ek");ae.value==="success"?(m.id=C.value.id,k.success("Pessoa Registrada com Sucesso!"),i.value.push(m)):k.error(oe.value.message)}catch{k.error("Erro no servidor. Tente novamente.")}},Ae=async m=>{a.value=!0,$.value=null;const{data:s}=await x(`${V}`,{method:"POST",body:{id:m.pessoa.id,tipo:"ficha"}},"$Q3kbIwtd9t");s.value&&s.value.link?$.value=`data:image/jpeg;base64,${s.value.link}`:$.value=null},Te=m=>{const s=i.value.filter(C=>C.pessoa.id!==m.pessoa.id).map(C=>({id:C.pessoa.id,nome:C.pessoa.nome}));r.value=m.id,w.value=s,n.value=!0,l.value=m.pessoa.nome,U.value=m.pessoa.id},Se=m=>{r.value=m.id,u.value=!0,l.value=m.pessoa.nome};async function qe(m){m.excluido=!m.excluido;try{await x(`${R}/${r.value}`,{method:"PUT",body:JSON.stringify({excluido:m.excluido})},"$9xStKwGd7o")}catch(s){console.error("Erro ao excluir pessoa:",s)}}const ze=()=>{const m=A.query.origem||"criar",s=A.query.id;m==="atualizar"?h.push(`/os/atualizar/${s}`):h.push("/os/criar-registro")};return(m,s)=>{const C=Re,oe=Be,ae=Ne,Oe=Q;return z(),W(te,null,{default:t(()=>[e(P,{class:"mt-5"},{default:t(()=>[e(M,{cols:"3"},{default:t(()=>[e(G,{label:"Documento",modelValue:o(q).documento,"onUpdate:modelValue":s[0]||(s[0]=E=>o(q).documento=E)},null,8,["modelValue"])]),_:1}),e(M,{cols:"4"},{default:t(()=>[e(G,{label:"Pessoa",modelValue:o(q).nome,"onUpdate:modelValue":s[1]||(s[1]=E=>o(q).nome=E)},null,8,["modelValue"])]),_:1}),p("div",null,[p("img",{class:"mt-3",src:ne,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:we})]),p("div",null,[p("img",{class:"mt-3 ml-2",src:X,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Ve})])]),_:1}),e(P,null,{default:t(()=>[e(M,{cols:"4"},{default:t(()=>[e(be,{label:"Selecione a Pessoa",modelValue:o(q).pessoa,"onUpdate:modelValue":s[2]||(s[2]=E=>o(q).pessoa=E),items:o(S),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),p("div",null,[p("img",{class:"mt-3",src:X,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Pe})])]),_:1}),e(P,null,{default:t(()=>[e(M,null,{default:t(()=>[e(ue,{style:{height:"465px"},headers:de,items:o(i)},{"item.actions":t(({item:E})=>[e(P,null,{default:t(()=>[p("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:se=>Ae(E),title:"Visualizar Ficha"},s[8]||(s[8]=[p("img",{style:{width:"30px",height:"30px"},src:ne,alt:"Visualizar"},null,-1)]),8,Ye),p("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:se=>Se(E),class:"mr-2",title:"Alterar Papel"},s[9]||(s[9]=[p("img",{style:{width:"30px",height:"30px"},src:We,alt:"Visualizar"},null,-1)]),8,He),p("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:se=>qe(E),title:"Deletar Pessoa"},[E.excluido?(z(),L("img",Qe)):(z(),L("img",Xe))],8,Ze),p("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:se=>Te(E),title:"Selecionar Representante"},s[10]||(s[10]=[p("img",{style:{width:"30px",height:"30px"},src:Ie,alt:"Visualizar"},null,-1)]),8,et)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(C,{show:o(c),onClose:s[3]||(s[3]=E=>c.value=!1)},null,8,["show"]),e(oe,{representante_nome:o(l),representantes:o(w),ato_id:o(r),show:o(n),onClose:s[4]||(s[4]=E=>n.value=!1),onUpdateRepresentante:Ee},null,8,["representante_nome","representantes","ato_id","show"]),e(ae,{representante_nome:o(l),ato_token:g.ato_token,ato_id:o(r),show:o(u),onClose:s[5]||(s[5]=E=>u.value=!1),onUpdatePapel:Ce},null,8,["representante_nome","ato_token","ato_id","show"]),e($e,{modelValue:o(a),"onUpdate:modelValue":s[7]||(s[7]=E=>fe(a)?a.value=E:null),width:"600"},{default:t(()=>[e(ce,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(Ge,{src:o($)},null,8,["src"]),e(j,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:s[6]||(s[6]=E=>a.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(P,null,{default:t(()=>[e(Oe,{onClick:ze},{default:t(()=>[e(j,{size:"large",color:"red"},{default:t(()=>s[11]||(s[11]=[F("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},tt={key:0,class:"loading-overlay"},ot="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",Tt={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(I,{emit:_}){const v=I;De("DocumentEditorContainer",[je,Fe]);const g=H(),{$toast:h}=Y(),A=K(),y=J(),k=_;xe(`${g.public.docEditor}`);const T=`${g.public.managemant}/upload`,f=d(null),V=d(!1),O=async()=>{const c=await f.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),a=new FileReader;a.onload=()=>{const u=a.result;k("doc",u)},a.readAsText(c)},B=async()=>{V.value=!0;try{const c=await f.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),a=new FormData;a.append("file",c,"anexo.docx"),a.append("cartorio_token",D("user-data").value.cartorio_token),a.append("token",v.ato_token),a.append("tipo","ato_minuta");const{data:u,status:w}=await x(T,{method:"POST",body:a},"$071xxdqs20");if(w.value==="success"){h.success("Documento enviado!");const r=f.value.ej2Instances.documentEditor.pageCount;O(),k("page",r)}else h.error("Erro ao enviar documento para o sistema.")}catch(n){h.error("Erro ao salvar documento."),console.error(n)}finally{V.value=!1}},R=async()=>{i(!0);try{await N(),i(!0);const{data:n,status:c}=await x(substituirModelo,{method:"POST",body:{ato_token:v.ato_token}},"$0ktpWliD4l");n.value&&S(n.value)}catch(n){console.error("Erro ao gerar a minuta:",n),h.error("Ocorreu um erro ao gerar a minuta.")}finally{i(!1)}},N=async()=>{try{const{data:n}=await x(baixarDocumento,{method:"POST",body:{bucket:"qvgjz",path:"provider/modeloAto.sfdt"}},"$jXVvQjEE6u"),c=await fetchBlobFromMinIO(n.value);if(c){const a=new FileReader;a.onload=()=>{const u=a.result;f.value.ej2Instances.documentEditor.open(u),k("doc",u)},a.readAsText(c)}}catch(n){console.error("Erro ao carregar o modelo de minuta:",n),h.error("Falha ao carregar o modelo de minuta.")}},S=n=>{const c=f.value.ej2Instances.documentEditor,a=u=>{for(const[w,l]of Object.entries(u))if(/^<<.+>>$/.test(w))try{c.search.findAll(w),c.search.searchResults.length>0&&c.search.searchResults.replaceAll(l)}catch(r){console.error(`Erro ao substituir o marcador ${w}:`,r)}else if(w==="partes"&&Array.isArray(l)&&l.length>0)for(const r of l)typeof r=="object"&&a(r)};a(n)},i=n=>{V.value=n},b=()=>{const n=y.query.origem||"criar",c=y.query.id;n==="atualizar"?A.push(`/os/atualizar/${c}`):A.push("/os/criar-registro")};return(n,c)=>{const a=Q;return z(),L(ye,null,[e(o(he),{height:"900px",ref_key:"documentEditorContainer",ref:f,serviceUrl:ot,enableToolbar:!0,enableWordExport:!0},null,512),o(V)?(z(),L("div",tt,[e(Me,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):ge("",!0),e(P,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(a,{class:"mr-4"},{default:t(()=>[e(j,{size:"large",onClick:b,color:"red"},{default:t(()=>c[0]||(c[0]=[F("Voltar")])),_:1})]),_:1}),e(j,{size:"large",color:"green",onClick:B,disabled:o(V)},{default:t(()=>c[1]||(c[1]=[F("Salvar")])),_:1},8,["disabled"]),e(j,{class:"ml-4",size:"large",color:"blue",onClick:R},{default:t(()=>c[2]||(c[2]=[F("Gerar Minuta")])),_:1})]),_:1})],64)}}},at=["innerHTML"],St={__name:"Livro",props:{ato_token:{type:String,required:!0},pages:{type:Number,required:!0},document:{type:String,required:!0}},setup(I){const _=I,v=H();xe(`${v.public.docEditor}`);const{$toast:g}=Y(),h=K(),A=J(),y=`${v.public.managemant}/lavrarAto`,k=d("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),T=d(!1),f=d(null),V=d(null),O=d(null),B=async()=>{try{const{data:i,status:b}=await x(y,{method:"POST",body:{ato_token:_.ato_token,qtd_paginas:_.pages}},"$ZKnVBNYxp9");b.value==="success"?(f.value=i.value,V.value=i.value[0].selo,g.success("Ato lavrado com sucesso!")):g.error("Falha ao lavrar o ato.")}catch{g.error("Erro ao conectar com o servidor.")}},R=()=>{T.value=!1,B()},N=function(){O.value.ej2Instances.documentEditor.open(_.document)},S=()=>{const i=A.query.origem||"criar",b=A.query.id;i==="atualizar"?h.push(`/os/atualizar/${b}`):h.push("/os/criar-registro")};return(i,b)=>{const n=Ke;return z(),L(ye,null,[e(P,null,{default:t(()=>[e(M,null,{default:t(()=>[(z(),W(o(he),{restrictEditing:!0,enableToolbar:!1,created:_.document?N:null,ref_key:"documentEditorContainer",ref:O,height:"850px",width:"850px",key:_.document},null,8,["created"]))]),_:1}),e(M,null,{default:t(()=>[p("div",null,[p("div",null,[p("img",{onClick:b[0]||(b[0]=c=>T.value=!0),class:"ml-2",style:{height:"80px",width:"80px",cursor:"pointer","margin-top":"40px"},src:Ue}),o(f)?(z(),W(ce,{key:0,class:"mr-16"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(M,null,{default:t(()=>[e(me,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[F(" Livro: "+re(o(f)[0].livro_numero),1)]),_:1})]),_:1}),e(M,null,{default:t(()=>[e(me,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[F(" Folhas : "+re(o(f)[0].pagina_inicial)+" Á "+re(o(f)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),p("div",{innerHTML:o(V)},null,8,at)]),_:1})):ge("",!0)])])]),_:1})]),_:1}),e(j,{class:"mt-5 ml-7 mb-5",color:"red",size:"large",onClick:S},{default:t(()=>b[2]||(b[2]=[F("Voltar")])),_:1}),e(n,{show:o(T),condMessage:o(k),onClose:b[1]||(b[1]=c=>T.value=!1),onConfirm:R},null,8,["show","condMessage"])],64)}}},st=["onClick"],rt={key:0,style:{width:"30px",height:"30px"},src:le,alt:"Visualizar",title:"Reativar"},nt={key:1,src:ie,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},qt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(I){let _,v;const g=I,h=K(),A=J(),y=H(),{$toast:k}=Y(),T=`${y.public.managemant}/listarEscrevente`,f=`${y.public.managemant}/getAtosTiposByToken`,V=`${y.public.managemant}/createAtosObservacao`,O=`${y.public.managemant}/updateAtosObservacao`,B=d(D("user-data").value.cartorio_token),R=d([]),N=d([]),S=[{title:"Data",align:"start",key:"data"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],i=ee({observacao:null}),b={observacao:{required:pe.withMessage("O campo é obrigatorio",_e)}},n=ve(b,i);[_,v]=Z(()=>x(`${f}/${g.ato_token}`,{method:"GET"},"$aJM1TL1buW")),_=await _,v();async function c(){if(await n.value.$validate()){const{data:l,error:r,status:U}=await x(V,{method:"POST",body:{ato_id:g.ato_id,observacao:i.observacao,user_id:D("user-data").value.usuario_id}},"$dMg99jeUNP");U.value==="success"&&(R.value.push({data:Je(l.value.created,"dd/mm/yyyy hh:mm"),observacao:l.value.observacao,id:l.value.id,escrevente:D("user-data").value.nome}),k.success("Observação registrada com sucesso"))}else k.error("Preencha os campos obrigatorios.")}async function a(l){l.excluido=!l.excluido;try{await x(`${O}/${l.id}`,{method:"PUT",body:JSON.stringify({excluido:l.excluido})},"$B6PdRx8Gp4")}catch(r){console.error("Erro ao excluir observacao:",r)}}const{data:u}=([_,v]=Z(()=>x(T,{method:"POST",body:{cartorio_token:B}},"$xFHPGua26S")),_=await _,v(),_);N.value=u.value[0].func_json_escreventes;const w=()=>{const l=A.query.origem||"criar",r=A.query.id;l==="atualizar"?h.push(`/os/atualizar/${r}`):h.push("/os/criar-registro")};return(l,r)=>{const U=Q;return z(),W(te,null,{default:t(()=>[e(P,{class:"mt-5"},{default:t(()=>[e(G,{label:"Observação",modelValue:o(i).observacao,"onUpdate:modelValue":r[0]||(r[0]=$=>o(i).observacao=$),required:"","error-messages":o(n).observacao.$errors.map($=>$.$message),onBlur:o(n).observacao.$touch,onInput:o(n).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),p("div",null,[p("img",{class:"btn-pointer ml-2",src:X,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:c})])]),_:1}),e(P,null,{default:t(()=>[e(M,null,{default:t(()=>[e(ue,{style:{height:"465px"},headers:S,items:o(R)},{"item.actions":t(({item:$})=>[p("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:de=>a($),title:"Deletar Observação"},[$.excluido?(z(),L("img",rt)):(z(),L("img",nt))],8,st)]),_:1},8,["items"])]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(U,{onClick:w},{default:t(()=>[e(j,{size:"large",color:"red"},{default:t(()=>r[1]||(r[1]=[F("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},lt=["onClick"],it=["onClick"],ut={key:0,style:{width:"30px",height:"30px"},src:le,alt:"Visualizar",title:"Reativar"},ct={key:1,src:ie,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},zt={__name:"Anexos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(I){const _=I,v=H(),{$toast:g}=Y(),h=K(),A=J(),y=`${v.public.biometria}/run-scanner`,k=`${v.public.managemant}/atos_anexos`,T=`${v.public.managemant}/atos_anexos`,f=d(!1),V=d([]),O=ee({descricao:""}),B=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}];async function R(){try{await N(),await S()}catch(a){console.error("Erro ao executar scanner ou listar arquivos:",a)}}async function N(){try{const{data:a}=await x(y,{method:"GET"},"$WazoKp68Tw")}catch(a){g.error("Erro ao acionar o scanner:",a)}}async function S(){try{const{data:a,status:u}=await x("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:_.ato_token,cartorio_token:D("user-data").value.cartorio_token}},"$03Wxiia3aI")}catch(a){console.error("Erro ao enviar o arquivo:",a)}}const i=async()=>{f.value=!0},b=async()=>{const{data:a,error:u,status:w}=await x(k,{method:"POST",body:{ato_id:_.ato_id,descricao:O.descricao,user_id:D("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$D2PdkmlmwW");w.value==="success"&&(g.success("Anexo registrado com sucesso!"),V.value.push(a.value))};async function n(a){a.excluido=!a.excluido;try{await x(`${T}/${a.id}`,{method:"PUT",body:JSON.stringify({excluido:a.excluido})},"$WyW0hasRPI")}catch(u){console.error("Erro ao excluir pessoa:",u)}}const c=()=>{const a=A.query.origem||"criar",u=A.query.id;a==="atualizar"?h.push(`/os/atualizar/${u}`):h.push("/os/criar-registro")};return(a,u)=>{const w=Q;return z(),W(te,null,{default:t(()=>[e(P,null,{default:t(()=>[e(M,{cols:"5"},{default:t(()=>[e(G,{modelValue:o(O).descricao,"onUpdate:modelValue":u[0]||(u[0]=l=>o(O).descricao=l),label:"Descrição"},null,8,["modelValue"])]),_:1}),p("div",{onClick:R,title:"Escanear"},u[3]||(u[3]=[p("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Le,alt:"Escanear"},null,-1)])),p("div",{onClick:b,title:"Criar"},u[4]||(u[4]=[p("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:X,alt:"Criar"},null,-1)]))]),_:1}),e(ue,{headers:B,items:o(V),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:l})=>[e(P,null,{default:t(()=>[p("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:r=>i(l),title:"Visualizar Anexo"},u[5]||(u[5]=[p("img",{style:{width:"30px",height:"30px"},src:ne,alt:"Visualizar"},null,-1)]),8,lt),p("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:r=>n(l),title:"Deletar Pessoa"},[l.excluido?(z(),L("img",ut)):(z(),L("img",ct))],8,it)]),_:2},1024)]),_:1},8,["items"]),e($e,{modelValue:o(f),"onUpdate:modelValue":u[2]||(u[2]=l=>fe(f)?f.value=l:null),width:"600"},{default:t(()=>[e(ce,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(j,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:u[1]||(u[1]=l=>f.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(w,{onClick:c},{default:t(()=>[e(j,{size:"large",color:"red"},{default:t(()=>u[6]||(u[6]=[F("Voltar")])),_:1})]),_:1})]),_:1})}}};export{Pt as _,At as a,Tt as b,St as c,qt as d,zt as e};
