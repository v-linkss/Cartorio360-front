import{_ as F}from"./DyaGO_cW.js";import{_ as J}from"./Bnsfmrx1.js";import{_ as K}from"./BVz1G1IN.js";import{_ as Q,a as Y}from"./DJvq3mCv.js";import{c as Z,r as L,u as G}from"./D0wU2pAd.js";import{C as H,J as X,u as tt,r as d,e as O,f as et,s as $,h as ot,o as l,j as V,w as a,b as e,m as at,V as q,a as b,k as y,c as g,v as st,d as rt,l as it}from"./lXQ7b3du.js";import{u as m}from"./Dmr4rgiu.js";import{V as _}from"./DjK0vvIP.js";import{V as n}from"./D8ZmHRsW.js";import{V as lt}from"./aBje7zLP.js";import{V as ut}from"./kKYPUUuk.js";import{V as nt}from"./C5RY8UZm.js";const ct=["onClick"],dt={key:0,style:{width:"30px",height:"30px"},src:Q,alt:"Visualizar",title:"Reativar"},mt={key:1,src:Y,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},$t={__name:"Outros",props:{ato_id:{type:Number,required:!0},ato_token:{type:String,required:!0}},async setup(C){let i,c;const k=C,p=H(),v=X(),u=it(),{$toast:z}=tt(),T=`${u.public.managemant}/outros_tj`,N=`${u.public.managemant}/outros`,j=`${u.public.managemant}/atos_outros`,A=`${u.public.managemant}/atos_outros`;`${u.public.managemant}`;const D=d(O("user-data").value.cartorio_token),f=d(v.query.origem==="vizualizar"),x=d([]),h=d([]),U=[{title:"Id",align:"start",key:"id"},{title:"Descrição",align:"start",key:"descricao"},{title:"Quantidade",align:"start",key:"quantidade"},{title:"Valor Unitario",align:"start",key:"valor_unitario"},{value:"actions"}],o=et({observacao:null,outros_tj_id:null,quantidade:1,valor_unitario:null}),B={observacao:{required:Z.withMessage("O campo é obrigatório",L)}};G(B,o);async function E(){const{error:s,status:t}=await m(j,{method:"POST",body:{ato_id:Number(k.ato_id),observacao:o.observacao,valor_unitario:o.valor_unitario.replace(/,/g,""),outros_tj_id:o.outros_tj_id,quantidade:o.quantidade,user_id:O("user-data").value.usuario_id}},"$dM20KOZmKZ");t.value==="success"&&(z.success("Outro Ato registrado com sucesso"),await w())}async function I(s){s.excluido=!s.excluido;try{await m(`${A}/${s.id}`,{method:"PUT",body:JSON.stringify({excluido:s.excluido})},"$AOYgWW9EtV")}catch(t){console.error("Erro ao excluir observação:",t)}}async function w(){const{data:s}=await m(N,{method:"POST",body:{ato_token:k.ato_token}},"$Ds0arNsgwW");x.value=s.value||[]}const{data:S}=([i,c]=$(()=>m(T,{method:"POST",body:{cartorio_token:D}},"$wwMEIxY4Vy")),i=await i,c(),i);h.value=S.value,[i,c]=$(()=>w()),await i,c();const P=()=>{const s=v.query.origem||"criar",t=v.query.id;switch(s){case"atualizar":case"vizualizar":p.push(`/os/atualizar/${t}`);break;case"atualizar-lista":case"vizualizar-lista":p.push("/atos/lista");break;default:p.push("/os/criar-registro");break}};return(s,t)=>{const R=F,M=J,W=ot("mask");return l(),V(nt,null,{default:a(()=>[f.value?y("",!0):(l(),V(_,{key:0},{default:a(()=>[e(n,{cols:"5",class:"mt-6"},{default:a(()=>[e(lt,{label:"Outros Atos",items:h.value,"item-title":"descricao","item-value":"id",modelValue:o.outros_tj_id,"onUpdate:modelValue":t[0]||(t[0]=r=>o.outros_tj_id=r)},null,8,["items","modelValue"])]),_:1}),e(n,{cols:"2",class:"mt-6"},{default:a(()=>[at(e(q,{label:"QTD",type:"number",modelValue:o.quantidade,"onUpdate:modelValue":t[1]||(t[1]=r=>o.quantidade=r)},null,8,["modelValue"]),[[W,"###"]])]),_:1}),e(n,{cols:"2"},{default:a(()=>[t[4]||(t[4]=b("label",{for:""},"Valor unitario",-1)),e(R,{modelValue:o.valor_unitario,"onUpdate:modelValue":t[2]||(t[2]=r=>o.valor_unitario=r)},null,8,["modelValue"])]),_:1}),b("div",null,[b("img",{class:"btn-pointer ml-2 mt-7",src:K,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:E})])]),_:1})),f.value?y("",!0):(l(),V(_,{key:1},{default:a(()=>[e(n,{cols:"9"},{default:a(()=>[e(q,{label:"Observação",modelValue:o.observacao,"onUpdate:modelValue":t[3]||(t[3]=r=>o.observacao=r)},null,8,["modelValue"])]),_:1})]),_:1})),e(_,null,{default:a(()=>[e(n,null,{default:a(()=>[e(ut,{style:{height:"465px"},headers:U,items:x.value},{"item.actions":a(({item:r})=>[f.value?y("",!0):(l(),g("div",{key:0,style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:_t=>I(r),title:"Deletar Observação"},[r.excluido?(l(),g("img",dt)):(l(),g("img",mt))],8,ct))]),_:1},8,["items"])]),_:1})]),_:1}),e(_,null,{default:a(()=>[e(M,{onClick:P},{default:a(()=>[e(st,{size:"large",color:"red"},{default:a(()=>t[5]||(t[5]=[rt("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}};export{$t as _};
