import{_ as B}from"./BCnAeI_U.js";import{_ as F}from"./BVz1G1IN.js";import{_ as E}from"./C2Mg3JPu.js";import{G as L,r as h,n as I,A as j,s as r,p as q,w as s,K as G,q as K,o as l,b as i,a,V as f,C as x,d as M,t as W,c as m}from"./ByxS8mcf.js";import{_ as Z}from"./-K7hXO_r.js";import{_ as H,a as J}from"./DJvq3mCv.js";import{f as V}from"./BKf4Dvh4.js";import{V as O}from"./DC0YASa2.js";import{V as $}from"./M0h3MoQ4.js";import{V as Q}from"./BgXoqhHi.js";import"./VZ5XtA9u.js";import"./8lDJBU5b.js";import"./DxsREfyq.js";import"./B0axwumF.js";import"./C5cwBIOC.js";const X=""+new URL("visualizar-vermelho.BmNZ_xMd.png",import.meta.url).href,Y={style:{width:"200px"}},ee={style:{width:"150px"}},te={style:{width:"300px"}},oe=["onClick"],ae={key:0,style:{width:"30px",height:"30px"},src:E,alt:"Visualizar",title:"Possui Ficha"},ie={key:1,style:{width:"30px",height:"30px"},src:X,alt:"Visualizar",title:"N達o Ficha"},se=["onClick"],re=["onClick"],le={key:0,style:{width:"30px",height:"30px"},src:H,alt:"Visualizar",title:"Reativar"},ne={key:1,src:J,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Ce={__name:"index",async setup(ce){let n,g;const y=K(),w=`${y.public.auth}/service/gerencia/getAllPessoa`,k=`${y.public.auth}/service/gerencia/updatePessoa`,v=L(),c=h(""),d=h(""),u=h(""),C=[{title:"Documento",value:"doc_identificacao",width:"190px"},{title:"Cart達o",value:"numero_ficha"},{title:"Nome/Raz達o Social",value:"nome",width:"400px"},{value:"actions"}],{data:z,status:b}=([n,g]=I(()=>V(`${w}?pageNumber=1&pageSize=1000000`)),n=await n,g(),n),N=j(()=>{const t=e=>String(e||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return z.value.data.filter(e=>{const _=t(e.doc_identificacao),o=t(e.nome),p=t(String(e.numero_ficha)),U=_.includes(t(d.value)),S=o.includes(t(c.value)),A=p.includes(t(String(u.value)));return U&&S&&A})});function D(t){if(!t)return"";const e=t.replace(/\D/g,"");return e.length===11?e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):e.length===14?e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):t}async function T(t){t.excluido=!t.excluido;try{await V(`${k}/${t.id}`,{method:"PUT",body:{excluido:t.excluido}})}catch(e){console.error("Erro ao excluir pessoa:",e)}}function P(t){v.push({path:`/pessoas/vizualizar/${t}`})}function R(t){v.push({path:`/pessoas/atualizar/${t}`})}return(t,e)=>{const _=B;return r(b)==="success"?(l(),q(O,{key:0,class:"mt-5"},{default:s(()=>[i(_,{to:"/pessoas/cadastro"},{default:s(()=>e[3]||(e[3]=[a("img",{style:{cursor:"pointer"},src:F,alt:"Cadastro"},null,-1)])),_:1}),i($,{style:{gap:"1rem"}},{default:s(()=>[a("div",Y,[i(f,{class:"mt-7 mb-4",modelValue:r(d),"onUpdate:modelValue":e[0]||(e[0]=o=>x(d)?d.value=o:null),label:"Documento","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),a("div",ee,[i(f,{class:"mt-7 mb-4",modelValue:r(u),"onUpdate:modelValue":e[1]||(e[1]=o=>x(u)?u.value=o:null),label:"Cart達o","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),a("div",te,[i(f,{class:"mt-7 mb-4",modelValue:r(c),"onUpdate:modelValue":e[2]||(e[2]=o=>x(c)?c.value=o:null),label:"Pessoa","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),i(Q,{density:"compact",headers:C,items:r(N),"item-key":"id","items-per-page-options":[10,25,50]},{"item.doc_identificacao":s(({item:o})=>[M(W(D(o.doc_identificacao)),1)]),"item.actions":s(({item:o})=>[i($,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:s(()=>[a("div",{style:{cursor:"pointer"},onClick:p=>P(o.id),title:"Visualizar"},[o.link_ficha?(l(),m("img",ae)):(l(),m("img",ie))],8,oe),a("div",{style:{cursor:"pointer"},onClick:p=>R(o.id),title:"Atualizar"},e[4]||(e[4]=[a("img",{style:{width:"30px",height:"30px"},src:Z,alt:"Atualizar"},null,-1)]),8,se),a("div",{style:{cursor:"pointer"},onClick:p=>T(o),title:"Deletar"},[o.excluido?(l(),m("img",le)):(l(),m("img",ne))],8,re)]),_:2},1024)]),_:1},8,["items"])]),_:1})):G("",!0)}}};export{Ce as default};
