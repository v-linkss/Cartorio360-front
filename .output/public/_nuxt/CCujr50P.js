import{_ as D}from"./CoC8yCvH.js";import{u as k,f as w,r as N,m as b,h,w as o,k as x,o as c,b as t,q as v,s as y,i as r,d as B,c as V,a as E,t as T,e as F}from"./DJCFfwgB.js";import{u as C}from"./Bl1gDYRN.js";import{V as O}from"./B1O2iFOg.js";import{V as u}from"./CnrwGq8P.js";import{V as I}from"./CO-Ycd8f.js";import{b as P,a as R,V as U}from"./D7huH3Pb.js";import"./Ce4aGxd7.js";import"./CJ09K1Rh.js";import"./C327JJea.js";import"./oNe7Bpf7.js";const j={key:0},q={key:1},Z={__name:"censec",setup(A){const m=x(),{$toast:f}=k(),S=`${m.public.managemant}/integra_censec_cep`,$=`${m.public.ws}/censec/enviar`,i=w({data_inicio:_(),data_fim:_()}),d=N(null);function _(){const e=new Date,a=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${s}-${a}`}function p(e){if(!e)return null;const[a,s,n]=e.split("/");return`${n}-${s}-${a}`}const g=async()=>{const{data:e,status:a}=await C(`${S}`,{method:"POST",body:{cartorio_token:F("user-data").value.cartorio_token,data_inicio:p(i.data_inicio),data_fim:p(i.data_fim)}},"$prCSPBNmKL"),s=e.value;if(a.value==="success"){const{data:n,status:l}=await C(`${$}`,{method:"POST",body:{value:s}},"$IBf41hwtjc");l.value==="success"?(f.success("Dados enviados com sucesso!"),d.value=n.value):f.error("Erro ao enviar dados para CENSEC.")}};return(e,a)=>{const s=D,n=b("mask");return c(),h(O,null,{default:o(()=>[t(I,null,{default:o(()=>[t(u,{class:"mt-1"},{default:o(()=>[v(t(y,{modelValue:r(i).data_inicio,"onUpdate:modelValue":a[0]||(a[0]=l=>r(i).data_inicio=l),label:"Data Inicio",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[n,"##/##/####"]])]),_:1}),t(u,{class:"mt-1"},{default:o(()=>[v(t(y,{modelValue:r(i).data_fim,"onUpdate:modelValue":a[1]||(a[1]=l=>r(i).data_fim=l),label:"Data Fim",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[n,"##/##/####"]])]),_:1}),t(u,null,{default:o(()=>[t(s,{text:"Confirmar",onSave:g})]),_:1})]),_:1}),t(U,null,{default:o(()=>[t(P,null,{default:o(()=>a[2]||(a[2]=[B("Dados CENSEC")])),_:1}),t(R,null,{default:o(()=>[r(d)?(c(),V("div",j,[E("pre",null,T(JSON.stringify(r(d),null,2)),1)])):(c(),V("div",q,"Nenhum dado dispon√≠vel."))]),_:1})]),_:1})]),_:1})}}};export{Z as default};
