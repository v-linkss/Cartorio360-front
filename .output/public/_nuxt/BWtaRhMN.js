import{_ as a}from"./4de_rhUN.js";import{_ as e,u as o,n as l,D as s,r as d,F as t,G as i,H as u,o as m,c as r,q as c,A as n,Q as p,t as _,C as f,w as v,b as V,s as b,I as g,a as C,N as $,x as h,p as y,e as I,d as U,v as k}from"./Cqiv77yc.js";import{a as j,u as x}from"./D0-0VRaN.js";import{_ as F}from"./ToPptOUL.js";import{c as P,r as w,u as A,_ as M}from"./CnBBmU9u.js";import{c as q}from"./ujvleXxP.js";import{V as S}from"./B5iMDmra.js";import{V as B}from"./03NkGgWs.js";import{V as E}from"./DGrEsPnk.js";import{V as N}from"./sftuTnbG.js";import{V as D,a as R,b as O,c as T,_ as z,d as G,e as H,f as J}from"./Bh9-2M3-.js";import{a as L}from"./oKXwpsuu.js";import"./Dt3m51Lf.js";import"./CBYd86re.js";const Q={key:1},W=(a=>(y("data-v-72971175"),a=a(),I(),a))((()=>C("img",{class:"btn-pointer",src:F,alt:"Sair"},null,-1))),X=e({__name:"Dados",emits:["saved"],async setup(e,{emit:y}){let I,U;const k=y,F=o(),{$toast:D}=l(),R=h(),O=`${R.public.managemant}/createPessoa`,T=`${R.public.managemant}/updatePessoa`,z=`${R.public.managemant}/listarEstadoCivil`,G=`${R.public.managemant}/listarCapacidadeCivil`,H=`${R.public.managemant}/listarCidades`,J={nome:"",nome_pai:"",nome_mae:"",profissao:"",local_trabalho:"",data_nascimento:"",doc_identificacao:"",cpf_pai:"",cpf_mae:"",tipo_pessoa:"FISICA",tabvalores_estadocivil_id:"",tabvalores_capacidadecivil_id:"",cidade_natural_id:"",cartorio_id:s("user-data").value.cartorio_id,user_id:s("user-data").value.usuario_id},L=d(!1),X=s("pessoa-id"),Y=t({...J});function Z(a){if(a)return a.replace(/[.\-]/g,"");a=null}const{data:K,status:aa,pending:ea,error:oa}=([I,U]=i((async()=>j("cliente-dados",(async()=>{const[a,e,o]=await Promise.all([$fetch(z),$fetch(G),$fetch(H)]);return{estadoCivilItems:a,capacidadeCivilItems:e,cidadeNascimentoItems:o}})))),I=await I,U(),I),la={nome:{required:P.withMessage("O campo é obrigatorio",w)},nome_mae:{required:P.withMessage("O campo é obrigatorio",w)},doc_identificacao:{required:P.withMessage("O campo é obrigatorio",w),cpf:q}},sa=A(la,Y);return(e,o)=>{const l=a,s=u("mask");return m(),r($,null,[c(ea)?(m(),n(p,{key:0,class:"loading-spinner",indeterminate:"",size:"64"})):c(oa)?(m(),r("div",Q,_(c(oa).message),1)):f("",!0),c(ea)?f("",!0):(m(),n(N,{key:2,class:"mt-5"},{default:v((()=>[V(S,null,{default:v((()=>[V(B,{cols:"12",md:"8"},{default:v((()=>[V(b,{modelValue:c(Y).nome,"onUpdate:modelValue":o[0]||(o[0]=a=>c(Y).nome=a),"error-messages":c(sa).nome.$errors.map((a=>a.$message)),label:"Nome",required:"",onBlur:c(sa).nome.$touch,onInput:c(sa).nome.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])])),_:1}),V(B,{cols:"12",md:"4"},{default:v((()=>[g(V(b,{modelValue:c(Y).doc_identificacao,"onUpdate:modelValue":o[1]||(o[1]=a=>c(Y).doc_identificacao=a),"error-messages":c(sa).doc_identificacao.$errors.map((a=>a.$message)),label:"CPF",required:"",onBlur:c(sa).doc_identificacao.$touch,onInput:c(sa).doc_identificacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),[[s,"###.###.###-##"]])])),_:1})])),_:1}),V(S,null,{default:v((()=>[V(B,{cols:"12",md:"4"},{default:v((()=>[V(E,{modelValue:c(Y).tabvalores_estadocivil_id,"onUpdate:modelValue":o[2]||(o[2]=a=>c(Y).tabvalores_estadocivil_id=a),items:c(K).estadoCivilItems,"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])])),_:1}),V(B,{cols:"12",md:"4"},{default:v((()=>[V(b,{modelValue:c(Y).profissao,"onUpdate:modelValue":o[3]||(o[3]=a=>c(Y).profissao=a),label:"Profissão"},null,8,["modelValue"])])),_:1}),V(B,{cols:"12",md:"4"},{default:v((()=>[V(b,{modelValue:c(Y).local_trabalho,"onUpdate:modelValue":o[4]||(o[4]=a=>c(Y).local_trabalho=a),label:"Local de trabalho"},null,8,["modelValue"])])),_:1})])),_:1}),V(S,null,{default:v((()=>[V(B,{cols:"12",md:"4"},{default:v((()=>[V(b,{modelValue:c(Y).data_nascimento,"onUpdate:modelValue":o[5]||(o[5]=a=>c(Y).data_nascimento=a),type:"date","prepend-icon":"",label:"Data de nascimento"},null,8,["modelValue"])])),_:1}),V(B,{cols:"12",md:"4"},{default:v((()=>[V(E,{modelValue:c(Y).tabvalores_capacidadecivil_id,"onUpdate:modelValue":o[6]||(o[6]=a=>c(Y).tabvalores_capacidadecivil_id=a),items:c(K).capacidadeCivilItems,label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])])),_:1}),V(B,{cols:"12",md:"4"},{default:v((()=>[V(E,{modelValue:c(Y).cidade_natural_id,"onUpdate:modelValue":o[7]||(o[7]=a=>c(Y).cidade_natural_id=a),items:c(K).cidadeNascimentoItems,label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])])),_:1})])),_:1}),V(S,null,{default:v((()=>[V(B,{cols:"12",md:"4"},{default:v((()=>[g(V(b,{modelValue:c(Y).cpf_pai,"onUpdate:modelValue":o[8]||(o[8]=a=>c(Y).cpf_pai=a),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[s,"###.###.###-##"]])])),_:1}),V(B,{cols:"12",md:"4"},{default:v((()=>[V(b,{modelValue:c(Y).nome_pai,"onUpdate:modelValue":o[9]||(o[9]=a=>c(Y).nome_pai=a),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])])),_:1})])),_:1}),V(S,null,{default:v((()=>[V(B,{cols:"12",md:"4"},{default:v((()=>[g(V(b,{modelValue:c(Y).cpf_mae,"onUpdate:modelValue":o[10]||(o[10]=a=>c(Y).cpf_mae=a),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[s,"###.###.###-##"]])])),_:1}),V(B,{cols:"12",md:"4"},{default:v((()=>[V(b,{modelValue:c(Y).nome_mae,"onUpdate:modelValue":o[11]||(o[11]=a=>c(Y).nome_mae=a),modelModifiers:{date:!0},"error-messages":c(sa).nome_mae.$errors.map((a=>a.$message)),label:"Nome da Mãe",required:"",onBlur:c(sa).nome_mae.$touch,onInput:c(sa).nome_mae.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])])),_:1})])),_:1}),V(S,null,{default:v((()=>[V(l,{to:"/pessoas/registros"},{default:v((()=>[W])),_:1}),C("img",{class:"btn-pointer",src:M,onClick:o[12]||(o[12]=a=>c(L)?async function(){const a={...Y};for(const o in a)""===a[o]&&(a[o]=null);const e={...a,doc_identificacao:Z(Y.doc_identificacao),cpf_mae:Z(Y.cpf_mae)};await x(`${T}/${X.value}`,{method:"PUT",body:e},"$S30ZRYxneo"),D.success("Pessoa atualizada com sucesso!"),F.push("/pessoas/registros")}():async function(){if(await sa.value.$validate()){const a={...Y};for(const d in a)""===a[d]&&(a[d]=null);const e={...a,doc_identificacao:Z(Y.doc_identificacao),cpf_pai:Z(Y.cpf_pai),cpf_mae:Z(Y.cpf_mae)},{data:o,error:l,status:s}=await x(O,{method:"POST",body:e},"$fcbWHpl5XR");if("error"===s.value&&500===l.value.statusCode)D.error("Erro ao cadastrar pessoa,o CPF já está cadastrado.");else{D.success("Pessoa cadastrada com sucesso!");const a=o.value.id;X.value=a,k("saved"),L.value=!0}}else D.error("Erro ao cadastrar pessoa, preencha os campos obrigatorios.")}())})])),_:1})])),_:1}))],64)}}},[["__scopeId","data-v-72971175"]]),Y=C("h1",{style:{"background-color":"#C8FCCA",color:"#429946",padding:"10px 0px 0px 20px"}}," Cadastramento de pessoas ",-1),Z={style:{"background-color":"#C8FCCA",padding:"20px 0px 20px 20px"}},K={__name:"index",setup(a){const e=d(null),o=d(!1),l=d(!1),s=t({tipo_pessoa:"FISICA"}),i=["FISICA","JURIDICA","ESTRANGEIRA"],u=()=>{o.value=!0,l.value=!0};return(a,d)=>{const t=X,r=z,p=G,_=H,b=J;return m(),n(L,{width:"1300"},{default:v((()=>[Y,C("div",Z,[V(E,{modelValue:c(s).tipo_pessoa,"onUpdate:modelValue":d[0]||(d[0]=a=>c(s).tipo_pessoa=a),style:{width:"200px"},items:i,label:"Tipo de pessoa","bg-color":"#F6F6F6",disabled:c(l)},null,8,["modelValue","disabled"])]),V(R,{modelValue:c(e),"onUpdate:modelValue":d[1]||(d[1]=a=>k(e)?e.value=a:null),"bg-color":"#C8FCCA"},{default:v((()=>[V(D,{value:"dados"},{default:v((()=>[U("Dados")])),_:1}),c(o)?(m(),n(D,{key:0,value:"documento"},{default:v((()=>[U("Documentos")])),_:1})):f("",!0),c(o)?(m(),n(D,{key:1,value:"endereco"},{default:v((()=>[U("Endereços")])),_:1})):f("",!0),c(o)?(m(),n(D,{key:2,value:"biometria"},{default:v((()=>[U("Biometria")])),_:1})):f("",!0),c(o)?(m(),n(D,{key:3,value:"restricao"},{default:v((()=>[U("Restrições")])),_:1})):f("",!0)])),_:1},8,["modelValue"]),V(T,{modelValue:c(e),"onUpdate:modelValue":d[2]||(d[2]=a=>k(e)?e.value=a:null)},{default:v((()=>[V(O,{value:"dados"},{default:v((()=>[V(t,{onSaved:u})])),_:1}),c(o)?(m(),n(O,{key:0,value:"documento"},{default:v((()=>[V(r)])),_:1})):f("",!0),c(o)?(m(),n(O,{key:1,value:"endereco"},{default:v((()=>[V(p)])),_:1})):f("",!0),c(o)?(m(),n(O,{key:2,value:"biometria"},{default:v((()=>[V(N,{class:"mt-5"},{default:v((()=>[V(_)])),_:1})])),_:1})):f("",!0),c(o)?(m(),n(O,{key:3,value:"restricao"},{default:v((()=>[V(b)])),_:1})):f("",!0)])),_:1},8,["modelValue"])])),_:1})}}};export{K as default};
