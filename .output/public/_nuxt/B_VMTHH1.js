import{_ as ue}from"./CpWPBDLP.js";import{c as re,d as me,e as ce,f as pe,g as fe,h as _e}from"./BKT_MOzM.js";import{_ as ve,r as c,G as Ve,m as be,J as Ce,u as R,H as z,z as Ie,M as ke,p,w as o,q as ye,o as r,b as a,a as $,t as j,s as l,c as W,P as xe,d as f,K as b,C as G,V as m,N as y,v as O}from"./gQGwQGpY.js";import{$ as x,f as ge}from"./Gn7kBKD-.js";import{f as L,a as Ue}from"./B0IxRygJ.js";import{V as Ae}from"./DM6J16tf.js";import{V as u}from"./Ifh10Rcz.js";import{V as _}from"./B4qI6-Pi.js";import{V as U}from"./jutpcs0i.js";import{V as C,a as De,e as I,d as Pe}from"./DXNXl6C8.js";import{V as q}from"./jwSaaSug.js";import{V as Re}from"./BMTQ26wp.js";import"./C80OnvNR.js";import"./fod2o3Mf.js";import"./BVz1G1IN.js";import"./BoUD3x7e.js";import"./DJvq3mCv.js";import"./BbTlOLij.js";import"./CfBEdmyp.js";import"./JzXRjioX.js";import"./BolNjS4B.js";import"./BpdjXuER.js";import"./f7jtcKbB.js";import"./DRgvZJe_.js";const $e={style:{color:"#525050",padding:"10px 0px 0px 30px"}},Fe={style:{color:"#525050",padding:"20px 10px 10px 10px"}},Se={style:{"background-color":"#f5f2f2",padding:"20px 0px 20px 20px"}},Ne={key:0,class:"d-flex justify-center"},Te={key:1},we={__name:"[id]",emits:["saved"],setup(Ee,{emit:Be}){const v=c(null),H=Ve(),{$toast:F}=be(),K=Ce(),{id:g}=K.params,V=ye(),Q=`${V.public.auth}/service/gerencia/updatePessoa`,X=`${V.public.auth}/service/gerencia/listarEstadoCivil`,Y=`${V.public.auth}/service/gerencia/listarCapacidadeCivil`,Z=`${V.public.auth}/service/gerencia/listarCidades`,h=`${V.public.auth}/service/gerencia/getPessoaById`,ee=`${V.public.auth}/service/gerencia/listarSexo`,S=c([]),N=c([]),T=c([]),w=c([]),A=c(!0),E=c(null),B=c(null),J={nome:null,nome_pai:null,nome_mae:null,profissao:null,fone_celular:null,data_nascimento:null,doc_identificacao:null,cpf_pai:null,cpf_mae:null,tipo_pessoa:"FISICA",tabvalores_estadocivil_id:null,tabvalores_capacidadecivil_id:null,cidade_natural_id:null,tabvalores_sexo_id:null,cartorio_id:R("user-data").value.cartorio_id,user_id:R("user-data").value.usuario_id},ae=[{label:"FÍSICA",value:"FISICA"},{label:"JURÍDICA",value:"JURIDICA"},{label:"ESTRANGEIRA",value:"ESTRANGEIRA"}],t=z({...J}),M=z({...J});function le(d){if(d)return d.replace(/[.\-]/g,"");d=null}async function oe(){try{const[d,e,n,i,D]=await Promise.all([x(X),x(Y),x(Z),x(`${h}/${g}`),x(ee)]),P=R("pessoa_token");P.value=i.token,S.value=d,N.value=e,T.value=n,w.value=D,(i.data_nascimento||i.created)&&(i.data_nascimento=i.data_nascimento?L(i.data_nascimento,"dd/mm/yyyy"):null,i.created=i.created?L(i.created,"dd/mm/yyyy"):null),B.value=i.created,E.value=i.link_ficha,Object.assign(M,i),Object.assign(t,i)}catch(d){console.error("Erro ao carregar os dados da pessoa:",d)}finally{A.value=!1}}Ie(()=>{g?oe():A.value=!1});function te(d){const e={};for(const n in d)switch(n){case"doc_identificacao":case"cpf_pai":case"cpf_mae":e[n]=le(d[n]);break;case"data_nascimento":e[n]=Ue(d[n]);break;case"fone_celular":e[n]=d[n]?d[n].replace(/[^0-9]/g,""):null;break;default:e[n]=d[n]===""?null:d[n];break}return e}async function se(){const d=te(t),e={};for(const i in d)d[i]!==M[i]&&(e[i]=d[i]);const{status:n}=await ge(`${Q}/${g}`,{method:"PUT",body:e});n.value==="success"?(F.success("Pessoa atualizada com sucesso!"),H.push("/pessoas/lista")):F.error("Erro ao atualizar pessoa.")}return(d,e)=>{const n=ue,i=re,D=me,P=ce,de=pe,ie=fe,ne=_e,k=ke("mask");return r(),p(Ae,{width:"1300"},{default:o(()=>[a(_,{style:{"background-color":"#f5f2f2"}},{default:o(()=>[a(u,null,{default:o(()=>[$("h1",$e,j(l(g)?"Atualização de Pessoas":"Cadastramento de Pessoas"),1)]),_:1}),a(u,{class:"d-flex justify-end"},{default:o(()=>[$("h3",Fe," Cadastrado em "+j(l(B)),1)]),_:1})]),_:1}),$("div",Se,[a(U,{modelValue:l(t).tipo_pessoa,"onUpdate:modelValue":e[0]||(e[0]=s=>l(t).tipo_pessoa=s),style:{width:"200px"},items:ae,"item-title":"label","item-value":"value",label:"Tipo de pessoa","bg-color":"#F6F6F6",disabled:""},null,8,["modelValue"])]),l(A)?(r(),W("div",Ne,[a(xe,{indeterminate:"",class:"loading-spinner",size:"64"})])):(r(),W("div",Te,[a(De,{modelValue:l(v),"onUpdate:modelValue":e[1]||(e[1]=s=>G(v)?v.value=s:null),"bg-color":"#f5f2f2"},{default:o(()=>[a(C,{value:"dados"},{default:o(()=>e[18]||(e[18]=[f("Dados")])),_:1}),l(t).tipo_pessoa==="FISICA"?(r(),p(C,{key:0,value:"documento"},{default:o(()=>e[19]||(e[19]=[f("Documentos")])),_:1})):b("",!0),l(t).tipo_pessoa==="JURIDICA"?(r(),p(C,{key:1,value:"representante"},{default:o(()=>e[20]||(e[20]=[f("Representantes")])),_:1})):b("",!0),l(t).tipo_pessoa==="JURIDICA"||l(t).tipo_pessoa==="FISICA"?(r(),p(C,{key:2,value:"endereco"},{default:o(()=>e[21]||(e[21]=[f("Endereços")])),_:1})):b("",!0),l(t).tipo_pessoa==="FISICA"?(r(),p(C,{key:3,value:"biometria"},{default:o(()=>e[22]||(e[22]=[f("Biometria")])),_:1})):b("",!0),l(t).tipo_pessoa==="JURIDICA"||l(t).tipo_pessoa==="FISICA"?(r(),p(C,{key:4,value:"restricao"},{default:o(()=>e[23]||(e[23]=[f("Restrições")])),_:1})):b("",!0)]),_:1},8,["modelValue"]),a(Pe,{modelValue:l(v),"onUpdate:modelValue":e[17]||(e[17]=s=>G(v)?v.value=s:null)},{default:o(()=>[a(I,{value:"dados"},{default:o(()=>[l(t).tipo_pessoa==="FISICA"?(r(),p(q,{key:0},{default:o(()=>[a(_,null,{default:o(()=>[a(u,{cols:"12",md:"6"},{default:o(()=>[a(m,{modelValue:l(t).nome,"onUpdate:modelValue":e[2]||(e[2]=s=>l(t).nome=s),label:"Nome"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[y(a(m,{modelValue:l(t).doc_identificacao,"onUpdate:modelValue":e[3]||(e[3]=s=>l(t).doc_identificacao=s),label:"CPF"},null,8,["modelValue"]),[[k,"###.###.###-##"]])]),_:1}),a(u,{md:"2"},{default:o(()=>[a(Re,{label:"Sexo",modelValue:l(t).tabvalores_sexo_id,"onUpdate:modelValue":e[4]||(e[4]=s=>l(t).tabvalores_sexo_id=s),items:l(w),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(_,null,{default:o(()=>[a(u,{cols:"12",md:"4"},{default:o(()=>[a(U,{modelValue:l(t).tabvalores_estadocivil_id,"onUpdate:modelValue":e[5]||(e[5]=s=>l(t).tabvalores_estadocivil_id=s),items:l(S),"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(m,{modelValue:l(t).profissao,"onUpdate:modelValue":e[6]||(e[6]=s=>l(t).profissao=s),label:"Profissão"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(m,{modelValue:l(t).local_trabalho,"onUpdate:modelValue":e[7]||(e[7]=s=>l(t).local_trabalho=s),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,null,{default:o(()=>[a(u,{cols:"12",md:"2"},{default:o(()=>[y(a(m,{modelValue:l(t).data_nascimento,"onUpdate:modelValue":e[8]||(e[8]=s=>l(t).data_nascimento=s),label:"Data de nascimento",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[k,"##/##/####"]])]),_:1}),a(u,{cols:"12",md:"2"},{default:o(()=>[y(a(m,{modelValue:l(t).fone_celular,"onUpdate:modelValue":e[9]||(e[9]=s=>l(t).fone_celular=s),label:"Celular",placeholder:"'(99) 99999-9999'"},null,8,["modelValue"]),[[k,"(##) #####-####"]])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(U,{modelValue:l(t).tabvalores_capacidadecivil_id,"onUpdate:modelValue":e[10]||(e[10]=s=>l(t).tabvalores_capacidadecivil_id=s),items:l(N),label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(U,{modelValue:l(t).cidade_natural_id,"onUpdate:modelValue":e[11]||(e[11]=s=>l(t).cidade_natural_id=s),items:l(T),label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(_,null,{default:o(()=>[a(u,{cols:"12",md:"4"},{default:o(()=>[y(a(m,{modelValue:l(t).cpf_pai,"onUpdate:modelValue":e[12]||(e[12]=s=>l(t).cpf_pai=s),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[k,"###.###.###-##"]])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(m,{modelValue:l(t).nome_pai,"onUpdate:modelValue":e[13]||(e[13]=s=>l(t).nome_pai=s),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,null,{default:o(()=>[a(u,{cols:"12",md:"4"},{default:o(()=>[y(a(m,{modelValue:l(t).cpf_mae,"onUpdate:modelValue":e[14]||(e[14]=s=>l(t).cpf_mae=s),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[k,"###.###.###-##"]])]),_:1}),a(u,{cols:"12",md:"4"},{default:o(()=>[a(m,{modelValue:l(t).nome_mae,"onUpdate:modelValue":e[15]||(e[15]=s=>l(t).nome_mae=s),modelModifiers:{date:!0},label:"Nome da Mãe"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{class:"mb-3"},{default:o(()=>[a(n,{to:"/pessoas/lista"},{default:o(()=>[a(O,{size:"large",color:"red"},{default:o(()=>e[24]||(e[24]=[f("Voltar")])),_:1})]),_:1}),a(O,{onClick:e[16]||(e[16]=s=>se()),class:"ml-4",size:"large",color:"green"},{default:o(()=>e[25]||(e[25]=[f("Salvar")])),_:1})]),_:1})]),_:1})):l(t).tipo_pessoa==="JURIDICA"?(r(),p(i,{key:1})):b("",!0)]),_:1}),a(I,{value:"documento"},{default:o(()=>[a(D)]),_:1}),a(I,{value:"representante"},{default:o(()=>[a(P)]),_:1}),a(I,{value:"endereco"},{default:o(()=>[a(de)]),_:1}),a(I,{value:"biometria"},{default:o(()=>[a(q,{class:"mt-5"},{default:o(()=>[a(ie,{"link-ficha":l(E)},null,8,["link-ficha"])]),_:1})]),_:1}),a(I,{value:"restricao"},{default:o(()=>[a(ne)]),_:1})]),_:1},8,["modelValue"])]))]),_:1})}}},na=ve(we,[["__scopeId","data-v-8bca4d61"]]);export{na as default};
