import{_ as F,a as G,u as J}from"./CqTQsP98.js";import{_ as W,G as H,m as Q,r as u,B as X,p,w as a,q as Y,o as f,b as t,a as E,V as K,s as l,C as P,v,R as Z,d as k,L as y,K as b,u as S}from"./BWUaJUvi.js";import{f as R}from"./BQAFJBHE.js";import{V as ee}from"./BpRt-f4R.js";import{V as oe}from"./BeulduU8.js";import{V as T}from"./BhQaVmpm.js";import{V as te}from"./BurSB6Hx.js";import{V as h}from"./3yZZc8HG.js";import{V as ae}from"./C75VMkva.js";import"./JICjdrAR.js";import"./Cr27kbZc.js";const se={__name:"index",setup(re){const N=H(),{$toast:U}=Q(),c=u({senha:"",email:""}),V=u(!1),n=u(!1),x=u(!1),w=u(!1),C=u(!1),d=u(!1),g=()=>{x.value=!1,w.value=!1,d.value=!1,C.value=!1,n.value=!1},O=Y(),M=`${O.public.auth}/service/gerencia/listarMenu`,$=O.public.auth,A=async()=>{const{data:o,status:e,error:s}=await R(`${$}/login`,{method:"POST",body:{senha:c.value.senha,email:c.value.email}});return console.log(o.value[0].func_autentica_acesso_v1[0].registro[0].cartorios),{data:o==null?void 0:o.value,status:e==null?void 0:e.value,error:s==null?void 0:s.value}},L=o=>{const e=S("user-data");e.value=JSON.stringify({nome:o.nome,usuario_id:o.id,cartorio_id:o.cartorios[0].cartorio_id,cartorio_nome:o.cartorios[0].cartorio_descricao,cartorio_token:o.cartorios[0].cartorio_token});const s=S("auth_token");s.value=o.token},q=o=>{var r,i,m;const e=(m=(i=(r=o==null?void 0:o.data)==null?void 0:r[0])==null?void 0:i.func_autentica_acesso_v1)==null?void 0:m[0],s=e==null?void 0:e.status_mensagem;if(!e){d.value=!0;return}switch(s){case"Esse email não está cadastrado no Durabil.":w.value=!0;break;case"Senha inválida.":x.value=!0;break;case"Seu cadastro está desativado. Entre em contato com o administrador da conta.":C.value=!0;break;default:d.value=!0;break}},D=async()=>{var r,i,m,B;const{data:o,status:e,error:s}=await A();if(e==="success"){const _=(B=(m=(i=(r=o==null?void 0:o[0])==null?void 0:r.func_autentica_acesso_v1)==null?void 0:i[0])==null?void 0:m.registro)==null?void 0:B[0];if(J().cartorioInfos=_.cartorios,L(_),_.cartorios.length>1){N.push({path:"/login/tipo-perfil"});return}U.success("Login realizado com sucesso!");const{data:I,status:j}=await R(M,{method:"POST",body:{perfil_descricao:_.cartorios[0].perfil_descricao}});if(j.value==="success"){const z=S("menu-navbar");z.value=I.value,N.push({path:"/"})}}else e==="error"&&(s==null?void 0:s.statusCode)===500?d.value=!0:q(s)};return(o,e)=>{const s=X("center");return f(),p(ee,{style:{"background-color":"#0a063b"}},{default:a(()=>[t(ae,{cols:"5",class:"d-flex align-center justify-center"},{default:a(()=>[t(oe,{style:{"max-width":"650px"}},{default:a(()=>[t(s,null,{default:a(()=>[t(T,{style:{"margin-bottom":"30px"},width:400,height:330,src:F})]),_:1}),e[10]||(e[10]=E("div",{class:"text"},"Login",-1)),t(K,{autofocus:"",autocomplete:"email",type:"email",modelValue:l(c).email,"onUpdate:modelValue":e[0]||(e[0]=r=>l(c).email=r),"persistent-hint":"",class:"input mb-5",style:{"background-color":"aliceblue"},"hide-details":"",density:"compact",placeholder:"Email","prepend-inner-icon":"mdi-email-outline",variant:"outlined"},null,8,["modelValue"]),t(K,{modelValue:l(c).senha,"onUpdate:modelValue":e[1]||(e[1]=r=>l(c).senha=r),class:"input","append-inner-icon":l(V)?"mdi-eye-off":"mdi-eye",type:l(V)?"text":"password",density:"compact",style:{"background-color":"aliceblue"},"hide-details":"",placeholder:"Senha","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":e[2]||(e[2]=r=>V.value=!l(V))},null,8,["modelValue","append-inner-icon","type"]),t(te,{modelValue:l(n),"onUpdate:modelValue":e[4]||(e[4]=r=>P(n)?n.value=r:null),"max-width":"400",persistent:""},{activator:a(({props:r})=>[t(v,Z({rounded:"",class:"mb-10 mt-4 ml-1"},r,{color:"primary",onClick:D,modelValue:l(n),"onUpdate:modelValue":e[3]||(e[3]=i=>P(n)?n.value=i:null),block:""}),{default:a(()=>e[5]||(e[5]=[k(" Acessar ")])),_:2},1040,["modelValue"])]),default:a(()=>[l(x)?(f(),p(h,{key:0,text:"Senha inválida."},{actions:a(()=>[t(y),t(v,{onClick:g,style:{"background-color":"#429946",color:"white"}},{default:a(()=>e[6]||(e[6]=[k(" OK ")])),_:1})]),_:1})):b("",!0),l(w)?(f(),p(h,{key:1,text:"Esse email não está cadastrado."},{actions:a(()=>[t(y),t(v,{onClick:g,style:{"background-color":"#429946",color:"white"}},{default:a(()=>e[7]||(e[7]=[k(" OK ")])),_:1})]),_:1})):b("",!0),l(d)?(f(),p(h,{key:2,text:"Erro no sistema, fora do ar."},{actions:a(()=>[t(y),t(v,{onClick:g,style:{"background-color":"#429946",color:"white"}},{default:a(()=>e[8]||(e[8]=[k(" OK ")])),_:1})]),_:1})):b("",!0),l(C)?(f(),p(h,{key:3,text:"Seu cadastro está desativado. Entre em contato com o administrador da conta."},{actions:a(()=>[t(y),t(v,{onClick:g,style:{"background-color":"#429946",color:"white"}},{default:a(()=>e[9]||(e[9]=[k(" OK ")])),_:1})]),_:1})):b("",!0)]),_:1},8,["modelValue"]),e[11]||(e[11]=E("div",null,[E("a",{class:"text-decoration-none",rel:"noopener noreferrer",style:{color:"white","margin-left":"10px"}}," Esqueceu a senha?")],-1))]),_:1})]),_:1}),t(T,{src:G,cover:""})]),_:1})}}},Ve=W(se,[["__scopeId","data-v-428bd26a"]]);export{Ve as default};
