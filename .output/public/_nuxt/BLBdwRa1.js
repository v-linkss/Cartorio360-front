import{_ as J}from"./CFKQZsQS.js";import{_ as L}from"./D9gHZEDz.js";import{_ as M}from"./BVz1G1IN.js";import{_ as P}from"./Cam7flBt.js";import{_ as A}from"./MvbdNjqy.js";import{_ as q}from"./DmZL7Dn1.js";import{_ as G,a as I}from"./DJvq3mCv.js";import{r as s,L as W,x as m,w as n,z as X,o as l,b as r,a as o,V as x,v as i,J as y,P as H,d as K,t as Q,c as h,y as Y,m as w}from"./YI8lo3zd.js";import{f as b}from"./C1aBvt6A.js";import{u as Z}from"./tTUag_Jg.js";import{V as ee}from"./CM1iL1Au.js";import{V as C}from"./BsSLDjv8.js";import{V as te}from"./BQRXYyHs.js";import"./DLdQExSB.js";import"./DmQmkI2s.js";import"./CDUWyUfQ.js";import"./tfr_7Go-.js";import"./BNE_Qgsd.js";import"./BEN-nTRN.js";import"./Dj_WMhgy.js";const ae={style:{width:"200px"}},oe={style:{width:"150px"}},se={style:{width:"300px"}},ie=["onClick"],le={key:0,style:{width:"30px",height:"30px"},src:P,alt:"Visualizar",title:"Possui Ficha"},ne={key:1,style:{width:"30px",height:"30px"},src:A,alt:"Visualizar",title:"N達o Ficha"},re=["onClick"],ue=["onClick"],ce={key:0,style:{width:"30px",height:"30px"},src:G,alt:"Visualizar",title:"Reativar"},de={key:1,src:I,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Re={__name:"index",setup(pe){const _=X(),z=`${_.public.auth}/service/gerencia/pesquisarPessoas`,D=`${_.public.auth}/service/gerencia/updatePessoa`,F=`${_.public.managemant}/lista_download`,p=s(!1),g=s([]),N=s(null),k=s({}),T=W(),f=s(!1),V=s([]),u=s(null),c=s(null),d=s(null),R=[{title:"Documento",value:"doc_identificacao",width:"190px"},{title:"Cart達o",value:"numero_ficha"},{title:"Nome/Raz達o Social",value:"nome",width:"400px"},{value:"actions"}],U=async()=>{f.value=!0;const{data:t,status:e}=await b(`${z}`,{method:"POST",body:{cartorio_token:w("user-data").value.cartorio_token,nome:u.value?u.value:null,documento:c.value?c.value.replace(/\D/g,""):null,numero_ficha:Number(d.value)?Number(d.value):null}});e.value==="success"&&(f.value=!1,V.value=t.value)};function j(t){if(!t)return"";const e=t.replace(/\D/g,"");return e.length===11?e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):e.length===14?e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):t}const B=async(t,e)=>{p.value=!0;const{data:v}=await Z(F,{method:"POST",body:{bucket:w("user-data").value.cartorio_token,path:t}},"$Jxa9V4cJXG");g.value=v.value,N.value=t,k.value=e};async function E(t){t.excluido=!t.excluido;try{await b(`${D}/${t.id}`,{method:"PUT",body:{excluido:t.excluido}})}catch(e){console.error("Erro ao excluir pessoa:",e)}}function O(t){T.push({path:`/pessoas/atualizar/${t}`})}return(t,e)=>{const v=J,S=L;return l(),m(ee,{class:"mt-5"},{default:n(()=>[r(v,{to:"/pessoas/cadastro"},{default:n(()=>e[5]||(e[5]=[o("img",{style:{cursor:"pointer"},src:M,alt:"Cadastro"},null,-1)])),_:1}),r(C,{style:{gap:"1rem"}},{default:n(()=>[o("div",ae,[r(x,{class:"mt-7 mb-4",modelValue:i(c),"onUpdate:modelValue":e[0]||(e[0]=a=>y(c)?c.value=a:null),label:"Documento","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),o("div",oe,[r(x,{class:"mt-7 mb-4",modelValue:i(d),"onUpdate:modelValue":e[1]||(e[1]=a=>y(d)?d.value=a:null),label:"Cart達o","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),o("div",se,[r(x,{class:"mt-7 mb-4",modelValue:i(u),"onUpdate:modelValue":e[2]||(e[2]=a=>y(u)?u.value=a:null),label:"Pessoa","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),o("div",{style:{cursor:"pointer"},onClick:e[3]||(e[3]=a=>U()),title:"Visualizar",class:"mt-7"},e[6]||(e[6]=[o("img",{style:{width:"40px",height:"40px"},src:P,alt:"Visualizar",title:"Possui Ficha"},null,-1)]))]),_:1}),i(f)?(l(),m(H,{key:0,class:"loading-spinner",indeterminate:"",size:"80"})):(l(),m(te,{key:1,density:"compact",headers:R,items:i(V),"item-key":"id","items-per-page-options":[10,25,50]},{"item.doc_identificacao":n(({item:a})=>[K(Q(j(a.documento)),1)]),"item.actions":n(({item:a})=>[r(C,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:n(()=>[o("div",{style:{cursor:"pointer"},onClick:$=>B(a.link_ficha,a),title:"Visualizar"},[a.link_ficha?(l(),h("img",le)):(l(),h("img",ne))],8,ie),o("div",{style:{cursor:"pointer"},onClick:$=>O(a.id),title:"Atualizar"},e[7]||(e[7]=[o("img",{style:{width:"30px",height:"30px"},src:q,alt:"Atualizar"},null,-1)]),8,re),o("div",{style:{cursor:"pointer"},onClick:$=>E(a),title:"Deletar"},[a.excluido?(l(),h("img",ce)):(l(),h("img",de))],8,ue)]),_:2},1024)]),_:1},8,["items"])),i(p)?(l(),m(S,{key:2,show:i(p),"link-view":i(g),"is-view":!0,"pessoa-obj":i(k),onClose:e[4]||(e[4]=a=>p.value=!1)},null,8,["show","link-view","pessoa-obj"])):Y("",!0)]),_:1})}}};export{Re as default};
