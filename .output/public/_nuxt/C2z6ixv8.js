import{_ as ro}from"./CXATO6_g.js";import{_ as io}from"./D2eroCEZ.js";import{_ as uo,a as mo}from"./BEUyBccy.js";import{_ as po}from"./Dogd-43M.js";import{_ as _o}from"./qjsfcr_4.js";import{_ as co}from"./BVz1G1IN.js";import{_ as L}from"./Dewyef5a.js";import{_ as vo}from"./BWGgDRpU.js";import{_ as fo,a as yo}from"./DJvq3mCv.js";import{_ as ko,u as Vo,m as bo,r as i,n as y,p as go,q as xo,s as Ao,v as ho,c as D,b as s,w as n,a as d,x as l,y as $o,z as Co,F as wo,A as So,o as b,B as k,V as m,C as Do,D as Uo}from"./jKdPt9Nq.js";import{u as g}from"./AemGuM4s.js";import{f as x}from"./B0IxRygJ.js";import{f as Oo}from"./jbPQFL1l.js";import{V as To}from"./-CyzQJ-e.js";import{V as No}from"./BRolpuRn.js";import{V as U}from"./DI44L2v9.js";import{V as u}from"./B0CXrtNf.js";import{V as O}from"./Ej70kfqJ.js";import"./DAssPBk3.js";import"./B5u6MS07.js";import"./Ben0CcAW.js";import"./D28TYCw5.js";import"./CLF2tgkE.js";import"./DbZDaFPI.js";import"./iJICWJb2.js";import"./wGmQOWmV.js";import"./DJfaslIH.js";const Eo={style:{width:"1580px",margin:"0 auto"}},Po={style:{display:"flex",gap:"4px","justify-content":"center"}},qo=["onClick"],zo=["onClick"],Ro=["onClick","title"],Io=["disabled","onClick"],Fo={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:fo,alt:"Visualizar",title:"Reativar"},Mo={key:1,src:yo,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},Lo={__name:"index",setup(Bo){const c=So(),{$toast:B}=Vo(),j=`${c.public.managemant}/listarUsuarios`;`${c.public.managemant}`;const J=`${c.public.managemant}/tipoAtos`,Y=`${c.public.managemant}/updateAtos`,T=`${c.public.managemant}/pesquisaAtos`,N=bo(),A=i(y("auth_token").value)||null,h=i(y("user-data").value.cartorio_token)||null,$=i(!1),V=i([]),E=i([]),P=i([]),H=i(["PENDENTE","EM ANDAMENTO","CONCLUÍDA","LAVRADA"]),q=i(!1),z=i(!1),R=i(null),Q=i(null),I=i(null),W=i({}),C=i(!1),F=i(null),a=go({numero:null,data_inicio:w(),data_fim:w(),data_lavratura_inicio:null,data_lavratura_fim:null,protocolo:null,livro:null,folha:null,situacao:null,usuario_token:A.value,selo:null,ato_tipo_token:null,apresentante_cpf:null,apresentante_nome:null,valor:null}),X=[{title:"ID",value:"id"},{title:"Data Abertura",value:"dt_abertura"},{title:"Data lavratura",value:"dt_lavratura"},{title:"N° OS",value:"numero_os"},{title:"Protocolo",value:"protocolo"},{title:"Apresentante",value:"apresentante_nome"},{title:"CPF",value:"apresentante_cpf"},{title:"Tipo Serviço",value:"ato_servico"},{title:"Usuario",value:"usuario_nome"},{title:"Situação",value:"situacao"},{title:"Livro",value:"livro_numero"},{title:"Folha",value:"folha"},{title:"Valor",value:"valor"},{title:"Ações",value:"actions"}];function w(){const t=new Date,o=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0");return`${String(t.getDate()).padStart(2,"0")}-${r}-${o}`}function _(t){if(!t)return null;const[o,r,p]=t.split("/");return`${p}-${r}-${o}`}async function M(){const t=w(),o=sessionStorage.getItem("pesquisaAto"),r=JSON.parse(o),{data:p}=await g(T,{method:"POST",body:{cartorio_token:y("user-data").value.cartorio_token,usuario_token:r.usuario_token||A.value,data_fim:_(r==null?void 0:r.data_fim)||t,data_inicio:_(r==null?void 0:r.data_inicio)||t}},"$1U9Iv6Es1X");p.value.length>0&&(V.value=p.value.map(v=>({...v,dt_lavratura:x(v.dt_lavratura,"dd/mm/yyyy"),dt_abertura:x(v.dt_abertura,"dd/mm/yyyy")})))}async function Z(){const{data:t}=await g(j,{method:"POST",body:{cartorio_token:h.value}},"$hvipqUJYtS");E.value=t.value}async function G(){try{sessionStorage.setItem("pesquisaAto",JSON.stringify(a));const{data:t,error:o}=await g(T,{method:"POST",body:{cartorio_token:h.value,numero:a.numero||null,data_inicio:_(a.data_inicio)||null,data_fim:_(a.data_fim)||null,data_lavratura_inicio:_(a.data_lavratura_inicio)||null,data_lavratura_fim:_(a.data_lavratura_fim)||null,protocolo:a.protocolo||null,livro:a.livro||null,folha:a.folha||null,situacao:a.situacao||null,usuario_token:a.usuario_token,selo:a.selo||null,ato_tipo_token:a.ato_tipo_token,apresentante:a.apresentante_nome||null}},"$OjamgBH6nj");t.value.length>0?V.value=t.value.map(r=>({...r,dt_lavratura:r.data?x(r.dt_lavratura,"dd/mm/yyyy"):null,dt_abertura:r.dt_abertura?x(r.dt_abertura,"dd/mm/yyyy"):null})):(V.value=[],B.error("Não existe ato Registrado!"))}catch(t){console.error("Erro na requisição",t)}}const K=t=>{N.push({path:`/fontes/atos/atos-com-bem/atualizar/${t.id}`,query:{origem:"vizualizar-lista",id:t.id,ato_id:t.id,tipo_ato_token:t.tipo_token,tipo_ato:t.ato_servico,ato_token_edit:t.token,numero_os:t.numero_os,usa_imoveis:!0}})};async function oo(){const{data:t,error:o}=await g(J,{method:"POST",body:{cartorio_token:h.value,usuario_token:A.value}},"$QxIfw0Zxe4");P.value=t.value}const to=t=>{F.value=t,C.value=!0};async function eo(t){t.excluido=!t.excluido;try{await Oo(`${Y}/${t.id}`,{method:"PUT",body:{excluido:t.excluido}})}catch(o){console.error("Erro ao excluir pessoa:",o)}}const ao=t=>{(t.usa_imoveis||!t.usa_imoveis)&&N.push({path:`/fontes/atos/atos-com-bem/atualizar/${t.id}`,query:{origem:"atualizar-lista",id:t.id,ato_id:t.id,tipo_ato_token:t.tipo_token,tipo_ato:t.tipo,ato_token_edit:t.token,numero_os:t.numero_os,usa_imoveis:!0}})},lo=()=>{const t=y("user-service"),o=y("ordem-button");t.value=null,R.value=!0,o.value=R.value};return xo(()=>{Ao(async()=>{const t=sessionStorage.getItem("pesquisaAto");if(t){const o=JSON.parse(t);Object.assign(a,o)}await M()})}),Z(),oo(),(t,o)=>{const r=ro,p=io,v=uo,so=po,no=_o,f=ho("mask");return b(),D(wo,null,[s(To,{class:"mt-5"},{default:n(()=>[s(U,{class:"mb-5"},{default:n(()=>[o[19]||(o[19]=d("h1",null,"Atos",-1)),s(r,{to:"/os/criar-registro"},{default:n(()=>[d("img",{style:{width:"60px",height:"60px",cursor:"pointer","margin-left":"70px"},src:co,alt:"novo",onClick:lo})]),_:1})]),_:1}),s(U,null,{default:n(()=>[s(u,{cols:"2"},{default:n(()=>[k(s(m,{modelValue:l(a).data_inicio,"onUpdate:modelValue":o[0]||(o[0]=e=>l(a).data_inicio=e),label:"Abertura de",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[f,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:n(()=>[k(s(m,{modelValue:l(a).data_fim,"onUpdate:modelValue":o[1]||(o[1]=e=>l(a).data_fim=e),label:"Abertura até",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[f,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:n(()=>[k(s(m,{modelValue:l(a).data_lavratura_inicio,"onUpdate:modelValue":o[2]||(o[2]=e=>l(a).data_lavratura_inicio=e),label:"Lavratura de",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[f,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:n(()=>[k(s(m,{modelValue:l(a).data_lavratura_fim,"onUpdate:modelValue":o[3]||(o[3]=e=>l(a).data_lavratura_fim=e),label:"Lavratura até",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[f,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:n(()=>[k(s(m,{modelValue:l(a).apresentante_cpf,"onUpdate:modelValue":o[4]||(o[4]=e=>l(a).apresentante_cpf=e),label:"CPF",dense:""},null,8,["modelValue"]),[[f,"###.###.###-##"]])]),_:1}),s(u,{cols:"2"},{default:n(()=>[s(m,{modelValue:l(a).selo,"onUpdate:modelValue":o[5]||(o[5]=e=>l(a).selo=e),label:"Selo",dense:""},null,8,["modelValue"])]),_:1})]),_:1}),s(U,null,{default:n(()=>[s(u,{cols:"2"},{default:n(()=>[s(m,{modelValue:l(a).numero,"onUpdate:modelValue":o[6]||(o[6]=e=>l(a).numero=e),label:"N° OS"},null,8,["modelValue"])]),_:1}),s(u,{cols:"2"},{default:n(()=>[s(m,{modelValue:l(a).protocolo,"onUpdate:modelValue":o[7]||(o[7]=e=>l(a).protocolo=e),label:"Protocolo"},null,8,["modelValue"])]),_:1}),s(u,{cols:"3"},{default:n(()=>[s(m,{modelValue:l(a).apresentante,"onUpdate:modelValue":o[8]||(o[8]=e=>l(a).apresentante=e),label:"Apresentante",dense:""},null,8,["modelValue"])]),_:1}),s(u,{cols:"3"},{default:n(()=>[s(O,{modelValue:l(a).ato_tipo_token,"onUpdate:modelValue":o[9]||(o[9]=e=>l(a).ato_tipo_token=e),items:l(P),"item-title":"descricao","item-value":"token",label:"Tipo Serviço",dense:""},null,8,["modelValue","items"])]),_:1}),s(u,{cols:"2"},{default:n(()=>[s(O,{items:l(E),modelValue:l(a).usuario_token,"onUpdate:modelValue":o[10]||(o[10]=e=>l(a).usuario_token=e),"item-title":"user_nome","item-value":"user_token",label:"Usuário",dense:""},null,8,["items","modelValue"])]),_:1}),s(u,{cols:"3"},{default:n(()=>[s(O,{modelValue:l(a).situacao,"onUpdate:modelValue":o[11]||(o[11]=e=>l(a).situacao=e),items:l(H),label:"Situação",dense:""},null,8,["modelValue","items"])]),_:1}),s(u,{cols:"1"},{default:n(()=>[s(m,{modelValue:l(a).livro,"onUpdate:modelValue":o[12]||(o[12]=e=>l(a).livro=e),label:"Livro",dense:""},null,8,["modelValue"])]),_:1}),s(u,{cols:"1"},{default:n(()=>[s(m,{modelValue:l(a).folha,"onUpdate:modelValue":o[13]||(o[13]=e=>l(a).folha=e),label:"Folha",dense:""},null,8,["modelValue"])]),_:1}),s(u,null,{default:n(()=>[d("div",null,[d("img",{onClick:G,style:{width:"40px",height:"40px",cursor:"pointer"},src:L,alt:"Pesquisar"})])]),_:1})]),_:1})]),_:1}),d("div",Eo,[o[22]||(o[22]=d("hr",{class:"mt-5 mb-5"},null,-1)),s(No,{headers:X,items:l(V),style:{"font-size":"12px"},"item-key":"id"},{"item.actions":n(({item:e})=>[d("div",Po,[d("div",{onClick:S=>K(e),title:"Visualizar"},o[20]||(o[20]=[d("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:L,alt:"Visualizar"},null,-1)]),8,qo),d("div",{onClick:S=>to(e.token),title:"Reimprimir"},o[21]||(o[21]=[d("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:mo,alt:"Reimprimir"},null,-1)]),8,zo),d("div",{class:Do({disabled:!e.btn_editar}),onClick:S=>e.btn_editar?ao({id:e.id,tipo:e.tipo,token:e.token,tipo_token:e.tipo_token,usa_imoveis:e.usa_imoveis}):null,title:e.btn_editar?"Editar":"Desabilitado"},[d("img",{style:Uo({cursor:e.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:vo,alt:"Editar"},null,4)],10,Ro),d("div",{disabled:!e.btn_cancelar,onClick:S=>e.btn_cancelar?eo(e):null,title:"Excluir"},[e.excluido?(b(),D("img",Fo)):(b(),D("img",Mo))],8,Io)])]),_:1},8,["items"])]),l($)?(b(),$o(p,{key:0,show:l($),servicos:t.dadosData.servicos||[],tiposAtos:t.dadosData.tiposAtos||[],onClose:o[14]||(o[14]=e=>$.value=!1),onUpdateAto:t.handleUpdateAto},null,8,["show","servicos","tiposAtos","onUpdateAto"])):Co("",!0),s(v,{show:l(C),ato_token:l(F),onClose:o[15]||(o[15]=e=>C.value=!1)},null,8,["show","ato_token"]),s(so,{show:l(q),numero_os:l(I),ordem:l(W),onClose:o[16]||(o[16]=e=>q.value=!1),onRefreshValue:o[17]||(o[17]=e=>M())},null,8,["show","numero_os","ordem"]),s(no,{show:l(z),numero_os:l(I),ordemserv_token:l(Q),onClose:o[18]||(o[18]=e=>z.value=!1)},null,8,["show","numero_os","ordemserv_token"])],64)}}},yt=ko(Lo,[["__scopeId","data-v-1708a80f"]]);export{yt as default};
