import{_ as G}from"./gZBbaLrE.js";import{_ as I}from"./BtDMyT_G.js";import{_ as J}from"./BVz1G1IN.js";import{_ as q}from"./Ds1k55_2.js";import{_ as K}from"./CGmexNvx.js";import{_ as W}from"./CJWoGetl.js";import{_ as X,a as H}from"./DJvq3mCv.js";import{r as i,G as Q,n as Y,z as Z,s as a,p as w,w as n,K as C,q as ee,o as r,b as l,a as s,V as y,B as g,d as te,t as oe,c as f,u as ae}from"./BOL4noSq.js";import{f as b}from"./_dXWBzjd.js";import{u as se}from"./TzX8YZO0.js";import{V as ie}from"./Cl_P9YfM.js";import{V as z}from"./bqpzMvxx.js";import{V as le}from"./C5FAYfot.js";import"./CPO4BRHb.js";import"./D6ANBwFC.js";import"./DgnvD5-t.js";import"./BTXPcqnv.js";import"./BAkrviJb.js";import"./BuYEFpRz.js";const ne={style:{width:"200px"}},re={style:{width:"150px"}},ce={style:{width:"300px"}},de=["onClick"],ue={key:0,style:{width:"30px",height:"30px"},src:q,alt:"Visualizar",title:"Possui Ficha"},pe={key:1,style:{width:"30px",height:"30px"},src:K,alt:"Visualizar",title:"N達o Ficha"},me=["onClick"],_e=["onClick"],he={key:0,style:{width:"30px",height:"30px"},src:X,alt:"Visualizar",title:"Reativar"},fe={key:1,src:H,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},je={__name:"index",async setup(xe){let d,k;const x=ee(),D=`${x.public.auth}/service/gerencia/getAllPessoa`,F=`${x.public.auth}/service/gerencia/updatePessoa`,N=`${x.public.managemant}/download`,u=i(!1),V=i(null),P=i(null),$=i({}),T=Q(),p=i(""),m=i(""),_=i(""),S=[{title:"Documento",value:"doc_identificacao",width:"190px"},{title:"Cart達o",value:"numero_ficha"},{title:"Nome/Raz達o Social",value:"nome",width:"400px"},{value:"actions"}],{data:U,status:R}=([d,k]=Y(()=>b(`${D}?pageNumber=1&pageSize=1000000`)),d=await d,k(),d),B=Z(()=>{const t=e=>String(e||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return U.value.data.filter(e=>{const c=t(e.doc_identificacao),v=t(e.nome),o=t(String(e.numero_ficha)),h=c.includes(t(m.value)),M=v.includes(t(p.value)),O=o.includes(t(String(_.value)));return h&&M&&O})});function j(t){if(!t)return"";const e=t.replace(/\D/g,"");return e.length===11?e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):e.length===14?e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):t}const A=async(t,e)=>{u.value=!0;const{data:c}=await se(N,{method:"POST",body:{bucket:ae("user-data").value.cartorio_token,path:t}},"$Jxa9V4cJXG");V.value=c.value,P.value=t,$.value=e};async function E(t){t.excluido=!t.excluido;try{await b(`${F}/${t.id}`,{method:"PUT",body:{excluido:t.excluido}})}catch(e){console.error("Erro ao excluir pessoa:",e)}}function L(t){T.push({path:`/pessoas/atualizar/${t}`})}return(t,e)=>{const c=G,v=I;return a(R)==="success"?(r(),w(ie,{key:0,class:"mt-5"},{default:n(()=>[l(c,{to:"/pessoas/cadastro"},{default:n(()=>e[4]||(e[4]=[s("img",{style:{cursor:"pointer"},src:J,alt:"Cadastro"},null,-1)])),_:1}),l(z,{style:{gap:"1rem"}},{default:n(()=>[s("div",ne,[l(y,{class:"mt-7 mb-4",modelValue:a(m),"onUpdate:modelValue":e[0]||(e[0]=o=>g(m)?m.value=o:null),label:"Documento","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),s("div",re,[l(y,{class:"mt-7 mb-4",modelValue:a(_),"onUpdate:modelValue":e[1]||(e[1]=o=>g(_)?_.value=o:null),label:"Cart達o","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),s("div",ce,[l(y,{class:"mt-7 mb-4",modelValue:a(p),"onUpdate:modelValue":e[2]||(e[2]=o=>g(p)?p.value=o:null),label:"Pessoa","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),l(le,{density:"compact",headers:S,items:a(B),"item-key":"id","items-per-page-options":[10,25,50]},{"item.doc_identificacao":n(({item:o})=>[te(oe(j(o.doc_identificacao)),1)]),"item.actions":n(({item:o})=>[l(z,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:n(()=>[s("div",{style:{cursor:"pointer"},onClick:h=>A(o.link_ficha,o),title:"Visualizar"},[o.link_ficha?(r(),f("img",ue)):(r(),f("img",pe))],8,de),s("div",{style:{cursor:"pointer"},onClick:h=>L(o.id),title:"Atualizar"},e[5]||(e[5]=[s("img",{style:{width:"30px",height:"30px"},src:W,alt:"Atualizar"},null,-1)]),8,me),s("div",{style:{cursor:"pointer"},onClick:h=>E(o),title:"Deletar"},[o.excluido?(r(),f("img",he)):(r(),f("img",fe))],8,_e)]),_:2},1024)]),_:1},8,["items"]),a(u)?(r(),w(v,{key:0,show:a(u),"link-view":a(V),"is-view":!0,"pessoa-obj":a($),onClose:e[3]||(e[3]=o=>u.value=!1)},null,8,["show","link-view","pessoa-obj"])):C("",!0)]),_:1})):C("",!0)}}};export{je as default};
