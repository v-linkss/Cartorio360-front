import{_ as Q}from"./B7KVRnph.js";import{_ as W,a as ee,b as te}from"./Cmr9V00b.js";import{u as ae,q as oe,n as se,r as u,A as g,s as re,B as E,o as c,v as $,w as n,z as ne,M as le,b as o,a as l,t as ie,x as t,N as ue,V as b,O as de,P as ce,c as U,y as pe,d as me}from"./CmLaF6he.js";import{u as w}from"./DoUwG6Q5.js";import{V as _e,c as fe,_ as ve,a as ge,b as he}from"./DJXv-iAj.js";import{c as I,r as S,u as ke}from"./B5Fxaj8v.js";import{V as Ve}from"./CijNiOfi.js";import{V as h}from"./GwXOSlqS.js";import{V as k}from"./CuVACmLA.js";import{V as xe}from"./_0HDBEHl.js";import"./BVVREZoT.js";import"./C7Qq-rwt.js";import"./CdWXPEAW.js";import"./CyXw18Qd.js";import"./DHnzuTxT.js";const ye=l("h1",null,"Ordem de Serviço nº",-1),$e={style:{color:"red","margin-left":"30px"}},be=l("h1",{class:"ml-5"},"Atos",-1),we=l("img",{style:{width:"45px",height:"45px",cursor:"pointer"},src:ve,alt:"novo"},null,-1),Ce=["onClick"],Oe=l("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:te,alt:"Reimprimir"},null,-1),Re=[Oe],Ae=["onClick","title"],Be=["disabled","onClick"],Ee={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:ge,alt:"Visualizar",title:"Reativar"},Ue={key:1,src:he,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},je={__name:"[id]",async setup(Ie){let i,p;const{$toast:C}=ae(),P=oe(),{id:m}=P.params,O=se(),V=ne(),T=`${V.public.managemant}/updateOrdensServico`,q=`${V.public.managemant}/getOrdensServicoById`,z=`${V.public.managemant}/listarAtos`,N=u(g("user-data").value.cartorio_id),D=u(g("user-data").value.usuario_id),F=u(g("user-service").value.token).value||null,M=u(g("user-data").value.cartorio_token).value,x=u([]),y=u(!1),R=u(null),_=u(null),a=re({nacionalidade:"brasileiro",apresentante_nome:null,apresentante_cpf:null,documento:null}),G=[{title:"ID",value:"id"},{title:"Protocolo",value:"protocolo"},{title:"Usuario",value:"usuario_nome"},{title:"Situação",value:"situacao"},{title:"Valor",value:"valor"},{title:"Tipo",value:"tipo"},{value:"actions"}],L=[{title:"BRASILEIRO",value:!1},{title:"ESTRANGEIRO",value:!0}],K={apresentante_nome:{required:I.withMessage("O campo é obrigatorio",S)},apresentante_cpf:{required:I.withMessage("O campo é obrigatorio",S)}},d=ke(K,a);function X(s){if(s)return s.replace(/[.\-]/g,"");s=null}const Y=s=>{R.value=s,y.value=!0},Z=s=>{s.tipo==="PROCURAÇÃO"&&O.push({path:`/fontes/atos/procuracoes/atualizar/${s.id}`,query:{origem:"atualizar",id:m,ato_id:s.id,ato_token_edit:s.token,numero_os:_.value}})};async function j(){const s={apresentante_cpf:X(a.apresentante_cpf),apresentante_nome:a.apresentante_nome,user_id:D.value,cartorio_id:N.value},{error:r,status:v}=await w(`${T}/${m}`,{method:"PUT",body:s},"$Fud06ay483");v.value==="error"&&r.value.statusCode===500?C.error("Erro ao cadastrar ordem,erro no sistema."):(C.success("Ordem Atualizada com sucesso!"),O.push({path:"/os/lista"}))}const{data:f}=([i,p]=E(()=>w(`${q}/${m}`,{method:"GET"},"$wPUkUpDvPf")),i=await i,p(),i);_.value=f.value.numero,a.nacionalidade=f.value.estrangeiro,a.apresentante_cpf=f.value.apresentante_cpf,a.apresentante_nome=f.value.apresentante_nome;const{data:A}=([i,p]=E(()=>w(z,{method:"POST",body:{cartorio_token:M,ordemserv_token:F}},"$YXZ55K3IUf")),i=await i,p(),i);return A.value.length>0?x.value=A.value:x.value=[],(s,r)=>{const v=Q,H=ee,J=le("mask");return c(),$(Ve,{class:"mt-5"},{default:n(()=>[o(h,{class:"mb-5"},{default:n(()=>[ye,l("h1",$e,ie(t(_)),1)]),_:1}),o(h,null,{default:n(()=>[o(k,{md:"3"},{default:n(()=>[o(xe,{label:"Nacionalidade",items:L,modelValue:t(a).nacionalidade,"onUpdate:modelValue":r[0]||(r[0]=e=>t(a).nacionalidade=e)},null,8,["modelValue"])]),_:1}),o(k,{md:"2"},{default:n(()=>[t(a).nacionalidade==="brasileiro"?ue((c(),$(b,{key:0,autofocus:"",modelValue:t(a).apresentante_cpf,"onUpdate:modelValue":r[1]||(r[1]=e=>t(a).apresentante_cpf=e),label:"CPF",required:"","error-messages":t(d).apresentante_cpf.$errors.map(e=>e.$message),onBlur:t(d).apresentante_cpf.$touch,onInput:t(d).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])),[[J,"###.###.###-##"]]):(c(),$(b,{key:1,autofocus:"",modelValue:t(a).apresentante_cpf,"onUpdate:modelValue":r[2]||(r[2]=e=>t(a).apresentante_cpf=e),label:"Documento",required:"","error-messages":t(d).apresentante_cpf.$errors.map(e=>e.$message),onBlur:t(d).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur"]))]),_:1}),o(k,{md:"4"},{default:n(()=>[o(b,{modelValue:t(a).apresentante_nome,"onUpdate:modelValue":r[3]||(r[3]=e=>t(a).apresentante_nome=e),label:"Nome Apresentante",required:"","error-messages":t(d).apresentante_nome.$errors.map(e=>e.$message),onInput:t(d).apresentante_nome.$touch},null,8,["modelValue","error-messages","onInput"])]),_:1}),o(k,null,{default:n(()=>[l("div",null,[l("img",{style:{width:"40px",height:"40px",cursor:"pointer"},src:W,alt:"Salvar",onClick:r[4]||(r[4]=e=>j())})])]),_:1})]),_:1}),o(h,{style:{display:"flex","margin-bottom":"10px",gap:"2rem"}},{default:n(()=>[be,o(v,{to:{path:"/os/criar-ato",query:{origem:"atualizar",id:t(m),numeroOs:t(_)}}},{default:n(()=>[we]),_:1},8,["to"]),o(_e,{headers:G,items:t(x),"item-key":"id"},{"item.actions":n(({item:e})=>[o(h,{style:{display:"flex",gap:"10px","margin-top":"-5px"}},{default:n(()=>[l("div",{onClick:B=>Y(e.token),title:"Reimprimir"},Re,8,Ce),l("div",{class:ce({disabled:!e.btn_editar}),onClick:B=>e.btn_editar?Z({id:e.id,tipo:e.tipo,token:e.token}):null,title:e.btn_editar?"Editar":"Desabilitado"},[l("img",{style:de({cursor:e.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:fe,alt:"Editar"},null,4)],10,Ae),l("div",{disabled:!e.btn_cancelar,onClick:B=>e.btn_cancelar?s.deleteEndereco(e):null,title:"Excluir"},[e.excluido?(c(),U("img",Ee)):(c(),U("img",Ue))],8,Be)]),_:2},1024)]),_:1},8,["items"]),o(H,{show:t(y),ato_token:t(R),onClose:r[5]||(r[5]=e=>y.value=!1)},null,8,["show","ato_token"])]),_:1}),o(v,{to:"/os/lista"},{default:n(()=>[o(pe,{size:"large",color:"red"},{default:n(()=>[me("Voltar")]),_:1})]),_:1})]),_:1})}}};export{je as default};
