import{_ as L}from"./BfCZ9veE.js";import{_ as B,a as R,b as U}from"./BP1uhy__.js";import{_ as A}from"./CjvhRF_V.js";import{_ as E}from"./Da_YaqZn.js";import{m as x,C as I,r as y,I as P,p as M,G as S,w as r,s as j,o as m,b as i,a,V as v,v as p,x as g,c as k}from"./psD5v9Aa.js";import{_ as F}from"./CdP3NN9a.js";import{f as G}from"./BFTC63Hf.js";import{V as O}from"./D_yIk9YR.js";import{V}from"./CbFK0tUQ.js";import{V as W}from"./BnGW_sxD.js";import"./D7I0HSn_.js";import"./CbCVfO8w.js";import"./BBalbJSD.js";import"./CPMyhSY2.js";import"./FEgE0B4v.js";const q={style:{width:"200px"}},H={style:{width:"300px"}},J=["onClick"],K=["onClick"],Q=["onClick"],X={key:0,style:{width:"30px",height:"30px"},src:R,alt:"Visualizar",title:"Reativar"},Y={key:1,src:U,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ht={__name:"index",async setup(Z){let s,_;const h=j(),C=`${h.public.auth}/service/gerencia/listar_matriculas`,w=`${h.public.auth}/service/gerencia/matriculas`,$=x("auth_token"),f=I(),l=y(""),n=y(""),b=[{title:"Número",value:"numero"},{title:"Data",value:"data"},{title:"Protocolo",value:"protocolo"},{title:"Descrição",value:"descricao"},{value:"actions"}],u=([s,_]=P(()=>$fetch(`${C}?pageNumber=1&pageSize=1000000`,{method:"POST",body:{cartorio_token:x("user-data").value.cartorio_token},headers:{Authorization:`Bearer ${$.value}`}})),s=await s,_(),s),z=M(()=>!u||u.length===0?[]:u.filter(t=>{const e=t.numero?t.numero.toLowerCase():"",d=t.descricao?t.descricao.toLowerCase():"",o=e.includes(n.value.toLowerCase()),c=d.includes(l.value.toLowerCase());return o&&c}).map(t=>({...t,data:F(t.data,"dd/mm/yyyy")})));async function D(t){t.excluido=!t.excluido;try{await G(`${w}/${t.id}`,{method:"PUT",body:{excluido:t.excluido}})}catch(e){console.error("Erro ao excluir pessoa:",e)}}function N(t){f.push({path:`/matriculas/vizualizar/${t}`})}function T(t){f.push({path:`/matriculas/atualizar/${t}`})}return(t,e)=>{const d=L;return m(),S(O,{class:"mt-5"},{default:r(()=>[i(d,{to:"/matriculas/cadastro"},{default:r(()=>e[2]||(e[2]=[a("img",{style:{cursor:"pointer"},src:B,alt:"Cadastro"},null,-1)])),_:1}),i(V,{style:{gap:"3rem"}},{default:r(()=>[a("div",q,[i(v,{class:"mt-7 mb-4",modelValue:p(n),"onUpdate:modelValue":e[0]||(e[0]=o=>g(n)?n.value=o:null),label:"Numero","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),a("div",H,[i(v,{class:"mt-7 mb-4",modelValue:p(l),"onUpdate:modelValue":e[1]||(e[1]=o=>g(l)?l.value=o:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),i(W,{density:"compact",headers:b,items:p(z),"item-key":"id"},{"item.actions":r(({item:o})=>[i(V,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:r(()=>[a("div",{style:{cursor:"pointer"},onClick:c=>N(o.id),title:"Visualizar"},e[3]||(e[3]=[a("img",{style:{width:"30px",height:"30px"},src:A,alt:"Visualizar"},null,-1)]),8,J),a("div",{style:{cursor:"pointer"},onClick:c=>T(o.id),title:"Atualizar"},e[4]||(e[4]=[a("img",{style:{width:"30px",height:"30px"},src:E,alt:"Atualizar"},null,-1)]),8,K),a("div",{style:{cursor:"pointer"},onClick:c=>D(o),title:"Deletar"},[o.excluido?(m(),k("img",X)):(m(),k("img",Y))],8,Q)]),_:2},1024)]),_:1},8,["items"])]),_:1})}}};export{ht as default};
