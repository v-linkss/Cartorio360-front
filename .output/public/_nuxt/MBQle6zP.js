import{r as S,n as Y,D as A,F as Z,h as O,G as ee,H as ae,o as C,A as $,w as s,b as a,d as w,q as e,P as oe,c as le,t as te,C as R,s as n,I as B,a as g,v as T,x as se,V as ie,y as E}from"./BUVVZfhT.js";import{a as de,u as re}from"./DRXdnPS6.js";import{_ as ne}from"./ToPptOUL.js";import{c as h,r as x,u as me,V as F,_ as ue}from"./PV7ygOIe.js";import{c as ce}from"./XW0z3Brk.js";import{a as z,b as L,V as j,c as pe}from"./CG-Cg3Kq.js";import{V as fe}from"./BYw93oFs.js";import{V}from"./EISkJB2m.js";import{V as d}from"./Cj63iFGI.js";const _e={key:1},Ue={__name:"RegistroPessoas",props:{show:Boolean},emits:["close"],async setup(y,{emit:k}){let u,m;const v=y,c=S(v.show),b=k,{$toast:f}=Y(),p=se(),I=`${p.public.managemant}/createPessoa`,G=`${p.public.managemant}/listarEstadoCivil`,H=`${p.public.managemant}/listarCapacidadeCivil`,J=`${p.public.managemant}/listarCidades`,X={nome:"",nome_pai:"",nome_mae:"",profissao:"",local_trabalho:"",data_nascimento:"",doc_identificacao:"",cpf_pai:"",cpf_mae:"",tipo_pessoa:"FISICA",tabvalores_estadocivil_id:"",tabvalores_capacidadecivil_id:"",cidade_natural_id:"",cartorio_id:A("user-data").value.cartorio_id,user_id:A("user-data").value.usuario_id},t=Z({...X});O(()=>v.show,i=>{c.value=i});const M=()=>{c.value=!1,b("close")};function P(i){if(i)return i.replace(/[.\-]/g,"");i=null}const{data:U,pending:ve,status:N,error:q}=([u,m]=ee(async()=>de("cliente-dados",async()=>{const[i,l,_]=await Promise.all([$fetch(G),$fetch(H),$fetch(J)]);return{estadoCivilItems:i,capacidadeCivilItems:l,cidadeNascimentoItems:_}})),u=await u,m(),u),K={nome:{required:h.withMessage("O campo é obrigatorio",x)},nome_mae:{required:h.withMessage("O campo é obrigatorio",x)},doc_identificacao:{required:h.withMessage("O campo é obrigatorio",x),cpf:ce}},r=me(K,t);async function Q(){if(await r.value.$validate()){const i={...t};for(const D in i)i[D]===""&&(i[D]=null);const l={...i,doc_identificacao:P(t.doc_identificacao),cpf_pai:P(t.cpf_pai),cpf_mae:P(t.cpf_mae)},{data:_,error:o,status:W}=await re(I,{method:"POST",body:l},"$BiOjXVCR5N");W.value==="error"&&o.value.statusCode===500?f.error("Erro ao cadastrar pessoa,o CPF já está cadastrado."):(f.success("Pessoa cadastrada com sucesso!"),M())}else f.error("Erro ao cadastrar pessoa, preencha os campos obrigatorios.")}return(i,l)=>{const _=ae("mask");return C(),$(j,{persistent:"",modelValue:e(c),"onUpdate:modelValue":l[13]||(l[13]=o=>T(c)?c.value=o:null),"max-width":"1000"},{default:s(()=>[a(z,null,{default:s(()=>[a(L,{class:"text-h5 mt-3"},{default:s(()=>[w("Criar Pessoa")]),_:1}),e(N)==="pending"?(C(),$(oe,{key:0,class:"loading-spinner",indeterminate:"",size:"64"})):e(q)?(C(),le("div",_e,te(e(q).message),1)):R("",!0),e(N)==="success"?(C(),$(fe,{key:2,class:"mt-5"},{default:s(()=>[a(V,null,{default:s(()=>[a(d,{cols:"12",md:"8"},{default:s(()=>[a(n,{modelValue:e(t).nome,"onUpdate:modelValue":l[0]||(l[0]=o=>e(t).nome=o),"error-messages":e(r).nome.$errors.map(o=>o.$message),label:"Nome",required:"",onBlur:e(r).nome.$touch,onInput:e(r).nome.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[B(a(n,{modelValue:e(t).doc_identificacao,"onUpdate:modelValue":l[1]||(l[1]=o=>e(t).doc_identificacao=o),"error-messages":e(r).doc_identificacao.$errors.map(o=>o.$message),label:"CPF",required:"",onBlur:e(r).doc_identificacao.$touch,onInput:e(r).doc_identificacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),[[_,"###.###.###-##"]])]),_:1})]),_:1}),a(V,null,{default:s(()=>[a(d,{cols:"12",md:"4"},{default:s(()=>[a(F,{modelValue:e(t).tabvalores_estadocivil_id,"onUpdate:modelValue":l[2]||(l[2]=o=>e(t).tabvalores_estadocivil_id=o),items:e(U).estadoCivilItems,"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(n,{modelValue:e(t).profissao,"onUpdate:modelValue":l[3]||(l[3]=o=>e(t).profissao=o),label:"Profissão"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(n,{modelValue:e(t).local_trabalho,"onUpdate:modelValue":l[4]||(l[4]=o=>e(t).local_trabalho=o),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),a(V,null,{default:s(()=>[a(d,{cols:"12",md:"4"},{default:s(()=>[a(n,{modelValue:e(t).data_nascimento,"onUpdate:modelValue":l[5]||(l[5]=o=>e(t).data_nascimento=o),type:"date","prepend-icon":"",label:"Data de nascimento"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(F,{modelValue:e(t).tabvalores_capacidadecivil_id,"onUpdate:modelValue":l[6]||(l[6]=o=>e(t).tabvalores_capacidadecivil_id=o),items:e(U).capacidadeCivilItems,label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(F,{modelValue:e(t).cidade_natural_id,"onUpdate:modelValue":l[7]||(l[7]=o=>e(t).cidade_natural_id=o),items:e(U).cidadeNascimentoItems,label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(V,null,{default:s(()=>[a(d,{cols:"12",md:"4"},{default:s(()=>[B(a(n,{modelValue:e(t).cpf_pai,"onUpdate:modelValue":l[8]||(l[8]=o=>e(t).cpf_pai=o),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[_,"###.###.###-##"]])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(n,{modelValue:e(t).nome_pai,"onUpdate:modelValue":l[9]||(l[9]=o=>e(t).nome_pai=o),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),a(V,null,{default:s(()=>[a(d,{cols:"12",md:"4"},{default:s(()=>[B(a(n,{modelValue:e(t).cpf_mae,"onUpdate:modelValue":l[10]||(l[10]=o=>e(t).cpf_mae=o),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[_,"###.###.###-##"]])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(n,{modelValue:e(t).nome_mae,"onUpdate:modelValue":l[11]||(l[11]=o=>e(t).nome_mae=o),modelModifiers:{date:!0},"error-messages":e(r).nome_mae.$errors.map(o=>o.$message),label:"Nome da Mãe",required:"",onBlur:e(r).nome_mae.$touch,onInput:e(r).nome_mae.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1})]),_:1}),a(V,null,{default:s(()=>[g("div",null,[g("img",{class:"ml-5",style:{cursor:"pointer"},src:ne,alt:"Sair",onClick:M})]),g("div",null,[g("img",{style:{cursor:"pointer"},class:"ml-5",src:ue,onClick:l[12]||(l[12]=o=>Q())})])]),_:1})]),_:1})):R("",!0)]),_:1})]),_:1},8,["modelValue"])}}},Ve=""+new URL("ficha.DrpzE7Jr.png",import.meta.url).href,Be={__name:"FichaCard",props:{show:Boolean},emits:["close","confirmar"],setup(y,{emit:k}){const u=y,m=S(u.show),v=k;O(()=>u.show,f=>{m.value=f});const c=()=>{v("confirmar"),b()},b=()=>{m.value=!1,v("close")};return(f,p)=>(C(),$(j,{persistent:"",modelValue:e(m),"onUpdate:modelValue":p[0]||(p[0]=I=>T(m)?m.value=I:null),per:"","max-width":"700"},{default:s(()=>[a(z,null,{default:s(()=>[a(L,{class:"text-h5"},{default:s(()=>[w("Ficha de Firma")]),_:1}),a(ie,{src:Ve}),a(pe,null,{default:s(()=>[a(E,{style:{"background-color":"#429946",color:"white"},onClick:c},{default:s(()=>[w("Confirmar")]),_:1}),a(E,{style:{"background-color":"red",color:"white"},onClick:b},{default:s(()=>[w("Cancelar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{Ue as _,Be as a};
