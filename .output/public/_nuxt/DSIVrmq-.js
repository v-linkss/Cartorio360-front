import{_ as de}from"./C3ixPJ7o.js";import{_ as Q}from"./D2ConwMJ.js";import{_ as X}from"./BVz1G1IN.js";import{_ as Y}from"./BJ0Us1_p.js";import{_ as Z}from"./DRr-rN9S.js";import{_ as ee,a as te}from"./DJvq3mCv.js";import{m as oe,M as ae,u as ce,r as m,n as W,p as me,E as j,o as b,y as se,w as o,b as t,x as s,a as i,t as le,c as q,K as F,d as M,N as pe,G as P,A as ie,I as _e,V as G}from"./CHlHHlxb.js";import{u as O}from"./DiGbO6vD.js";import{V}from"./COpi7DG4.js";import{V as K}from"./CI_agH6j.js";import{V as k}from"./D-o3JtWt.js";import{V as H}from"./DtFNetnw.js";import{V as re}from"./umX24ndc.js";import{V as ve}from"./A8VMKCwF.js";import{V as fe,a as ye,b as ge,c as Ve}from"./DZI_GOnK.js";import{V as ne}from"./Dmwf4JxR.js";import{_ as ke,a as xe}from"./DyihqM2E.js";import{f as L}from"./CsOSC9BN.js";const he={style:{width:"800px","font-weight":"500"}},$e=["onClick"],be=["onClick"],Ce=["onClick"],we={key:0,style:{width:"30px",height:"30px"},src:ee,alt:"Reativar",title:"Reativar"},Te={key:1,src:te,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},et={__name:"Bens",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(I){let c,_;const p=I,C=oe(),w=ae(),v=ie(),{$toast:x}=ce(),S=`${v.public.managemant}/atos_bens`,f=`${v.public.managemant}/atos_bens`,h=`${v.public.managemant}/listarBens`,T=`${v.public.managemant}/listarTipoBens`,B=m(W("user-data").value.cartorio_token),U=m(W("user-data").value.usuario_id).value,$=m([]),d=m([]),y=m(!1),R=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"vlr_alienacao"},{align:"end",value:"actions"}],n=me({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),E=async()=>{if(!n.vlr_alienacao&&!n.descricao){x.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:r,status:e}=await O(`${S}`,{method:"POST",body:{descricao:n.descricao,tipo_id:n.tipo_id,valor_mercado:"0.00",vlr_alienacao:n.vlr_alienacao.replace(/,/g,""),user_id:U,ato_id:Number.parseInt(p.ato_id),token:w.query.ato_token_edit}},"$TVfAAEMyym");e.value==="success"&&(x.success("Bem registrado com sucesso!"),$.value.push(r.value),Object.assign(n,{vlr_alienacao:null,descricao:null,tipo_id:null}))},D=async r=>{const{status:e}=await O(`${f}/${r}`,{method:"PUT",body:{descricao:d.value.descricao,tipo_id:d.value.tipo_id,vlr_alienacao:d.value.vlr_alienacao.replace(/,/g,"")}},"$TRbOfiOtJ9");e.value==="success"&&(x.success("Bem Atualizado com sucesso!"),y.value=!1)},N=r=>{const e=$.value.find(g=>g.id===r);e&&(d.value=e,y.value=!0)},{data:u}=([c,_]=j(()=>O(`${T}`,{method:"POST",body:{cartorio_token:B.value,imoveis:!1}},"$rrOfkMLqML")),c=await c,_(),c);n.tiposBens=u.value;const{data:a}=([c,_]=j(()=>O(`${h}`,{method:"POST",body:{ato_token:p.ato_token}},"$qhjPuJWFwD")),c=await c,_(),c);$.value=a.value&&Object.keys(a.value).length===0?[]:a.value;async function A(r){r.excluido=!r.excluido;try{await O(`${f}/${r.id}`,{method:"PUT",body:JSON.stringify({excluido:r.excluido})},"$1s7uo0EeAe")}catch(e){console.error("Erro ao excluir pessoa:",e)}}const z=()=>{const r=w.query.origem||"criar",e=w.query.id;r==="atualizar"?C.push(`/os/atualizar/${e}`):C.push("/os/criar-registro")};return(r,e)=>{const g=de,ue=Q;return b(),se(ne,null,{default:o(()=>[t(V,{class:"mt-5",cols:"12"},{default:o(()=>[t(K,{label:"Descrição",modelValue:s(n).descricao,"onUpdate:modelValue":e[0]||(e[0]=l=>s(n).descricao=l)},null,8,["modelValue"])]),_:1}),t(k,{class:"ml-1 mb-3"},{default:o(()=>[t(V,{class:"mt-6",cols:"8"},{default:o(()=>[t(H,{label:"Selecione o Tipo",items:s(n).tiposBens,modelValue:s(n).tipo_id,"onUpdate:modelValue":e[1]||(e[1]=l=>s(n).tipo_id=l),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(V,{class:"ml-5",cols:"3"},{default:o(()=>[e[9]||(e[9]=i("label",null,"Valor",-1)),t(g,{modelValue:s(n).vlr_alienacao,"onUpdate:modelValue":e[2]||(e[2]=l=>s(n).vlr_alienacao=l)},null,8,["modelValue"])]),_:1}),i("div",null,[i("img",{class:"mt-7 ml-4",src:X,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:E})])]),_:1}),t(k,null,{default:o(()=>[t(V,null,{default:o(()=>[t(re,{style:{height:"465px"},headers:R,items:s($)},{"item.descricao":o(({item:l})=>[i("h3",he,le(l.descricao),1)]),"item.actions":o(({item:l})=>[t(k,{style:{"margin-top":"-8px"},justify:"end"},{default:o(()=>[i("div",{style:{cursor:"pointer"},class:"mr-2",onClick:J=>r.redirectToFicha(l),title:"Visualizar Ficha"},e[10]||(e[10]=[i("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Visualizar"},null,-1)]),8,$e),i("div",{style:{cursor:"pointer"},class:"mr-2",onClick:J=>N(l.id),title:"Alterar Papel"},e[11]||(e[11]=[i("img",{style:{width:"30px",height:"30px"},src:Z,alt:"Editar"},null,-1)]),8,be),i("div",{style:{cursor:"pointer"},class:"mr-2",onClick:J=>A(l),title:"Deletar Pessoa"},[l.excluido?(b(),q("img",we)):(b(),q("img",Te))],8,Ce)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),t(ve,{modelValue:s(y),"onUpdate:modelValue":e[8]||(e[8]=l=>F(y)?y.value=l:null),"max-width":"600px"},{default:o(()=>[t(fe,null,{default:o(()=>[t(ye,{style:{color:"green"}},{default:o(()=>e[12]||(e[12]=[M("Atualizar Bem")])),_:1}),t(ge,null,{default:o(()=>[t(V,{class:"mt-1",cols:"12"},{default:o(()=>[t(K,{label:"Descrição",modelValue:s(d).descricao,"onUpdate:modelValue":e[3]||(e[3]=l=>s(d).descricao=l)},null,8,["modelValue"])]),_:1}),t(k,null,{default:o(()=>[t(V,{class:"mt-6 ml-3",cols:"8"},{default:o(()=>[t(H,{label:"Selecione o Tipo",items:s(n).tiposBens,modelValue:s(d).tipo_id,"onUpdate:modelValue":e[4]||(e[4]=l=>s(d).tipo_id=l),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(V,{class:"ml-5",cols:"3"},{default:o(()=>[e[13]||(e[13]=i("label",null,"Valor",-1)),t(g,{modelValue:s(d).vlr_alienacao,"onUpdate:modelValue":e[5]||(e[5]=l=>s(d).vlr_alienacao=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(Ve,null,{default:o(()=>[t(pe),t(P,{color:"green",text:"",onClick:e[6]||(e[6]=l=>y.value=!1)},{default:o(()=>e[14]||(e[14]=[M("Cancelar")])),_:1}),t(P,{color:"green",text:"",onClick:e[7]||(e[7]=l=>D(s(d).id))},{default:o(()=>e[15]||(e[15]=[M("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(k,null,{default:o(()=>[t(ue,{onClick:z},{default:o(()=>[t(P,{size:"large",color:"red"},{default:o(()=>e[16]||(e[16]=[M("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Be={style:{width:"200px"}},Ae={style:{width:"300px"}},ze={style:{width:"800px","font-weight":"500"}},Oe=["onClick"],Me=["onClick"],Se=["onClick"],Ue={key:0,style:{width:"30px",height:"30px"},src:ee,alt:"Visualizar",title:"Reativar"},De={key:1,src:te,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},tt={__name:"Imoveis",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0},ato_token_selected:{type:String,required:!0}},async setup(I){let c,_;const p=I,C=ie(),w=`${C.public.auth}/service/gerencia/atos_bens`,v=`${C.public.auth}/service/gerencia/atos_imoveis`,x=oe(),S=ae(),f=m(""),h=m(""),T=m(!1),B=m(!1),U=m(null),$=[{title:"Matrícula",value:"registro_matricula"},{title:"Descrição",value:"descricao"},{value:"actions"}],{data:d,status:y}=([c,_]=j(()=>L(v,{method:"POST",body:{ato_token:p.ato_token}})),c=await c,_(),c),R=_e(()=>{if(Object.keys(d.value).length!==0)return d.value.filter(u=>{const a=u.matricula?u.matricula.toLowerCase():"",A=u.descricao?u.descricao.toLowerCase():"",z=a.includes(h.value.toLowerCase()),r=A.includes(f.value.toLowerCase());return z&&r})});async function n(u){u.excluido=!u.excluido;try{await L(`${w}/${u.id}`,{method:"PUT",body:{excluido:u.excluido}})}catch(a){console.error("Erro ao excluir pessoa:",a)}}function E(u){U.value=u,B.value=!0}const D=async()=>{await L(v,{method:"POST",body:{ato_token:p.ato_token}})},N=()=>{const u=S.query.origem||"criar",a=S.query.id;u==="atualizar"?x.push(`/os/atualizar/${a}`):x.push("/os/criar-registro")};return(u,a)=>{const A=Q,z=ke,r=xe;return b(),se(ne,{class:"mt-5"},{default:o(()=>[i("img",{onClick:a[0]||(a[0]=e=>T.value=!0),style:{cursor:"pointer"},src:X,alt:"Cadastro"}),t(k,{style:{gap:"3rem"}},{default:o(()=>[i("div",Be,[t(G,{class:"mt-7 mb-4",modelValue:s(h),"onUpdate:modelValue":a[1]||(a[1]=e=>F(h)?h.value=e:null),label:"Matrícula","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),i("div",Ae,[t(G,{class:"mt-7 mb-4",modelValue:s(f),"onUpdate:modelValue":a[2]||(a[2]=e=>F(f)?f.value=e:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),t(re,{density:"compact",headers:$,items:s(R),"item-key":"id"},{"item.descricao":o(({item:e})=>[i("h3",ze,le(e.descricao),1)]),"item.actions":o(({item:e})=>[t(k,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:o(()=>[i("div",{style:{cursor:"pointer"},onClick:g=>u.redirectToView(e.id),title:"Visualizar"},a[5]||(a[5]=[i("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Visualizar"},null,-1)]),8,Oe),i("div",{style:{cursor:"pointer"},onClick:g=>E(e.id),title:"Atualizar"},a[6]||(a[6]=[i("img",{style:{width:"30px",height:"30px"},src:Z,alt:"Atualizar"},null,-1)]),8,Me),i("div",{style:{cursor:"pointer"},onClick:g=>n(e),title:"Deletar"},[e.excluido?(b(),q("img",Ue)):(b(),q("img",De))],8,Se)]),_:2},1024)]),_:1},8,["items"]),t(A,{onClick:N},{default:o(()=>[t(P,{size:"large",color:"red"},{default:o(()=>a[7]||(a[7]=[M("Voltar")])),_:1})]),_:1}),t(z,{onRefresh:D,ato_id:p.ato_id,ato_token:p.ato_token,ato_token_selected:p.ato_token_selected,show:s(T),onClose:a[3]||(a[3]=e=>T.value=!1)},null,8,["ato_id","ato_token","ato_token_selected","show"]),t(r,{onRefresh:D,imovel_id:s(U),show:s(B),ato_token_selected:p.ato_token_selected,onClose:a[4]||(a[4]=e=>B.value=!1)},null,8,["imovel_id","show","ato_token_selected"])]),_:1})}}};export{et as _,tt as a};
