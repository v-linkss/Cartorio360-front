import{_ as pe,a as fe,b as ve,c as be,d as Ve,e as ge}from"./DJjzHovU.js";import{_ as ye}from"./CNyz2KlX.js";import{f as Ae,r as n,C as qe,J as Y,u as ke,s as h,y as we,H as $e,o as U,j as Q,w as o,b as e,V as j,i as t,v as W,d as m,l as X,e as ze,c as H,k as J,F as Pe,a as C,t as De,A as B,q as Te}from"./1sV7CVBy.js";import{f as P}from"./KeJy3t0G.js";import{u as xe}from"./kIL5RAz0.js";import{V as R}from"./5F2OPqJM.js";import{V as b}from"./DZsR0tSz.js";import{V as S}from"./D2FDyxxU.js";import{V as Z}from"./gdFJ_F4D.js";import{_ as Ce,a as Be,b as Ue}from"./Bm81zwtI.js";import{_ as he}from"./CpXcOK_0.js";import{_ as Re}from"./CDE-C2Q9.js";import{V as Se}from"./B2ugnZ62.js";import{a as Ee,V as _,b as Me,c as p}from"./C4GYoaZy.js";import"./DXyt5CBz.js";import"./CidAOQ82.js";import"./CEgw615s.js";import"./rVKbnn3K.js";import"./B0IxRygJ.js";import"./hcUls8M2.js";import"./jl68zULs.js";import"./DECs2SM6.js";import"./2DWstfZE.js";import"./C0nSFqyy.js";import"./BVz1G1IN.js";import"./DJvq3mCv.js";import"./S6UqtFZg.js";import"./BxtcdhEu.js";import"./CtEw_su1.js";import"./CGYC6V6S.js";import"./Cf-DPn2m.js";import"./xgFrUFfL.js";import"./BjCXXy6d.js";import"./DAR3HiME.js";import"./nUZ5Az7q.js";import"./-zgYk4Vu.js";import"./C9MnAxkU.js";import"./gj1eoFs2.js";import"./DH7Ko4fC.js";const Ne={__name:"SeparacaoDivorcio",props:{tabEvent:{type:Number,default:0}},async setup(K){let r,f;const y=X(),l=Ae({dt_casamento:null,tabvalores_regimecasamento_id:null,qtd_filhos_maiores:null,qtd_filhos_menores:null,responsavel_menores_id:null}),v=n([]),D=K,c=qe(),A=Y(),{$toast:E}=ke(),M=`${y.public.auth}/service/gerencia/getAtos/${A.query.ato_id}`,N=`${y.public.auth}/service/gerencia/regime_casamento`,F=`${y.public.auth}/service/gerencia/getAtosPessoaById/${A.query.ato_id}`,T=`${y.public.managemant}/updateAtos`,V=async()=>{const{data:i,status:s}=await P(M,{method:"GET"});i.value&&(l.dt_casamento=i.value[0].dt_casamento,l.tabvalores_regimecasamento_id=i.value[0].tabvalores_regimecasamento_id,l.qtd_filhos_maiores=i.value[0].qtd_filhos_maiores,l.qtd_filhos_menores=i.value[0].qtd_filhos_menores,l.responsavel_menores_id=i.value[0].responsavel_menores_id)},{data:q}=([r,f]=h(()=>P(N,{method:"GET"})),r=await r,f(),r),x=n([]),k=we(()=>{var i;return((i=x.value)==null?void 0:i.map(s=>{var $;return{id:s.pessoa_id,nome:(($=s.pessoa)==null?void 0:$.nome)||"Sem nome"}}))||[]});q.value&&(v.value=q.value);async function w(){const{data:i}=await P(F,{method:"GET"});i.value&&(x.value=i.value)}const I=()=>{const i=A.query.origem||"criar",s=A.query.id;switch(i){case"atualizar":case"vizualizar":c.push(`/os/atualizar/${s}`);break;case"atualizar-lista":case"vizualizar-lista":c.push("/atos/lista");break;default:c.push("/os/criar-registro");break}};async function O(){const{data:i,error:s,status:$}=await xe(`${T}/${A.query.ato_id}`,{method:"PUT",body:{dt_casamento:l.dt_casamento,tabvalores_regimecasamento_id:l.tabvalores_regimecasamento_id,qtd_filhos_maiores:l.qtd_filhos_maiores,qtd_filhos_menores:l.qtd_filhos_menores,responsavel_menores_id:l.responsavel_menores_id}},"$sJMejO9HYY");$.value==="success"&&E.success("Divórcio salvo com sucesso")}$e(()=>D.tabEvent,async()=>{await w()},{immediate:!0}),[r,f]=h(()=>V()),await r,f();const z=i=>{const s=["Backspace","Tab","ArrowLeft","ArrowRight","Delete"];!/[0-9]/.test(i.key)&&!s.includes(i.key)&&i.preventDefault()};return(i,s)=>{const $=ye;return U(),Q(Z,{class:"mt-5"},{default:o(()=>[e(R,{dense:""},{default:o(()=>[e(b,{cols:"12",sm:"4",md:"3"},{default:o(()=>[e(j,{modelValue:t(l).dt_casamento,"onUpdate:modelValue":s[0]||(s[0]=d=>t(l).dt_casamento=d),type:"date",label:"Data Casamento"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"4"},{default:o(()=>[e(S,{label:"Regime Bens",modelValue:t(l).tabvalores_regimecasamento_id,"onUpdate:modelValue":s[1]||(s[1]=d=>t(l).tabvalores_regimecasamento_id=d),items:t(v),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),e(b,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(j,{label:"Filhos Maiores",modelValue:t(l).qtd_filhos_maiores,"onUpdate:modelValue":s[2]||(s[2]=d=>t(l).qtd_filhos_maiores=d),modelModifiers:{number:!0},type:"number",min:"0",onKeydown:z},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(j,{label:"Filhos Menores",modelValue:t(l).qtd_filhos_menores,"onUpdate:modelValue":s[3]||(s[3]=d=>t(l).qtd_filhos_menores=d),type:"number",min:"0",onKeydown:z},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"4"},{default:o(()=>[e(S,{label:"Responsável",modelValue:t(l).responsavel_menores_id,"onUpdate:modelValue":s[4]||(s[4]=d=>t(l).responsavel_menores_id=d),items:t(k),"item-title":"nome","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(R,{class:"mt-5",justify:"start",align:"center"},{default:o(()=>[e(b,{cols:"auto"},{default:o(()=>[e($,{onClick:I},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>s[5]||(s[5]=[m("Voltar")])),_:1})]),_:1})]),_:1}),e(b,{cols:"auto"},{default:o(()=>[e(W,{class:"ml-2",onClick:O,size:"large",color:"green"},{default:o(()=>s[6]||(s[6]=[m("Salvar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Fe={class:"mb-10"},Ie={style:{color:"red","margin-left":"30px"}},Oe={key:0},To={__name:"[id]",async setup(K){let r,f;const y=n(null),l=n(null),v=n(null),D=X(),c=Y(),A=n(c.query.origem==="vizualizar"),E=`${D.public.auth}/service/gerencia/listarSituacoes`,M=`${D.public.auth}/service/gerencia/getAtos`,N=n(ze("user-data").value.cartorio_token),F=c.query.id?{ato_token:c.query.tipo_ato_token}:{cartorio_token:N},T=n([]),V=n([]),q=n(!1),x=c.query.tipo_ato||"",k=n(null),w=n(null),[I,O]=x.split(" - "),z=n(0);n(0),k.value=I||"",w.value=O||"";async function i(){try{const{data:u}=await P(`${M}/${c.query.ato_id}`,{method:"GET"});V.value=u.value}catch(u){console.error(u)}}[r,f]=h(()=>i()),await r,f();const{data:s,status:$}=([r,f]=h(()=>P(E,{method:"POST",body:F})),r=await r,f(),r);T.value=s.value;const d=u=>{y.value=u},ee=u=>{l.value=u};function oe(){V.dt_lavratura||(q.value=!0)}function ae(u){u==="divorcio"&&z.value++}function te(){z.value++}function se({descricao:u,usaImoveisParams:a}){const[L,G]=u.split(" - ");k.value=L||"",w.value=G||""}return(u,a)=>{const L=pe,G=fe,le=Ne,ie=Ce,ne=Be,re=ve,ue=be,me=Ve,de=ge,ce=Ue,_e=he;return U(),H(Pe,null,[e(Z,null,{default:o(()=>[C("div",Fe,[e(R,{class:"mb-5 mt-5"},{default:o(()=>[a[5]||(a[5]=C("h1",null,"Ordem de Serviço nº",-1)),C("h1",Ie,De(t(c).query.numero_os),1)]),_:1}),e(R,null,{default:o(()=>[e(b,{md:"6"},{default:o(()=>[e(S,{label:"Serviço",class:"mr-5",modelValue:t(k),"onUpdate:modelValue":a[0]||(a[0]=g=>B(k)?k.value=g:null),disabled:""},null,8,["modelValue"])]),_:1}),e(b,{md:"5"},{default:o(()=>[e(S,{modelValue:t(w),"onUpdate:modelValue":a[1]||(a[1]=g=>B(w)?w.value=g:null),label:"Tipo de Ato",disabled:""},null,8,["modelValue"])]),_:1}),t(A)?J("",!0):(U(),H("div",Oe,[C("img",{class:"mt-2",style:Te({cursor:t(V).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:Re,alt:"Editar",onClick:oe},null,4)]))]),_:1})]),e(Se,{width:"1300"},{default:o(()=>[e(Ee,{modelValue:t(v),"onUpdate:modelValue":a[2]||(a[2]=g=>B(v)?v.value=g:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(_,{value:"dados"},{default:o(()=>a[6]||(a[6]=[m("Dados")])),_:1}),e(_,{value:"partes"},{default:o(()=>a[7]||(a[7]=[m("Partes")])),_:1}),e(_,{value:"bens"},{default:o(()=>a[8]||(a[8]=[m("Bens")])),_:1}),e(_,{value:"imoveis"},{default:o(()=>a[9]||(a[9]=[m("Imoveis")])),_:1}),e(_,{onClick:te,value:"divorcio"},{default:o(()=>a[10]||(a[10]=[m("Matrimônio")])),_:1}),e(_,{value:"minuta"},{default:o(()=>a[11]||(a[11]=[m("Minuta")])),_:1}),e(_,{value:"livro"},{default:o(()=>a[12]||(a[12]=[m("Livro")])),_:1}),e(_,{value:"observacao"},{default:o(()=>a[13]||(a[13]=[m("Observações")])),_:1}),e(_,{value:"anexo"},{default:o(()=>a[14]||(a[14]=[m("Anexos")])),_:1}),e(_,{value:"outros"},{default:o(()=>a[15]||(a[15]=[m("Outros")])),_:1})]),_:1},8,["modelValue"]),e(Me,{modelValue:t(v),"onUpdate:modelValue":[a[3]||(a[3]=g=>B(v)?v.value=g:null),ae]},{default:o(()=>[e(p,{value:"dados"},{default:o(()=>[e(L,{item_dados:t(V),item_situacoes:t(T)},null,8,["item_dados","item_situacoes"])]),_:1}),e(p,{value:"partes"},{default:o(()=>[e(G)]),_:1}),e(p,{value:"divorcio"},{default:o(()=>[e(le,{"tab-event":t(z)},null,8,["tab-event"])]),_:1}),e(p,{value:"bens"},{default:o(()=>[e(ie)]),_:1}),e(p,{value:"imoveis"},{default:o(()=>[e(ne)]),_:1}),e(p,{value:"minuta"},{default:o(()=>[e(re,{onPage:d,onDoc:ee})]),_:1}),e(p,{value:"livro"},{default:o(()=>[e(ue,{pages:t(y),document:t(l)},null,8,["pages","document"])]),_:1}),e(p,{value:"observacao"},{default:o(()=>[e(me)]),_:1}),e(p,{value:"anexo"},{default:o(()=>[e(de)]),_:1}),e(p,{value:"outros"},{default:o(()=>[e(ce)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(q)?(U(),Q(_e,{key:0,show:t(q),servicos:t(V).servicos||[],tiposAtos:t(V).tiposAtos||[],onClose:a[4]||(a[4]=g=>q.value=!1),onUpdateAto:se},null,8,["show","servicos","tiposAtos"])):J("",!0)],64)}}};export{To as default};
