import{_ as W}from"./DjbW8UzK.js";import{_ as K}from"./BB5g5H0c.js";import{_ as Q}from"./BVz1G1IN.js";import{_ as Y,a as Z}from"./DJvq3mCv.js";import{c as J,r as L,u as G}from"./Yj1LSECv.js";import{m as H,M as X,u as tt,r as c,n as h,p as ot,E as $,v as et,o as l,x as f,w as a,b as o,z as at,V as q,a as y,D as V,c as b,F as st,d as rt,y as it}from"./D2uGBfno.js";import{u as m}from"./DqOM1bED.js";import{V as _}from"./CRVYtyGn.js";import{V as n}from"./CpiuKkFR.js";import{V as lt}from"./XGU8fkCI.js";import{V as ut}from"./Dm-E1S2y.js";import{V as nt}from"./CXo5kPoz.js";const dt=["onClick"],ct={key:0,style:{width:"30px",height:"30px"},src:Y,alt:"Visualizar",title:"Reativar"},mt={key:1,src:Z,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},$t={__name:"Outros",props:{ato_id:{type:Number,required:!0},ato_token:{type:String,required:!0}},async setup(C){let i,d;const g=C,x=H(),p=X(),u=it(),{$toast:T}=tt(),z=`${u.public.managemant}/outros_tj`,N=`${u.public.managemant}/outros`,j=`${u.public.managemant}/atos_outros`,D=`${u.public.managemant}/atos_outros`;`${u.public.managemant}`;const A=c(h("user-data").value.cartorio_token),v=c(p.query.origem==="vizualizar"),k=c([]),w=c([]),E=[{title:"Id",align:"start",key:"id"},{title:"Descrição",align:"start",key:"descricao"},{title:"Quantidade",align:"start",key:"quantidade"},{title:"Valor Unitario",align:"start",key:"valor_unitario"},{value:"actions"}],e=ot({observacao:null,outros_tj_id:null,quantidade:1,valor_unitario:null}),U={observacao:{required:J.withMessage("O campo é obrigatório",L)}};G(U,e);async function B(){const{error:s,status:t}=await m(j,{method:"POST",body:{ato_id:Number(g.ato_id),observacao:e.observacao,valor_unitario:e.valor_unitario.replace(/,/g,""),outros_tj_id:e.outros_tj_id,quantidade:e.quantidade,user_id:h("user-data").value.usuario_id}},"$dM20KOZmKZ");t.value==="success"&&(T.success("Outro Ato registrado com sucesso"),await O())}async function I(s){s.excluido=!s.excluido;try{await m(`${D}/${s.id}`,{method:"PUT",body:JSON.stringify({excluido:s.excluido})},"$AOYgWW9EtV")}catch(t){console.error("Erro ao excluir observação:",t)}}async function O(){const{data:s}=await m(N,{method:"POST",body:{ato_token:g.ato_token}},"$Ds0arNsgwW");k.value=s.value||[]}const{data:S}=([i,d]=$(()=>m(z,{method:"POST",body:{cartorio_token:A}},"$wwMEIxY4Vy")),i=await i,d(),i);w.value=S.value,[i,d]=$(()=>O()),await i,d();const M=()=>{const s=p.query.origem||"criar",t=p.query.id;s==="atualizar"||s==="vizualizar"?x.push(`/os/atualizar/${t}`):x.push("/os/criar-registro")};return(s,t)=>{const P=W,R=K,F=et("mask");return l(),f(nt,null,{default:a(()=>[v.value?V("",!0):(l(),f(_,{key:0},{default:a(()=>[o(n,{cols:"5",class:"mt-6"},{default:a(()=>[o(lt,{label:"Outros Atos",items:w.value,"item-title":"descricao","item-value":"id",modelValue:e.outros_tj_id,"onUpdate:modelValue":t[0]||(t[0]=r=>e.outros_tj_id=r)},null,8,["items","modelValue"])]),_:1}),o(n,{cols:"2",class:"mt-6"},{default:a(()=>[at(o(q,{label:"QTD",type:"number",modelValue:e.quantidade,"onUpdate:modelValue":t[1]||(t[1]=r=>e.quantidade=r)},null,8,["modelValue"]),[[F,"###"]])]),_:1}),o(n,{cols:"2"},{default:a(()=>[t[4]||(t[4]=y("label",{for:""},"Valor unitario",-1)),o(P,{modelValue:e.valor_unitario,"onUpdate:modelValue":t[2]||(t[2]=r=>e.valor_unitario=r)},null,8,["modelValue"])]),_:1}),y("div",null,[y("img",{class:"btn-pointer ml-2 mt-7",src:Q,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:B})])]),_:1})),v.value?V("",!0):(l(),f(_,{key:1},{default:a(()=>[o(n,{cols:"9"},{default:a(()=>[o(q,{label:"Observação",modelValue:e.observacao,"onUpdate:modelValue":t[3]||(t[3]=r=>e.observacao=r)},null,8,["modelValue"])]),_:1})]),_:1})),o(_,null,{default:a(()=>[o(n,null,{default:a(()=>[o(ut,{style:{height:"465px"},headers:E,items:k.value},{"item.actions":a(({item:r})=>[v.value?V("",!0):(l(),b("div",{key:0,style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:_t=>I(r),title:"Deletar Observação"},[r.excluido?(l(),b("img",ct)):(l(),b("img",mt))],8,dt))]),_:1},8,["items"])]),_:1})]),_:1}),o(_,null,{default:a(()=>[o(R,{onClick:M},{default:a(()=>[o(st,{size:"large",color:"red"},{default:a(()=>t[5]||(t[5]=[rt("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}};export{$t as _};
