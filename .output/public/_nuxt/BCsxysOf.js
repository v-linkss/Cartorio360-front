import{_ as L}from"./B26EIqVp.js";import{a as M,b as P,c as z,d as D,V as U}from"./D7C_21ub.js";import{r as l,h as K,o as w,A as B,w as a,b as o,d as C,c as A,t as X,y as j,q as t,v as G,_ as J,u as Q,E as W,D as h,F as H,G as Y,x as Z,a as f,s as ee,p as te,e as oe}from"./B4R4xszC.js";import{u as y}from"./BO9KJqfJ.js";import{_ as ae}from"./ToPptOUL.js";import{V as se,_ as re}from"./BcwThovZ.js";import{c as ne,r as ue,u as le}from"./Btph6qmb.js";import{V as ie}from"./Ck4hAWg2.js";import{V as ce}from"./B4Mbh1jH.js";const de={key:0},me={key:1},_e={__name:"ErrorModalCard",props:{show:Boolean,errorMessage:String},emits:["close"],setup(s,{emit:i}){const m=s,r=l(m.show),k=i;K(()=>m.show,V=>{r.value=V});const _=()=>{r.value=!1,k("close")};return(V,c)=>(w(),B(U,{persistent:"",modelValue:t(r),"onUpdate:modelValue":c[0]||(c[0]=b=>G(r)?r.value=b:null),per:"","max-width":"500"},{default:a(()=>[o(M,null,{default:a(()=>[o(P,{class:"text-h5"},{default:a(()=>[C("Erro na Requisição")]),_:1}),o(z,null,{default:a(()=>[s.errorMessage?(w(),A("div",de,X(s.errorMessage),1)):(w(),A("div",me,"Ocorreu um erro inesperado."))]),_:1}),o(D,null,{default:a(()=>[o(j,{style:{"background-color":"#429946",color:"white"},onClick:_},{default:a(()=>[C("OK")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},pe=s=>(te("data-v-9c011fc2"),s=s(),oe(),s),ve={style:{width:"600px","margin-top":"10px"}},fe={style:{width:"180px","margin-top":"20px"}},ke=pe(()=>f("img",{class:"btn-pointer mt-10 mb-5",src:ae,alt:"Sair"},null,-1)),Ve={__name:"autenticacao",async setup(s){let i,m;const r=Q(),k=W(),_=Z(),V=`${_.public.managemant}/listarEscrevente`,c=l(h("user-data").value.cartorio_token).value,b=l(h("user-service").value.token).value||l(h("user-service").value).value,S=h("auth_token").value,E=`${_.public.managemant}/atoAutentica`,I=`${_.public.managemant}/etiquetaAutentica`,x=l(!1),$=l(""),u=H({escrevente:null,quantidade:1}),q=l([]),{data:O}=([i,m]=Y(()=>y(V,{method:"POST",body:{cartorio_token:c}},"$nXL9eJBhI7")),i=await i,m(),i);q.value=O.value[0].func_json_escreventes;const T={escrevente:{required:ne.withMessage("O campo é obrigatorio",ue)}},g=le(T,u),R=async()=>{if(await g.value.$validate()){const{data:n,status:e,error:p}=await y(E,{method:"POST",body:{usuario_token:S,cartorio_token:c,quantidade:Number(u.quantidade),ordemserv_token:b,ato_tipo_token:"bFsdV"}},"$dpfLzAlO85");e.value==="success"&&n.value.status==="OK"?N(n.value.token):(x.value=!0,$.value=n.value.status_mensagem||p.value.data.details)}},N=async n=>{const{data:e,status:p}=await y(I,{method:"POST",body:{escrevente_token:u.escrevente,cartorio_token:c,ato_token:n}},"$fPnSl9XMLA");if(p.value==="success"){const v=window.open("","_blank");v.document.open(),v.document.write(e.value.etiqueta),v.document.close()}},F=()=>{const n=k.query.origem||"criar",e=k.query.id;n==="atualizar"?r.push(`/ordens-servicos/atualizar/${e}`):r.push("/ordens-servicos/criar-registro")};return(n,e)=>{const p=L,v=_e;return w(),B(M,{class:"mt-10",title:"Autenticação"},{default:a(()=>[o(ce,null,{default:a(()=>[f("div",ve,[o(se,{label:"Tabelião/escrivão",modelValue:t(u).escrevente,"onUpdate:modelValue":e[0]||(e[0]=d=>t(u).escrevente=d),items:t(q),"item-title":"nome","item-value":"token",required:"","error-messages":t(g).escrevente.$errors.map(d=>d.$message),onBlur:t(g).escrevente.$touch,onInput:t(g).escrevente.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),f("div",fe,[o(ee,{type:"number",label:"Quantidade",modelValue:t(u).quantidade,"onUpdate:modelValue":e[1]||(e[1]=d=>t(u).quantidade=d)},null,8,["modelValue"])]),o(ie,null,{default:a(()=>[f("div",null,[o(p,{onClick:F},{default:a(()=>[ke]),_:1})]),f("img",{class:"btn-pointer mt-10",src:re,onClick:R})]),_:1})]),_:1}),o(v,{show:t(x),errorMessage:t($),onClose:e[2]||(e[2]=d=>x.value=!1)},null,8,["show","errorMessage"])]),_:1})}}},Ae=J(Ve,[["__scopeId","data-v-9c011fc2"]]);export{Ae as default};
