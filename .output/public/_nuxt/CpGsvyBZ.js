import{_ as L}from"./B7QldEpv.js";import{_ as q}from"./B53VSgPY.js";import{_ as G}from"./BVz1G1IN.js";import{_ as N}from"./CcJiivin.js";import{_ as I}from"./CIoCaKyP.js";import{_ as W}from"./DDW4i_2P.js";import{_ as X,a as H}from"./DJvq3mCv.js";import{r as a,D as K,B as Q,h as m,w as n,k as Y,o as l,b as r,a as i,s as g,i as s,j as w,N as Z,d as ee,t as te,c as _,p as b,e as C}from"./BhgTmegS.js";import{f as P}from"./DNE-4qjk.js";import{u as oe}from"./DYuPSs8K.js";import{V as se}from"./C7YQzpYh.js";import{V as F}from"./pKYlzCyR.js";import{V as ae}from"./DLfaHWxR.js";import"./DcVgSMIA.js";import"./Bf-9yseb.js";import"./DKrkSrzu.js";import"./UDNNvlic.js";import"./D4BzWD0g.js";import"./BXmdzU3V.js";import"./icIJ6WSX.js";import"./DkPnCiyC.js";import"./CmttJgeJ.js";import"./BSV5nnzr.js";import"./xF2-nV_b.js";const ie={style:{width:"200px"}},le={style:{width:"150px"}},ne={style:{width:"300px"}},re=["onClick"],ue={key:0,style:{width:"30px",height:"30px"},src:N,alt:"Visualizar",title:"Possui Ficha"},ce={key:1,style:{width:"30px",height:"30px"},src:I,alt:"Visualizar",title:"N達o Ficha"},de=["onClick"],pe=["onClick"],me={key:0,style:{width:"30px",height:"30px"},src:X,alt:"Visualizar",title:"Reativar"},he={key:1,src:H,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Se={__name:"index",setup(ve){const f=Y(),z=`${f.public.auth}/service/gerencia/pesquisarPessoas`,D=`${f.public.auth}/service/gerencia/updatePessoa`,T=`${f.public.managemant}/download`,h=a(!1),v=a(!1),y=a([]),j=a(null),u=a(!1),V=a([]),x=a({}),E=K(),c=a(null),d=a(null),p=a(null),R=[{title:"Documento",value:"doc_identificacao",width:"190px"},{title:"Cart達o",value:"numero_ficha"},{title:"Nome/Raz達o Social",value:"nome",width:"400px"},{value:"actions"}],U=async()=>{u.value=!0;const{data:o,status:e}=await P(`${z}`,{method:"POST",body:{cartorio_token:C("user-data").value.cartorio_token,nome:c.value?c.value:null,documento:d.value?d.value.replace(/\D/g,""):null,numero_ficha:Number(p.value)?Number(p.value):null}});e.value==="success"&&(u.value=!1,V.value=o.value)};function M(o){if(!o)return"";const e=o.replace(/\D/g,"");return e.length===11?e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):e.length===14?e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):o}const B=async(o,e)=>{u.value=!0;const{data:k}=await oe(T,{method:"POST",body:{bucket:C("user-data").value.cartorio_token,path:o}},"$Jxa9V4cJXG");y.value=k.value,j.value=o,x.value=e,u.value=!1,console.log("Normal"),h.value=!0};async function O(o){o.excluido=!o.excluido;try{await P(`${D}/${o.id}`,{method:"PUT",body:{excluido:o.excluido}})}catch(e){console.error("Erro ao excluir pessoa:",e)}}function S(o){E.push({path:`/pessoas/atualizar/${o}`})}return(o,e)=>{const k=L,A=q,J=Q("ModalFichaEspecial");return l(),m(se,{class:"mt-5"},{default:n(()=>[r(k,{to:"/pessoas/cadastro"},{default:n(()=>e[6]||(e[6]=[i("img",{style:{cursor:"pointer"},src:G,alt:"Cadastro"},null,-1)])),_:1}),r(F,{style:{gap:"1rem"}},{default:n(()=>[i("div",ie,[r(g,{class:"mt-7 mb-4",modelValue:s(d),"onUpdate:modelValue":e[0]||(e[0]=t=>w(d)?d.value=t:null),label:"Documento","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),i("div",le,[r(g,{class:"mt-7 mb-4",modelValue:s(p),"onUpdate:modelValue":e[1]||(e[1]=t=>w(p)?p.value=t:null),label:"Cart達o","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),i("div",ne,[r(g,{class:"mt-7 mb-4",modelValue:s(c),"onUpdate:modelValue":e[2]||(e[2]=t=>w(c)?c.value=t:null),label:"Pessoa","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),i("div",{style:{cursor:"pointer"},onClick:e[3]||(e[3]=t=>U()),title:"Visualizar",class:"mt-7"},e[7]||(e[7]=[i("img",{style:{width:"40px",height:"40px"},src:N,alt:"Visualizar",title:"Possui Ficha"},null,-1)]))]),_:1}),s(u)?(l(),m(Z,{key:0,class:"loading-spinner",indeterminate:"",size:"80"})):(l(),m(ae,{key:1,density:"compact",headers:R,items:s(V),"item-key":"id","items-per-page-options":[10,25,50]},{"item.doc_identificacao":n(({item:t})=>[ee(te(M(t.documento)),1)]),"item.actions":n(({item:t})=>[r(F,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:n(()=>[i("div",{style:{cursor:"pointer"},onClick:$=>B(t.link_ficha,t),title:"Visualizar"},[t.link_ficha?(l(),_("img",ue)):(l(),_("img",ce))],8,re),i("div",{style:{cursor:"pointer"},onClick:$=>S(t.id),title:"Atualizar"},e[8]||(e[8]=[i("img",{style:{width:"30px",height:"30px"},src:W,alt:"Atualizar"},null,-1)]),8,de),i("div",{style:{cursor:"pointer"},onClick:$=>O(t),title:"Deletar"},[t.excluido?(l(),_("img",me)):(l(),_("img",he))],8,pe)]),_:2},1024)]),_:1},8,["items"])),s(h)&&!s(v)?(l(),m(A,{key:2,show:s(h),"link-view":s(y),"is-view":!0,"pessoa-obj":s(x),onClose:e[4]||(e[4]=t=>h.value=!1)},null,8,["show","link-view","pessoa-obj"])):b("",!0),s(v)?(l(),m(J,{key:3,show:s(v),"link-view":s(y),"is-view":!0,"pessoa-obj":s(x),onClose:e[5]||(e[5]=t=>v.value=!1)},null,8,["show","link-view","pessoa-obj"])):b("",!0)]),_:1})}}};export{Se as default};
