import{_ as j}from"./C2oRWBkT.js";import{_ as Q,a as W,b as ee}from"./CyfvV-Hp.js";import{n as te,E as ae,u as oe,r as u,D as f,G as se,H as B,o as c,A as $,w as r,x as re,I as ne,b as o,a as n,t as le,q as t,J as ie,s as b,K as ue,L as de,M as ce,c as I,y as pe,d as me}from"./B1ceMl_k.js";import{a as w}from"./CR_l0CRY.js";import{_ as _e,a as fe}from"./HBU26js5.js";import{_ as ve,a as ge}from"./yVS__Lf8.js";import{c as S,r as U,u as he}from"./DkxEwzKo.js";import{V as ke}from"./DWJtBTZv.js";import{V as v}from"./DM0BJOFo.js";import{V as g}from"./q3n8k4Q6.js";import{V as xe}from"./CqeXpXIv.js";import"./s6FWyneT.js";import"./VnN2aYpq.js";const ye=n("h1",null,"Ordem de Serviço nº",-1),Ve={style:{color:"red","margin-left":"30px"}},$e=n("h1",{class:"ml-5"},"Atos",-1),be=n("img",{style:{width:"45px",height:"45px",cursor:"pointer"},src:_e,alt:"novo"},null,-1),we=["onClick"],Ce=n("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:ee,alt:"Reimprimir"},null,-1),Oe=[Ce],Re=["onClick","title"],Ee=["disabled","onClick"],Be={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:ge,alt:"Visualizar",title:"Reativar"},Ie={key:1,src:fe,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},He={__name:"[id]",async setup(Se){let i,p;const{$toast:C}=te(),A=ae(),{id:h}=A.params,T=oe(),k=re(),q=`${k.public.managemant}/updateOrdensServico`,D=`${k.public.managemant}/getOrdensServicoById`,N=`${k.public.managemant}/listarAtos`,P=u(f("user-data").value.cartorio_id),z=u(f("user-data").value.usuario_id),F=u(f("user-service").value.token).value||null,M=u(f("user-data").value.cartorio_token).value,x=u([]),y=u(!1),O=u(null),V=u(null),a=se({nacionalidade:"brasileiro",apresentante_nome:null,apresentante_cpf:null,documento:null}),G=[{title:"Protocolo",value:"protocolo"},{title:"Usuario",value:"usuario_nome"},{title:"Situação",value:"situacao"},{title:"Valor",value:"valor"},{title:"Tipo",value:"tipo"},{value:"actions"}],L=[{title:"BRASILEIRO",value:!1},{title:"ESTRANGEIRO",value:!0}],K={apresentante_nome:{required:S.withMessage("O campo é obrigatorio",U)},apresentante_cpf:{required:S.withMessage("O campo é obrigatorio",U)}},d=he(K,a);function H(l){if(l)return l.replace(/[.\-]/g,"");l=null}const J=l=>{O.value=l,y.value=!0};async function X(){const l={apresentante_cpf:H(a.apresentante_cpf),apresentante_nome:a.apresentante_nome,user_id:z.value,cartorio_id:P.value},{error:s,status:_}=await w(`${q}/${h}`,{method:"PUT",body:l},"$Fud06ay483");_.value==="error"&&s.value.statusCode===500?C.error("Erro ao cadastrar ordem,erro no sistema."):(C.success("Ordem Atualizada com sucesso!"),T.push({path:"/os/lista"}))}const{data:m}=([i,p]=B(()=>w(`${D}/${h}`,{method:"GET"},"$wPUkUpDvPf")),i=await i,p(),i);V.value=m.value.numero,a.nacionalidade=m.value.estrangeiro,a.apresentante_cpf=m.value.apresentante_cpf,a.apresentante_nome=m.value.apresentante_nome;const{data:R}=([i,p]=B(()=>w(N,{method:"POST",body:{cartorio_token:M,ordemserv_token:F}},"$YXZ55K3IUf")),i=await i,p(),i);return R.value.length>0?x.value=R.value:x.value=[],(l,s)=>{const _=j,Y=W,Z=ne("mask");return c(),$(ke,{class:"mt-5"},{default:r(()=>[o(v,{class:"mb-5"},{default:r(()=>[ye,n("h1",Ve,le(t(V)),1)]),_:1}),o(v,null,{default:r(()=>[o(g,{md:"3"},{default:r(()=>[o(xe,{label:"Nacionalidade",items:L,modelValue:t(a).nacionalidade,"onUpdate:modelValue":s[0]||(s[0]=e=>t(a).nacionalidade=e)},null,8,["modelValue"])]),_:1}),o(g,{md:"2"},{default:r(()=>[t(a).nacionalidade==="brasileiro"?ie((c(),$(b,{key:0,autofocus:"",modelValue:t(a).apresentante_cpf,"onUpdate:modelValue":s[1]||(s[1]=e=>t(a).apresentante_cpf=e),label:"CPF",required:"","error-messages":t(d).apresentante_cpf.$errors.map(e=>e.$message),onBlur:t(d).apresentante_cpf.$touch,onInput:t(d).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])),[[Z,"###.###.###-##"]]):(c(),$(b,{key:1,autofocus:"",modelValue:t(a).apresentante_cpf,"onUpdate:modelValue":s[2]||(s[2]=e=>t(a).apresentante_cpf=e),label:"Documento",required:"","error-messages":t(d).apresentante_cpf.$errors.map(e=>e.$message),onBlur:t(d).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur"]))]),_:1}),o(g,{md:"4"},{default:r(()=>[o(b,{modelValue:t(a).apresentante_nome,"onUpdate:modelValue":s[3]||(s[3]=e=>t(a).apresentante_nome=e),label:"Nome Apresentante",required:"","error-messages":t(d).apresentante_nome.$errors.map(e=>e.$message),onInput:t(d).apresentante_nome.$touch},null,8,["modelValue","error-messages","onInput"])]),_:1}),o(g,null,{default:r(()=>[n("div",null,[n("img",{style:{width:"40px",height:"40px",cursor:"pointer"},src:Q,alt:"Salvar",onClick:s[4]||(s[4]=e=>X())})])]),_:1})]),_:1}),o(v,{style:{display:"flex","margin-bottom":"10px",gap:"2rem"}},{default:r(()=>[$e,o(_,{to:{path:"/os/criar-ato",query:{origem:"atualizar",id:t(h),numeroOs:t(V)}}},{default:r(()=>[be]),_:1},8,["to"]),o(ue,{headers:G,items:t(x),"item-key":"id"},{"item.actions":r(({item:e})=>[o(v,{style:{display:"flex",gap:"10px","margin-top":"-5px"}},{default:r(()=>[n("div",{onClick:E=>J(e.token),title:"Reimprimir"},Oe,8,we),n("div",{class:ce({disabled:!e.btn_editar}),onClick:E=>e.btn_editar?l.redirectToUpdate(e.id):null,title:e.btn_editar?"Editar":"Desabilitado"},[n("img",{style:de({cursor:e.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:ve,alt:"Editar"},null,4)],10,Re),n("div",{disabled:!e.btn_cancelar,onClick:E=>e.btn_cancelar?l.deleteEndereco(e):null,title:"Excluir"},[e.excluido?(c(),I("img",Be)):(c(),I("img",Ie))],8,Ee)]),_:2},1024)]),_:1},8,["items"]),o(Y,{show:t(y),ato_token:t(O),onClose:s[5]||(s[5]=e=>y.value=!1)},null,8,["show","ato_token"])]),_:1}),o(_,{to:"/os/lista"},{default:r(()=>[o(pe,{size:"large",color:"red"},{default:r(()=>[me("Voltar")]),_:1})]),_:1})]),_:1})}}};export{He as default};
