import{_ as I}from"./BUkSts9r.js";import{p as M,r as n,m as P,P as S,u as K,E as v,I as L,x as s,o as j,y as W,w as t,b as o,V as g,G as A,d as $,z as X,A as H}from"./Dwmx49sP.js";import{f as b}from"./Bx2d0s9s.js";import{u as J}from"./7OQ8YMcS.js";import{V as x}from"./CDgzV2MF.js";import{V as m}from"./Ci61N74R.js";import{V as z}from"./Crwv9GZb.js";import{V as O}from"./DRz5s4Xk.js";const le={__name:"SeparacaoDivorcio",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(B){let l,u;const p=B,_=H(),a=M({dt_casamento:null,tabvalores_regimecasamento_id:null,qtd_filhos_maiores:null,qtd_filhos_menores:null,responsavel_menores_id:null}),V=n([]),f=P(),h=S(),{$toast:N}=K(),R=`${_.public.auth}/service/gerencia/getAtos/${p.ato_id}`,C=`${_.public.auth}/service/gerencia/regime_casamento`,T=`${_.public.auth}/service/gerencia/getAtosPessoaById/${p.ato_id}`,D=`${_.public.managemant}/updateAtos`;n(""),n(""),n(!1),n(!1),n(null);const{data:d,status:F}=([l,u]=v(()=>b(R,{method:"GET"})),l=await l,u(),l),{data:q}=([l,u]=v(()=>b(C,{method:"GET"})),l=await l,u(),l),{data:y}=([l,u]=v(()=>b(T,{method:"GET"})),l=await l,u(),l),k=n([]),U=L(()=>{var r;return((r=k.value)==null?void 0:r.map(e=>{var c;return{id:e.id,nome:((c=e.pessoa)==null?void 0:c.nome)||"Sem nome"}}))||[]});d.value&&(a.dt_casamento=d.value.dt_casamento,a.tabvalores_regimecasamento_id=d.value.tabvalores_regimecasamento_id,a.qtd_filhos_maiores=d.value.qtd_filhos_maiores,a.qtd_filhos_menores=d.value.qtd_filhos_menores,a.responsavel_menores_id=d.value.responsavel_menores_id),q.value&&(V.value=q.value),y.value&&(k.value=y.value);const E=()=>{const r=h.query.origem||"criar",e=h.query.id;switch(r){case"atualizar":case"vizualizar":f.push(`/os/atualizar/${e}`);break;case"atualizar-lista":case"vizualizar-lista":f.push("/atos/lista");break;default:f.push("/os/criar-registro");break}};async function G(){const{data:r,error:e,status:c}=await J(`${D}/${Number.parseInt(p.ato_id)}`,{method:"PUT",body:{dt_casamento:a.dt_casamento,tabvalores_regimecasamento_id:a.tabvalores_regimecasamento_id,qtd_filhos_maiores:a.qtd_filhos_maiores,qtd_filhos_menores:a.qtd_filhos_menores,responsavel_menores_id:a.responsavel_menores_id}},"$2MFTkguIXN");c.value==="success"&&N.success("Divórcio salvo com sucesso")}const w=r=>{const e=["Backspace","Tab","ArrowLeft","ArrowRight","Delete"];!/[0-9]/.test(r.key)&&!e.includes(r.key)&&r.preventDefault()};return(r,e)=>{const c=I;return s(F)==="success"?(j(),W(O,{key:0,class:"mt-5"},{default:t(()=>[o(x,{dense:""},{default:t(()=>[o(m,{cols:"12",sm:"4",md:"3"},{default:t(()=>[o(g,{modelValue:s(a).dt_casamento,"onUpdate:modelValue":e[0]||(e[0]=i=>s(a).dt_casamento=i),type:"date",label:"Data Casamento"},null,8,["modelValue"])]),_:1}),o(m,{cols:"12",sm:"6",md:"4"},{default:t(()=>[o(z,{label:"Regime Bens",modelValue:s(a).tabvalores_regimecasamento_id,"onUpdate:modelValue":e[1]||(e[1]=i=>s(a).tabvalores_regimecasamento_id=i),items:s(V),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),o(m,{cols:"12",sm:"6",md:"3"},{default:t(()=>[o(g,{label:"Filhos Maiores",modelValue:s(a).qtd_filhos_maiores,"onUpdate:modelValue":e[2]||(e[2]=i=>s(a).qtd_filhos_maiores=i),modelModifiers:{number:!0},type:"number",min:"0",onKeydown:w},null,8,["modelValue"])]),_:1}),o(m,{cols:"12",sm:"6",md:"3"},{default:t(()=>[o(g,{label:"Filhos Menores",modelValue:s(a).qtd_filhos_menores,"onUpdate:modelValue":e[3]||(e[3]=i=>s(a).qtd_filhos_menores=i),type:"number",min:"0",onKeydown:w},null,8,["modelValue"])]),_:1}),o(m,{cols:"12",sm:"6",md:"4"},{default:t(()=>[o(z,{label:"Responsável",modelValue:s(a).responsavel_menores_id,"onUpdate:modelValue":e[4]||(e[4]=i=>s(a).responsavel_menores_id=i),items:s(U),"item-title":"nome","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),o(x,{class:"mt-5",justify:"start",align:"center"},{default:t(()=>[o(m,{cols:"auto"},{default:t(()=>[o(c,{onClick:E},{default:t(()=>[o(A,{size:"large",color:"red"},{default:t(()=>e[5]||(e[5]=[$("Voltar")])),_:1})]),_:1})]),_:1}),o(m,{cols:"auto"},{default:t(()=>[o(A,{class:"ml-2",onClick:G,size:"large",color:"green"},{default:t(()=>e[6]||(e[6]=[$("Salvar")])),_:1})]),_:1})]),_:1})]),_:1})):X("",!0)}}};export{le as _};
