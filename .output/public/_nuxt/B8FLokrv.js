import{_ as ne}from"./B7KVRnph.js";import{u as oe,n as ae,q as K,r as i,s as ue,o as R,v as le,w as t,b as e,x as a,V as ee,y as B,d as q,z as X,A as G,B as te,a as v,c as L,C as Z,D as je,E as Ie,F as Re,G as ke,H as fe,h as Ue,I as xe,t as se}from"./CmLaF6he.js";import{u as b}from"./DoUwG6Q5.js";import{V as T}from"./GwXOSlqS.js";import{V as M}from"./CuVACmLA.js";import{V as re}from"./_0HDBEHl.js";import{V as de}from"./CijNiOfi.js";import{_ as Fe,V as Be,a as Y,b as Ne,c as Q}from"./BLFc8t77.js";import{_ as Le,a as Ge,b as He,T as Je,W as We,S as Ke,r as we,D as Ve,c as Xe,d as Ye,e as Qe}from"./BsAC0fFl.js";import{_ as ve}from"./Dc43tMm0.js";import{_ as ce,V as ge,a as ye,b as he,c as Ze}from"./DJXv-iAj.js";import{V as Ae,a as me}from"./BVVREZoT.js";import{V as et}from"./C7Qq-rwt.js";import{_ as $e}from"./DfjuBLsA.js";import{c as tt,r as ot,u as at}from"./B5Fxaj8v.js";import"./CyXw18Qd.js";import"./DHnzuTxT.js";import"./CzluxLML.js";import"./CdWXPEAW.js";const st={__name:"Dados",props:{item_dados:{type:Array,required:!0},item_situacoes:{type:Array,required:!0}},setup(H){const n=H,{$toast:y}=oe(),p=X(),x=ae(),r=K(),$=`${p.public.managemant}/updateAtos`,O=i(n.item_situacoes),A=ue({dt_abertura:n.item_dados[0].dt_abertura||null,status:n.item_dados[0].status||null,mne:n.item_dados[0].mne||null});async function U(){const{data:f,error:d,status:P}=await b(`${$}/${r.query.ato_id}`,{method:"PUT",body:{status:A.status,mne:A.mne,dt_abertura:A.dt_abertura}},"$EIT5jtTUdX");P.value==="success"&&y.success("Ato Atualizado com sucesso")}const D=()=>{const f=r.query.origem||"criar",d=r.query.id;f==="atualizar"?x.push(`/os/atualizar/${d}`):x.push("/os/criar-registro")};return(f,d)=>{const P=ne;return R(),le(de,null,{default:t(()=>[e(T,{class:"mt-5"},{default:t(()=>[e(M,{cols:"3"},{default:t(()=>[e(re,{label:"Situação",modelValue:a(A).status,"onUpdate:modelValue":d[0]||(d[0]=k=>a(A).status=k),items:a(O),"item-title":"descricao","item-value":"descricao",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(T,null,{default:t(()=>[e(M,{cols:"5"},{default:t(()=>[e(ee,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:a(A).mne,"onUpdate:modelValue":d[1]||(d[1]=k=>a(A).mne=k)},null,8,["modelValue"])]),_:1})]),_:1}),e(T,null,{default:t(()=>[e(M,{cols:"2"},{default:t(()=>[e(ee,{modelValue:a(A).dt_abertura,"onUpdate:modelValue":d[2]||(d[2]=k=>a(A).dt_abertura=k),type:"date",label:"Data Lavratura",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(T,{class:"mb-3"},{default:t(()=>[e(P,{onClick:D},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1}),e(B,{class:"ml-10",onClick:U,size:"large",color:"green"},{default:t(()=>[q("Atualizar")]),_:1})]),_:1})]),_:1})}}},rt=["onClick"],nt=v("img",{style:{width:"30px",height:"30px"},src:ve,alt:"Visualizar"},null,-1),lt=[nt],it=["onClick"],ct=v("img",{style:{width:"30px",height:"30px"},src:Ze,alt:"Visualizar"},null,-1),ut=[ct],dt=["onClick"],mt={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},pt={key:1,src:he,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},_t=["onClick"],ft=v("img",{style:{width:"30px",height:"30px"},src:He,alt:"Visualizar"},null,-1),vt=[ft],gt={__name:"Partes",async setup(H){let n,y;const p=ae(),x=K(),r=X(),{$toast:$}=oe(),O=`${r.public.managemant}/pesquisarPessoas`,A=`${r.public.managemant}/listarPapeis`,U=`${r.public.managemant}/getLinkTipo`,D=`${r.public.managemant}/createAtosPessoa`,f=`${r.public.managemant}/updateAtosPessoa`,d=`${r.public.managemant}/getAtosPessoaById`,P=i(G("user-data").value.cartorio_token),k=i([]),E=i([]),S=i([]),z=i(!1),F=i(!1),j=i(!1),g=i(!1),l=i(null),w=i(null),o=i(null),s=i(null),c=i(null),_=i("xkyaA"),V=i(null),I=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],u=ue({papeis:null,nome:null,pessoa:null,documento:null}),{data:be}=([n,y]=te(()=>b(A,{method:"POST",body:{tipo_ato_token:"xkyaA"}},"$acoiTIUp00")),n=await n,y(),n);S.value=be.value;const pe=async()=>{const{data:h}=await b(`${d}/${x.query.ato_id}`,{method:"GET"},"$ypnU9hCpVn"),N=(ie=>ie.map(J=>({...J,pessoa:{...J.pessoa,documento:J.pessoa.doc_identificacao},papel:{...J.partes_tipos}})))(h.value);E.value=N};pe();async function Ee(){try{const{data:h,error:m}=await b(O,{method:"POST",body:{cartorio_token:P.value,documento:u.documento,nome:u.nome}},"$pr30MyPXfY");h.value.length>0?(k.value=h.value,u.pessoa=k.value[0]):k.value=[]}catch(h){console.error("Erro na requisição",h)}}const Pe=()=>{F.value=!0},Ce=async()=>{await pe()},Te=async()=>{await pe()},qe=async()=>{const h={pessoa:u.pessoa,papel:S.value.find(W=>W.id===u.papeis),representante:{nome:null}},m=await b(`${d}/${x.query.ato_id}`,{method:"GET"},"$scHdIvxj2D");for(const W of m.data.value)if(W.pessoa_id===u.pessoa.id&&W.ato_id===Number(x.query.ato_id)&&W.tipo_parte_id===u.papeis){$.error("Pessoa Já Registrada Com Esse Papel!");return}const{data:N,error:ie,status:J}=await b(D,{method:"POST",body:{ato_id:x.query.ato_id,pessoa_id:u.pessoa.id,tipo_parte_id:u.papeis,user_id:G("user-data").value.usuario_id}},"$18isAgOJxG");J.value==="success"&&(h.id=N.value.id,$.success("Pessoa Registrada com Sucesso!"),E.value.push(h))},ze=async h=>{j.value=!0,V.value=null;const{data:m}=await b(`${U}`,{method:"POST",body:{id:h.pessoa.id,tipo:"ficha"}},"$hmDzSF3F61");m.value&&m.value.link?V.value=`data:image/jpeg;base64,${m.value.link}`:V.value=null},Oe=h=>{const m=E.value.filter(N=>N.pessoa.id!==h.pessoa.id).map(N=>({id:N.pessoa.id,nome:N.pessoa.nome}));o.value=h.id,l.value=m,z.value=!0,w.value=h.pessoa.nome,c.value=h.pessoa.id},De=h=>{g.value=!0,s.value=h.id,w.value=h.pessoa.nome};async function Me(h){h.excluido=!h.excluido;try{await b(`${f}/${h.id}`,{method:"PUT",body:JSON.stringify({excluido:h.excluido})},"$l09I6nLRfk")}catch(m){console.error("Erro ao excluir pessoa:",m)}}const Se=()=>{const h=x.query.origem||"criar",m=x.query.id;h==="atualizar"?p.push(`/os/atualizar/${m}`):p.push("/os/criar-registro")};return(h,m)=>{const N=Fe,ie=Le,J=Ge,W=ne;return R(),le(de,null,{default:t(()=>[e(T,{class:"mt-5"},{default:t(()=>[e(M,{cols:"3"},{default:t(()=>[e(ee,{label:"Documento",modelValue:a(u).documento,"onUpdate:modelValue":m[0]||(m[0]=C=>a(u).documento=C)},null,8,["modelValue"])]),_:1}),e(M,{cols:"4"},{default:t(()=>[e(ee,{label:"Pessoa",modelValue:a(u).nome,"onUpdate:modelValue":m[1]||(m[1]=C=>a(u).nome=C)},null,8,["modelValue"])]),_:1}),v("div",null,[v("img",{class:"mt-1",src:ve,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Ee})]),v("div",null,[v("img",{class:"mt-1 ml-2",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Pe})])]),_:1}),e(T,null,{default:t(()=>[e(M,{cols:"4"},{default:t(()=>[e(re,{label:"Selecione a Pessoa",modelValue:a(u).pessoa,"onUpdate:modelValue":m[2]||(m[2]=C=>a(u).pessoa=C),items:a(k),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(M,{cols:"3"},{default:t(()=>[e(re,{label:"Papel",modelValue:a(u).papeis,"onUpdate:modelValue":m[3]||(m[3]=C=>a(u).papeis=C),items:a(S),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),v("div",null,[v("img",{class:"mt-1",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:qe})])]),_:1}),e(T,null,{default:t(()=>[e(M,null,{default:t(()=>[e(ge,{style:{height:"465px"},headers:I,items:a(E)},{"item.actions":t(({item:C})=>[e(T,null,{default:t(()=>[v("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:_e=>ze(C),title:"Visualizar Ficha"},lt,8,rt),v("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:_e=>De(C),class:"mr-2",title:"Alterar Papel"},ut,8,it),v("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:_e=>Me(C),title:"Deletar Pessoa"},[C.excluido?(R(),L("img",mt)):(R(),L("img",pt))],8,dt),v("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:_e=>Oe(C),title:"Selecionar Representante"},vt,8,_t)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(N,{show:a(F),onClose:m[4]||(m[4]=C=>F.value=!1)},null,8,["show"]),e(ie,{representante_nome:a(w),representantes:a(l),ato_id:a(o),show:a(z),onClose:m[5]||(m[5]=C=>z.value=!1),onUpdateRepresentante:Te},null,8,["representante_nome","representantes","ato_id","show"]),e(J,{representante_nome:a(w),ato_token:a(_),ato_id:a(s),show:a(g),onClose:m[6]||(m[6]=C=>g.value=!1),onUpdatePapel:Ce},null,8,["representante_nome","ato_token","ato_id","show"]),e(Ae,{modelValue:a(j),"onUpdate:modelValue":m[8]||(m[8]=C=>Z(j)?j.value=C:null),width:"600"},{default:t(()=>[e(me,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(et,{src:a(V)},null,8,["src"]),e(B,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:m[7]||(m[7]=C=>j.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(T,null,{default:t(()=>[e(W,{onClick:Se},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},yt={key:0,class:"loading-overlay"},ht="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",bt={__name:"Minuta",emits:["page","doc"],setup(H,{emit:n}){je("DocumentEditorContainer",[Je,We,Ke]);const y=X(),{$toast:p}=oe(),x=ae(),r=K(),$=n;we(`${y.public.docEditor}`);const O=`${y.public.managemant}/download`,A=`${y.public.managemant}/atos/files`,U=`${y.public.managemant}/subitituirModelo`,D=`${y.public.managemant}/upload`,f=i(null),d=i(!1),P=async o=>{try{const s=await fetch(o);if(!s.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await s.blob()}catch(s){return console.error(s),p.error("Erro ao carregar o documento inicial."),null}},k=async()=>{try{const{data:o}=await b(`${A}/${r.query.ato_token_edit}`,{method:"GET"},"$5jxI4TvFse");return o.value.link_ato}catch(o){console.error("Erro ao carregar o documento:",o),p.error(o)}},E=async()=>{d.value=!0;try{const o=await k(),{data:s,status:c}=await b(O,{method:"POST",body:{bucket:"qvgjz",path:o}},"$dvNFfvmIJC"),_=s.value,V=await P(_);if(V){const I=new FileReader;I.onload=()=>{const u=I.result;f.value.ej2Instances.documentEditor.open(u),$("doc",u)},I.readAsText(V)}}catch{p.error("Erro ao carregar o documento.")}finally{d.value=!1}},S=async()=>{const o=f.value.ej2Instances.documentEditor;console.log(o);const s=await o.saveAsBlob("Sfdt"),c=new FileReader;c.onload=()=>{const _=c.result,I=f.value.ej2Instances.documentEditor.pageCount;$("page",I),$("doc",_)},c.readAsText(s)},z=async()=>{d.value=!0;try{const s=await f.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),c=new FormData;c.append("file",s,"anexo.sfdt"),c.append("cartorio_token",G("user-data").value.cartorio_token),c.append("token",r.query.ato_token_edit),c.append("tipo","ato_minuta");const{data:_,status:V}=await b(D,{method:"POST",body:c},"$xv11VtUdMy");if(V.value==="success"){p.success("Documento enviado!");const u=f.value.ej2Instances.documentEditor.pageCount;S(),$("page",u)}else p.error("Erro ao enviar documento para o sistema.")}catch(o){p.error("Erro ao salvar documento."),console.error(o)}finally{d.value=!1}},F=async()=>{l(!0);try{await j(),l(!0);const{data:o,status:s}=await b(U,{method:"POST",body:{ato_token:r.query.ato_token_edit}},"$zyzWHTXTBW");o.value&&g(o.value)}catch(o){console.error("Erro ao gerar a minuta:",o),p.error("Ocorreu um erro ao gerar a minuta.")}finally{l(!1)}},j=async()=>{try{const{data:o}=await b(O,{method:"POST",body:{bucket:"qvgjz",path:"provider/modeloAto.sfdt"}},"$KreLE0Ys81"),s=await P(o.value);if(s){const c=new FileReader;c.onload=()=>{const _=c.result;f.value.ej2Instances.documentEditor.open(_),$("doc",_)},c.readAsText(s)}}catch(o){console.error("Erro ao carregar o modelo de minuta:",o),p.error("Falha ao carregar o modelo de minuta.")}},g=o=>{const s=f.value.ej2Instances.documentEditor,c=_=>{for(const[V,I]of Object.entries(_))if(/^<<.+>>$/.test(V))try{s.search.findAll(V),s.search.searchResults.length>0&&s.search.searchResults.replaceAll(I)}catch(u){console.error(`Erro ao substituir o marcador ${V}:`,u)}else if(V==="partes"&&Array.isArray(I)&&I.length>0)for(const u of I)typeof u=="object"&&c(u)};c(o)},l=o=>{d.value=o},w=()=>{const o=r.query.origem||"criar",s=r.query.id;o==="atualizar"?x.push(`/os/atualizar/${s}`):x.push("/os/criar-registro")};return Ie(async()=>{await E(),S()}),(o,s)=>{const c=ne;return R(),L(fe,null,[e(a(Ve),{height:"900px",ref_key:"documentEditorContainer",ref:f,serviceUrl:ht,enableToolbar:!0,enableWordExport:!0},null,512),a(d)?(R(),L("div",yt,[e(Re,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):ke("",!0),e(T,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(c,{class:"mr-4"},{default:t(()=>[e(B,{size:"large",onClick:w,color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1}),e(B,{size:"large",color:"green",onClick:z,disabled:a(d)},{default:t(()=>[q("Atualizar")]),_:1},8,["disabled"]),e(B,{class:"ml-4",size:"large",color:"blue",onClick:F},{default:t(()=>[q("Gerar Minuta")]),_:1})]),_:1})],64)}}},xt={class:"d-flex align-center justify-center"},$t=["innerHTML"],kt={__name:"Livro",props:{pages:{type:Number,required:!0},document:{type:String,required:!0}},setup(H){const n=H,y=X();we(`${y.public.docEditor}`);const{$toast:p}=oe(),x=ae(),r=K(),$=`${y.public.managemant}/download`,O=`${y.public.managemant}/atos/files`,A=`${y.public.managemant}/lavrarAto`,U=i("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),D=i(!1),f=i(null),d=i(null),P=i(null),k=async g=>{try{const l=await fetch(g);if(!l.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await l.blob()}catch(l){return console.error(l),p.error("Erro ao carregar o documento inicial."),null}},E=async()=>{try{const{data:g}=await b(`${O}/${r.query.ato_token_edit}`,{method:"GET"},"$FnEbAJEARP");return g.value.link_ato}catch(g){console.error("Erro ao carregar o documento:",g),p.error(g)}},S=async()=>{try{const g=await E(),{data:l,status:w}=await b($,{method:"POST",body:{bucket:"qvgjz",path:g}},"$7ljqltMqa0"),o=l.value,s=await k(o);if(s){const c=new FileReader;c.onload=()=>{const _=c.result;P.value.ej2Instances.documentEditor.open(_),console.log("asdfdsf")},c.readAsText(s)}}catch{p.error("Erro ao carregar o documento.")}};S();const z=async()=>{try{const{data:g,status:l}=await b(A,{method:"POST",body:{ato_token:r.query.ato_token_edit,qtd_paginas:n.pages}},"$OWxZSQkyX8");l.value==="success"?(f.value=g.value,d.value=g.value[0].selo,p.success("Ato lavrado com sucesso!")):p.error("Falha ao lavrar o ato.")}catch{p.error("Erro ao conectar com o servidor.")}},F=()=>{D.value=!1,z()},j=()=>{const g=r.query.origem||"criar",l=r.query.id;g==="atualizar"?x.push(`/os/atualizar/${l}`):x.push("/os/criar-registro")};return Ue(()=>n.document,(g,l)=>{S()}),(g,l)=>{const w=Ye;return R(),L(fe,null,[e(T,null,{default:t(()=>[e(M,null,{default:t(()=>[e(a(Ve),{restrictEditing:!0,enableToolbar:!1,ref_key:"documentEditorContainer",ref:P,height:"850px",width:"850px"},null,512)]),_:1}),e(M,null,{default:t(()=>[v("div",xt,[v("div",null,[v("img",{onClick:l[0]||(l[0]=o=>D.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:Xe}),a(f)?(R(),le(me,{key:0,width:"360px",class:"mr-16"},{default:t(()=>[e(T,null,{default:t(()=>[e(M,null,{default:t(()=>[e(xe,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[q(" Livro: "+se(a(f)[0].livro_numero),1)]),_:1})]),_:1}),e(M,null,{default:t(()=>[e(xe,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[q(" Folhas : "+se(a(f)[0].pagina_inicial)+" Á "+se(a(f)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),v("div",{style:{border:"1px solid black","border-radius":"8px","padding-bottom":"20px","margin-top":"-10px"},class:"ml-2 mb-2 mr-2",innerHTML:a(d)},null,8,$t)]),_:1})):ke("",!0)])])]),_:1})]),_:1}),q(" "+se(n.pages)+" ",1),e(B,{class:"mt-5 ml-7 mb-5",color:"red",size:"large",onClick:j},{default:t(()=>[q("Voltar")]),_:1}),e(w,{show:a(D),condMessage:a(U),onClose:l[1]||(l[1]=o=>D.value=!1),onConfirm:F},null,8,["show","condMessage"])],64)}}},wt=["onClick"],Vt={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},At={key:1,src:he,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Et={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(H){let n,y;const p=ae(),x=K(),r=X(),{$toast:$}=oe(),O=`${r.public.managemant}/listarEscrevente`;`${r.public.managemant}`;const A=`${r.public.managemant}/createAtosObservacao`,U=`${r.public.managemant}/updateAtosObservacao`,D=`${r.public.managemant}/getAtosObservacaoById`,f=i(G("user-data").value.cartorio_token),d=i([]),P=i([]),k=[{title:"Data",align:"start",key:"created"},{title:"Escrevente",align:"start",key:"users.nome"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],E=ue({observacao:""}),S={observacao:{required:tt.withMessage("O campo é obrigatório",ot)}},z=at(S,E),{data:F}=([n,y]=te(()=>b(`${D}/${x.query.ato_id}`,{method:"GET"},"$HyzoO40swN")),n=await n,y(),n);d.value=F.value.map(o=>({...o,created:$e(o.created,"dd/mm/yyyy hh:mm")}));async function j(){if(E.observacao.trim()===""){$.error("O campo de observação está vazio.");return}if(await z.value.$validate()){const{data:o,error:s,status:c}=await b(A,{method:"POST",body:{ato_id:x.query.ato_id,observacao:E.observacao,user_id:G("user-data").value.usuario_id}},"$gnHMo4uCXD");c.value==="success"&&(d.value.push({created:$e(o.value.created,"dd/mm/yyyy hh:mm"),observacao:o.value.observacao,id:o.value.id,escrevente:G("user-data").value.nome}),E.observacao="",$.success("Observação registrada com sucesso"))}else $.error("Preencha os campos obrigatórios.")}async function g(o){o.excluido=!o.excluido;try{await b(`${U}/${o.id}`,{method:"PUT",body:JSON.stringify({excluido:o.excluido})},"$sP9AKdd3Ky")}catch(s){console.error("Erro ao excluir observação:",s)}}const{data:l}=([n,y]=te(()=>b(O,{method:"POST",body:{cartorio_token:f}},"$HL9pndqGh0")),n=await n,y(),n);P.value=l.value[0].func_json_escreventes;const w=()=>{const o=x.query.origem||"criar",s=x.query.id;o==="atualizar"?p.push(`/os/atualizar/${s}`):p.push("/os/criar-registro")};return(o,s)=>{const c=ne;return R(),le(de,null,{default:t(()=>[e(T,{class:"mt-5"},{default:t(()=>[e(ee,{label:"Observação",modelValue:E.observacao,"onUpdate:modelValue":s[0]||(s[0]=_=>E.observacao=_),required:"","error-messages":a(z).observacao.$errors.length>0?a(z).observacao.$errors.map(_=>_.$message):[],onBlur:a(z).observacao.$touch,onInput:a(z).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),v("div",null,[v("img",{class:"btn-pointer ml-2",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:j})])]),_:1}),e(T,null,{default:t(()=>[e(M,null,{default:t(()=>[e(ge,{style:{height:"465px"},headers:k,items:d.value},{"item.actions":t(({item:_})=>[v("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:V=>g(_),title:"Deletar Observação"},[_.excluido?(R(),L("img",Vt)):(R(),L("img",At))],8,wt)]),_:1},8,["items"])]),_:1})]),_:1}),e(T,null,{default:t(()=>[e(c,{onClick:w},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Pt=v("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Qe,alt:"Escanear"},null,-1),Ct=[Pt],Tt=v("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ce,alt:"Criar"},null,-1),qt=[Tt],zt=["onClick"],Ot=v("img",{style:{width:"30px",height:"30px"},src:ve,alt:"Visualizar"},null,-1),Dt=[Ot],Mt=["onClick"],St={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},jt={key:1,src:he,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},It={__name:"Anexos",async setup(H){let n,y;const p=X(),{$toast:x}=oe(),r=ae(),$=K(),O=`${p.public.biometria}/run-scanner`,A=`${p.public.managemant}/atos_anexos`,U=`${p.public.managemant}/atos_anexos`,D=`${p.public.managemant}/atos_anexos`,f=i(!1),d=i([]),P=ue({descricao:""}),k=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}],{data:E}=([n,y]=te(()=>b(`${D}/${$.query.ato_id}`,{method:"GET"},"$AOZpbz65MA")),n=await n,y(),n);d.value=E.value;async function S(){try{await z(),await F()}catch(o){console.error("Erro ao executar scanner ou listar arquivos:",o)}}async function z(){try{const{data:o}=await b(O,{method:"GET"},"$KttjFhHivJ")}catch(o){x.error("Erro ao acionar o scanner:",o)}}async function F(){try{const{data:o,status:s}=await b("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:$.query.ato_token_edit,cartorio_token:G("user-data").value.cartorio_token}},"$TqQrsgxUkd")}catch(o){console.error("Erro ao enviar o arquivo:",o)}}const j=async()=>{f.value=!0},g=async()=>{const{data:o,error:s,status:c}=await b(A,{method:"POST",body:{ato_id:$.query.ato_id,descricao:P.descricao,user_id:G("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$KDhIYzGKzM");c.value==="success"&&(x.success("Anexo registrado com sucesso!"),d.value.push(o.value))};async function l(o){o.excluido=!o.excluido;try{await b(`${U}/${o.id}`,{method:"PUT",body:JSON.stringify({excluido:o.excluido})},"$cdoFBGO0Ti")}catch(s){console.error("Erro ao excluir pessoa:",s)}}const w=()=>{const o=$.query.origem||"criar",s=$.query.id;o==="atualizar"?r.push(`/os/atualizar/${s}`):r.push("/os/criar-registro")};return(o,s)=>{const c=ne;return R(),le(de,null,{default:t(()=>[e(T,null,{default:t(()=>[e(M,{cols:"5"},{default:t(()=>[e(ee,{modelValue:a(P).descricao,"onUpdate:modelValue":s[0]||(s[0]=_=>a(P).descricao=_),label:"Descrição"},null,8,["modelValue"])]),_:1}),v("div",{onClick:S,title:"Escanear"},Ct),v("div",{onClick:g,title:"Criar"},qt)]),_:1}),e(ge,{headers:k,items:a(d),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:_})=>[e(T,null,{default:t(()=>[v("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:V=>j(_),title:"Visualizar Anexo"},Dt,8,zt),v("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:V=>l(_),title:"Deletar Pessoa"},[_.excluido?(R(),L("img",St)):(R(),L("img",jt))],8,Mt)]),_:2},1024)]),_:1},8,["items"]),e(Ae,{modelValue:a(f),"onUpdate:modelValue":s[2]||(s[2]=_=>Z(f)?f.value=_:null),width:"600"},{default:t(()=>[e(me,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(B,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:s[1]||(s[1]=_=>f.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(c,{onClick:w},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[q("Voltar")]),_:1})]),_:1})]),_:1})}}},Rt={class:"mb-10"},Ut=v("h1",null,"Ordem de Serviço nº",-1),Ft={style:{color:"red","margin-left":"30px"}},lo={__name:"[id]",async setup(H){let n,y;const p=i(null),x=i(null),r=i(null),$=X(),O=K(),A=`${$.public.managemant}/listarSituacoes`,U=`${$.public.managemant}/getAtos`,D=i(G("user-data").value.cartorio_token),f=O.query.id?{ato_token:"xkyaA"}:{cartorio_token:D},d=i([]),P=i([]),k=i("PROCURAÇÕES"),E=i("PROCURAÇÃO");async function S(){try{const{data:l}=await b(`${U}/${O.query.ato_id}`,{method:"GET"},"$j0JpHHj7PB");P.value=l.value}catch(l){console.log(l)}}[n,y]=te(()=>S()),await n,y();const{data:z,status:F}=([n,y]=te(()=>b(A,{method:"POST",body:f},"$mGbp7gAEjS")),n=await n,y(),n);d.value=z.value;const j=l=>{p.value=l},g=l=>{x.value=l};return(l,w)=>{const o=st,s=gt,c=bt,_=kt,V=Et,I=It;return R(),L(fe,null,[v("div",Rt,[e(T,{class:"mb-5 mt-5"},{default:t(()=>[Ut,v("h1",Ft,se(a(O).query.numero_os),1)]),_:1}),e(T,null,{default:t(()=>[e(M,{md:"6"},{default:t(()=>[e(re,{class:"mr-5",modelValue:a(k),"onUpdate:modelValue":w[0]||(w[0]=u=>Z(k)?k.value=u:null),disabled:""},null,8,["modelValue"])]),_:1}),e(M,{md:"6"},{default:t(()=>[e(re,{modelValue:a(E),"onUpdate:modelValue":w[1]||(w[1]=u=>Z(E)?E.value=u:null),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),e(me,{width:"1300"},{default:t(()=>[e(Be,{modelValue:a(r),"onUpdate:modelValue":w[2]||(w[2]=u=>Z(r)?r.value=u:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(Y,{value:"dados"},{default:t(()=>[q("Dados")]),_:1}),e(Y,{value:"partes"},{default:t(()=>[q("Partes")]),_:1}),e(Y,{value:"minuta"},{default:t(()=>[q("Minuta")]),_:1}),e(Y,{value:"livro"},{default:t(()=>[q("Livro")]),_:1}),e(Y,{value:"observacao"},{default:t(()=>[q("Observações")]),_:1}),e(Y,{value:"anexo"},{default:t(()=>[q("Anexos")]),_:1})]),_:1},8,["modelValue"]),e(Ne,{modelValue:a(r),"onUpdate:modelValue":w[3]||(w[3]=u=>Z(r)?r.value=u:null)},{default:t(()=>[e(Q,{value:"dados"},{default:t(()=>[e(o,{item_dados:a(P),item_situacoes:a(d)},null,8,["item_dados","item_situacoes"])]),_:1}),e(Q,{value:"partes"},{default:t(()=>[e(s)]),_:1}),e(Q,{value:"minuta"},{default:t(()=>[e(c,{onPage:j,onDoc:g})]),_:1}),e(Q,{value:"livro"},{default:t(()=>[e(_,{pages:a(p),document:a(x)},null,8,["pages","document"])]),_:1}),e(Q,{value:"observacao"},{default:t(()=>[e(V)]),_:1}),e(Q,{value:"anexo"},{default:t(()=>[e(I)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{lo as default};
