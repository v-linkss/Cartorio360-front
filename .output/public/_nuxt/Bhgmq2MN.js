import{_ as L}from"./BwoOglyv.js";import{a as M,b as P,c as z,d as D,V as U}from"./BK2ApIgh.js";import{r as u,h as X,o as w,A as B,w as a,b as o,d as C,c as A,t as j,y as G,q as t,v as J,_ as K,u as Q,E as W,D as h,F as H,G as Y,x as Z,a as f,s as ee,p as te,e as oe}from"./CtDV-ous.js";import{u as y}from"./CD94D2s7.js";import{_ as ae}from"./ToPptOUL.js";import{c as se,r as re,u as ne,_ as le}from"./5dVDj7iE.js";import{V as ue}from"./qPaL_Swk.js";import{V as ie}from"./lKL4zjLk.js";import{V as ce}from"./CWiJ1Bav.js";const de={key:0},me={key:1},_e={__name:"ErrorModalCard",props:{show:Boolean,errorMessage:String},emits:["close"],setup(s,{emit:i}){const m=s,r=u(m.show),k=i;X(()=>m.show,V=>{r.value=V});const _=()=>{r.value=!1,k("close")};return(V,c)=>(w(),B(U,{modelValue:t(r),"onUpdate:modelValue":c[0]||(c[0]=b=>J(r)?r.value=b:null),"max-width":"500"},{default:a(()=>[o(M,null,{default:a(()=>[o(P,{class:"text-h5"},{default:a(()=>[C("Erro na Requisição")]),_:1}),o(z,null,{default:a(()=>[s.errorMessage?(w(),A("div",de,j(s.errorMessage),1)):(w(),A("div",me,"Ocorreu um erro inesperado."))]),_:1}),o(D,null,{default:a(()=>[o(G,{style:{"background-color":"#429946",color:"white"},onClick:_},{default:a(()=>[C("OK")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},pe=s=>(te("data-v-730b3fa5"),s=s(),oe(),s),ve={style:{width:"600px","margin-top":"10px"}},fe={style:{width:"180px","margin-top":"20px"}},ke=pe(()=>f("img",{class:"btn-pointer mt-10 mb-5",src:ae,alt:"Sair"},null,-1)),Ve={__name:"autenticacao",async setup(s){let i,m;const r=Q(),k=W(),_=Z(),V=`${_.public.managemant}/listarEscrevente`,c=u(h("user-data").value.cartorio_token).value,b=u(h("user-service").value.token).value||u(h("user-service").value).value,S=h("auth_token").value,E=`${_.public.managemant}/atoAutentica`,I=`${_.public.managemant}/etiquetaAutentica`,x=u(!1),$=u(""),n=H({escrevente:null,quantidade:1}),q=u([]),{data:T}=([i,m]=Y(()=>y(V,{method:"POST",body:{cartorio_token:c}},"$nXL9eJBhI7")),i=await i,m(),i);q.value=T.value[0].func_json_escreventes;const O={escrevente:{required:se.withMessage("O campo é obrigatorio",re)}},g=ne(O,n),R=async()=>{if(await g.value.$validate()){const{data:l,status:e,error:p}=await y(E,{method:"POST",body:{usuario_token:S,cartorio_token:c,quantidade:Number(n.quantidade),ordemserv_token:b,ato_tipo_token:"bFsdV"}},"$dpfLzAlO85");e.value==="success"?N(l.value.token):(x.value=!0,$.value=p.value.data.details,console.log(l))}},N=async l=>{const{data:e,status:p}=await y(I,{method:"POST",body:{escrevente_token:n.escrevente,cartorio_token:c,ato_token:l}},"$fPnSl9XMLA");if(p.value==="success"){const v=window.open("","_blank");v.document.open(),v.document.write(e.value.etiqueta),v.document.close()}},F=()=>{const l=k.query.origem||"criar",e=k.query.id;l==="atualizar"?r.push(`/ordens-servicos/atualizar/${e}`):r.push("/ordens-servicos/criar-registro")};return(l,e)=>{const p=L,v=_e;return w(),B(M,{class:"mt-10",title:"Autenticação"},{default:a(()=>[o(ce,null,{default:a(()=>[f("div",ve,[o(ue,{label:"Tabelião/escrivão",modelValue:t(n).escrevente,"onUpdate:modelValue":e[0]||(e[0]=d=>t(n).escrevente=d),items:t(q),"item-title":"nome","item-value":"token",required:"","error-messages":t(g).escrevente.$errors.map(d=>d.$message),onBlur:t(g).escrevente.$touch,onInput:t(g).escrevente.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),f("div",fe,[o(ee,{type:"number",label:"Quantidade",modelValue:t(n).quantidade,"onUpdate:modelValue":e[1]||(e[1]=d=>t(n).quantidade=d)},null,8,["modelValue"])]),o(ie,null,{default:a(()=>[f("div",null,[o(p,{onClick:F},{default:a(()=>[ke]),_:1})]),f("img",{class:"btn-pointer mt-10",src:le,onClick:R})]),_:1})]),_:1}),o(v,{show:t(x),errorMessage:t($),onClose:e[2]||(e[2]=d=>x.value=!1)},null,8,["show","errorMessage"])]),_:1})}}},Ae=K(Ve,[["__scopeId","data-v-730b3fa5"]]);export{Ae as default};
