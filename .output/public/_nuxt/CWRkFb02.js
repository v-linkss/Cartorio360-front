import{_ as he,a as we,b as Ce,c as Ae,d as Oe,e as Te,f as Pe}from"./BikURjPw.js";import{_ as pe}from"./B4sziNoI.js";import{_ as oe}from"./BtT1aVM4.js";import{_ as ae,a as se,b as le}from"./BP1uhy__.js";import{_ as _e}from"./CeXvRNTp.js";import{_ as ie}from"./BAL0c-DX.js";import{C as re,H as Z,u as ve,r as d,m as J,D as fe,I as N,o as $,G as R,w as o,b as t,v as a,a as r,t as ne,c as j,x as L,d as x,J as ze,A as Q,s as ee,p as Be,V as Y,K as G,F as Ue,y as De}from"./DDtKO7-0.js";import{u as S}from"./D3BRDNO8.js";import{V as h}from"./DeW8--ZD.js";import{V as ce}from"./CSoBe6lC.js";import{V as C}from"./BI5L87bv.js";import{V as H}from"./Ci3nKxz8.js";import{V as ue}from"./CqSkn-a9.js";import{V as Ie}from"./sTLtLu4i.js";import{V as ye,a as Se,b as qe,c as Me}from"./Pu_Wl7e0.js";import{V as de}from"./D_1A8m3V.js";import{_ as Ee,a as Re}from"./DKhIpn0E.js";import{f as W}from"./V3Wx27PM.js";import{c as Le,r as Ne,u as je}from"./D9rZ6LwO.js";import{_ as me}from"./CdP3NN9a.js";import{V as Fe,a as D,b as Ge,c as I}from"./CiwVkHp2.js";import"./BjvDUOMs.js";import"./BAQmPJx8.js";import"./DQBrpoSu.js";import"./BNQIPyd4.js";import"./D1ocbu1M.js";import"./cxYsYOEB.js";import"./DedqstRa.js";import"./Cp8vZqz9.js";const Je={style:{width:"800px","font-weight":"500"}},Qe=["onClick"],We=["onClick"],He=["onClick"],Ke={key:0,style:{width:"30px",height:"30px"},src:se,alt:"Reativar",title:"Reativar"},Xe={key:1,src:le,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},Ye={__name:"Bens",async setup(te){let i,y;const A=re(),g=Z(),v=ee(),{$toast:w}=ve(),b=`${v.public.managemant}/atos_bens`,O=`${v.public.managemant}/atos_bens`,z=`${v.public.managemant}/listarBens`,B=`${v.public.managemant}/listarTipoBens`,U=d(J("user-data").value.cartorio_token),T=d(J("user-data").value.usuario_id).value,V=d([]),p=d([]),_=d(!1),P=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"vlr_alienacao"},{align:"end",value:"actions"}],n=fe({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),q=async()=>{if(!n.vlr_alienacao&&!n.descricao){w.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:s,status:e}=await S(`${b}`,{method:"POST",body:{descricao:n.descricao,tipo_id:n.tipo_id,valor_mercado:"0.00",vlr_alienacao:n.vlr_alienacao.replace(/,/g,""),user_id:T,ato_id:Number.parseInt(g.query.ato_id),token:g.query.ato_token_edit}},"$aGIwRtPn6M");e.value==="success"&&(w.success("Bem registrado com sucesso!"),V.value.push(s.value),Object.assign(n,{vlr_alienacao:null,descricao:null,tipo_id:null}))},M=async s=>{const{status:e}=await S(`${O}/${s}`,{method:"PUT",body:{descricao:p.value.descricao,tipo_id:p.value.tipo_id,vlr_alienacao:p.value.vlr_alienacao.replace(/,/g,"")}},"$4hUMyAQlzU");e.value==="success"&&(w.success("Bem Atualizado com sucesso!"),_.value=!1)},F=s=>{const e=V.value.find(k=>k.id===s);e&&(p.value=e,_.value=!0)},{data:m}=([i,y]=N(()=>S(`${B}`,{method:"POST",body:{cartorio_token:U.value,imoveis:!1}},"$da802I2H8c")),i=await i,y(),i);n.tiposBens=m.value;const{data:l}=([i,y]=N(()=>S(`${z}`,{method:"POST",body:{ato_token:g.query.ato_token_edit}},"$iXfJJrO35d")),i=await i,y(),i);V.value=l.value&&Object.keys(l.value).length===0?[]:l.value;async function c(s){s.excluido=!s.excluido;try{await S(`${O}/${s.id}`,{method:"PUT",body:JSON.stringify({excluido:s.excluido})},"$PGKHfsa7Pl")}catch(e){console.error("Erro ao excluir pessoa:",e)}}const f=()=>{const s=g.query.origem||"criar",e=g.query.id;s==="atualizar"?A.push(`/os/atualizar/${e}`):A.push("/os/criar-registro")};return(s,e)=>{const k=pe,K=oe;return $(),R(de,null,{default:o(()=>[t(h,{class:"mt-5",cols:"12"},{default:o(()=>[t(ce,{label:"Descrição",modelValue:a(n).descricao,"onUpdate:modelValue":e[0]||(e[0]=u=>a(n).descricao=u)},null,8,["modelValue"])]),_:1}),t(C,{class:"ml-1 mb-3"},{default:o(()=>[t(h,{class:"mt-6",cols:"8"},{default:o(()=>[t(H,{label:"Selecione o Tipo",items:a(n).tiposBens,modelValue:a(n).tipo_id,"onUpdate:modelValue":e[1]||(e[1]=u=>a(n).tipo_id=u),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(h,{class:"ml-5",cols:"3"},{default:o(()=>[e[9]||(e[9]=r("label",null,"Valor",-1)),t(k,{modelValue:a(n).vlr_alienacao,"onUpdate:modelValue":e[2]||(e[2]=u=>a(n).vlr_alienacao=u)},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-7 ml-4",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:q})])]),_:1}),t(C,null,{default:o(()=>[t(h,null,{default:o(()=>[t(ue,{style:{height:"465px"},headers:P,items:a(V)},{"item.descricao":o(({item:u})=>[r("h3",Je,ne(u.descricao),1)]),"item.actions":o(({item:u})=>[t(C,{style:{"margin-top":"-8px"},justify:"end"},{default:o(()=>[r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:X=>s.redirectToFicha(u),title:"Visualizar Ficha"},e[10]||(e[10]=[r("img",{style:{width:"30px",height:"30px"},src:_e,alt:"Visualizar"},null,-1)]),8,Qe),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:X=>F(u.id),title:"Alterar Papel"},e[11]||(e[11]=[r("img",{style:{width:"30px",height:"30px"},src:ie,alt:"Editar"},null,-1)]),8,We),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:X=>c(u),title:"Deletar Pessoa"},[u.excluido?($(),j("img",Ke)):($(),j("img",Xe))],8,He)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),t(Ie,{modelValue:a(_),"onUpdate:modelValue":e[8]||(e[8]=u=>L(_)?_.value=u:null),"max-width":"600px"},{default:o(()=>[t(ye,null,{default:o(()=>[t(Se,{style:{color:"green"}},{default:o(()=>e[12]||(e[12]=[x("Atualizar Bem")])),_:1}),t(qe,null,{default:o(()=>[t(h,{class:"mt-1",cols:"12"},{default:o(()=>[t(ce,{label:"Descrição",modelValue:a(p).descricao,"onUpdate:modelValue":e[3]||(e[3]=u=>a(p).descricao=u)},null,8,["modelValue"])]),_:1}),t(C,null,{default:o(()=>[t(h,{class:"mt-6 ml-3",cols:"8"},{default:o(()=>[t(H,{label:"Selecione o Tipo",items:a(n).tiposBens,modelValue:a(p).tipo_id,"onUpdate:modelValue":e[4]||(e[4]=u=>a(p).tipo_id=u),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(h,{class:"ml-5",cols:"3"},{default:o(()=>[e[13]||(e[13]=r("label",null,"Valor",-1)),t(k,{modelValue:a(p).vlr_alienacao,"onUpdate:modelValue":e[5]||(e[5]=u=>a(p).vlr_alienacao=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(Me,null,{default:o(()=>[t(ze),t(Q,{color:"green",text:"",onClick:e[6]||(e[6]=u=>_.value=!1)},{default:o(()=>e[14]||(e[14]=[x("Cancelar")])),_:1}),t(Q,{color:"green",text:"",onClick:e[7]||(e[7]=u=>M(a(p).id))},{default:o(()=>e[15]||(e[15]=[x("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(C,null,{default:o(()=>[t(K,{onClick:f},{default:o(()=>[t(Q,{size:"large",color:"red"},{default:o(()=>e[16]||(e[16]=[x("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Ze={style:{width:"200px"}},et={style:{width:"300px"}},tt={style:{width:"800px","font-weight":"500"}},ot=["onClick"],at=["onClick"],st=["onClick"],lt={key:0,style:{width:"30px",height:"30px"},src:se,alt:"Visualizar",title:"Reativar"},it={key:1,src:le,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},rt={__name:"Imoveis",async setup(te){let i,y;const A=ee(),g=`${A.public.auth}/service/gerencia/atos_imoveis`,v=`${A.public.auth}/service/gerencia/atos_bens`,w=re(),b=Z(),O=d(""),z=d(""),B=d(!1),U=d(!1),T=d(null),V=[{title:"Matrícula",value:"registro_matricula"},{title:"Descrição",value:"descricao"},{value:"actions"}],{data:p,status:_}=([i,y]=N(()=>W(g,{method:"POST",body:{ato_token:b.query.ato_token_edit}})),i=await i,y(),i),P=Be(()=>{if(Object.keys(p.value).length!==0)return p.value.filter(m=>{const l=m.matricula?m.matricula.toLowerCase():"",c=m.descricao?m.descricao.toLowerCase():"",f=l.includes(z.value.toLowerCase()),s=c.includes(O.value.toLowerCase());return f&&s})});async function n(m){m.excluido=!m.excluido;try{await W(`${v}/${m.id}`,{method:"PUT",body:{excluido:m.excluido}})}catch(l){console.error("Erro ao excluir pessoa:",l)}}function q(m){T.value=m,U.value=!0}const M=async()=>{await W(g,{method:"POST",body:{ato_token:b.query.ato_token_edit}})},F=()=>{const m=b.query.origem||"criar",l=b.query.id;m==="atualizar"?w.push(`/os/atualizar/${l}`):w.push("/os/criar-registro")};return(m,l)=>{const c=oe,f=Ee,s=Re;return a(_)==="success"?($(),R(de,{key:0,class:"mt-5"},{default:o(()=>[r("img",{onClick:l[0]||(l[0]=e=>B.value=!0),style:{cursor:"pointer"},src:ae,alt:"Cadastro"}),t(C,{style:{gap:"3rem"}},{default:o(()=>[r("div",Ze,[t(Y,{class:"mt-7 mb-4",modelValue:a(z),"onUpdate:modelValue":l[1]||(l[1]=e=>L(z)?z.value=e:null),label:"Matrícula","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),r("div",et,[t(Y,{class:"mt-7 mb-4",modelValue:a(O),"onUpdate:modelValue":l[2]||(l[2]=e=>L(O)?O.value=e:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),t(ue,{density:"compact",headers:V,items:a(P),"item-key":"id"},{"item.descricao":o(({item:e})=>[r("h3",tt,ne(e.descricao),1)]),"item.actions":o(({item:e})=>[t(C,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:o(()=>[r("div",{style:{cursor:"pointer"},onClick:k=>m.redirectToView(e.id),title:"Visualizar"},l[5]||(l[5]=[r("img",{style:{width:"30px",height:"30px"},src:_e,alt:"Visualizar"},null,-1)]),8,ot),r("div",{style:{cursor:"pointer"},onClick:k=>q(e.id),title:"Atualizar"},l[6]||(l[6]=[r("img",{style:{width:"30px",height:"30px"},src:ie,alt:"Atualizar"},null,-1)]),8,at),r("div",{style:{cursor:"pointer"},onClick:k=>n(e),title:"Deletar"},[e.excluido?($(),j("img",lt)):($(),j("img",it))],8,st)]),_:2},1024)]),_:1},8,["items"]),t(c,{onClick:F},{default:o(()=>[t(Q,{size:"large",color:"red"},{default:o(()=>l[7]||(l[7]=[x("Voltar")])),_:1})]),_:1}),t(f,{onRefresh:M,show:a(B),onClose:l[3]||(l[3]=e=>B.value=!1)},null,8,["show"]),t(s,{onRefresh:M,imovel_id:a(T),show:a(U),onClose:l[4]||(l[4]=e=>U.value=!1)},null,8,["imovel_id","show"])]),_:1})):G("",!0)}}},nt=["onClick"],ut={key:0,style:{width:"30px",height:"30px"},src:se,alt:"Visualizar",title:"Reativar"},dt={key:1,src:le,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ct={__name:"Outros",props:{ato_id:{type:Number,required:!0}},async setup(te){let i,y;const A=re(),g=Z(),v=ee(),{$toast:w}=ve(),b=`${v.public.managemant}/listarEscrevente`;`${v.public.managemant}`;const O=`${v.public.managemant}/createAtosObservacao`,z=`${v.public.managemant}/updateAtosObservacao`,B=`${v.public.managemant}/getAtosObservacaoById`,U=d(J("user-data").value.cartorio_token),T=d([]),V=d([]),p=[{title:"Data",align:"start",key:"created"},{title:"Quantidade",align:"start",key:"users.nome"},{title:"Valor Unitario",align:"start",key:"users.nome"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],_=fe({observacao:""}),P={observacao:{required:Le.withMessage("O campo é obrigatório",Ne)}},n=je(P,_),{data:q}=([i,y]=N(()=>S(`${B}/${g.query.ato_id}`,{method:"GET"},"$kQ0nj1mhl6")),i=await i,y(),i);q.value&&(T.value=q.value.map(c=>({...c,created:me(c.created,"dd/mm/yyyy hh:mm")})));async function M(){if(_.observacao.trim()===""){w.error("O campo de observação está vazio.");return}if(await n.value.$validate()){const{data:c,error:f,status:s}=await S(O,{method:"POST",body:{ato_id:g.query.ato_id,observacao:_.observacao,user_id:J("user-data").value.usuario_id}},"$DwnPGm5aLw");s.value==="success"&&(T.value.push({created:me(c.value.created,"dd/mm/yyyy hh:mm"),observacao:c.value.observacao,id:c.value.id,escrevente:J("user-data").value.nome}),_.observacao="",w.success("Observação registrada com sucesso"))}else w.error("Preencha os campos obrigatórios.")}async function F(c){c.excluido=!c.excluido;try{await S(`${z}/${c.id}`,{method:"PUT",body:JSON.stringify({excluido:c.excluido})},"$2e0uNuFQSO")}catch(f){console.error("Erro ao excluir observação:",f)}}const{data:m}=([i,y]=N(()=>S(b,{method:"POST",body:{cartorio_token:U}},"$YuLwFWKIry")),i=await i,y(),i);V.value=m.value[0].func_json_escreventes;const l=()=>{const c=g.query.origem||"criar",f=g.query.id;c==="atualizar"?A.push(`/os/atualizar/${f}`):A.push("/os/criar-registro")};return(c,f)=>{const s=pe,e=oe;return $(),R(de,null,{default:o(()=>[t(C,null,{default:o(()=>[t(h,{cols:"3"},{default:o(()=>[t(Y,{label:"Observação",modelValue:_.observacao,"onUpdate:modelValue":f[0]||(f[0]=k=>_.observacao=k),required:""},null,8,["modelValue"])]),_:1}),t(h,{cols:"5"},{default:o(()=>[t(H,{label:"Outros Atos"})]),_:1}),r("div",null,[r("img",{class:"btn-pointer ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:M})])]),_:1}),t(C,null,{default:o(()=>[t(h,{cols:"4",class:"mt-6"},{default:o(()=>[t(Y,{label:"Quantidade",type:"number"})]),_:1}),t(h,{cols:"4"},{default:o(()=>[f[1]||(f[1]=r("label",{for:""},"Valor unitario",-1)),t(s)]),_:1})]),_:1}),t(C,null,{default:o(()=>[t(h,null,{default:o(()=>[t(ue,{style:{height:"465px"},headers:p,items:T.value},{"item.actions":o(({item:k})=>[r("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:K=>F(k),title:"Deletar Observação"},[k.excluido?($(),j("img",ut)):($(),j("img",dt))],8,nt)]),_:1},8,["items"])]),_:1})]),_:1}),t(C,null,{default:o(()=>[t(e,{onClick:l},{default:o(()=>[t(Q,{size:"large",color:"red"},{default:o(()=>f[2]||(f[2]=[x("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},mt={class:"mb-10"},pt={style:{color:"red","margin-left":"30px"}},jt={__name:"[id]",async setup(te){let i,y;const A=d(null),g=d(null),v=d(null),w=ee(),b=Z(),O=`${w.public.auth}/service/gerencia/listarSituacoes`,z=`${w.public.auth}/service/gerencia/getAtos`,B=d(J("user-data").value.cartorio_token),U=b.query.id?{ato_token:b.query.tipo_ato_token}:{cartorio_token:B},T=d([]),V=d([]),p=d("PROCURAÇÕES"),_=d(!1),P=d(b.query.usa_imoveis==="true"),n=d(b.query.tipo_ato||"");async function q(){try{const{data:s}=await W(`${z}/${b.query.ato_id}`,{method:"GET"});V.value=s.value}catch(s){console.log(s)}}[i,y]=N(()=>q()),await i,y();const{data:M,status:F}=([i,y]=N(()=>W(O,{method:"POST",body:U})),i=await i,y(),i);T.value=M.value;const m=s=>{A.value=s},l=s=>{g.value=s};function c(){V.dt_lavratura||(_.value=!0)}function f({descricao:s,usaImoveisParams:e}){console.log(e),n.value=s,P.value=e}return(s,e)=>{const k=we,K=Ce,u=Ye,X=rt,ge=Ae,be=Oe,Ve=Te,xe=Pe,$e=ct,ke=he;return $(),j(Ue,null,[r("div",mt,[t(C,{class:"mb-5 mt-5"},{default:o(()=>[e[5]||(e[5]=r("h1",null,"Ordem de Serviço nº",-1)),r("h1",pt,ne(a(b).query.numero_os),1)]),_:1}),t(C,null,{default:o(()=>[t(h,{md:"6"},{default:o(()=>[t(H,{class:"mr-5",modelValue:a(p),"onUpdate:modelValue":e[0]||(e[0]=E=>L(p)?p.value=E:null),disabled:""},null,8,["modelValue"])]),_:1}),t(h,{md:"5"},{default:o(()=>[t(H,{modelValue:a(n),"onUpdate:modelValue":e[1]||(e[1]=E=>L(n)?n.value=E:null),label:"Serviço e Tipo de Ato Selecionado",disabled:""},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-2",style:De({cursor:a(V).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:ie,alt:"Editar",onClick:c},null,4)])]),_:1})]),t(ye,{width:"1300"},{default:o(()=>[t(Fe,{modelValue:a(v),"onUpdate:modelValue":e[2]||(e[2]=E=>L(v)?v.value=E:null),"bg-color":"#f5f2f2"},{default:o(()=>[t(D,{value:"dados"},{default:o(()=>e[6]||(e[6]=[x("Dados")])),_:1}),t(D,{value:"partes"},{default:o(()=>e[7]||(e[7]=[x("Partes")])),_:1}),a(P)?($(),R(D,{key:0,value:"bens"},{default:o(()=>e[8]||(e[8]=[x("Bens")])),_:1})):G("",!0),a(P)?($(),R(D,{key:1,value:"imoveis"},{default:o(()=>e[9]||(e[9]=[x("Imoveis")])),_:1})):G("",!0),t(D,{value:"minuta"},{default:o(()=>e[10]||(e[10]=[x("Minuta")])),_:1}),t(D,{value:"livro"},{default:o(()=>e[11]||(e[11]=[x("Livro")])),_:1}),t(D,{value:"observacao"},{default:o(()=>e[12]||(e[12]=[x("Observações")])),_:1}),t(D,{value:"anexo"},{default:o(()=>e[13]||(e[13]=[x("Anexos")])),_:1}),t(D,{value:"outros"},{default:o(()=>e[14]||(e[14]=[x("Outros")])),_:1})]),_:1},8,["modelValue"]),t(Ge,{modelValue:a(v),"onUpdate:modelValue":e[3]||(e[3]=E=>L(v)?v.value=E:null)},{default:o(()=>[t(I,{value:"dados"},{default:o(()=>[t(k,{item_dados:a(V),item_situacoes:a(T)},null,8,["item_dados","item_situacoes"])]),_:1}),t(I,{value:"partes"},{default:o(()=>[t(K)]),_:1}),a(P)?($(),R(I,{key:0,value:"bens"},{default:o(()=>[t(u)]),_:1})):G("",!0),a(P)?($(),R(I,{key:1,value:"imoveis"},{default:o(()=>[t(X)]),_:1})):G("",!0),t(I,{value:"minuta"},{default:o(()=>[t(ge,{onPage:m,onDoc:l})]),_:1}),t(I,{value:"livro"},{default:o(()=>[t(be,{pages:a(A),document:a(g)},null,8,["pages","document"])]),_:1}),t(I,{value:"observacao"},{default:o(()=>[t(Ve)]),_:1}),t(I,{value:"anexo"},{default:o(()=>[t(xe)]),_:1}),t(I,{value:"outros"},{default:o(()=>[t($e)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(_)?($(),R(ke,{key:0,show:a(_),servicos:a(V).servicos||[],tiposAtos:a(V).tiposAtos||[],onClose:e[4]||(e[4]=E=>_.value=!1),onUpdateAto:f},null,8,["show","servicos","tiposAtos"])):G("",!0)],64)}}};export{jt as default};
