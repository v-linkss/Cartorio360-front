import{_ as D}from"./C1LUWoP8.js";import{_ as F}from"./BAk91-bp.js";import{_ as L}from"./8Sl3B0F5.js";import{u as M,m as p,r as s,n as U,p as q,q as g,c as E,b as t,w as n,F as j,s as G,o as H,a as l,t as v,v as k,V as y,d as w,x as J,y as h,z as K,A as Q}from"./2k1OG2be.js";import{V as W}from"./CDrJLU9K.js";import{V as _}from"./CJG1SXhp.js";import{V as A}from"./CQWWYt0l.js";import{V as X}from"./BSaZDp9i.js";import"./mIwvMMMU.js";import"./DYLGoNUO.js";import"./Cy0AwNjf.js";import"./C3w2BmkS.js";import"./BVz1G1IN.js";import"./BfC1W_vO.js";import"./B2iGOswU.js";import"./Dwy3Riue.js";import"./BlPBofm_.js";const Y=["title","onClick"],Z=["onClick"],xe={__name:"index",setup(ee){const N=G(),{$toast:f}=M(),O=`${N.public.managemant}/listarOSCaixas`,R=p("caixa-service").value.usuario_nome,S=p("caixa-service").value.data,b=s([]),r=s(""),u=s(""),x=s({}),C=s(null),i=s(!1),T=()=>{Q("/caixas/lista")},$=[{title:"Data Recebimento",value:"data"},{title:"Número",value:"numero"},{title:"Situação",value:"situacao"},{title:"CPF",value:"apresentante_cpf"},{title:"Apresentante",value:"apresentante_nome"},{title:"Usuário",value:"usuario_nome"},{title:"Valor",value:"valor"},{title:"Ações",value:"actions"}];async function z(){try{const a=await $fetch(O,{method:"POST",body:{caixa_token:p("caixa-service").value.caixa_token}});a&&Array.isArray(a)?b.value=a:(f.error("Nenhum dado retornado da API."),console.error("Nenhum dado retornado da API."))}catch(a){const e=a.message||"Erro ao buscar dados da API. Tente novamente.";f.error(e),console.error(e)}}U(()=>{z()});const V=q(()=>b.value.filter(a=>{const e=a.numero?a.numero.toString().toLowerCase():"",c=a.apresentante_nome?a.apresentante_nome.toLowerCase():"",m=e.includes(r.value.toLowerCase()),d=c.includes(u.value.toLowerCase());return m&&d}));console.log("items:",V);function B(a,e){console.log("Cancelando OS:",{numero:a,token:e})}function P(a,e){C.value=a,x.value={token:e.token,numero:e.numero,valor:e.valor,valor_pago:e.valor_pago},i.value=!0}return(a,e)=>{const c=D,m=g("v-cols"),d=g("v-rows");return H(),E(j,null,[t(W,{class:"mt-5"},{default:n(()=>[t(_,{class:"mb-5"},{default:n(()=>[l("h1",null,"Recebimento de Ordens de Serviço - Caixa "+v(k(S))+" - "+v(k(R)),1)]),_:1}),t(_,null,{default:n(()=>[t(A,{cols:"2"},{default:n(()=>[t(y,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),type:"text",label:"Número"},null,8,["modelValue"])]),_:1}),t(A,{md:"3"},{default:n(()=>[t(y,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),label:"Apresentante"},null,8,["modelValue"])]),_:1})]),_:1}),e[4]||(e[4]=l("hr",{class:"mt-5 mb-5"},null,-1)),t(X,{headers:$,items:V.value,"item-key":"id"},{"item.actions":n(({item:o})=>[w(v(console.log(o))+" ",1),t(_,{style:{display:"flex",gap:"10px","margin-top":"-5px"}},{default:n(()=>[l("div",{class:h({disabled:!o.btn_receber}),title:o.btn_receber?"Receber":"Bloqueado",onClick:I=>o.btn_receber?P(o.numero,o):null},[l("img",{style:J({cursor:o.btn_receber?"pointer":"default",width:"30px",height:"30px"}),src:F,alt:"Receber"},null,4)],10,Y),l("div",{class:h({disabled:!o.btn_cancelar}),onClick:I=>o.btn_cancelar?B(o.numero,o.token):null,title:"Cancelamento"},e[3]||(e[3]=[l("img",{style:{width:"30px",height:"30px"},src:L,alt:"Visualizar",title:"Visualizar"},null,-1)]),10,Z)]),_:2},1024)]),_:1},8,["items"]),t(c,{show:i.value,numero_os:C.value,ordem:x.value,onClose:e[2]||(e[2]=o=>i.value=!1)},null,8,["show","numero_os","ordem"])]),_:1}),t(d,null,{default:n(()=>[t(m,null,{default:n(()=>[t(K,{class:"ml-8",size:"large",onClick:T,color:"red"},{default:n(()=>e[5]||(e[5]=[w("Voltar ")])),_:1})]),_:1})]),_:1})],64)}}};export{xe as default};
