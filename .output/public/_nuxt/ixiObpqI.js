import{_ as X}from"./Cbc0Spl8.js";import{u as Y,V as p,a as Z,b as _,c as h,_ as ee,d as ae,e as oe,f as le}from"./D9zQy4Wy.js";import{_ as te,r as se,L as de,C as ie,M as ne,B as N,N as me,v as ue,o as v,s as U,w as o,z as re,O as ce,a as g,t as A,x as n,b as e,d as f,A as B,P as pe,c as _e,y as D,V as m,Q as k,p as fe,e as Ve}from"./8Lc1Ye8d.js";import{b as be,a as ve}from"./BatLNKDS.js";import{V as r,_ as Ce}from"./DzzenEPx.js";import{_ as ge}from"./37abXc2X.js";import{V as xe}from"./DNLTjn2t.js";import{V as C}from"./C9vNJnFK.js";import{V as T}from"./B731R9lY.js";import{V as i}from"./DMyzBB-L.js";import"./BUe_X6z7.js";import"./CZDdFGDk.js";import"./3wJ_PxiT.js";import"./B__GP0ju.js";const ye=V=>(fe("data-v-7bb6b2fd"),V=V(),Ve(),V),Pe={style:{"background-color":"#c8fcca",color:"#429946",padding:"10px 0px 0px 20px"}},$e={style:{"background-color":"#c8fcca",padding:"20px 0px 20px 20px"}},Ue={key:1},ke=ye(()=>g("img",{class:"btn-pointer",src:Ce,alt:"Sair"},null,-1)),Ie={__name:"[id]",emits:["saved"],async setup(V,{emit:we}){let b,I;const u=se(null),M=de(),{$toast:R}=ie(),S=ne(),{id:x}=S.params,c=re(),z=`${c.public.managemant}/updatePessoa`,E=`${c.public.managemant}/listarEstadoCivil`,L=`${c.public.managemant}/listarCapacidadeCivil`,O=`${c.public.managemant}/listarCidades`,W=`${c.public.managemant}/getPessoaById`,j={nome:"",nome_pai:"",nome_mae:"",profissao:"",local_trabalho:"",data_nascimento:"",doc_identificacao:"",cpf_pai:"",cpf_mae:"",local_trabalho:"",tipo_pessoa:"FISICA",tabvalores_estadocivil_id:"",tabvalores_capacidadecivil_id:"",cidade_natural_id:"",cartorio_id:N("user-data").value.cartorio_id,user_id:N("user-data").value.usuario_id},t=me({...j});function q(s){if(s)return s.replace(/[.\-]/g,"");s=null}const{data:y,status:Fe,pending:w,error:F}=([b,I]=ue(async()=>be("cliente-dados",async()=>{const[s,a,d,P]=await Promise.all([$fetch(E),$fetch(L),$fetch(O),$fetch(`${W}/${x}`)]);return Object.assign(t,P),{estadoCivilItems:s,capacidadeCivilItems:a,cidadeNascimentoItems:d}})),b=await b,I(),b);Y(t);function Q(s){const a={};for(const d in s)s[d]===""?a[d]=null:d==="doc_identificacao"||d==="cpf_pai"||d==="cpf_mae"?a[d]=q(s[d]):a[d]=s[d];return a}async function G(){const s=Q(t);await ve(`${z}/${x}`,{method:"PUT",body:s},"$NdF8Uiv290"),console.log(s),R.success("Pessoa atualizada com sucesso!"),M.push("/pessoas/registros")}return(s,a)=>{const d=X,P=ee,H=ae,J=oe,K=le,$=ce("mask");return v(),U(xe,{width:"1300"},{default:o(()=>[g("h1",Pe,A(n(x)?"Atualização de Pessoas":"Cadastramento de Pessoas"),1),g("div",$e,[e(C,{modelValue:t.tipo_pessoa,"onUpdate:modelValue":a[0]||(a[0]=l=>t.tipo_pessoa=l),style:{width:"200px"},items:s.pessoa_tipo,label:"Tipo de pessoa","bg-color":"#F6F6F6",disabled:""},null,8,["modelValue","items"])]),e(Z,{modelValue:n(u),"onUpdate:modelValue":a[1]||(a[1]=l=>B(u)?u.value=l:null),"bg-color":"#C8FCCA"},{default:o(()=>[e(p,{value:"dados"},{default:o(()=>[f("Dados")]),_:1}),e(p,{value:"documento"},{default:o(()=>[f("Documentos")]),_:1}),e(p,{value:"endereco"},{default:o(()=>[f("Endereços")]),_:1}),e(p,{value:"biometria"},{default:o(()=>[f("Biometria")]),_:1}),e(p,{value:"restricao"},{default:o(()=>[f("Restrições")]),_:1})]),_:1},8,["modelValue"]),e(h,{modelValue:n(u),"onUpdate:modelValue":a[15]||(a[15]=l=>B(u)?u.value=l:null)},{default:o(()=>[e(_,{value:"dados"},{default:o(()=>[n(w)?(v(),U(pe,{key:0,class:"loading-spinner",indeterminate:"",size:"64"})):n(F)?(v(),_e("div",Ue,A(n(F).message),1)):D("",!0),n(w)?D("",!0):(v(),U(T,{key:2,class:"mt-5"},{default:o(()=>[e(r,null,{default:o(()=>[e(i,{cols:"12",md:"8"},{default:o(()=>[e(m,{modelValue:t.nome,"onUpdate:modelValue":a[2]||(a[2]=l=>t.nome=l),label:"Nome"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"4"},{default:o(()=>[k(e(m,{modelValue:t.doc_identificacao,"onUpdate:modelValue":a[3]||(a[3]=l=>t.doc_identificacao=l),label:"CPF",required:""},null,8,["modelValue"]),[[$,"###.###.###-##"]])]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(i,{cols:"12",md:"4"},{default:o(()=>[e(C,{modelValue:t.tabvalores_estadocivil_id,"onUpdate:modelValue":a[4]||(a[4]=l=>t.tabvalores_estadocivil_id=l),items:n(y).estadoCivilItems,"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"4"},{default:o(()=>[e(m,{modelValue:t.profissao,"onUpdate:modelValue":a[5]||(a[5]=l=>t.profissao=l),label:"Profissão"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"4"},{default:o(()=>[e(m,{modelValue:t.local_trabalho,"onUpdate:modelValue":a[6]||(a[6]=l=>t.local_trabalho=l),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(i,{cols:"12",md:"4"},{default:o(()=>[e(m,{modelValue:t.data_nascimento,"onUpdate:modelValue":a[7]||(a[7]=l=>t.data_nascimento=l),type:"date","prepend-icon":"",label:"Data de nascimento"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",md:"4"},{default:o(()=>[e(C,{modelValue:t.tabvalores_capacidadecivil_id,"onUpdate:modelValue":a[8]||(a[8]=l=>t.tabvalores_capacidadecivil_id=l),items:n(y).capacidadeCivilItems,label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"12",md:"4"},{default:o(()=>[e(C,{modelValue:t.cidade_natural_id,"onUpdate:modelValue":a[9]||(a[9]=l=>t.cidade_natural_id=l),items:n(y).cidadeNascimentoItems,label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(i,{cols:"12",md:"4"},{default:o(()=>[k(e(m,{modelValue:t.cpf_pai,"onUpdate:modelValue":a[10]||(a[10]=l=>t.cpf_pai=l),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[$,"###.###.###-##"]])]),_:1}),e(i,{cols:"12",md:"4"},{default:o(()=>[e(m,{modelValue:t.nome_pai,"onUpdate:modelValue":a[11]||(a[11]=l=>t.nome_pai=l),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(i,{cols:"12",md:"4"},{default:o(()=>[k(e(m,{modelValue:t.cpf_mae,"onUpdate:modelValue":a[12]||(a[12]=l=>t.cpf_mae=l),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[$,"###.###.###-##"]])]),_:1}),e(i,{cols:"12",md:"4"},{default:o(()=>[e(m,{modelValue:t.nome_mae,"onUpdate:modelValue":a[13]||(a[13]=l=>t.nome_mae=l),modelModifiers:{date:!0},label:"Nome da Mãe"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,null,{default:o(()=>[e(d,{to:"/pessoas/registros"},{default:o(()=>[ke]),_:1}),g("img",{class:"btn-pointer",src:ge,onClick:a[14]||(a[14]=l=>G())})]),_:1})]),_:1}))]),_:1}),e(_,{value:"documento"},{default:o(()=>[e(P)]),_:1}),e(_,{value:"endereco"},{default:o(()=>[e(H)]),_:1}),e(_,{value:"biometria"},{default:o(()=>[e(T,{class:"mt-5"},{default:o(()=>[e(J)]),_:1})]),_:1}),e(_,{value:"restricao"},{default:o(()=>[e(K)]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},qe=te(Ie,[["__scopeId","data-v-7bb6b2fd"]]);export{qe as default};
