import{d as $}from"./BG_zY74i.js";import{p as b,r as d,g as j,o as m,q as V,w as a,b as l,d as f,a as q,v as n,c as N,I as O,H as g,F as P,s as M}from"./BW9Hy8Yc.js";import{u as w}from"./DLjuFW1-.js";import{a as S,b as D,d as H,V as z}from"./CYrBi3oW.js";const A={class:"d-flex justify-center align-center"},E=["src"],G={__name:"FichaCard",props:{show:Boolean,item:Object},emits:["close","confirmar"],setup(_,{emit:y}){const i=_,p=M(),B=`${p.public.managemant}/getLinkTipo`,C=`${p.public.managemant}/download`,x=b(()=>!!s.value),T=b(()=>!!r.value),o=d(i.show),s=d(null),r=d(null),h=y;j(()=>i.show,async t=>{o.value=t,s.value=null,await R()});const F=()=>{h("confirmar"),v()},R=async()=>{var k;if(!i.item.id)return;const{data:t}=await w(B,{method:"POST",body:{tipo:"ficha",id:i.item.id}},"$4omB3S9Tg3");if(!((k=t.value)!=null&&k.link))return;const{data:e}=await w(C,{method:"POST",body:{bucket:"qvgjz",path:t.value.link}},"$yanMHqBuqW"),u=t.value.link,c=e.value;/\.(tr7|tiff)$/i.test(u)?s.value=c:r.value=c},v=()=>{o.value=!1,s.value=null,r.value=null,h("close")};return(t,e)=>{const u=$;return m(),V(z,{persistent:"",modelValue:n(o),"onUpdate:modelValue":e[0]||(e[0]=c=>P(o)?o.value=c:null),"max-width":"550"},{default:a(()=>[l(S,null,{default:a(()=>[l(D,{class:"text-h5"},{default:a(()=>e[1]||(e[1]=[f("Ficha de Firma")])),_:1}),q("div",A,[n(x)?(m(),V(u,{key:0,"tiff-url":n(s),"is-modal":!0},null,8,["tiff-url"])):n(T)?(m(),N("img",{key:1,src:n(r),style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,E)):O("",!0)]),l(H,null,{default:a(()=>[l(g,{style:{"background-color":"#429946",color:"white"},onClick:F},{default:a(()=>e[2]||(e[2]=[f("Reconhecer")])),_:1}),l(g,{style:{"background-color":"red",color:"white"},onClick:v},{default:a(()=>e[3]||(e[3]=[f("Voltar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};export{G as _};
