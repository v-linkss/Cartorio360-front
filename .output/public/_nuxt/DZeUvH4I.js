import{_ as R}from"./BZbDmwhG.js";import{_ as T,n as j,Z as q,u as y,$ as G,I as J,o as f,c as U,x as n,G as I,t as K,J as k,w as t,F as O,s as Z,a0 as H,a1 as Q,b as a,K as m,a2 as v,a as F,p as W,e as X}from"./mojXBOLn.js";import{b as Y,u as h}from"./CyECj4U3.js";import{V as u,_ as ee}from"./D2reQQng.js";import{_ as ae}from"./37abXc2X.js";import{u as le}from"./Bj37bKZC.js";import{V as oe}from"./DUqVQbic.js";import{V as i}from"./Cawe7E8A.js";import{V as b}from"./RpsO_yR7.js";const te=p=>(W("data-v-7616a42a"),p=p(),X(),p),se={key:1},de=te(()=>F("img",{class:"btn-pointer",src:ee,alt:"Sair"},null,-1)),ie={__name:"[id]",emits:["saved"],async setup(p,{emit:me}){let _,C;const{$toast:N}=j(),x=q(),{id:g}=x.params,r=Z(),w=`${r.public.managemant}/updatePessoa`,S=`${r.public.managemant}/listarEstadoCivil`,M=`${r.public.managemant}/listarCapacidadeCivil`,A=`${r.public.managemant}/listarCidades`,B=`${r.public.managemant}/getPessoaById`,D={nome:"",nome_pai:"",nome_mae:"",profissao:"",local_trabalho:"",data_nascimento:"",doc_identificacao:"",cpf_pai:"",cpf_mae:"",local_trabalho:"",tipo_pessoa:"FISICA",tabvalores_estadocivil_id:"",tabvalores_capacidadecivil_id:"",cidade_natural_id:"",cartorio_id:y("user-data").value.cartorio_id,user_id:y("user-data").value.usuario_id},l=G({...D});function z(s){if(s)return s.replace(/[.\-]/g,"");s=null}const{data:V,status:ne,pending:$,error:P}=([_,C]=J(async()=>Y("cliente-dados",async()=>{const[s,e,d,c]=await Promise.all([$fetch(S),$fetch(M),$fetch(A),$fetch(`${B}/${g}`)]);return Object.assign(l,c),{estadoCivilItems:s,capacidadeCivilItems:e,cidadeNascimentoItems:d}})),_=await _,C(),_);le(l);function E(s){const e={};for(const d in s)s[d]===""?e[d]=null:d==="doc_identificacao"||d==="cpf_pai"||d==="cpf_mae"?e[d]=z(s[d]):e[d]=s[d];return e}async function L(){const s=E(l);await h(`${w}/${g}`,{method:"PUT",body:s},"$NdF8Uiv290"),N.success("Pessoa atualizada com sucesso!"),console.log(s)}return(s,e)=>{const d=R,c=H("mask");return f(),U(O,null,[n($)?(f(),I(Q,{key:0,class:"loading-spinner",indeterminate:"",size:"64"})):n(P)?(f(),U("div",se,K(n(P).message),1)):k("",!0),n($)?k("",!0):(f(),I(oe,{key:2,class:"mt-5"},{default:t(()=>[a(u,null,{default:t(()=>[a(i,{cols:"12",md:"8"},{default:t(()=>[a(m,{modelValue:l.nome,"onUpdate:modelValue":e[0]||(e[0]=o=>l.nome=o),label:"Nome"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[v(a(m,{modelValue:l.doc_identificacao,"onUpdate:modelValue":e[1]||(e[1]=o=>l.doc_identificacao=o),label:"CPF",required:""},null,8,["modelValue"]),[[c,"###.###.###-##"]])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[a(b,{modelValue:l.tabvalores_estadocivil_id,"onUpdate:modelValue":e[2]||(e[2]=o=>l.tabvalores_estadocivil_id=o),items:n(V).estadoCivilItems,"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:l.profissao,"onUpdate:modelValue":e[3]||(e[3]=o=>l.profissao=o),label:"Profissão"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:l.local_trabalho,"onUpdate:modelValue":e[4]||(e[4]=o=>l.local_trabalho=o),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:l.data_nascimento,"onUpdate:modelValue":e[5]||(e[5]=o=>l.data_nascimento=o),type:"date","prepend-icon":"",label:"Data de nascimento"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(b,{modelValue:l.tabvalores_capacidadecivil_id,"onUpdate:modelValue":e[6]||(e[6]=o=>l.tabvalores_capacidadecivil_id=o),items:n(V).capacidadeCivilItems,label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(b,{modelValue:l.cidade_natural_id,"onUpdate:modelValue":e[7]||(e[7]=o=>l.cidade_natural_id=o),items:n(V).cidadeNascimentoItems,label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[v(a(m,{modelValue:l.cpf_pai,"onUpdate:modelValue":e[8]||(e[8]=o=>l.cpf_pai=o),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[c,"###.###.###-##"]])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:l.nome_pai,"onUpdate:modelValue":e[9]||(e[9]=o=>l.nome_pai=o),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(i,{cols:"12",md:"4"},{default:t(()=>[v(a(m,{modelValue:l.cpf_mae,"onUpdate:modelValue":e[10]||(e[10]=o=>l.cpf_mae=o),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[c,"###.###.###-##"]])]),_:1}),a(i,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:l.nome_mae,"onUpdate:modelValue":e[11]||(e[11]=o=>l.nome_mae=o),modelModifiers:{date:!0},label:"Nome da Mãe"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,null,{default:t(()=>[a(d,{to:"/pessoas/registros"},{default:t(()=>[de]),_:1}),F("img",{class:"btn-pointer",src:ae,onClick:e[12]||(e[12]=o=>L())})]),_:1})]),_:1}))],64)}}},Ce=T(ie,[["__scopeId","data-v-7616a42a"]]);export{Ce as default};
