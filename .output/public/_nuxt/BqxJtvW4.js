import{_ as te}from"./Cci_cYfs.js";import{n as H,q as Z,u as Q,r,A as M,s as se,B as ee,o as f,v as O,w as o,b as e,x as t,V as Y,y as W,d as B,z as X,a as _,c as G,C as oe,D as Be,F as Ie,G as L,H as ye,I as ge,t as ue}from"./DlOa_zXD.js";import{u as E}from"./DaQiVZ5c.js";import{c as he,r as xe,u as ke}from"./C24DiSCS.js";import{V as D}from"./C-d3qMzf.js";import{V as U}from"./DOkkALWv.js";import{V as ce}from"./D_2zVMST.js";import{V as re}from"./CyHs-Wz5.js";import{_ as Me,a as J,V as Ue,c as K,b as Ne}from"./3ZAFivEZ.js";import{_ as Le,a as je,b as Fe,T as We,W as Ge,r as be,D as $e,c as Je,d as Ke,e as Ye}from"./BktWs8Xv.js";import{_ as de}from"./CKCqdIHr.js";import{_ as ae,V as pe,a as me,b as _e,c as He}from"./CVgDuseC.js";import{V as Ve,a as ne}from"./CdsONYvN.js";import{V as Ze}from"./BG_rNmf8.js";import{_ as Qe}from"./DfjuBLsA.js";import"./6HgBCcQB.js";import"./cAoPJtQP.js";import"./6qs6_CNz.js";import"./BkzfW_GC.js";const Xe={__name:"Dados",props:{ato_token:{type:String,required:!0}},emits:["saved"],async setup(N,{emit:c}){let i,d;const k=N,$=c,p=H(),u=Z(),V=X(),{$toast:g}=Q(),A=`${V.public.managemant}/listarSituacoes`,R=`${V.public.managemant}/createAtos`,T=`${V.public.managemant}/getAtosTiposByToken`,w=r(M("user-data").value.cartorio_token),S=r(M("user-service").value.id).value||r(M("user-service").value).value,h=r([]),a=se({dt_abertura:null,status:"EM EDIÇÃO",mne:null}),y={status:{required:he.withMessage("O campo é obrigatorio",xe)}},x=ke(y,a),{data:I}=([i,d]=ee(()=>E(`${T}/${k.ato_token}`,{method:"GET"},"$9ZmTYsLk0K")),i=await i,d(),i);async function n(){if(await x.value.$validate()){const{data:l,error:v,status:F}=await E(R,{method:"POST",body:{ato_tipo_id:I.value.id,cartorio_id:M("user-data").value.cartorio_id,ordemserv_id:S,status:a.status,dt_abertura:a.dt_abertura,mne:a.mne,user_id:M("user-data").value.usuario_id,user_alteracao_id:M("user-data").value.usuario_id}},"$hyq5YcBEjF");F.value==="success"&&(g.success("Ato registrado com sucesso!"),$("saved",{id:l.value.id,token:l.value.token}))}else g.error("Preencha os campos obrigatorios.")}const{data:b}=([i,d]=ee(()=>E(A,{method:"POST",body:{cartorio_token:w.value}},"$S3qwbpImEh")),i=await i,d(),i);h.value=b.value;const j=()=>{const l=u.query.origem||"criar",v=u.query.id;l==="atualizar"?p.push(`/os/atualizar/${v}`):p.push("/os/criar-registro")};return(l,v)=>{const F=te;return f(),O(re,null,{default:o(()=>[e(D,{class:"mt-5"},{default:o(()=>[e(U,{cols:"3"},{default:o(()=>[e(ce,{label:"Situação",modelValue:t(a).status,"onUpdate:modelValue":v[0]||(v[0]=P=>t(a).status=P),items:t(h),"item-title":"descricao","item-value":"descricao",required:"","error-messages":t(x).status.$errors.map(P=>P.$message),onBlur:t(x).status.$touch,onInput:t(x).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),e(D,null,{default:o(()=>[e(U,{cols:"5"},{default:o(()=>[e(Y,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:t(a).mne,"onUpdate:modelValue":v[1]||(v[1]=P=>t(a).mne=P)},null,8,["modelValue"])]),_:1})]),_:1}),e(D,null,{default:o(()=>[e(U,{cols:"2"},{default:o(()=>[e(Y,{modelValue:t(a).dt_abertura,"onUpdate:modelValue":v[2]||(v[2]=P=>t(a).dt_abertura=P),type:"date",label:"Data Lavratura",disabled:"",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(D,{class:"mb-3"},{default:o(()=>[e(F,{onClick:j},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>[B("Voltar")]),_:1})]),_:1}),e(W,{class:"ml-10",onClick:n,size:"large",color:"green"},{default:o(()=>[B("Salvar")]),_:1})]),_:1})]),_:1})}}},et=["onClick"],tt=_("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1),ot=[tt],at=["onClick"],st=_("img",{style:{width:"30px",height:"30px"},src:He,alt:"Visualizar"},null,-1),rt=[st],nt=["onClick"],lt={key:0,style:{width:"30px",height:"30px"},src:me,alt:"Visualizar",title:"Reativar"},it={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ut=["onClick"],ct=_("img",{style:{width:"30px",height:"30px"},src:Fe,alt:"Visualizar"},null,-1),dt=[ct],pt={__name:"Partes",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(N){let c,i;const d=N,k=H(),$=Z(),p=X(),{$toast:u}=Q(),V=`${p.public.managemant}/pesquisarPessoas`,g=`${p.public.managemant}/listarPapeis`,A=`${p.public.managemant}/getLinkTipo`,R=`${p.public.managemant}/createAtosPessoa`,T=`${p.public.managemant}/getAtosPessoaById`,w=`${p.public.managemant}/updateAtosPessoa`,S=r(M("user-data").value.cartorio_token),h=r([]),a=r([]),y=r([]),x=r(!1),I=r(!1),n=r(!1),b=r(!1),j=r(null),l=r(null),v=r(null),F=r(null);r(null);const P=r(null),ve=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],q=se({papeis:null,nome:null,pessoa:null,documento:null}),{data:we}=([c,i]=ee(()=>E(g,{method:"POST",body:{tipo_ato_token:d.ato_token}},"$fFKndZhA4W")),c=await c,i(),c);y.value=we.value;async function Pe(){try{const{data:m,error:s}=await E(V,{method:"POST",body:{cartorio_token:S.value,documento:q.documento,nome:q.nome}},"$o3ZL1rvYrY");m.value.length>0?(h.value=m.value,q.pessoa=h.value[0]):h.value=[]}catch(m){console.error("Erro na requisição",m)}}const Ce=()=>{I.value=!0},Ee=m=>{a.value=a.value.map(s=>s.id===v.value?{...s,papel:{...s.papel,descricao:m}}:s)},Ae=m=>{const s=a.value.find(z=>z.pessoa.id===F.value);s.representante.nome=m},Te=async()=>{const m={pessoa:q.pessoa,papel:y.value.find(z=>z.id===q.papeis),representante:{nome:null}},s=await E(`${T}/${d.ato_id}`,{method:"GET"},"$kXSxUa4grs");for(const z of s.data.value)if(z.pessoa_id===q.pessoa.id&&z.ato_id===d.ato_id&&z.tipo_parte_id===q.papeis){u.error("Pessoa Já Registrada Com Esse Papel!");return}try{const{data:z,error:fe,status:le}=await E(R,{method:"POST",body:{ato_id:d.ato_id,pessoa_id:q.pessoa.id,tipo_parte_id:q.papeis,user_id:M("user-data").value.usuario_id}},"$So3qnQu7ek");le.value==="success"?(m.id=z.value.id,u.success("Pessoa Registrada com Sucesso!"),a.value.push(m)):u.error("Erro ao registrar a pessoa!")}catch{u.error("Erro no servidor. Tente novamente.")}},Se=async m=>{n.value=!0,P.value=null;const{data:s}=await E(`${A}`,{method:"POST",body:{id:m.pessoa.id,tipo:"ficha"}},"$Q3kbIwtd9t");s.value&&s.value.link?P.value=`data:image/jpeg;base64,${s.value.link}`:P.value=null},qe=m=>{const s=a.value.filter(z=>z.pessoa.id!==m.pessoa.id).map(z=>({id:z.pessoa.id,nome:z.pessoa.nome}));v.value=m.id,j.value=s,x.value=!0,l.value=m.pessoa.nome,F.value=m.pessoa.id},ze=m=>{v.value=m.id,b.value=!0,l.value=m.pessoa.nome};async function Oe(m){m.excluido=!m.excluido;try{await E(`${w}/${v.value}`,{method:"PUT",body:JSON.stringify({excluido:m.excluido})},"$9xStKwGd7o")}catch(s){console.error("Erro ao excluir pessoa:",s)}}const De=()=>{const m=$.query.origem||"criar",s=$.query.id;m==="atualizar"?k.push(`/os/atualizar/${s}`):k.push("/os/criar-registro")};return(m,s)=>{const z=Me,fe=Le,le=je,Re=te;return f(),O(re,null,{default:o(()=>[e(D,{class:"mt-5"},{default:o(()=>[e(U,{cols:"3"},{default:o(()=>[e(Y,{label:"Documento",modelValue:t(q).documento,"onUpdate:modelValue":s[0]||(s[0]=C=>t(q).documento=C)},null,8,["modelValue"])]),_:1}),e(U,{cols:"4"},{default:o(()=>[e(Y,{label:"Pessoa",modelValue:t(q).nome,"onUpdate:modelValue":s[1]||(s[1]=C=>t(q).nome=C)},null,8,["modelValue"])]),_:1}),_("div",null,[_("img",{class:"mt-3",src:de,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Pe})]),_("div",null,[_("img",{class:"mt-3 ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Ce})])]),_:1}),e(D,null,{default:o(()=>[e(U,{cols:"4"},{default:o(()=>[e(ce,{label:"Selecione a Pessoa",modelValue:t(q).pessoa,"onUpdate:modelValue":s[2]||(s[2]=C=>t(q).pessoa=C),items:t(h),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(U,{cols:"3"},{default:o(()=>[e(ce,{label:"Papel",modelValue:t(q).papeis,"onUpdate:modelValue":s[3]||(s[3]=C=>t(q).papeis=C),items:t(y),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),_("div",null,[_("img",{class:"mt-3",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Te})])]),_:1}),e(D,null,{default:o(()=>[e(U,null,{default:o(()=>[e(pe,{style:{height:"465px"},headers:ve,items:t(a)},{"item.actions":o(({item:C})=>[e(D,null,{default:o(()=>[_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ie=>Se(C),title:"Visualizar Ficha"},ot,8,et),_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ie=>ze(C),class:"mr-2",title:"Alterar Papel"},rt,8,at),_("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ie=>Oe(C),title:"Deletar Pessoa"},[C.excluido?(f(),G("img",lt)):(f(),G("img",it))],8,nt),_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ie=>qe(C),title:"Selecionar Representante"},dt,8,ut)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(z,{show:t(I),onClose:s[4]||(s[4]=C=>I.value=!1)},null,8,["show"]),e(fe,{representante_nome:t(l),representantes:t(j),ato_id:t(v),show:t(x),onClose:s[5]||(s[5]=C=>x.value=!1),onUpdateRepresentante:Ae},null,8,["representante_nome","representantes","ato_id","show"]),e(le,{representante_nome:t(l),ato_token:d.ato_token,ato_id:t(v),show:t(b),onClose:s[6]||(s[6]=C=>b.value=!1),onUpdatePapel:Ee},null,8,["representante_nome","ato_token","ato_id","show"]),e(Ve,{modelValue:t(n),"onUpdate:modelValue":s[8]||(s[8]=C=>oe(n)?n.value=C:null),width:"600"},{default:o(()=>[e(ne,{"max-width":"600",title:"Ficha"},{default:o(()=>[e(Ze,{src:t(P)},null,8,["src"]),e(W,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:s[7]||(s[7]=C=>n.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(D,null,{default:o(()=>[e(Re,{onClick:De},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>[B("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},mt={key:0,class:"loading-overlay"},_t="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",vt={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(N,{emit:c}){const i=N;Be("DocumentEditorContainer",[We,Ge]);const d=X(),{$toast:k}=Q(),$=H(),p=Z(),u=c;be(`${d.public.docEditor}`);const V=`${d.public.managemant}/upload`,g=r(null),A=r(!1),R=async()=>{const h=await g.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),a=new FileReader;a.onload=()=>{const y=a.result;u("doc",y)},a.readAsText(h)},T=async()=>{A.value=!0;try{const h=await g.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),a=new FormData;a.append("file",h,"anexo.docx"),a.append("cartorio_token",M("user-data").value.cartorio_token),a.append("token",i.ato_token),a.append("tipo","ato_minuta");const{data:y,status:x}=await E(V,{method:"POST",body:a},"$071xxdqs20");if(x.value==="success"){k.success("Documento enviado!");const n=g.value.ej2Instances.documentEditor.pageCount;R(),u("page",n)}else k.error("Erro ao enviar documento para o sistema.")}catch(S){k.error("Erro ao salvar documento."),console.error(S)}finally{A.value=!1}},w=()=>{const S=p.query.origem||"criar",h=p.query.id;S==="atualizar"?$.push(`/os/atualizar/${h}`):$.push("/os/criar-registro")};return(S,h)=>{const a=te;return f(),G(ye,null,[e(t($e),{height:"900px",ref_key:"documentEditorContainer",ref:g,serviceUrl:_t,enableToolbar:!0,enableWordExport:!0},null,512),t(A)?(f(),G("div",mt,[e(Ie,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):L("",!0),e(D,{class:"ml-4 mt-4 mb-4"},{default:o(()=>[e(a,{class:"mr-4"},{default:o(()=>[e(W,{size:"large",onClick:w,color:"red"},{default:o(()=>[B("Voltar")]),_:1})]),_:1}),e(W,{size:"large",color:"green",onClick:T,disabled:t(A)},{default:o(()=>[B("Salvar")]),_:1},8,["disabled"])]),_:1})],64)}}},ft={class:"d-flex align-center justify-center"},gt=["innerHTML"],yt={__name:"Livro",props:{ato_token:{type:String,required:!0},pages:{type:Number,required:!0},document:{type:String,required:!0}},setup(N){const c=N,i=X();be(`${i.public.docEditor}`);const{$toast:d}=Q(),k=H(),$=Z(),p=`${i.public.managemant}/lavrarAto`,u=r("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),V=r(!1),g=r(null),A=r(null),R=r(null),T=async()=>{try{const{data:a,status:y}=await E(p,{method:"POST",body:{ato_token:c.ato_token,qtd_paginas:c.pages}},"$ZKnVBNYxp9");y.value==="success"?(g.value=a.value,A.value=a.value[0].selo,d.success("Ato lavrado com sucesso!")):d.error("Falha ao lavrar o ato.")}catch{d.error("Erro ao conectar com o servidor.")}},w=()=>{V.value=!1,T()},S=function(){R.value.ej2Instances.documentEditor.open(c.document)},h=()=>{const a=$.query.origem||"criar",y=$.query.id;a==="atualizar"?k.push(`/os/atualizar/${y}`):k.push("/os/criar-registro")};return(a,y)=>{const x=Ke;return f(),G(ye,null,[e(D,null,{default:o(()=>[e(U,null,{default:o(()=>[(f(),O(t($e),{restrictEditing:!0,enableToolbar:!1,created:c.document?S:null,ref_key:"documentEditorContainer",ref:R,height:"850px",width:"850px",key:c.document},null,8,["created"]))]),_:1}),e(U,null,{default:o(()=>[_("div",ft,[_("div",null,[_("img",{onClick:y[0]||(y[0]=I=>V.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:Je}),t(g)?(f(),O(ne,{key:0,class:"mr-16"},{default:o(()=>[e(D,{"no-gutters":""},{default:o(()=>[e(U,null,{default:o(()=>[e(ge,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:o(()=>[B(" Livro: "+ue(t(g)[0].livro_numero),1)]),_:1})]),_:1}),e(U,null,{default:o(()=>[e(ge,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:o(()=>[B(" Folhas : "+ue(t(g)[0].pagina_inicial)+" Á "+ue(t(g)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),_("div",{innerHTML:t(A)},null,8,gt)]),_:1})):L("",!0)])])]),_:1})]),_:1}),e(W,{color:"red",size:"large",onClick:h},{default:o(()=>[B("Voltar")]),_:1}),e(x,{show:t(V),condMessage:t(u),onClose:y[1]||(y[1]=I=>V.value=!1),onConfirm:w},null,8,["show","condMessage"])],64)}}},ht=["onClick"],xt={key:0,style:{width:"30px",height:"30px"},src:me,alt:"Visualizar",title:"Reativar"},kt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},bt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(N){let c,i;const d=N,k=H(),$=Z(),p=X(),{$toast:u}=Q(),V=`${p.public.managemant}/listarEscrevente`,g=`${p.public.managemant}/getAtosTiposByToken`,A=`${p.public.managemant}/createAtosObservacao`,R=`${p.public.managemant}/updateAtosObservacao`,T=r(M("user-data").value.cartorio_token),w=r([]),S=r([]),h=[{title:"Data",align:"start",key:"data"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],a=se({observacao:null}),y={observacao:{required:he.withMessage("O campo é obrigatorio",xe)}},x=ke(y,a);[c,i]=ee(()=>E(`${g}/${d.ato_token}`,{method:"GET"},"$aJM1TL1buW")),c=await c,i();async function I(){if(await x.value.$validate()){const{data:l,error:v,status:F}=await E(A,{method:"POST",body:{ato_id:d.ato_id,observacao:a.observacao,user_id:M("user-data").value.usuario_id}},"$dMg99jeUNP");F.value==="success"&&(w.value.push({data:Qe(l.value.created,"dd/mm/yyyy hh:mm"),observacao:l.value.observacao,id:l.value.id,escrevente:M("user-data").value.nome}),u.success("Observação registrada com sucesso"))}else u.error("Preencha os campos obrigatorios.")}async function n(l){l.excluido=!l.excluido;try{await E(`${R}/${l.id}`,{method:"PUT",body:JSON.stringify({excluido:l.excluido})},"$B6PdRx8Gp4")}catch(v){console.error("Erro ao excluir observacao:",v)}}const{data:b}=([c,i]=ee(()=>E(V,{method:"POST",body:{cartorio_token:T}},"$xFHPGua26S")),c=await c,i(),c);S.value=b.value[0].func_json_escreventes;const j=()=>{const l=$.query.origem||"criar",v=$.query.id;l==="atualizar"?k.push(`/os/atualizar/${v}`):k.push("/os/criar-registro")};return(l,v)=>{const F=te;return f(),O(re,null,{default:o(()=>[e(D,{class:"mt-5"},{default:o(()=>[e(Y,{label:"Observação",modelValue:t(a).observacao,"onUpdate:modelValue":v[0]||(v[0]=P=>t(a).observacao=P),required:"","error-messages":t(x).observacao.$errors.map(P=>P.$message),onBlur:t(x).observacao.$touch,onInput:t(x).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),_("div",null,[_("img",{class:"btn-pointer ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:I})])]),_:1}),e(D,null,{default:o(()=>[e(U,null,{default:o(()=>[e(pe,{style:{height:"465px"},headers:h,items:t(w)},{"item.actions":o(({item:P})=>[_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ve=>n(P),title:"Deletar Observação"},[P.excluido?(f(),G("img",xt)):(f(),G("img",kt))],8,ht)]),_:1},8,["items"])]),_:1})]),_:1}),e(D,null,{default:o(()=>[e(F,{onClick:j},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>[B("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},$t=_("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Ye,alt:"Escanear"},null,-1),Vt=[$t],wt=_("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ae,alt:"Criar"},null,-1),Pt=[wt],Ct=["onClick"],Et=_("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1),At=[Et],Tt=["onClick"],St={key:0,style:{width:"30px",height:"30px"},src:me,alt:"Visualizar",title:"Reativar"},qt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},zt={__name:"Anexos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(N){const c=N,i=X(),{$toast:d}=Q(),k=H(),$=Z(),p=`${i.public.biometria}/run-scanner`,u=`${i.public.managemant}/atos_anexos`,V=`${i.public.managemant}/atos_anexos`,g=r(!1),A=r([]),R=se({descricao:""}),T=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}];async function w(){try{await S(),await h()}catch(n){console.error("Erro ao executar scanner ou listar arquivos:",n)}}async function S(){try{const{data:n}=await E(p,{method:"GET"},"$WazoKp68Tw")}catch(n){d.error("Erro ao acionar o scanner:",n)}}async function h(){try{const{data:n,status:b}=await E("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:c.ato_token,cartorio_token:M("user-data").value.cartorio_token}},"$03Wxiia3aI")}catch(n){console.error("Erro ao enviar o arquivo:",n)}}const a=async()=>{g.value=!0},y=async()=>{const{data:n,error:b,status:j}=await E(u,{method:"POST",body:{ato_id:c.ato_id,descricao:R.descricao,user_id:M("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$D2PdkmlmwW");j.value==="success"&&(d.success("Anexo registrado com sucesso!"),A.value.push(n.value))};async function x(n){n.excluido=!n.excluido;try{await E(`${V}/${n.id}`,{method:"PUT",body:JSON.stringify({excluido:n.excluido})},"$WyW0hasRPI")}catch(b){console.error("Erro ao excluir pessoa:",b)}}const I=()=>{const n=$.query.origem||"criar",b=$.query.id;n==="atualizar"?k.push(`/os/atualizar/${b}`):k.push("/os/criar-registro")};return(n,b)=>{const j=te;return f(),O(re,null,{default:o(()=>[e(D,null,{default:o(()=>[e(U,{cols:"5"},{default:o(()=>[e(Y,{modelValue:t(R).descricao,"onUpdate:modelValue":b[0]||(b[0]=l=>t(R).descricao=l),label:"Descrição"},null,8,["modelValue"])]),_:1}),_("div",{onClick:w,title:"Escanear"},Vt),_("div",{onClick:y,title:"Criar"},Pt)]),_:1}),e(pe,{headers:T,items:t(A),style:{height:"465px","max-width":"600px"}},{"item.actions":o(({item:l})=>[e(D,null,{default:o(()=>[_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:v=>a(l),title:"Visualizar Anexo"},At,8,Ct),_("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:v=>x(l),title:"Deletar Pessoa"},[l.excluido?(f(),G("img",St)):(f(),G("img",qt))],8,Tt)]),_:2},1024)]),_:1},8,["items"]),e(Ve,{modelValue:t(g),"onUpdate:modelValue":b[2]||(b[2]=l=>oe(g)?g.value=l:null),width:"600"},{default:o(()=>[e(ne,{"max-width":"600",title:"Anexo"},{default:o(()=>[e(W,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:b[1]||(b[1]=l=>g.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(j,{onClick:I},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>[B("Voltar")]),_:1})]),_:1})]),_:1})}}},Xt={__name:"procuracao",props:{ato_token:{type:String,required:!0}},setup(N){const c=N,i=r(null),d=r(null),k=r(null),$=r(null),p=r(null),u=r(!1),V=r(c.ato_token),g=({id:T,token:w})=>{i.value=T,d.value=w,u.value=!0},A=T=>{k.value=T},R=T=>{$.value=T};return(T,w)=>{const S=Xe,h=pt,a=vt,y=yt,x=bt,I=zt;return f(),O(ne,{width:"1300"},{default:o(()=>[e(Ue,{modelValue:t(p),"onUpdate:modelValue":w[0]||(w[0]=n=>oe(p)?p.value=n:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(J,{value:"dados"},{default:o(()=>[B("Dados")]),_:1}),t(u)?(f(),O(J,{key:0,value:"partes"},{default:o(()=>[B("Partes")]),_:1})):L("",!0),t(u)?(f(),O(J,{key:1,value:"minuta"},{default:o(()=>[B("Minuta")]),_:1})):L("",!0),t(u)?(f(),O(J,{key:2,value:"livro"},{default:o(()=>[B("Livro")]),_:1})):L("",!0),t(u)?(f(),O(J,{key:3,value:"observacao"},{default:o(()=>[B("Observações")]),_:1})):L("",!0),t(u)?(f(),O(J,{key:4,value:"anexo"},{default:o(()=>[B("Anexos")]),_:1})):L("",!0)]),_:1},8,["modelValue"]),e(Ne,{modelValue:t(p),"onUpdate:modelValue":w[1]||(w[1]=n=>oe(p)?p.value=n:null)},{default:o(()=>[e(K,{value:"dados"},{default:o(()=>[e(S,{onSaved:g,ato_token:t(V)},null,8,["ato_token"])]),_:1}),t(u)?(f(),O(K,{key:0,value:"partes"},{default:o(()=>[e(h,{ato_token:t(V),ato_id:t(i)},null,8,["ato_token","ato_id"])]),_:1})):L("",!0),t(u)?(f(),O(K,{key:1,value:"minuta"},{default:o(()=>[e(a,{onPage:A,onDoc:R,ato_token:t(d)},null,8,["ato_token"])]),_:1})):L("",!0),t(u)?(f(),O(K,{key:2,value:"livro"},{default:o(()=>[e(y,{pages:t(k),ato_token:t(d),document:t($)},null,8,["pages","ato_token","document"])]),_:1})):L("",!0),t(u)?(f(),O(K,{key:3,value:"observacao"},{default:o(()=>[e(x,{ato_id:t(i)},null,8,["ato_id"])]),_:1})):L("",!0),t(u)?(f(),O(K,{key:4,value:"anexo"},{default:o(()=>[e(I,{ato_token:t(d),ato_id:t(i)},null,8,["ato_token","ato_id"])]),_:1})):L("",!0)]),_:1},8,["modelValue"])]),_:1})}}};export{Xt as default};
