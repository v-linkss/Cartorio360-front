import{_ as S}from"./BGe95753.js";import{_ as A}from"./CASsHz-G.js";import{_ as I}from"./BVz1G1IN.js";import{_ as P}from"./N4ztoqAr.js";import{_ as J}from"./CwwZr2G0.js";import{_ as L}from"./DcQSwM0f.js";import{_ as q,a as G}from"./DJvq3mCv.js";import{r as l,B as W,h as p,w as n,k as X,o as i,b as r,a as s,s as x,i as a,j as k,N as H,d as K,t as Q,c as v,p as V,e as $}from"./CyqTGDD6.js";import{f as b}from"./1WtyFlJ1.js";import{u as Y}from"./Bj-2FKWl.js";import{V as Z}from"./BWG-R2YI.js";import{V as C}from"./D8o37Hsx.js";import{V as ee}from"./dVLXcY02.js";import"./B2Xl8e45.js";import"./BqKfKras.js";import"./CXZNUCN-.js";import"./C823Fyto.js";import"./D2CiNNq-.js";import"./BRDUiMuf.js";import"./BXOpNuad.js";import"./DkUuQiU9.js";import"./BRwqhO8g.js";import"./DqQ5MEt4.js";import"./Cxqkqjv8.js";const te={style:{width:"200px"}},oe={style:{width:"150px"}},ae={style:{width:"300px"}},se=["onClick"],ie={key:0,style:{width:"30px",height:"30px"},src:P,alt:"Visualizar",title:"Possui Ficha"},le={key:1,style:{width:"30px",height:"30px"},src:J,alt:"Visualizar",title:"N達o Ficha"},ne=["onClick"],re=["onClick"],ue={key:0,style:{width:"30px",height:"30px"},src:q,alt:"Visualizar",title:"Reativar"},de={key:1,src:G,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Me={__name:"index",setup(ce){const f=X(),F=`${f.public.auth}/service/gerencia/pesquisarPessoas`,N=`${f.public.auth}/service/gerencia/updatePessoa`,z=`${f.public.managemant}/download`,m=l(!1),h=l(!1),_=l([]),D=l(null),y=l({}),u=l(null),d=l(null),c=l(null),T=[{title:"Documento",value:"doc_identificacao",width:"190px"},{title:"Cart達o",value:"numero_ficha"},{title:"Nome/Raz達o Social",value:"nome",width:"400px"},{value:"actions"}],j=async()=>{pending.value=!0;const{data:t,status:e}=await b(`${F}`,{method:"POST",body:{cartorio_token:$("user-data").value.cartorio_token,nome:u.value?u.value:null,documento:d.value?d.value.replace(/\D/g,""):null,numero_ficha:Number(c.value)?Number(c.value):null}});e.value==="success"&&(pending.value=!1,pessoasItems.value=t.value)};function E(t){if(!t)return"";const e=t.replace(/\D/g,"");return e.length===11?e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):e.length===14?e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):t}const U=async(t,e)=>{pending.value=!0;const{data:g}=await Y(z,{method:"POST",body:{bucket:$("user-data").value.cartorio_token,path:t}},"$Jxa9V4cJXG");_.value=g.value,D.value=t,y.value=e,pending.value=!1,console.log("Normal"),m.value=!0};async function M(t){t.excluido=!t.excluido;try{await b(`${N}/${t.id}`,{method:"PUT",body:{excluido:t.excluido}})}catch(e){console.error("Erro ao excluir pessoa:",e)}}function R(t){router.push({path:`/pessoas/atualizar/${t}`})}return(t,e)=>{const g=S,B=A,O=W("ModalFichaEspecial");return i(),p(Z,{class:"mt-5"},{default:n(()=>[r(g,{to:"/pessoas/cadastro"},{default:n(()=>e[6]||(e[6]=[s("img",{style:{cursor:"pointer"},src:I,alt:"Cadastro"},null,-1)])),_:1}),r(C,{style:{gap:"1rem"}},{default:n(()=>[s("div",te,[r(x,{class:"mt-7 mb-4",modelValue:a(d),"onUpdate:modelValue":e[0]||(e[0]=o=>k(d)?d.value=o:null),label:"Documento","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),s("div",oe,[r(x,{class:"mt-7 mb-4",modelValue:a(c),"onUpdate:modelValue":e[1]||(e[1]=o=>k(c)?c.value=o:null),label:"Cart達o","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),s("div",ae,[r(x,{class:"mt-7 mb-4",modelValue:a(u),"onUpdate:modelValue":e[2]||(e[2]=o=>k(u)?u.value=o:null),label:"Pessoa","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),s("div",{style:{cursor:"pointer"},onClick:e[3]||(e[3]=o=>j()),title:"Visualizar",class:"mt-7"},e[7]||(e[7]=[s("img",{style:{width:"40px",height:"40px"},src:P,alt:"Visualizar",title:"Possui Ficha"},null,-1)]))]),_:1}),t.pending?(i(),p(H,{key:0,class:"loading-spinner",indeterminate:"",size:"80"})):(i(),p(ee,{key:1,density:"compact",headers:T,items:t.pessoasItems,"item-key":"id","items-per-page-options":[10,25,50]},{"item.doc_identificacao":n(({item:o})=>[K(Q(E(o.documento)),1)]),"item.actions":n(({item:o})=>[r(C,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:n(()=>[s("div",{style:{cursor:"pointer"},onClick:w=>U(o.link_ficha,o),title:"Visualizar"},[o.link_ficha?(i(),v("img",ie)):(i(),v("img",le))],8,se),s("div",{style:{cursor:"pointer"},onClick:w=>R(o.id),title:"Atualizar"},e[8]||(e[8]=[s("img",{style:{width:"30px",height:"30px"},src:L,alt:"Atualizar"},null,-1)]),8,ne),s("div",{style:{cursor:"pointer"},onClick:w=>M(o),title:"Deletar"},[o.excluido?(i(),v("img",ue)):(i(),v("img",de))],8,re)]),_:2},1024)]),_:1},8,["items"])),a(m)&&!a(h)?(i(),p(B,{key:2,show:a(m),"link-view":a(_),"is-view":!0,"pessoa-obj":a(y),onClose:e[4]||(e[4]=o=>m.value=!1)},null,8,["show","link-view","pessoa-obj"])):V("",!0),a(h)?(i(),p(O,{key:3,show:a(h),"link-view":a(_),"is-view":!0,"pessoa-obj":a(y),onClose:e[5]||(e[5]=o=>h.value=!1)},null,8,["show","link-view","pessoa-obj"])):V("",!0)]),_:1})}}};export{Me as default};
