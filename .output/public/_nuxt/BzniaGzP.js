import{_ as G}from"./pPK50FX-.js";import{_ as I}from"./KyMC6Avm.js";import{_ as J}from"./BVz1G1IN.js";import{_ as O}from"./CEtB0hvd.js";import{_ as j}from"./smzPDj_D.js";import{_ as q}from"./zEGNz7MS.js";import{_ as K,a as W}from"./DJvq3mCv.js";import{r,G as X,n as H,A as Q,s as a,p as $,w as n,K as w,q as Y,o as l,b as s,a as i,V as y,C as g,d as Z,t as ee,c as h,u as te}from"./BFOPKTQQ.js";import{f as C}from"./CIplZ_a8.js";import{u as oe}from"./CxosONGa.js";import{V as ae}from"./Ccn76A-l.js";import{V as b}from"./D6Al6rGQ.js";import{V as ie}from"./CDDEmOH7.js";import"./D3SemnfI.js";import"./D4yTIS_G.js";import"./BWHacBBK.js";import"./BZ9ThOTl.js";import"./BVi_RDfK.js";import"./BhrZjC-c.js";import"./D61fb42w.js";const se={style:{width:"200px"}},ne={style:{width:"150px"}},le={style:{width:"300px"}},re=["onClick"],ce={key:0,style:{width:"30px",height:"30px"},src:O,alt:"Visualizar",title:"Possui Ficha"},de={key:1,style:{width:"30px",height:"30px"},src:j,alt:"Visualizar",title:"N達o Ficha"},ue=["onClick"],me=["onClick"],pe={key:0,style:{width:"30px",height:"30px"},src:K,alt:"Visualizar",title:"Reativar"},_e={key:1,src:W,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Ae={__name:"index",async setup(he){let c,k;const f=Y(),z=`${f.public.auth}/service/gerencia/getAllPessoa`,D=`${f.public.auth}/service/gerencia/updatePessoa`,F=`${f.public.managemant}/download`,d=r(!1),V=r(null),N=X(),u=r(""),m=r(""),p=r(""),P=[{title:"Documento",value:"doc_identificacao",width:"190px"},{title:"Cart達o",value:"numero_ficha"},{title:"Nome/Raz達o Social",value:"nome",width:"400px"},{value:"actions"}],{data:T,status:S}=([c,k]=H(()=>C(`${z}?pageNumber=1&pageSize=1000000`)),c=await c,k(),c),U=Q(()=>{const t=e=>String(e||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return T.value.data.filter(e=>{const x=t(e.doc_identificacao),v=t(e.nome),o=t(String(e.numero_ficha)),_=x.includes(t(m.value)),L=v.includes(t(u.value)),M=o.includes(t(String(p.value)));return _&&L&&M})});function R(t){if(!t)return"";const e=t.replace(/\D/g,"");return e.length===11?e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):e.length===14?e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):t}const A=async t=>{d.value=!0;const{data:e}=await oe(F,{method:"POST",body:{bucket:te("user-data").value.cartorio_token,path:t}},"$Jxa9V4cJXG");V.value=e.value};async function B(t){t.excluido=!t.excluido;try{await C(`${D}/${t.id}`,{method:"PUT",body:{excluido:t.excluido}})}catch(e){console.error("Erro ao excluir pessoa:",e)}}function E(t){N.push({path:`/pessoas/atualizar/${t}`})}return(t,e)=>{const x=G,v=I;return a(S)==="success"?(l(),$(ae,{key:0,class:"mt-5"},{default:n(()=>[s(x,{to:"/pessoas/cadastro"},{default:n(()=>e[4]||(e[4]=[i("img",{style:{cursor:"pointer"},src:J,alt:"Cadastro"},null,-1)])),_:1}),s(b,{style:{gap:"1rem"}},{default:n(()=>[i("div",se,[s(y,{class:"mt-7 mb-4",modelValue:a(m),"onUpdate:modelValue":e[0]||(e[0]=o=>g(m)?m.value=o:null),label:"Documento","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),i("div",ne,[s(y,{class:"mt-7 mb-4",modelValue:a(p),"onUpdate:modelValue":e[1]||(e[1]=o=>g(p)?p.value=o:null),label:"Cart達o","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),i("div",le,[s(y,{class:"mt-7 mb-4",modelValue:a(u),"onUpdate:modelValue":e[2]||(e[2]=o=>g(u)?u.value=o:null),label:"Pessoa","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),s(ie,{density:"compact",headers:P,items:a(U),"item-key":"id","items-per-page-options":[10,25,50]},{"item.doc_identificacao":n(({item:o})=>[Z(ee(R(o.doc_identificacao)),1)]),"item.actions":n(({item:o})=>[s(b,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:n(()=>[i("div",{style:{cursor:"pointer"},onClick:_=>A(o.link_ficha),title:"Visualizar"},[o.link_ficha?(l(),h("img",ce)):(l(),h("img",de))],8,re),i("div",{style:{cursor:"pointer"},onClick:_=>E(o.id),title:"Atualizar"},e[5]||(e[5]=[i("img",{style:{width:"30px",height:"30px"},src:q,alt:"Atualizar"},null,-1)]),8,ue),i("div",{style:{cursor:"pointer"},onClick:_=>B(o),title:"Deletar"},[o.excluido?(l(),h("img",pe)):(l(),h("img",_e))],8,me)]),_:2},1024)]),_:1},8,["items"]),a(d)?(l(),$(v,{key:0,show:a(d),"link-view":a(V),"is-view":!0,onClose:e[3]||(e[3]=o=>d.value=!1)},null,8,["show","link-view"])):w("",!0)]),_:1})):w("",!0)}}};export{Ae as default};
