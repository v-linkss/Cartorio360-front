import{_ as oe}from"./BQdu-MjU.js";import{u as Q,n as ee,q as K,r as n,s as le,o as S,v as ae,w as t,b as e,x as o,V as Z,y as R,d as O,z as W,A as N,B as J,a as m,C as _e,c as B,D as re,E as je,F as Ie,G as Me,H as Ue,I as xe,J as ve,K as he,t as me}from"./B73TOdfF.js";import{u as b}from"./DmwNiiQq.js";import{V as D}from"./BQbbf3ha.js";import{V as j}from"./BLuMfv6e.js";import{V as pe}from"./DKpotyB6.js";import{V as ie}from"./CvjWO6GK.js";import{_ as Re}from"./4GP--Tkn.js";import{_ as Be,a as Fe,b as Ne,T as Le,W as Ge,r as $e,D as ke,c as He,d as Je,e as Ke}from"./BZLtyMt-.js";import{_ as fe}from"./CIJV25fz.js";import{_ as ne,a as ge}from"./HBU26js5.js";import{_ as ye,a as We}from"./Bb4kvsH0.js";import{V as we,a as ce}from"./DxZzxaR-.js";import{_ as be}from"./DfjuBLsA.js";import{c as Xe,r as Ye,u as Ze}from"./C3eQSpO0.js";import{V as Qe,a as X,b as et,c as Y}from"./B-Slotpd.js";import"./CFFC5vMD.js";const tt={__name:"Dados",props:{item_dados:{type:Array,required:!0},item_situacoes:{type:Array,required:!0}},setup(F){const r=F,{$toast:x}=Q(),g=W(),i=ee(),l=K(),y=`${g.public.managemant}/updateAtos`,P=n(r.item_situacoes),w=le({dt_abertura:r.item_dados[0].dt_abertura||null,status:r.item_dados[0].status||null,mne:r.item_dados[0].mne||null});async function I(){const{data:p,error:c,status:V}=await b(`${y}/${l.query.id}`,{method:"PUT",body:{status:w.status,mne:w.mne}},"$EIT5jtTUdX");V.value==="success"&&x.success("Situação Atualizada com sucesso")}const A=()=>{const p=l.query.origem||"criar",c=l.query.id;p==="atualizar"?i.push(`/os/atualizar/${c}`):i.push("/os/criar-registro")};return(p,c)=>{const V=oe;return S(),ae(ie,null,{default:t(()=>[e(D,{class:"mt-5"},{default:t(()=>[e(j,{cols:"3"},{default:t(()=>[e(pe,{label:"Situação",modelValue:o(w).status,"onUpdate:modelValue":c[0]||(c[0]=$=>o(w).status=$),items:o(P),"item-title":"descricao","item-value":"descricao",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(j,{cols:"5"},{default:t(()=>[e(Z,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:o(w).mne,"onUpdate:modelValue":c[1]||(c[1]=$=>o(w).mne=$)},null,8,["modelValue"])]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(j,{cols:"2"},{default:t(()=>[e(Z,{modelValue:o(w).dt_abertura,"onUpdate:modelValue":c[2]||(c[2]=$=>o(w).dt_abertura=$),type:"date",label:"Data Lavratura",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(D,{class:"mb-3"},{default:t(()=>[e(V,{onClick:A},{default:t(()=>[e(R,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1}),e(R,{class:"ml-10",onClick:I,size:"large",color:"green"},{default:t(()=>[O("Salvar")]),_:1})]),_:1})]),_:1})}}},ot=["onClick"],at=m("img",{style:{width:"30px",height:"30px"},src:fe,alt:"Visualizar"},null,-1),st=[at],rt=["onClick"],nt=m("img",{style:{width:"30px",height:"30px"},src:We,alt:"Visualizar"},null,-1),lt=[nt],it=["onClick"],ct={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},ut={key:1,src:ge,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},dt=["onClick"],mt=m("img",{style:{width:"30px",height:"30px"},src:Ne,alt:"Visualizar"},null,-1),pt=[mt],_t={__name:"Partes",props:{ato_token:{type:String,required:!0}},async setup(F){let r,x;const g=ee(),i=K(),l=W(),{$toast:y}=Q(),P=`${l.public.managemant}/pesquisarPessoas`,w=`${l.public.managemant}/listarPapeis`,I=`${l.public.managemant}/getLinkTipo`,A=`${l.public.managemant}/createAtosPessoa`,p=`${l.public.managemant}/updateAtosPessoa`,c=`${l.public.managemant}/getAtosPessoaById`,V=n(N("user-data").value.cartorio_token),$=n([]),E=n([]),M=n([]),d=n(!1),v=n(!1),s=n(!1),_=n(!1),q=n(null),z=n(null),a=n(null),f=n(null);n(null);const U=n("xkyaA"),k=n(null),L=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],T=le({papeis:null,nome:null,pessoa:null,documento:null}),{data:Ve}=([r,x]=J(()=>b(w,{method:"POST",body:{tipo_ato_token:"xkyaA"}},"$acoiTIUp00")),r=await r,x(),r);M.value=Ve.value;const ue=async()=>{const{data:h}=await b(`${c}/${i.query.ato_id}`,{method:"GET"},"$ypnU9hCpVn"),te=(se=>se.map(G=>({...G,pessoa:{...G.pessoa,documento:G.pessoa.doc_identificacao},papel:{...G.partes_tipos}})))(h.value);E.value=te};ue();async function Ce(){try{const{data:h,error:u}=await b(P,{method:"POST",body:{cartorio_token:V.value,documento:T.documento,nome:T.nome}},"$pr30MyPXfY");h.value.length>0?($.value=h.value,T.pessoa=$.value[0]):$.value=[]}catch(h){console.error("Erro na requisição",h)}}const Pe=()=>{v.value=!0},Ae=async()=>{await ue()},Ee=async()=>{await ue()},Te=async()=>{const h={pessoa:T.pessoa,papel:M.value.find(H=>H.id===T.papeis),representante:{nome:null}},u=await b(`${c}/${i.query.ato_id}`,{method:"GET"},"$scHdIvxj2D");for(const H of u.data.value)if(H.pessoa_id===T.pessoa.id&&H.ato_id===Number(i.query.ato_id)&&H.tipo_parte_id===T.papeis){y.error("Pessoa Já Registrada Com Esse Papel!");return}const{data:te,error:se,status:G}=await b(A,{method:"POST",body:{ato_id:i.query.ato_id,pessoa_id:T.pessoa.id,tipo_parte_id:T.papeis,user_id:N("user-data").value.usuario_id}},"$18isAgOJxG");G.value==="success"&&(a.value=te.value.id,y.success("Pessoa Registrada com Sucesso!"),E.value.push(h))},qe=async h=>{s.value=!0,k.value=null;const{data:u}=await b(`${I}`,{method:"POST",body:{id:h.pessoa.id,tipo:"ficha"}},"$hmDzSF3F61");u.value&&u.value.link?k.value=`data:image/jpeg;base64,${u.value.link}`:k.value=null},ze=h=>{console.log(h.id)},Oe=h=>{_.value=!0,f.value=h.id,z.value=h.pessoa.nome};async function De(h){h.excluido=!h.excluido;try{await b(`${p}/${h.id}`,{method:"PUT",body:JSON.stringify({excluido:h.excluido})},"$l09I6nLRfk")}catch(u){console.error("Erro ao excluir pessoa:",u)}}const Se=()=>{const h=i.query.origem||"criar",u=i.query.id;h==="atualizar"?g.push(`/os/atualizar/${u}`):g.push("/os/criar-registro")};return(h,u)=>{const te=Re,se=Be,G=Fe,H=oe;return S(),ae(ie,null,{default:t(()=>[e(D,{class:"mt-5"},{default:t(()=>[e(j,{cols:"3"},{default:t(()=>[e(Z,{label:"Documento",modelValue:o(T).documento,"onUpdate:modelValue":u[0]||(u[0]=C=>o(T).documento=C)},null,8,["modelValue"])]),_:1}),e(j,{cols:"4"},{default:t(()=>[e(Z,{label:"Pessoa",modelValue:o(T).nome,"onUpdate:modelValue":u[1]||(u[1]=C=>o(T).nome=C)},null,8,["modelValue"])]),_:1}),m("div",null,[m("img",{class:"mt-3",src:fe,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Ce})]),m("div",null,[m("img",{class:"mt-3 ml-2",src:ne,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Pe})])]),_:1}),e(D,null,{default:t(()=>[e(j,{cols:"4"},{default:t(()=>[e(pe,{label:"Selecione a Pessoa",modelValue:o(T).pessoa,"onUpdate:modelValue":u[2]||(u[2]=C=>o(T).pessoa=C),items:o($),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(j,{cols:"3"},{default:t(()=>[e(pe,{label:"Papel",modelValue:o(T).papeis,"onUpdate:modelValue":u[3]||(u[3]=C=>o(T).papeis=C),items:o(M),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),m("div",null,[m("img",{class:"mt-3",src:ne,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Te})])]),_:1}),e(D,null,{default:t(()=>[e(j,null,{default:t(()=>[e(_e,{style:{height:"465px"},headers:L,items:o(E)},{"item.actions":t(({item:C})=>[e(D,null,{default:t(()=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:de=>qe(C),title:"Visualizar Ficha"},st,8,ot),m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:de=>Oe(C),class:"mr-2",title:"Alterar Papel"},lt,8,rt),m("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:de=>De(C),title:"Deletar Pessoa"},[C.excluido?(S(),B("img",ct)):(S(),B("img",ut))],8,it),m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:de=>ze(C),title:"Selecionar Representante"},pt,8,dt)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(te,{show:o(v),onClose:u[4]||(u[4]=C=>v.value=!1)},null,8,["show"]),e(se,{representante_nome:o(z),representantes:o(q),ato_id:o(a),show:o(d),onClose:u[5]||(u[5]=C=>d.value=!1),onUpdateRepresentante:Ee},null,8,["representante_nome","representantes","ato_id","show"]),e(G,{representante_nome:o(z),ato_token:o(U),ato_id:o(f),show:o(_),onClose:u[6]||(u[6]=C=>_.value=!1),onUpdatePapel:Ae},null,8,["representante_nome","ato_token","ato_id","show"]),e(we,{modelValue:o(s),"onUpdate:modelValue":u[8]||(u[8]=C=>re(s)?s.value=C:null),width:"600"},{default:t(()=>[e(ce,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(je,{src:o(k)},null,8,["src"]),e(R,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:u[7]||(u[7]=C=>s.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(D,null,{default:t(()=>[e(H,{onClick:Se},{default:t(()=>[e(R,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},vt={key:0,class:"loading-overlay"},ft={class:"mt-4 mb-4 justify-end fixed-buttons",style:{bottom:"0",left:"0",width:"100%","background-color":"#fff",padding:"16px","z-index":"1000"}},gt="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",yt={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(F,{emit:r}){const x=F;Ie("DocumentEditorContainer",[Le,Ge]);const g=W(),{$toast:i}=Q(),l=ee(),y=K(),P=r;$e(`${g.public.docEditor}`);const w=`${g.public.managemant}/download`,I=`${g.public.managemant}/upload`,A=n(null),p=n(!1),c=async d=>{try{const v=await fetch(d);if(!v.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await v.blob()}catch(v){return console.error(v),i.error("Erro ao carregar o documento inicial."),null}},V=async()=>{p.value=!0;try{const{data:d,status:v}=await b(w,{method:"POST",body:{bucket:"qvgjz",path:"ato/fKumj/66398.sfdt"}},"$5jxI4TvFse"),s=d.value,_=await c(s);if(_){const q=new FileReader;q.onload=()=>{const z=q.result;A.value.ej2Instances.documentEditor.open(z)},q.readAsText(_)}else i.error("Erro ao carregar o documento do MinIO.")}catch(d){console.error("Erro ao carregar o documento:",d),i.error("Erro ao carregar o documento.")}finally{p.value=!1}},$=async()=>{const d=A.value.ej2Instances.documentEditor;await d.saveAsBlob("Docx");const v=await d.saveAsBlob("Sfdt"),s=new FileReader;s.onload=()=>{const _=s.result,z=A.value.ej2Instances.documentEditor.pageCount;P("doc",_),P("page",z)},s.readAsText(v)},E=async()=>{p.value=!0;try{const v=await A.value.ej2Instances.documentEditor.saveAsBlob("Docx"),s=new FormData;s.append("file",v,"anexo.docx"),s.append("cartorio_token",N("user-data").value.cartorio_token),s.append("token",x.ato_token),s.append("tipo","ato_minuta");const{data:_,status:q}=await b(I,{method:"POST",body:s},"$dvNFfvmIJC");if(q.value==="success"){i.success("Documento enviado!");const a=A.value.ej2Instances.documentEditor.pageCount;$(),P("page",a)}else i.error("Erro ao enviar documento para o sistema.")}catch(d){i.error("Erro ao salvar documento."),console.error(d)}finally{p.value=!1}},M=()=>{const d=y.query.origem||"criar",v=y.query.id;d==="atualizar"?l.push(`/os/atualizar/${v}`):l.push("/os/criar-registro")};return Me(async()=>{await V(),$()}),(d,v)=>{const s=oe;return S(),B(ve,null,[e(o(ke),{height:"900px",ref_key:"documentEditorContainer",ref:A,serviceUrl:gt,enableToolbar:!0,enableWordExport:!0},null,512),o(p)?(S(),B("div",vt,[e(Ue,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):xe("",!0),m("div",ft,[e(R,{size:"large",color:"green",onClick:E,disabled:o(p)},{default:t(()=>[O(" Salvar ")]),_:1},8,["disabled"]),e(s,{class:"ml-4"},{default:t(()=>[e(R,{size:"large",onClick:M,color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})])],64)}}},ht={class:"d-flex align-center justify-center"},bt=["innerHTML"],xt={__name:"Livro",props:{pages:{type:Number,required:!0},document:{type:String,required:!0}},async setup(F){let r,x;const g=F,i=W();$e(`${i.public.docEditor}`);const{$toast:l}=Q(),y=ee(),P=K(),w=`${i.public.managemant}/download`,I=`${i.public.managemant}/lavrarAto`,A=n("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),p=n(!1),c=n(null),V=n(null),$=n(null);[r,x]=J(()=>b(w,{method:"POST",body:{bucket:"qvgjz",path:"ato/fKumj/ato_minuta-2024-12-13T14:57:36.974Z"}},"$FnEbAJEARP")),r=await r,x();const E=async()=>{try{const{data:s,status:_}=await b(I,{method:"POST",body:{ato_token:P.query.ato_token_edit,qtd_paginas:g.pages}},"$7ljqltMqa0");_.value==="success"?(c.value=s.value,V.value=s.value[0].selo,l.success("Ato lavrado com sucesso!")):l.error("Falha ao lavrar o ato.")}catch{l.error("Erro ao conectar com o servidor.")}},M=()=>{p.value=!1,E()},d=function(){$.value.ej2Instances.documentEditor.open(g.document)},v=()=>{const s=P.query.origem||"criar",_=P.query.id;s==="atualizar"?y.push(`/os/atualizar/${_}`):y.push("/os/criar-registro")};return(s,_)=>{const q=Je;return S(),B(ve,null,[e(D,null,{default:t(()=>[e(j,null,{default:t(()=>[e(o(ke),{restrictEditing:!0,enableToolbar:!1,created:g.document?d:null,ref_key:"documentEditorContainer",ref:$,height:"850px",width:"850px"},null,8,["created"])]),_:1}),e(j,null,{default:t(()=>[m("div",ht,[m("div",null,[m("img",{onClick:_[0]||(_[0]=z=>p.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:He}),o(c)?(S(),ae(ce,{key:0,class:"ml-8 mt-5"},{default:t(()=>[e(D,{"no-gutters":""},{default:t(()=>[e(j,null,{default:t(()=>[e(he,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[O(" Livro: "+me(o(c)[0].livro_numero),1)]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(he,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[O(" Folhas : "+me(o(c)[0].pagina_inicial)+" Á "+me(o(c)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),m("div",{innerHTML:o(V)},null,8,bt)]),_:1})):xe("",!0)])])]),_:1})]),_:1}),e(R,{color:"red",size:"large",onClick:v},{default:t(()=>[O("Voltar")]),_:1}),e(q,{show:o(p),condMessage:o(A),onClose:_[1]||(_[1]=z=>p.value=!1),onConfirm:M},null,8,["show","condMessage"])],64)}}},$t=["onClick"],kt={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},wt={key:1,src:ge,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Vt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(F){let r,x;const g=ee(),i=K(),l=W(),{$toast:y}=Q(),P=`${l.public.managemant}/listarEscrevente`;`${l.public.managemant}`;const w=`${l.public.managemant}/createAtosObservacao`,I=`${l.public.managemant}/updateAtosObservacao`,A=`${l.public.managemant}/getAtosObservacaoById`,p=n(N("user-data").value.cartorio_token),c=n([]),V=n([]),$=[{title:"Data",align:"start",key:"created"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],E=le({observacao:""}),M={observacao:{required:Xe.withMessage("O campo é obrigatório",Ye)}},d=Ze(M,E),{data:v}=([r,x]=J(()=>b(`${A}/${i.query.ato_id}`,{method:"GET"},"$HyzoO40swN")),r=await r,x(),r);console.log(v.value),c.value=v.value.map(a=>({...a,created:be(a.created,"dd/mm/yyyy hh:mm")}));async function s(){if(E.observacao.trim()===""){y.error("O campo de observação está vazio.");return}if(await d.value.$validate()){const{data:a,error:f,status:U}=await b(w,{method:"POST",body:{ato_id:i.query.ato_id,observacao:E.observacao,user_id:N("user-data").value.usuario_id}},"$gnHMo4uCXD");U.value==="success"&&(c.value.push({created:be(a.value.created,"dd/mm/yyyy hh:mm"),observacao:a.value.observacao,id:a.value.id,escrevente:N("user-data").value.nome}),E.observacao="",y.success("Observação registrada com sucesso"))}else y.error("Preencha os campos obrigatórios.")}async function _(a){a.excluido=!a.excluido;try{await b(`${I}/${a.id}`,{method:"PUT",body:JSON.stringify({excluido:a.excluido})},"$sP9AKdd3Ky")}catch(f){console.error("Erro ao excluir observação:",f)}}const{data:q}=([r,x]=J(()=>b(P,{method:"POST",body:{cartorio_token:p}},"$HL9pndqGh0")),r=await r,x(),r);V.value=q.value[0].func_json_escreventes;const z=()=>{const a=i.query.origem||"criar",f=i.query.id;a==="atualizar"?g.push(`/os/atualizar/${f}`):g.push("/os/criar-registro")};return(a,f)=>{const U=oe;return S(),ae(ie,null,{default:t(()=>[e(D,{class:"mt-5"},{default:t(()=>[e(Z,{label:"Observação",modelValue:E.observacao,"onUpdate:modelValue":f[0]||(f[0]=k=>E.observacao=k),required:"","error-messages":o(d).observacao.$errors.length>0?o(d).observacao.$errors.map(k=>k.$message):[],onBlur:o(d).observacao.$touch,onInput:o(d).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),m("div",null,[m("img",{class:"btn-pointer ml-2",src:ne,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:s})])]),_:1}),e(D,null,{default:t(()=>[e(j,null,{default:t(()=>[e(_e,{style:{height:"465px"},headers:$,items:c.value},{"item.actions":t(({item:k})=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:L=>_(k),title:"Deletar Observação"},[k.excluido?(S(),B("img",kt)):(S(),B("img",wt))],8,$t)]),_:1},8,["items"])]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(U,{onClick:z},{default:t(()=>[e(R,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Ct=m("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Ke,alt:"Escanear"},null,-1),Pt=[Ct],At=m("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ne,alt:"Criar"},null,-1),Et=[At],Tt=["onClick"],qt=m("img",{style:{width:"30px",height:"30px"},src:fe,alt:"Visualizar"},null,-1),zt=[qt],Ot=["onClick"],Dt={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},St={key:1,src:ge,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},jt={__name:"Anexos",async setup(F){let r,x;const g=W(),{$toast:i}=Q(),l=ee(),y=K(),P=`${g.public.biometria}/run-scanner`,w=`${g.public.managemant}/atos_anexos`,I=`${g.public.managemant}/atos_anexos`,A=`${g.public.managemant}/atos_anexos`,p=n(!1),c=n([]),V=le({descricao:""}),$=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}],{data:E}=([r,x]=J(()=>b(`${A}/${y.query.ato_id}`,{method:"GET"},"$AOZpbz65MA")),r=await r,x(),r);c.value=E.value;async function M(){try{await d(),await v()}catch(a){console.error("Erro ao executar scanner ou listar arquivos:",a)}}async function d(){try{const{data:a}=await b(P,{method:"GET"},"$KttjFhHivJ")}catch(a){i.error("Erro ao acionar o scanner:",a)}}async function v(){try{const{data:a,status:f}=await b("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:y.query.ato_token_edit,cartorio_token:N("user-data").value.cartorio_token}},"$TqQrsgxUkd")}catch(a){console.error("Erro ao enviar o arquivo:",a)}}const s=async()=>{p.value=!0},_=async()=>{const{data:a,error:f,status:U}=await b(w,{method:"POST",body:{ato_id:y.query.ato_id,descricao:V.descricao,user_id:N("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$KDhIYzGKzM");U.value==="success"&&(i.success("Anexo registrado com sucesso!"),c.value.push(a.value))};async function q(a){a.excluido=!a.excluido;try{await b(`${I}/${a.id}`,{method:"PUT",body:JSON.stringify({excluido:a.excluido})},"$cdoFBGO0Ti")}catch(f){console.error("Erro ao excluir pessoa:",f)}}const z=()=>{const a=y.query.origem||"criar",f=y.query.id;a==="atualizar"?l.push(`/os/atualizar/${f}`):l.push("/os/criar-registro")};return(a,f)=>{const U=oe;return S(),ae(ie,null,{default:t(()=>[e(D,null,{default:t(()=>[e(j,{cols:"5"},{default:t(()=>[e(Z,{modelValue:o(V).descricao,"onUpdate:modelValue":f[0]||(f[0]=k=>o(V).descricao=k),label:"Descrição"},null,8,["modelValue"])]),_:1}),m("div",{onClick:M,title:"Escanear"},Pt),m("div",{onClick:_,title:"Criar"},Et)]),_:1}),e(_e,{headers:$,items:o(c),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:k})=>[e(D,null,{default:t(()=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:L=>s(k),title:"Visualizar Anexo"},zt,8,Tt),m("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:L=>q(k),title:"Deletar Pessoa"},[k.excluido?(S(),B("img",Dt)):(S(),B("img",St))],8,Ot)]),_:2},1024)]),_:1},8,["items"]),e(we,{modelValue:o(p),"onUpdate:modelValue":f[2]||(f[2]=k=>re(p)?p.value=k:null),width:"600"},{default:t(()=>[e(ce,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(R,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:f[1]||(f[1]=k=>p.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(U,{onClick:z},{default:t(()=>[e(R,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})}}},It=m("h1",{class:"mb-2"},"Procuração",-1),to={__name:"[id]",async setup(F){let r,x;const g=n(null),i=n(null),l=n(null),y=W(),P=K(),w=`${y.public.managemant}/listarSituacoes`,I=`${y.public.managemant}/getAtos`,A=n(N("user-data").value.cartorio_token),p=P.query.id?{ato_token:"xkyaA"}:{cartorio_token:A},c=n([]),V=n([]);async function $(){try{const{data:s}=await b(`${I}/${P.query.ato_id}`,{method:"GET"},"$j0JpHHj7PB");V.value=s.value}catch(s){console.log(s)}}[r,x]=J(()=>$()),await r,x();const{data:E,status:M}=([r,x]=J(()=>b(w,{method:"POST",body:p},"$mGbp7gAEjS")),r=await r,x(),r);c.value=E.value;const d=s=>{g.value=s},v=s=>{i.value=s};return(s,_)=>{const q=tt,z=_t,a=yt,f=xt,U=Vt,k=jt;return S(),B(ve,null,[It,e(ce,{width:"1300"},{default:t(()=>[e(Qe,{modelValue:o(l),"onUpdate:modelValue":_[0]||(_[0]=L=>re(l)?l.value=L:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(X,{value:"dados"},{default:t(()=>[O("Dados")]),_:1}),e(X,{value:"partes"},{default:t(()=>[O("Partes")]),_:1}),e(X,{value:"minuta"},{default:t(()=>[O("Minuta")]),_:1}),e(X,{value:"livro"},{default:t(()=>[O("Livro")]),_:1}),e(X,{value:"observacao"},{default:t(()=>[O("Observações")]),_:1}),e(X,{value:"anexo"},{default:t(()=>[O("Anexos")]),_:1})]),_:1},8,["modelValue"]),e(et,{modelValue:o(l),"onUpdate:modelValue":_[1]||(_[1]=L=>re(l)?l.value=L:null)},{default:t(()=>[e(Y,{value:"dados"},{default:t(()=>[e(q,{item_dados:o(V),item_situacoes:o(c)},null,8,["item_dados","item_situacoes"])]),_:1}),e(Y,{value:"partes"},{default:t(()=>[e(z)]),_:1}),e(Y,{value:"minuta"},{default:t(()=>[e(a,{onPage:d,onDoc:v})]),_:1}),e(Y,{value:"livro"},{default:t(()=>[e(f,{pages:o(g),document:o(i)},null,8,["pages","document"])]),_:1}),e(Y,{value:"observacao"},{default:t(()=>[e(U)]),_:1}),e(Y,{value:"anexo"},{default:t(()=>[e(k)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{to as default};
