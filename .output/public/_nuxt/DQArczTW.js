import{_ as Q,a as Z}from"./D6yMoPHy.js";import{C as ee}from"./BO_n6CzT.js";import{_ as ae,D as oe,u as te,r as i,B as se,h as y,w as s,k as le,o as b,b as a,a as R,s as U,i as n,j as S,V as f,S as ne,d as u,L as C,p as h,e as D}from"./DYMmUBAr.js";import{f as A}from"./DDuFch-R.js";import{u as re}from"./yjd20MWW.js";import{u as ie}from"./tL7cvWyf.js";import{V as ue}from"./B_BYnFX0.js";import{V as de}from"./CuKRP3YH.js";import{V as B}from"./ROy7KZU0.js";import{V as K}from"./BGI268yP.js";import{V as w,b as me,a as ce,c as pe}from"./NbaYkBTN.js";import{V as fe}from"./8rzfGEg_.js";import"./TDtrdbi3.js";import"./CuU4Acx3.js";import"./CsEHQ06P.js";import"./7x27txmp.js";const ve={__name:"index",setup(ge){const P=oe(),{$toast:N}=te(),v=i({senha:"",email:""}),x=i(!1),c=i(!1),O=i(!1),T=i(!1),$=i(!1),g=i(!1),p=i(!1),k=i(""),_=()=>{O.value=!1,T.value=!1,g.value=!1,$.value=!1,c.value=!1},E=le(),J=`${E.public.auth}/service/gerencia/listarMenu`,M=E.public.auth,j=E.public.managemant,L=E.public.docEditor;i("");const F=async()=>{const{data:o,status:e,error:l}=await A(`${M}/login`,{method:"POST",body:{senha:v.value.senha,email:v.value.email}});return{data:o==null?void 0:o.value,status:e==null?void 0:e.value,error:l==null?void 0:l.value}};function q(o){const e=JSON.stringify(o);return ee.AES.encrypt(e,L).toString()}const z=o=>{const e=D("user-data");e.value=JSON.stringify({nome:o.nome,usuario_id:o.id,cartorio_id:o.cartorios[0].cartorio_id,cartorio_nome:o.cartorios[0].cartorio_descricao,cartorio_token:o.cartorios[0].cartorio_token,cpf:o.cpf?q(o.cpf):null});const l=D("auth_token");l.value=o.token},I=o=>{var t,r,d;const e=(d=(r=(t=o==null?void 0:o.data)==null?void 0:t[0])==null?void 0:r.func_autentica_acesso_v1)==null?void 0:d[0],l=e==null?void 0:e.status_mensagem;if(!e){g.value=!0;return}switch(l){case"Esse email não está cadastrado no Durabil.":T.value=!0;break;case"Senha inválida.":O.value=!0;break;case"Seu cadastro está desativado. Entre em contato com o administrador da conta.":$.value=!0;break;default:g.value=!0;break}},W=async()=>{var t,r,d,V;const{data:o,status:e,error:l}=await F();if(e==="success"){const m=(V=(d=(r=(t=o==null?void 0:o[0])==null?void 0:t.func_autentica_acesso_v1)==null?void 0:r[0])==null?void 0:d.registro)==null?void 0:V[0];if(re().cartorioInfos=m,z(m),m.cartorios.length>1){P.push({path:"/login/tipo-perfil"});return}N.success("Login realizado com sucesso!");const{data:Y,status:G}=await A(J,{method:"POST",body:{usuario_id:m.id,perfil_descricao:m.cartorios[0].perfil_descricao}});if(G.value==="success"){const H=D("menu-navbar");H.value=Y.value,P.push({path:"/"})}}else e==="error"&&(l==null?void 0:l.statusCode)===500?g.value=!0:I(l)},X=async()=>{var t,r,d,V,m;const{data:o,status:e,error:l}=await ie(`${j}/recupera_senha`,{method:"POST",body:{email:k.value,acao:"gerar"}},"$iX10IJN3fa");e.value==="success"?(N.success(o.value.status_mensagem||"Código enviado"),recoveryEmailCookie.value=k.value,p.value=!1,p.value=!1):N.error(((d=(r=(t=l.value)==null?void 0:t.data)==null?void 0:r.menssage)==null?void 0:d.details)||((m=(V=l.value)==null?void 0:V.data)==null?void 0:m.status_mensagem))};return(o,e)=>{const l=se("center");return b(),y(ue,{style:{"background-color":"#0a063b"}},{default:s(()=>[a(fe,{cols:"5",class:"d-flex align-center justify-center"},{default:s(()=>[a(de,{style:{"max-width":"650px"}},{default:s(()=>[a(l,null,{default:s(()=>[a(B,{style:{"margin-bottom":"30px"},width:400,height:330,src:Q})]),_:1}),e[15]||(e[15]=R("div",{class:"text"},"Login",-1)),a(U,{autofocus:"",autocomplete:"email",type:"email",modelValue:n(v).email,"onUpdate:modelValue":e[0]||(e[0]=t=>n(v).email=t),"persistent-hint":"",class:"input mb-5",style:{"background-color":"aliceblue"},"hide-details":"",density:"compact",placeholder:"Email","prepend-inner-icon":"mdi-email-outline",variant:"outlined"},null,8,["modelValue"]),a(U,{modelValue:n(v).senha,"onUpdate:modelValue":e[1]||(e[1]=t=>n(v).senha=t),class:"input","append-inner-icon":n(x)?"mdi-eye-off":"mdi-eye",type:n(x)?"text":"password",density:"compact",style:{"background-color":"aliceblue"},"hide-details":"",placeholder:"Senha","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":e[2]||(e[2]=t=>x.value=!n(x))},null,8,["modelValue","append-inner-icon","type"]),a(K,{modelValue:n(c),"onUpdate:modelValue":e[4]||(e[4]=t=>S(c)?c.value=t:null),"max-width":"400",persistent:""},{activator:s(({props:t})=>[a(f,ne({rounded:"",class:"mb-10 mt-4 ml-1"},t,{color:"primary",onClick:W,modelValue:n(c),"onUpdate:modelValue":e[3]||(e[3]=r=>S(c)?c.value=r:null),block:""}),{default:s(()=>e[10]||(e[10]=[u(" Acessar ")])),_:2},1040,["modelValue"])]),default:s(()=>[n(O)?(b(),y(w,{key:0,text:"Senha inválida."},{actions:s(()=>[a(C),a(f,{onClick:_,style:{"background-color":"#429946",color:"white"}},{default:s(()=>e[11]||(e[11]=[u(" OK ")])),_:1})]),_:1})):h("",!0),n(T)?(b(),y(w,{key:1,text:"Esse email não está cadastrado."},{actions:s(()=>[a(C),a(f,{onClick:_,style:{"background-color":"#429946",color:"white"}},{default:s(()=>e[12]||(e[12]=[u(" OK ")])),_:1})]),_:1})):h("",!0),n(g)?(b(),y(w,{key:2,text:"Erro no sistema, fora do ar."},{actions:s(()=>[a(C),a(f,{onClick:_,style:{"background-color":"#429946",color:"white"}},{default:s(()=>e[13]||(e[13]=[u(" OK ")])),_:1})]),_:1})):h("",!0),n($)?(b(),y(w,{key:3,text:"Seu cadastro está desativado. Entre em contato com o administrador da conta."},{actions:s(()=>[a(C),a(f,{onClick:_,style:{"background-color":"#429946",color:"white"}},{default:s(()=>e[14]||(e[14]=[u(" OK ")])),_:1})]),_:1})):h("",!0)]),_:1},8,["modelValue"]),R("div",null,[R("a",{class:"text-decoration-none",rel:"noopener noreferrer",style:{color:"white","margin-left":"10px",cursor:"pointer"},onClick:e[5]||(e[5]=t=>p.value=!0)}," Esqueceu a senha? ")])]),_:1})]),_:1}),a(B,{src:Z,cover:""}),a(K,{modelValue:n(p),"onUpdate:modelValue":e[9]||(e[9]=t=>S(p)?p.value=t:null),"max-width":"500"},{default:s(()=>[a(w,null,{default:s(()=>[a(me,null,{default:s(()=>e[16]||(e[16]=[u("Recuperar senha")])),_:1}),a(ce,null,{default:s(()=>[a(U,{modelValue:n(k),"onUpdate:modelValue":e[6]||(e[6]=t=>S(k)?k.value=t:null),type:"email",label:"Digite seu email","prepend-inner-icon":"mdi-email-outline"},null,8,["modelValue"])]),_:1}),e[19]||(e[19]=u("' ")),a(pe,null,{default:s(()=>[a(C),a(f,{class:"bg-green text-white",onClick:e[7]||(e[7]=t=>X())},{default:s(()=>e[17]||(e[17]=[u(" Enviar ")])),_:1}),a(f,{class:"bg-red text-white",onClick:e[8]||(e[8]=t=>p.value=!1)},{default:s(()=>e[18]||(e[18]=[u(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Ue=ae(ve,[["__scopeId","data-v-682a4217"]]);export{Ue as default};
