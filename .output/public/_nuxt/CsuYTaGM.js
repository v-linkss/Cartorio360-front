import{_ as ue}from"./CXXCIeC6.js";import{_ as Q}from"./dchFmQt1.js";import{_ as X}from"./BVz1G1IN.js";import{_ as Y}from"./QH1pJdY9.js";import{_ as Z,a as ee,b as te}from"./D07j1uUq.js";import{B as oe,G as ae,u as de,r as m,m as W,C as ce,H as j,o as h,E as se,w as o,b as t,v as s,a as r,t as me,c as q,I as F,d as S,J as pe,z as P,s as le,p as _e,V as G}from"./D20DkuN4.js";import{u as O}from"./BElGUO6U.js";import{V as g}from"./D6EXtm0U.js";import{V as H}from"./k0GjryY8.js";import{V as k}from"./DMrr2Sgb.js";import{V as K}from"./BClZPtNY.js";import{V as ie}from"./DxAPWWrU.js";import{V as ve,a as fe,b as ye,c as Ve,d as ge}from"./Cs0qACZ9.js";import{V as re}from"./CHSYu0OH.js";import{_ as ke,a as xe}from"./Cn-Qhivf.js";import{f as N}from"./B7KZih50.js";const $e={style:{width:"800px","font-weight":"500"}},be=["onClick"],he=["onClick"],Ce=["onClick"],we={key:0,style:{width:"30px",height:"30px"},src:ee,alt:"Reativar",title:"Reativar"},Be={key:1,src:te,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},Xe={__name:"Bens",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(I){let c,_;const p=I,C=oe(),w=ae(),v=le(),{$toast:x}=de(),U=`${v.public.managemant}/atos_bens`,f=`${v.public.managemant}/atos_bens`,$=`${v.public.managemant}/listarBens`,B=`${v.public.managemant}/listarTipoBens`,T=m(W("user-data").value.cartorio_token),D=m(W("user-data").value.usuario_id).value,b=m([]),d=m([]),y=m(!1),R=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"vlr_alienacao"},{align:"end",value:"actions"}],n=ce({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),E=async()=>{if(!n.vlr_alienacao&&!n.descricao){x.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:i,status:e}=await O(`${U}`,{method:"POST",body:{descricao:n.descricao,tipo_id:n.tipo_id,valor_mercado:"0.00",vlr_alienacao:n.vlr_alienacao,user_id:D,ato_id:Number.parseInt(p.ato_id),token:w.query.ato_token_edit}},"$TVfAAEMyym");e.value==="success"&&(x.success("Bem registrado com sucesso!"),b.value.push(i.value),Object.assign(n,{vlr_alienacao:null,descricao:null,tipo_id:null}))},M=async i=>{const{status:e}=await O(`${f}/${i}`,{method:"PUT",body:{descricao:d.value.descricao,tipo_id:d.value.tipo_id,vlr_alienacao:d.value.vlr_alienacao}},"$TRbOfiOtJ9");e.value==="success"&&(x.success("Bem Atualizado com sucesso!"),y.value=!1)},L=i=>{const e=b.value.find(V=>V.id===i);e&&(d.value=e,y.value=!0)},{data:u}=([c,_]=j(()=>O(`${B}`,{method:"POST",body:{cartorio_token:T.value,imoveis:!1}},"$rrOfkMLqML")),c=await c,_(),c);n.tiposBens=u.value;const{data:a}=([c,_]=j(()=>O(`${$}`,{method:"POST",body:{ato_token:p.ato_token}},"$qhjPuJWFwD")),c=await c,_(),c);b.value=a.value&&Object.keys(a.value).length===0?[]:a.value;async function z(i){i.excluido=!i.excluido;try{await O(`${f}/${i.id}`,{method:"PUT",body:JSON.stringify({excluido:i.excluido})},"$1s7uo0EeAe")}catch(e){console.error("Erro ao excluir pessoa:",e)}}const A=()=>{const i=w.query.origem||"criar",e=w.query.id;i==="atualizar"?C.push(`/os/atualizar/${e}`):C.push("/os/criar-registro")};return(i,e)=>{const V=ue,ne=Q;return h(),se(re,null,{default:o(()=>[t(g,{class:"mt-5",cols:"12"},{default:o(()=>[t(H,{label:"Descrição",modelValue:s(n).descricao,"onUpdate:modelValue":e[0]||(e[0]=l=>s(n).descricao=l)},null,8,["modelValue"])]),_:1}),t(k,{class:"ml-1 mb-3"},{default:o(()=>[t(g,{class:"mt-6",cols:"8"},{default:o(()=>[t(K,{label:"Selecione o Tipo",items:s(n).tiposBens,modelValue:s(n).tipo_id,"onUpdate:modelValue":e[1]||(e[1]=l=>s(n).tipo_id=l),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(g,{class:"ml-5",cols:"3"},{default:o(()=>[e[9]||(e[9]=r("label",null,"Valor",-1)),t(V,{modelValue:s(n).vlr_alienacao,"onUpdate:modelValue":e[2]||(e[2]=l=>s(n).vlr_alienacao=l)},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-7 ml-4",src:X,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:E})])]),_:1}),t(k,null,{default:o(()=>[t(g,null,{default:o(()=>[t(ie,{style:{height:"465px"},headers:R,items:s(b)},{"item.descricao":o(({item:l})=>[r("h3",$e,me(l.descricao),1)]),"item.actions":o(({item:l})=>[t(k,{style:{"margin-top":"-8px"},justify:"end"},{default:o(()=>[r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:J=>i.redirectToFicha(l),title:"Visualizar Ficha"},e[10]||(e[10]=[r("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Visualizar"},null,-1)]),8,be),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:J=>L(l.id),title:"Alterar Papel"},e[11]||(e[11]=[r("img",{style:{width:"30px",height:"30px"},src:Z,alt:"Editar"},null,-1)]),8,he),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:J=>z(l),title:"Deletar Pessoa"},[l.excluido?(h(),q("img",we)):(h(),q("img",Be))],8,Ce)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),t(ve,{modelValue:s(y),"onUpdate:modelValue":e[8]||(e[8]=l=>F(y)?y.value=l:null),"max-width":"600px"},{default:o(()=>[t(fe,null,{default:o(()=>[t(ye,{style:{color:"green"}},{default:o(()=>e[12]||(e[12]=[S("Atualizar Bem")])),_:1}),t(Ve,null,{default:o(()=>[t(g,{class:"mt-1",cols:"12"},{default:o(()=>[t(H,{label:"Descrição",modelValue:s(d).descricao,"onUpdate:modelValue":e[3]||(e[3]=l=>s(d).descricao=l)},null,8,["modelValue"])]),_:1}),t(k,null,{default:o(()=>[t(g,{class:"mt-6 ml-3",cols:"8"},{default:o(()=>[t(K,{label:"Selecione o Tipo",items:s(n).tiposBens,modelValue:s(d).tipo_id,"onUpdate:modelValue":e[4]||(e[4]=l=>s(d).tipo_id=l),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(g,{class:"ml-5",cols:"3"},{default:o(()=>[e[13]||(e[13]=r("label",null,"Valor",-1)),t(V,{modelValue:s(d).vlr_alienacao,"onUpdate:modelValue":e[5]||(e[5]=l=>s(d).vlr_alienacao=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(ge,null,{default:o(()=>[t(pe),t(P,{color:"green",text:"",onClick:e[6]||(e[6]=l=>y.value=!1)},{default:o(()=>e[14]||(e[14]=[S("Cancelar")])),_:1}),t(P,{color:"green",text:"",onClick:e[7]||(e[7]=l=>M(s(d).id))},{default:o(()=>e[15]||(e[15]=[S("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(k,null,{default:o(()=>[t(ne,{onClick:A},{default:o(()=>[t(P,{size:"large",color:"red"},{default:o(()=>e[16]||(e[16]=[S("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Te={style:{width:"200px"}},ze={style:{width:"300px"}},Ae=["onClick"],Oe=["onClick"],Se=["onClick"],Ue={key:0,style:{width:"30px",height:"30px"},src:ee,alt:"Visualizar",title:"Reativar"},De={key:1,src:te,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Ye={__name:"Imoveis",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0},ato_token_selected:{type:String,required:!0}},async setup(I){let c,_;const p=I,C=le(),w=`${C.public.auth}/service/gerencia/atos_bens`,v=`${C.public.auth}/service/gerencia/atos_imoveis`,x=oe(),U=ae(),f=m(""),$=m(""),B=m(!1),T=m(!1),D=m(null),b=[{title:"Matrícula",value:"registro_matricula"},{title:"Descrição",value:"descricao"},{value:"actions"}],{data:d,status:y}=([c,_]=j(()=>N(v,{method:"POST",body:{ato_token:p.ato_token}})),c=await c,_(),c),R=_e(()=>{if(Object.keys(d.value).length!==0)return d.value.filter(u=>{const a=u.matricula?u.matricula.toLowerCase():"",z=u.descricao?u.descricao.toLowerCase():"",A=a.includes($.value.toLowerCase()),i=z.includes(f.value.toLowerCase());return A&&i})});async function n(u){u.excluido=!u.excluido;try{await N(`${w}/${u.id}`,{method:"PUT",body:{excluido:u.excluido}})}catch(a){console.error("Erro ao excluir pessoa:",a)}}function E(u){D.value=u,T.value=!0}const M=async()=>{await N(v,{method:"POST",body:{ato_token:p.ato_token}})},L=()=>{const u=U.query.origem||"criar",a=U.query.id;u==="atualizar"?x.push(`/os/atualizar/${a}`):x.push("/os/criar-registro")};return(u,a)=>{const z=Q,A=ke,i=xe;return h(),se(re,{class:"mt-5"},{default:o(()=>[r("img",{onClick:a[0]||(a[0]=e=>B.value=!0),style:{cursor:"pointer"},src:X,alt:"Cadastro"}),t(k,{style:{gap:"3rem"}},{default:o(()=>[r("div",Te,[t(G,{class:"mt-7 mb-4",modelValue:s($),"onUpdate:modelValue":a[1]||(a[1]=e=>F($)?$.value=e:null),label:"Matrícula","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),r("div",ze,[t(G,{class:"mt-7 mb-4",modelValue:s(f),"onUpdate:modelValue":a[2]||(a[2]=e=>F(f)?f.value=e:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),t(ie,{density:"compact",headers:b,items:s(R),"item-key":"id"},{"item.actions":o(({item:e})=>[t(k,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:o(()=>[r("div",{style:{cursor:"pointer"},onClick:V=>u.redirectToView(e.id),title:"Visualizar"},a[5]||(a[5]=[r("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Visualizar"},null,-1)]),8,Ae),r("div",{style:{cursor:"pointer"},onClick:V=>E(e.id),title:"Atualizar"},a[6]||(a[6]=[r("img",{style:{width:"30px",height:"30px"},src:Z,alt:"Atualizar"},null,-1)]),8,Oe),r("div",{style:{cursor:"pointer"},onClick:V=>n(e),title:"Deletar"},[e.excluido?(h(),q("img",Ue)):(h(),q("img",De))],8,Se)]),_:2},1024)]),_:1},8,["items"]),t(z,{onClick:L},{default:o(()=>[t(P,{size:"large",color:"red"},{default:o(()=>a[7]||(a[7]=[S("Voltar")])),_:1})]),_:1}),t(A,{onRefresh:M,ato_id:p.ato_id,ato_token:p.ato_token,ato_token_selected:p.ato_token_selected,show:s(B),onClose:a[3]||(a[3]=e=>B.value=!1)},null,8,["ato_id","ato_token","ato_token_selected","show"]),t(i,{onRefresh:M,imovel_id:s(D),show:s(T),onClose:a[4]||(a[4]=e=>T.value=!1)},null,8,["imovel_id","show"])]),_:1})}}};export{Xe as _,Ye as a};
