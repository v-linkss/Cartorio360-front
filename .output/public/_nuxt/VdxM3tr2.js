import{_ as re}from"./FXMBhLjI.js";import{u as te,n as ae,q as W,r as i,s as ce,o as I,v as ne,w as t,b as e,x as a,V as Z,y as B,d as O,z as K,A as L,B as ee,a as d,c as N,C as Y,D as Ie,E as Me,F as Re,G as $e,H as ve,h as je,I as be,t as oe}from"./C9rhaNnh.js";import{u as $}from"./CcW_SWhL.js";import{V as q}from"./B_vmNBNR.js";import{V as S}from"./D6ZpMO0u.js";import{V as se}from"./Kg4NXyhP.js";import{V as ue}from"./DvDC9Hgn.js";import{_ as Fe,V as Be,a as X,b as Ne,c as Q}from"./Cd_7n6Uw.js";import{_ as Le,a as Ge,b as He,T as Je,W as We,S as Ke,r as ke,D as we,c as Xe,d as Qe,e as Ye}from"./DArLsDMi.js";import{_ as fe}from"./DTWpvUTS.js";import{_ as ie,V as ge,a as ye,b as he,c as Ze}from"./W-wQkwZo.js";import{V as Ve,a as de}from"./Dc_8XFp9.js";import{V as et}from"./BuTlyq7G.js";import{_ as xe}from"./DfjuBLsA.js";import{c as tt,r as at,u as ot}from"./pUWPT5l_.js";import"./D-N4uBRk.js";import"./CsoQJ7RO.js";import"./HuNyyJnN.js";import"./8t2ufueN.js";const st={__name:"Dados",props:{item_dados:{type:Array,required:!0},item_situacoes:{type:Array,required:!0}},setup(G){const n=G,{$toast:f}=te(),m=K(),h=ae(),l=W(),k=`${m.public.managemant}/updateAtos`,U=i(n.item_situacoes),P=ce({dt_abertura:n.item_dados[0].dt_abertura||null,status:n.item_dados[0].status||null,mne:n.item_dados[0].mne||null});async function R(){const{data:_,error:v,status:E}=await $(`${k}/${l.query.ato_id}`,{method:"PUT",body:{status:P.status,mne:P.mne,dt_abertura:P.dt_abertura}},"$EIT5jtTUdX");E.value==="success"&&f.success("Ato Atualizado com sucesso")}const C=()=>{const _=l.query.origem||"criar",v=l.query.id;_==="atualizar"?h.push(`/os/atualizar/${v}`):h.push("/os/criar-registro")};return(_,v)=>{const E=re;return I(),ne(ue,null,{default:t(()=>[e(q,{class:"mt-5"},{default:t(()=>[e(S,{cols:"3"},{default:t(()=>[e(se,{label:"Situação",modelValue:a(P).status,"onUpdate:modelValue":v[0]||(v[0]=w=>a(P).status=w),items:a(U),"item-title":"descricao","item-value":"descricao",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(S,{cols:"5"},{default:t(()=>[e(Z,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:a(P).mne,"onUpdate:modelValue":v[1]||(v[1]=w=>a(P).mne=w)},null,8,["modelValue"])]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(S,{cols:"2"},{default:t(()=>[e(Z,{modelValue:a(P).dt_abertura,"onUpdate:modelValue":v[2]||(v[2]=w=>a(P).dt_abertura=w),type:"date",label:"Data Lavratura",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(q,{class:"mb-3"},{default:t(()=>[e(E,{onClick:C},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1}),e(B,{class:"ml-10",onClick:R,size:"large",color:"green"},{default:t(()=>[O("Atualizar")]),_:1})]),_:1})]),_:1})}}},rt=["onClick"],nt=d("img",{style:{width:"30px",height:"30px"},src:fe,alt:"Visualizar"},null,-1),lt=[nt],it=["onClick"],ct=d("img",{style:{width:"30px",height:"30px"},src:Ze,alt:"Visualizar"},null,-1),ut=[ct],dt=["onClick"],mt={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},pt={key:1,src:he,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},_t=["onClick"],vt=d("img",{style:{width:"30px",height:"30px"},src:He,alt:"Visualizar"},null,-1),ft=[vt],gt={__name:"Partes",async setup(G){let n,f;const m=ae(),h=W(),l=K(),{$toast:k}=te(),U=`${l.public.managemant}/pesquisarPessoas`,P=`${l.public.managemant}/listarPapeis`,R=`${l.public.managemant}/getLinkTipo`,C=`${l.public.managemant}/createAtosPessoa`,_=`${l.public.managemant}/updateAtosPessoa`,v=`${l.public.managemant}/getAtosPessoaById`,E=i(L("user-data").value.cartorio_token),w=i([]),V=i([]),M=i([]),z=i(!1),p=i(!1),g=i(!1),s=i(!1),r=i(null),b=i(null),o=i(null),c=i(null),D=i(null),A=i("xkyaA"),j=i(null),me=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],x=ce({papeis:null,nome:null,pessoa:null,documento:null}),{data:Pe}=([n,f]=ee(()=>$(P,{method:"POST",body:{tipo_ato_token:"xkyaA"}},"$acoiTIUp00")),n=await n,f(),n);M.value=Pe.value;const pe=async()=>{const{data:y}=await $(`${v}/${h.query.ato_id}`,{method:"GET"},"$ypnU9hCpVn"),F=(le=>le.map(H=>({...H,pessoa:{...H.pessoa,documento:H.pessoa.doc_identificacao},papel:{...H.partes_tipos}})))(y.value);V.value=F};pe();async function Ce(){try{const{data:y,error:u}=await $(U,{method:"POST",body:{cartorio_token:E.value,documento:x.documento,nome:x.nome}},"$pr30MyPXfY");y.value.length>0?(w.value=y.value,x.pessoa=w.value[0]):w.value=[]}catch(y){console.error("Erro na requisição",y)}}const Ae=()=>{p.value=!0},Ee=async()=>{await pe()},Te=async()=>{await pe()},qe=async()=>{const y={pessoa:x.pessoa,papel:M.value.find(J=>J.id===x.papeis),representante:{nome:null}},u=await $(`${v}/${h.query.ato_id}`,{method:"GET"},"$scHdIvxj2D");for(const J of u.data.value)if(J.pessoa_id===x.pessoa.id&&J.ato_id===Number(h.query.ato_id)&&J.tipo_parte_id===x.papeis){k.error("Pessoa Já Registrada Com Esse Papel!");return}const{data:F,error:le,status:H}=await $(C,{method:"POST",body:{ato_id:h.query.ato_id,pessoa_id:x.pessoa.id,tipo_parte_id:x.papeis,user_id:L("user-data").value.usuario_id}},"$18isAgOJxG");H.value==="success"&&(y.id=F.value.id,k.success("Pessoa Registrada com Sucesso!"),V.value.push(y))},ze=async y=>{g.value=!0,j.value=null;const{data:u}=await $(`${R}`,{method:"POST",body:{id:y.pessoa.id,tipo:"ficha"}},"$hmDzSF3F61");u.value&&u.value.link?j.value=`data:image/jpeg;base64,${u.value.link}`:j.value=null},Oe=y=>{const u=V.value.filter(F=>F.pessoa.id!==y.pessoa.id).map(F=>({id:F.pessoa.id,nome:F.pessoa.nome}));o.value=y.id,r.value=u,z.value=!0,b.value=y.pessoa.nome,D.value=y.pessoa.id},De=y=>{s.value=!0,c.value=y.id,b.value=y.pessoa.nome};async function Se(y){y.excluido=!y.excluido;try{await $(`${_}/${y.id}`,{method:"PUT",body:JSON.stringify({excluido:y.excluido})},"$l09I6nLRfk")}catch(u){console.error("Erro ao excluir pessoa:",u)}}const Ue=()=>{const y=h.query.origem||"criar",u=h.query.id;y==="atualizar"?m.push(`/os/atualizar/${u}`):m.push("/os/criar-registro")};return(y,u)=>{const F=Fe,le=Le,H=Ge,J=re;return I(),ne(ue,null,{default:t(()=>[e(q,{class:"mt-5"},{default:t(()=>[e(S,{cols:"3"},{default:t(()=>[e(Z,{label:"Documento",modelValue:a(x).documento,"onUpdate:modelValue":u[0]||(u[0]=T=>a(x).documento=T)},null,8,["modelValue"])]),_:1}),e(S,{cols:"4"},{default:t(()=>[e(Z,{label:"Pessoa",modelValue:a(x).nome,"onUpdate:modelValue":u[1]||(u[1]=T=>a(x).nome=T)},null,8,["modelValue"])]),_:1}),d("div",null,[d("img",{class:"mt-1",src:fe,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Ce})]),d("div",null,[d("img",{class:"mt-1 ml-2",src:ie,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Ae})])]),_:1}),e(q,null,{default:t(()=>[e(S,{cols:"4"},{default:t(()=>[e(se,{label:"Selecione a Pessoa",modelValue:a(x).pessoa,"onUpdate:modelValue":u[2]||(u[2]=T=>a(x).pessoa=T),items:a(w),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(S,{cols:"3"},{default:t(()=>[e(se,{label:"Papel",modelValue:a(x).papeis,"onUpdate:modelValue":u[3]||(u[3]=T=>a(x).papeis=T),items:a(M),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),d("div",null,[d("img",{class:"mt-1",src:ie,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:qe})])]),_:1}),e(q,null,{default:t(()=>[e(S,null,{default:t(()=>[e(ge,{style:{height:"465px"},headers:me,items:a(V)},{"item.actions":t(({item:T})=>[e(q,null,{default:t(()=>[d("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:_e=>ze(T),title:"Visualizar Ficha"},lt,8,rt),d("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:_e=>De(T),class:"mr-2",title:"Alterar Papel"},ut,8,it),d("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:_e=>Se(T),title:"Deletar Pessoa"},[T.excluido?(I(),N("img",mt)):(I(),N("img",pt))],8,dt),d("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:_e=>Oe(T),title:"Selecionar Representante"},ft,8,_t)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(F,{show:a(p),onClose:u[4]||(u[4]=T=>p.value=!1)},null,8,["show"]),e(le,{representante_nome:a(b),representantes:a(r),ato_id:a(o),show:a(z),onClose:u[5]||(u[5]=T=>z.value=!1),onUpdateRepresentante:Te},null,8,["representante_nome","representantes","ato_id","show"]),e(H,{representante_nome:a(b),ato_token:a(A),ato_id:a(c),show:a(s),onClose:u[6]||(u[6]=T=>s.value=!1),onUpdatePapel:Ee},null,8,["representante_nome","ato_token","ato_id","show"]),e(Ve,{modelValue:a(g),"onUpdate:modelValue":u[8]||(u[8]=T=>Y(g)?g.value=T:null),width:"600"},{default:t(()=>[e(de,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(et,{src:a(j)},null,8,["src"]),e(B,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:u[7]||(u[7]=T=>g.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(q,null,{default:t(()=>[e(J,{onClick:Ue},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},yt={key:0,class:"loading-overlay"},ht="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",bt={__name:"Minuta",emits:["page","doc"],setup(G,{emit:n}){Ie("DocumentEditorContainer",[Je,We,Ke]);const f=K(),{$toast:m}=te(),h=ae(),l=W(),k=n;ke(`${f.public.docEditor}`);const U=`${f.public.managemant}/download`,P=`${f.public.managemant}/atos/files`,R=`${f.public.managemant}/upload`,C=i(null),_=i(!1),v=async p=>{try{const g=await fetch(p);if(!g.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await g.blob()}catch(g){return console.error(g),m.error("Erro ao carregar o documento inicial."),null}},E=async()=>{try{const{data:p}=await $(`${P}/${l.query.ato_token_edit}`,{method:"GET"},"$5jxI4TvFse");return p.value.link_ato}catch(p){console.error("Erro ao carregar o documento:",p),m.error(p)}},w=async()=>{_.value=!0;try{const p=await E(),{data:g,status:s}=await $(U,{method:"POST",body:{bucket:"qvgjz",path:p}},"$dvNFfvmIJC"),r=g.value,b=await v(r);if(b){const o=new FileReader;o.onload=()=>{const c=o.result;C.value.ej2Instances.documentEditor.open(c),k("doc",c)},o.readAsText(b)}}catch{m.error("Erro ao carregar o documento.")}finally{_.value=!1}},V=async()=>{const p=C.value.ej2Instances.documentEditor;console.log(p);const g=await p.saveAsBlob("Sfdt"),s=new FileReader;s.onload=()=>{const r=s.result,o=C.value.ej2Instances.documentEditor.pageCount;k("page",o),k("doc",r)},s.readAsText(g)},M=async()=>{_.value=!0;try{const g=await C.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),s=new FormData;s.append("file",g,"anexo.sfdt"),s.append("cartorio_token",L("user-data").value.cartorio_token),s.append("token",l.query.ato_token_edit),s.append("tipo","ato_minuta");const{data:r,status:b}=await $(R,{method:"POST",body:s},"$xv11VtUdMy");if(b.value==="success"){m.success("Documento enviado!");const c=C.value.ej2Instances.documentEditor.pageCount;V(),k("page",c)}else m.error("Erro ao enviar documento para o sistema.")}catch(p){m.error("Erro ao salvar documento."),console.error(p)}finally{_.value=!1}},z=()=>{const p=l.query.origem||"criar",g=l.query.id;p==="atualizar"?h.push(`/os/atualizar/${g}`):h.push("/os/criar-registro")};return Me(async()=>{await w(),V()}),(p,g)=>{const s=re;return I(),N(ve,null,[e(a(we),{height:"900px",ref_key:"documentEditorContainer",ref:C,serviceUrl:ht,enableToolbar:!0,enableWordExport:!0},null,512),a(_)?(I(),N("div",yt,[e(Re,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):$e("",!0),e(q,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(s,{class:"mr-4"},{default:t(()=>[e(B,{size:"large",onClick:z,color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1}),e(B,{size:"large",color:"green",onClick:M,disabled:a(_)},{default:t(()=>[O("Atualizar")]),_:1},8,["disabled"])]),_:1})],64)}}},xt={class:"d-flex align-center justify-center"},$t=["innerHTML"],kt={__name:"Livro",props:{pages:{type:Number,required:!0},document:{type:String,required:!0}},setup(G){const n=G,f=K();ke(`${f.public.docEditor}`);const{$toast:m}=te(),h=ae(),l=W(),k=`${f.public.managemant}/download`,U=`${f.public.managemant}/atos/files`,P=`${f.public.managemant}/lavrarAto`,R=i("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),C=i(!1),_=i(null),v=i(null),E=i(null),w=async s=>{try{const r=await fetch(s);if(!r.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await r.blob()}catch(r){return console.error(r),m.error("Erro ao carregar o documento inicial."),null}},V=async()=>{try{const{data:s}=await $(`${U}/${l.query.ato_token_edit}`,{method:"GET"},"$FnEbAJEARP");return s.value.link_ato}catch(s){console.error("Erro ao carregar o documento:",s),m.error(s)}},M=async()=>{try{const s=await V(),{data:r,status:b}=await $(k,{method:"POST",body:{bucket:"qvgjz",path:s}},"$7ljqltMqa0"),o=r.value,c=await w(o);if(c){const D=new FileReader;D.onload=()=>{const A=D.result;E.value.ej2Instances.documentEditor.open(A),console.log("asdfdsf")},D.readAsText(c)}}catch{m.error("Erro ao carregar o documento.")}};M();const z=async()=>{try{const{data:s,status:r}=await $(P,{method:"POST",body:{ato_token:l.query.ato_token_edit,qtd_paginas:n.pages}},"$OWxZSQkyX8");r.value==="success"?(_.value=s.value,v.value=s.value[0].selo,m.success("Ato lavrado com sucesso!")):m.error("Falha ao lavrar o ato.")}catch{m.error("Erro ao conectar com o servidor.")}},p=()=>{C.value=!1,z()},g=()=>{const s=l.query.origem||"criar",r=l.query.id;s==="atualizar"?h.push(`/os/atualizar/${r}`):h.push("/os/criar-registro")};return je(()=>n.document,(s,r)=>{M()}),(s,r)=>{const b=Qe;return I(),N(ve,null,[e(q,null,{default:t(()=>[e(S,null,{default:t(()=>[e(a(we),{restrictEditing:!0,enableToolbar:!1,ref_key:"documentEditorContainer",ref:E,height:"850px",width:"850px"},null,512)]),_:1}),e(S,null,{default:t(()=>[d("div",xt,[d("div",null,[d("img",{onClick:r[0]||(r[0]=o=>C.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:Xe}),a(_)?(I(),ne(de,{key:0,width:"360px",class:"mr-16"},{default:t(()=>[e(q,null,{default:t(()=>[e(S,null,{default:t(()=>[e(be,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[O(" Livro: "+oe(a(_)[0].livro_numero),1)]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(be,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[O(" Folhas : "+oe(a(_)[0].pagina_inicial)+" Á "+oe(a(_)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),d("div",{style:{border:"1px solid black","border-radius":"8px","padding-bottom":"20px","margin-top":"-10px"},class:"ml-2 mb-2 mr-2",innerHTML:a(v)},null,8,$t)]),_:1})):$e("",!0)])])]),_:1})]),_:1}),O(" "+oe(n.pages)+" ",1),e(B,{class:"mt-5 ml-7 mb-5",color:"red",size:"large",onClick:g},{default:t(()=>[O("Voltar")]),_:1}),e(b,{show:a(C),condMessage:a(R),onClose:r[1]||(r[1]=o=>C.value=!1),onConfirm:p},null,8,["show","condMessage"])],64)}}},wt=["onClick"],Vt={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},Pt={key:1,src:he,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Ct={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(G){let n,f;const m=ae(),h=W(),l=K(),{$toast:k}=te(),U=`${l.public.managemant}/listarEscrevente`;`${l.public.managemant}`;const P=`${l.public.managemant}/createAtosObservacao`,R=`${l.public.managemant}/updateAtosObservacao`,C=`${l.public.managemant}/getAtosObservacaoById`,_=i(L("user-data").value.cartorio_token),v=i([]),E=i([]),w=[{title:"Data",align:"start",key:"created"},{title:"Escrevente",align:"start",key:"users.nome"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],V=ce({observacao:""}),M={observacao:{required:tt.withMessage("O campo é obrigatório",at)}},z=ot(M,V),{data:p}=([n,f]=ee(()=>$(`${C}/${h.query.ato_id}`,{method:"GET"},"$HyzoO40swN")),n=await n,f(),n);v.value=p.value.map(o=>({...o,created:xe(o.created,"dd/mm/yyyy hh:mm")}));async function g(){if(V.observacao.trim()===""){k.error("O campo de observação está vazio.");return}if(await z.value.$validate()){const{data:o,error:c,status:D}=await $(P,{method:"POST",body:{ato_id:h.query.ato_id,observacao:V.observacao,user_id:L("user-data").value.usuario_id}},"$gnHMo4uCXD");D.value==="success"&&(v.value.push({created:xe(o.value.created,"dd/mm/yyyy hh:mm"),observacao:o.value.observacao,id:o.value.id,escrevente:L("user-data").value.nome}),V.observacao="",k.success("Observação registrada com sucesso"))}else k.error("Preencha os campos obrigatórios.")}async function s(o){o.excluido=!o.excluido;try{await $(`${R}/${o.id}`,{method:"PUT",body:JSON.stringify({excluido:o.excluido})},"$sP9AKdd3Ky")}catch(c){console.error("Erro ao excluir observação:",c)}}const{data:r}=([n,f]=ee(()=>$(U,{method:"POST",body:{cartorio_token:_}},"$HL9pndqGh0")),n=await n,f(),n);E.value=r.value[0].func_json_escreventes;const b=()=>{const o=h.query.origem||"criar",c=h.query.id;o==="atualizar"?m.push(`/os/atualizar/${c}`):m.push("/os/criar-registro")};return(o,c)=>{const D=re;return I(),ne(ue,null,{default:t(()=>[e(q,{class:"mt-5"},{default:t(()=>[e(Z,{label:"Observação",modelValue:V.observacao,"onUpdate:modelValue":c[0]||(c[0]=A=>V.observacao=A),required:"","error-messages":a(z).observacao.$errors.length>0?a(z).observacao.$errors.map(A=>A.$message):[],onBlur:a(z).observacao.$touch,onInput:a(z).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),d("div",null,[d("img",{class:"btn-pointer ml-2",src:ie,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:g})])]),_:1}),e(q,null,{default:t(()=>[e(S,null,{default:t(()=>[e(ge,{style:{height:"465px"},headers:w,items:v.value},{"item.actions":t(({item:A})=>[d("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:j=>s(A),title:"Deletar Observação"},[A.excluido?(I(),N("img",Vt)):(I(),N("img",Pt))],8,wt)]),_:1},8,["items"])]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(D,{onClick:b},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},At=d("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Ye,alt:"Escanear"},null,-1),Et=[At],Tt=d("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ie,alt:"Criar"},null,-1),qt=[Tt],zt=["onClick"],Ot=d("img",{style:{width:"30px",height:"30px"},src:fe,alt:"Visualizar"},null,-1),Dt=[Ot],St=["onClick"],Ut={key:0,style:{width:"30px",height:"30px"},src:ye,alt:"Visualizar",title:"Reativar"},It={key:1,src:he,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Mt={__name:"Anexos",async setup(G){let n,f;const m=K(),{$toast:h}=te(),l=ae(),k=W(),U=`${m.public.biometria}/run-scanner`,P=`${m.public.managemant}/atos_anexos`,R=`${m.public.managemant}/atos_anexos`,C=`${m.public.managemant}/atos_anexos`,_=i(!1),v=i([]),E=ce({descricao:""}),w=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}],{data:V}=([n,f]=ee(()=>$(`${C}/${k.query.ato_id}`,{method:"GET"},"$AOZpbz65MA")),n=await n,f(),n);v.value=V.value;async function M(){try{await z(),await p()}catch(o){console.error("Erro ao executar scanner ou listar arquivos:",o)}}async function z(){try{const{data:o}=await $(U,{method:"GET"},"$KttjFhHivJ")}catch(o){h.error("Erro ao acionar o scanner:",o)}}async function p(){try{const{data:o,status:c}=await $("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:k.query.ato_token_edit,cartorio_token:L("user-data").value.cartorio_token}},"$TqQrsgxUkd")}catch(o){console.error("Erro ao enviar o arquivo:",o)}}const g=async()=>{_.value=!0},s=async()=>{const{data:o,error:c,status:D}=await $(P,{method:"POST",body:{ato_id:k.query.ato_id,descricao:E.descricao,user_id:L("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$KDhIYzGKzM");D.value==="success"&&(h.success("Anexo registrado com sucesso!"),v.value.push(o.value))};async function r(o){o.excluido=!o.excluido;try{await $(`${R}/${o.id}`,{method:"PUT",body:JSON.stringify({excluido:o.excluido})},"$cdoFBGO0Ti")}catch(c){console.error("Erro ao excluir pessoa:",c)}}const b=()=>{const o=k.query.origem||"criar",c=k.query.id;o==="atualizar"?l.push(`/os/atualizar/${c}`):l.push("/os/criar-registro")};return(o,c)=>{const D=re;return I(),ne(ue,null,{default:t(()=>[e(q,null,{default:t(()=>[e(S,{cols:"5"},{default:t(()=>[e(Z,{modelValue:a(E).descricao,"onUpdate:modelValue":c[0]||(c[0]=A=>a(E).descricao=A),label:"Descrição"},null,8,["modelValue"])]),_:1}),d("div",{onClick:M,title:"Escanear"},Et),d("div",{onClick:s,title:"Criar"},qt)]),_:1}),e(ge,{headers:w,items:a(v),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:A})=>[e(q,null,{default:t(()=>[d("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:j=>g(A),title:"Visualizar Anexo"},Dt,8,zt),d("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:j=>r(A),title:"Deletar Pessoa"},[A.excluido?(I(),N("img",Ut)):(I(),N("img",It))],8,St)]),_:2},1024)]),_:1},8,["items"]),e(Ve,{modelValue:a(_),"onUpdate:modelValue":c[2]||(c[2]=A=>Y(_)?_.value=A:null),width:"600"},{default:t(()=>[e(de,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(B,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:c[1]||(c[1]=A=>_.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(D,{onClick:b},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})}}},Rt={class:"mb-10"},jt=d("h1",null,"Ordem de Serviço nº",-1),Ft={style:{color:"red","margin-left":"30px"}},la={__name:"[id]",async setup(G){let n,f;const m=i(null),h=i(null),l=i(null),k=K(),U=W(),P=`${k.public.managemant}/listarSituacoes`,R=`${k.public.managemant}/getAtos`,C=i(L("user-data").value.cartorio_token),_=U.query.id?{ato_token:"xkyaA"}:{cartorio_token:C},v=i([]),E=i([]),w=i("PROCURAÇÕES"),V=i("PROCURAÇÃO");async function M(){try{const{data:r}=await $(`${R}/${U.query.ato_id}`,{method:"GET"},"$j0JpHHj7PB");E.value=r.value}catch(r){console.log(r)}}[n,f]=ee(()=>M()),await n,f();const{data:z,status:p}=([n,f]=ee(()=>$(P,{method:"POST",body:_},"$mGbp7gAEjS")),n=await n,f(),n);v.value=z.value;const g=r=>{m.value=r},s=r=>{h.value=r};return(r,b)=>{const o=st,c=gt,D=bt,A=kt,j=Ct,me=Mt;return I(),N(ve,null,[d("div",Rt,[e(q,{class:"mb-5 mt-5"},{default:t(()=>[jt,d("h1",Ft,oe(a(U).query.numero_os),1)]),_:1}),e(q,null,{default:t(()=>[e(S,{md:"6"},{default:t(()=>[e(se,{class:"mr-5",modelValue:a(w),"onUpdate:modelValue":b[0]||(b[0]=x=>Y(w)?w.value=x:null),disabled:""},null,8,["modelValue"])]),_:1}),e(S,{md:"6"},{default:t(()=>[e(se,{modelValue:a(V),"onUpdate:modelValue":b[1]||(b[1]=x=>Y(V)?V.value=x:null),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),e(de,{width:"1300"},{default:t(()=>[e(Be,{modelValue:a(l),"onUpdate:modelValue":b[2]||(b[2]=x=>Y(l)?l.value=x:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(X,{value:"dados"},{default:t(()=>[O("Dados")]),_:1}),e(X,{value:"partes"},{default:t(()=>[O("Partes")]),_:1}),e(X,{value:"minuta"},{default:t(()=>[O("Minuta")]),_:1}),e(X,{value:"livro"},{default:t(()=>[O("Livro")]),_:1}),e(X,{value:"observacao"},{default:t(()=>[O("Observações")]),_:1}),e(X,{value:"anexo"},{default:t(()=>[O("Anexos")]),_:1})]),_:1},8,["modelValue"]),e(Ne,{modelValue:a(l),"onUpdate:modelValue":b[3]||(b[3]=x=>Y(l)?l.value=x:null)},{default:t(()=>[e(Q,{value:"dados"},{default:t(()=>[e(o,{item_dados:a(E),item_situacoes:a(v)},null,8,["item_dados","item_situacoes"])]),_:1}),e(Q,{value:"partes"},{default:t(()=>[e(c)]),_:1}),e(Q,{value:"minuta"},{default:t(()=>[e(D,{onPage:g,onDoc:s})]),_:1}),e(Q,{value:"livro"},{default:t(()=>[e(A,{pages:a(m),document:a(h)},null,8,["pages","document"])]),_:1}),e(Q,{value:"observacao"},{default:t(()=>[e(j)]),_:1}),e(Q,{value:"anexo"},{default:t(()=>[e(me)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{la as default};
