import{c as re,r as ie,u as he}from"./CtbntwaI.js";import{c as Ye}from"./Cl0aV3pD.js";import{G as ye,m as ve,u as q,r as B,H as be,n as $e,M as we,o as m,c as K,s as e,p as T,P as Xe,t as Pe,K as X,w as a,b as o,V as h,N as se,v as Z,d as H,F as fe,q as ce,J as Ve,z as Ae,a as N,C as pe,L as Re,A as De,g as Ne,_ as Oe,bj as Me,E as Ue,R as Ge}from"./DAa6a73G.js";import{u as Be,V as j}from"./DYS2YG0c.js";import{$ as ue,f as G}from"./CKnfr-uA.js";import{a as ze,f as xe}from"./B0IxRygJ.js";import{V as p}from"./BT6ZS9WZ.js";import{V as qe}from"./DLOGJ7kj.js";import{V as ae}from"./Bv5adjgi.js";import{V as ne}from"./DAilD73b.js";import{_ as je}from"./BYLQtiCp.js";import{_ as Ce}from"./BVz1G1IN.js";import{_ as Le}from"./DLkI_9lA.js";import{_ as Fe,a as Te}from"./DJvq3mCv.js";import{V as Se}from"./B8KlWORK.js";import{V as Ie}from"./DMJo1Cv4.js";import{V as Ee,a as He,b as Je,c as Ke}from"./id74FqOL.js";import{u as de}from"./Bte8kSAK.js";import{V as Qe,a as Ze,_ as eo}from"./CPC_pe2f.js";import{_ as We}from"./CBWw5mB7.js";import{a as oo,V as _e,d as ao,e as ge}from"./CywrNprU.js";const to={key:1},lo={__name:"Dados",props:{isModal:{type:Boolean,default:!1}},emits:["saved","close-modal"],async setup(J,{emit:b}){let y,V;const P=J,x=b,f=ye(),{$toast:I}=ve(),w=ce(),S=`${w.public.auth}/service/gerencia/createPessoa`,A=`${w.public.auth}/service/gerencia/updatePessoa`,W=`${w.public.auth}/service/gerencia/listarEstadoCivil`,Q=`${w.public.auth}/service/gerencia/listarCapacidadeCivil`,z=`${w.public.auth}/service/gerencia/listarCidades`,k=`${w.public.auth}/service/gerencia/listarSexo`,u={nome:null,nome_pai:null,nome_mae:null,profissao:null,local_trabalho:null,data_nascimento:null,doc_identificacao:null,fone_celular:null,cpf_pai:null,cpf_mae:null,tipo_pessoa:"FISICA",tabvalores_estadocivil_id:null,tabvalores_capacidadecivil_id:null,tabvalores_sexo_id:null,cidade_natural_id:null,cartorio_id:q("user-data").value.cartorio_id,user_id:q("user-data").value.usuario_id},M=B(!1),v=q("pessoa-id"),t=be({...u});function D(n){if(n)return n.replace(/[.\-]/g,"");n=null}const{data:_,status:c,pending:R,error:C}=([y,V]=$e(async()=>Be("cliente-dados",async()=>{const[n,s,F,r]=await Promise.all([ue(W),ue(Q),ue(z),ue(k)]);return{estadoCivilItems:n,capacidadeCivilItems:s,cidadeNascimentoItems:F,sexoItems:r}})),y=await y,V(),y),U={nome:{required:re.withMessage("O campo é obrigatorio",ie)},nome_mae:{required:re.withMessage("O campo é obrigatorio",ie)},doc_identificacao:{required:re.withMessage("O campo é obrigatorio",ie),cpf:Ye}},E=he(U,t);async function O(){if(await E.value.$validate()){const n={...t};for(const Y in n)n[Y]===""&&(n[Y]=null);const s={...n,doc_identificacao:D(t.doc_identificacao),cpf_pai:D(t.cpf_pai),cpf_mae:D(t.cpf_mae),data_nascimento:ze(t.data_nascimento),fone_celular:t.fone_celular?t.fone_celular.replace(/[^0-9]/g,""):null},{data:F,error:r,status:i}=await G(S,{method:"POST",body:s});if(i.value==="error"&&r.value.statusCode===500)I.error("Erro ao cadastrar pessoa,o CPF já está cadastrado.");else{I.success("Pessoa cadastrada com sucesso!");const Y=F.value.id;v.value=Y;const ee=q("pessoa_token");ee.value=F.value.token,M.value=!0,x("saved")}}else I.error("Erro ao cadastrar pessoa, preencha os campos obrigatorios.")}async function le(){const n={...t};for(const Y in n)n[Y]===""&&(n[Y]=null);const s={...n,doc_identificacao:D(t.doc_identificacao),cpf_mae:D(t.cpf_mae),fone_celular:t.fone_celular.replace(/[^0-9]/g,"")},{data:F,error:r,status:i}=await G(`${A}/${v.value}`,{method:"PUT",body:s});if(i.value==="success"){if(P.isModal===!0){I.success("Pessoa atualizada com sucesso!"),x("close-modal");return}I.success("Pessoa atualizada com sucesso!"),f.push("/pessoas/lista")}}const $=()=>{if(P.isModal===!0){x("close-modal");return}f.push("/pessoas/lista")};return(n,s)=>{const F=we("mask");return m(),K(fe,null,[e(R)?(m(),T(Xe,{key:0,class:"loading-spinner",indeterminate:"",size:"64"})):e(C)?(m(),K("div",to,Pe(e(C).message),1)):X("",!0),e(R)?X("",!0):(m(),T(ne,{key:2},{default:a(()=>[o(j,null,{default:a(()=>[o(p,{md:"6"},{default:a(()=>[o(h,{modelValue:e(t).nome,"onUpdate:modelValue":s[0]||(s[0]=r=>e(t).nome=r),"error-messages":e(E).nome.$errors.map(r=>r.$message),label:"Nome",required:"",onBlur:e(E).nome.$touch,onInput:e(E).nome.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1}),o(p,{md:"4"},{default:a(()=>[se(o(h,{modelValue:e(t).doc_identificacao,"onUpdate:modelValue":s[1]||(s[1]=r=>e(t).doc_identificacao=r),"error-messages":e(E).doc_identificacao.$errors.map(r=>r.$message),label:"CPF",required:"",onBlur:e(E).doc_identificacao.$touch,onInput:e(E).doc_identificacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),[[F,"###.###.###-##"]])]),_:1}),o(p,{md:"2"},{default:a(()=>[o(qe,{label:"Sexo",modelValue:e(t).tabvalores_sexo_id,"onUpdate:modelValue":s[2]||(s[2]=r=>e(t).tabvalores_sexo_id=r),items:e(_).sexoItems,"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),o(j,null,{default:a(()=>[o(p,{md:"4"},{default:a(()=>[o(ae,{modelValue:e(t).tabvalores_estadocivil_id,"onUpdate:modelValue":s[3]||(s[3]=r=>e(t).tabvalores_estadocivil_id=r),items:e(_).estadoCivilItems,"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),o(p,{md:"4"},{default:a(()=>[o(h,{modelValue:e(t).profissao,"onUpdate:modelValue":s[4]||(s[4]=r=>e(t).profissao=r),label:"Profissão"},null,8,["modelValue"])]),_:1}),o(p,{md:"4"},{default:a(()=>[o(h,{modelValue:e(t).local_trabalho,"onUpdate:modelValue":s[5]||(s[5]=r=>e(t).local_trabalho=r),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),o(j,null,{default:a(()=>[o(p,{md:"2"},{default:a(()=>[se(o(h,{modelValue:e(t).data_nascimento,"onUpdate:modelValue":s[6]||(s[6]=r=>e(t).data_nascimento=r),label:"Data de nascimento",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[F,"##/##/####"]])]),_:1}),o(p,{md:"2"},{default:a(()=>[se(o(h,{modelValue:e(t).fone_celular,"onUpdate:modelValue":s[7]||(s[7]=r=>e(t).fone_celular=r),label:"Celular",placeholder:"'(99) 99999-9999'"},null,8,["modelValue"]),[[F,"(##) #####-####"]])]),_:1}),o(p,{md:"4"},{default:a(()=>[o(ae,{modelValue:e(t).tabvalores_capacidadecivil_id,"onUpdate:modelValue":s[8]||(s[8]=r=>e(t).tabvalores_capacidadecivil_id=r),items:e(_).capacidadeCivilItems,label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),o(p,{md:"4"},{default:a(()=>[o(ae,{modelValue:e(t).cidade_natural_id,"onUpdate:modelValue":s[9]||(s[9]=r=>e(t).cidade_natural_id=r),items:e(_).cidadeNascimentoItems,label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),o(j,null,{default:a(()=>[o(p,{md:"4"},{default:a(()=>[se(o(h,{modelValue:e(t).cpf_pai,"onUpdate:modelValue":s[10]||(s[10]=r=>e(t).cpf_pai=r),label:"CPF do Pai"},null,8,["modelValue"]),[[F,"###.###.###-##"]])]),_:1}),o(p,{md:"4"},{default:a(()=>[o(h,{modelValue:e(t).nome_pai,"onUpdate:modelValue":s[11]||(s[11]=r=>e(t).nome_pai=r),label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),o(j,null,{default:a(()=>[o(p,{md:"4"},{default:a(()=>[se(o(h,{modelValue:e(t).cpf_mae,"onUpdate:modelValue":s[12]||(s[12]=r=>e(t).cpf_mae=r),label:"CPF da Mãe"},null,8,["modelValue"]),[[F,"###.###.###-##"]])]),_:1}),o(p,{md:"4"},{default:a(()=>[o(h,{modelValue:e(t).nome_mae,"onUpdate:modelValue":s[13]||(s[13]=r=>e(t).nome_mae=r),modelModifiers:{date:!0},"error-messages":e(E).nome_mae.$errors.map(r=>r.$message),label:"Nome da Mãe",required:"",onBlur:e(E).nome_mae.$touch,onInput:e(E).nome_mae.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1})]),_:1}),o(j,{class:"mb-3"},{default:a(()=>[o(Z,{onClick:$,size:"large",color:"red"},{default:a(()=>s[15]||(s[15]=[H("Voltar")])),_:1}),o(Z,{onClick:s[14]||(s[14]=r=>e(M)?le():O()),class:"ml-4",size:"large",color:"green"},{default:a(()=>s[16]||(s[16]=[H("Salvar")])),_:1})]),_:1})]),_:1}))],64)}}},so=re.withMessage("CNPJ inválido",J=>{if(!J)return!1;const b=J.replace(/[^\d]+/g,"");if(b.length!==14||/^(\d)\1+$/.test(b))return!1;let y=b.length-2,V=b.substring(0,y);const P=b.substring(y);let x=0,f=y-7;for(let w=y;w>=1;w--)x+=parseInt(V.charAt(y-w),10)*f--,f<2&&(f=9);let I=x%11<2?0:11-x%11;if(I!==parseInt(P.charAt(0),10))return!1;y+=1,V=b.substring(0,y),x=0,f=y-7;for(let w=y;w>=1;w--)x+=parseInt(V.charAt(y-w),10)*f--,f<2&&(f=9);return I=x%11<2?0:11-x%11,I===parseInt(P.charAt(1),10)}),ro={__name:"DadosJuridica",props:{isModal:{type:Boolean,default:!1}},emits:["saved","close-modal"],setup(J,{emit:b}){const y=J,V=b,P=ye(),x=Ve(),{$toast:f}=ve(),I=ce(),w=`${I.public.auth}/service/gerencia/getPessoaById`,S=`${I.public.auth}/service/gerencia/createPessoa`,A=`${I.public.auth}/service/gerencia/updatePessoa`,{id:W}=x.params,Q={nome:null,nome_fantasia:null,inscricao_estadual:null,observacao:null,doc_identificacao:null,tipo_pessoa:"JURIDICA",cartorio_id:q("user-data").value.cartorio_id,user_id:q("user-data").value.usuario_id},z=B(!1),k=q("pessoa-id"),u=be({...Q});function M(C){return C?C.replace(/[.\-/]/g,""):null}const v={nome:{required:re.withMessage("O campo é obrigatorio",ie)},doc_identificacao:{required:re.withMessage("O campo é obrigatorio",ie),cnpj:so}},t=he(v,u);async function D(){if(await t.value.$validate()){const C={...u};for(const $ in C)C[$]===""&&(C[$]=null);const U={...C,doc_identificacao:M(u.doc_identificacao)},{data:E,error:O,status:le}=await G(S,{method:"POST",body:U});if(le.value==="error"&&O.value.statusCode===500)f.error("Erro ao cadastrar Pessoa Juridica,o CNPJ já está cadastrado.");else{f.success("Pessoa Juridica cadastrada com sucesso!");const $=E.value.id;k.value=$;const n=q("pessoa_token");n.value=E.value.token,z.value=!0,V("saved")}}else f.error("Erro ao cadastrar pessoa juridica, preencha os campos obrigatorios.")}async function _(){const C={...u};for(const $ in C)C[$]===""&&(C[$]=null);const U={...C,doc_identificacao:M(u.doc_identificacao)},{data:E,error:O,status:le}=await G(`${A}/${W||k.value}`,{method:"PUT",body:U});if(le.value==="success"){if(y.isModal===!0){f.success("Pessoa Juridica atualizada com sucesso!"),V("close-modal");return}f.success("Pessoa Juridica atualizada com sucesso!"),P.push("/pessoas/lista")}}async function c(){const{data:C,error:U}=await G(`${w}/${W}`,{method:"GET"});Object.assign(u,C.value)}const R=()=>{if(y.isModal===!0){V("close-modal");return}P.push("/pessoas/lista")};return Ae(()=>{W&&(c(),z.value=!0)}),(C,U)=>{const E=we("mask");return m(),T(ne,{class:"mt-3",style:{height:"425px"}},{default:a(()=>[o(j,null,{default:a(()=>[o(p,{md:"8"},{default:a(()=>[o(h,{modelValue:e(u).nome,"onUpdate:modelValue":U[0]||(U[0]=O=>e(u).nome=O),"error-messages":e(t).nome.$errors.map(O=>O.$message),label:"Razão Social",required:"",onBlur:e(t).nome.$touch,onInput:e(t).nome.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1}),o(p,{md:"4"},{default:a(()=>[se(o(h,{modelValue:e(u).doc_identificacao,"onUpdate:modelValue":U[1]||(U[1]=O=>e(u).doc_identificacao=O),"error-messages":e(t).doc_identificacao.$errors.map(O=>O.$message),label:"CNPJ",required:"",onBlur:e(t).doc_identificacao.$touch,onInput:e(t).doc_identificacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),[[E,"##.###.###/####-##"]])]),_:1})]),_:1}),o(j,null,{default:a(()=>[o(p,{md:"8"},{default:a(()=>[o(h,{modelValue:e(u).nome_fantasia,"onUpdate:modelValue":U[2]||(U[2]=O=>e(u).nome_fantasia=O),label:"Nome Fantasia"},null,8,["modelValue"])]),_:1}),o(p,{md:"4"},{default:a(()=>[o(h,{modelValue:e(u).inscricao_estadual,"onUpdate:modelValue":U[3]||(U[3]=O=>e(u).inscricao_estadual=O),label:"Inscrição Estadual"},null,8,["modelValue"])]),_:1})]),_:1}),o(j,null,{default:a(()=>[o(p,{md:"12"},{default:a(()=>[o(h,{modelValue:e(u).observacao,"onUpdate:modelValue":U[4]||(U[4]=O=>e(u).observacao=O),label:"Observação"},null,8,["modelValue"])]),_:1})]),_:1}),o(j,{class:"mb-3"},{default:a(()=>[o(Z,{onClick:R,size:"large",color:"red"},{default:a(()=>U[6]||(U[6]=[H("Voltar")])),_:1}),o(Z,{onClick:U[5]||(U[5]=O=>e(z)?_():D()),class:"ml-4",size:"large",color:"green"},{default:a(()=>U[7]||(U[7]=[H("Salvar")])),_:1})]),_:1})]),_:1})}}},io=["onClick"],no=["onClick"],uo={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:Fe,alt:"deletar",title:"Reativar"},co={key:1,src:Te,alt:"reativar",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"reativar"},mo={__name:"Documentos",props:{isModal:{type:Boolean,default:!1}},emits:["close-modal"],async setup(J,{emit:b}){let y,V;const P=b,x=J,{$toast:f}=ve(),I=Ve(),w=ye(),{id:S}=I.params,A=ce(),W=`${A.public.auth}/service/gerencia/listarTipoDocumento`,Q=`${A.public.auth}/service/gerencia/listarUF`,z=`${A.public.auth}/service/gerencia/getPessoaDocById`,k=`${A.public.auth}/service/gerencia/createPessoaDoc`,u=`${A.public.auth}/service/gerencia/updatePessoaDoc`,M=B(!1),v=B(null),t=B(q("user-data").value.usuario_id).value,D=Number(S||q("pessoa-id").value),_=be({tabvalores_tipodoc_id:null,emissor:null,numero:null,data_emissao:null,data_vencimento:null,tabvalores_ufemissor_id:null}),c=[{title:"Tipo",value:"tipoDocumento.descricao"},{title:"Número",value:"numero"},{title:"Emissor",value:"emissor"},{title:"UF",value:"ufEmissor.descricao"},{title:"Emissão",value:"data_emissao"},{title:"Validade",value:"data_vencimento"},{value:"actions"}],R={numero:{required:re.withMessage("O campo é obrigatorio",ie)},emissor:{required:re.withMessage("O campo é obrigatorio",ie)}},C=he(R,_),{data:U,pending:E,refresh:O}=([y,V]=$e(async()=>Be("cliente-documentos",async()=>{const[r,i,Y]=await Promise.all([ue(W),ue(Q),ue(`${z}/${D}`)]),ee=Y.map(g=>(console.log(g.data_emissao,g.data_vencimento),{...g,data_emissao:g.data_emissao?xe(g.data_emissao,"dd/mm/yyyy"):null,data_vencimento:g.data_vencimento?xe(g.data_vencimento,"dd/mm/yyyy"):null}));return{tipoDocumentoItems:r,ufItems:i,pessoasDocsItems:ee}})),y=await y,V(),y);async function le(){if(await C.value.$validate()){const r={..._};for(const oe in r)r[oe]===""&&(r[oe]=null);const i={...r,user_id:t,pessoa_id:D},{data:Y,error:ee,status:g}=await G(k,{method:"POST",body:i});if(g.value==="error"&&ee.value.statusCode===500)f.error("Erro ao cadastrar documento,erro no sistema.");else{f.success("Documento cadastrado com sucesso!"),O();for(const oe in _)_[oe]="";C.value.$reset()}}else f.error("Erro ao cadastrar documento, preencha os campos obrigatorios.")}function $(r){r&&(v.value={...r,data_emissao:r.data_emissao?xe(r.data_emissao,"dd/mm/yyyy"):null,data_vencimento:r.data_vencimento?xe(r.data_vencimento,"dd/mm/yyyy"):null},M.value=!0)}async function n(r){const i={tabvalores_tipodoc_id:v.value.tabvalores_tipodoc_id,numero:v.value.numero,emissor:v.value.emissor,tabvalores_ufemissor_id:v.value.tabvalores_ufemissor_id,data_vencimento:v.value.data_vencimento,data_emissao:ze(v.value.data_emissao)},{status:Y}=await G(`${u}/${r}`,{method:"PUT",body:i});Y.value==="success"&&(M.value=!1,f.success("Pessoa atualizada com sucesso!"),O())}async function s(r){r.excluido=!r.excluido;try{await G(`${u}/${r.id}`,{method:"PUT",body:JSON.stringify({excluido:r.excluido})})}catch(i){console.error("Erro ao excluir pessoa:",i)}}const F=()=>{if(x.isModal===!0){P("close-modal");return}w.push("/pessoas/lista")};return(r,i)=>{const Y=je,ee=we("mask");return m(),K(fe,null,[e(E)?X("",!0):(m(),T(ne,{key:0,class:"mt-3",style:{height:"425px"}},{default:a(()=>[o(j,null,{default:a(()=>[o(p,{md:"2"},{default:a(()=>[o(ae,{modelValue:e(_).tabvalores_tipodoc_id,"onUpdate:modelValue":i[0]||(i[0]=g=>e(_).tabvalores_tipodoc_id=g),items:e(U).tipoDocumentoItems,label:"Tipo","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),o(p,null,{default:a(()=>[o(h,{modelValue:e(_).numero,"onUpdate:modelValue":i[1]||(i[1]=g=>e(_).numero=g),"error-messages":e(C).numero.$errors.map(g=>g.$message),label:"Numero",required:"",onBlur:e(C).numero.$touch,onInput:e(C).numero.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1}),o(p,{md:"2"},{default:a(()=>[o(h,{modelValue:e(_).emissor,"onUpdate:modelValue":i[2]||(i[2]=g=>e(_).emissor=g),"error-messages":e(C).emissor.$errors.map(g=>g.$message),required:"",onBlur:e(C).emissor.$touch,onInput:e(C).emissor.$touch,label:"Emissor"},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1}),o(p,null,{default:a(()=>[o(ae,{modelValue:e(_).tabvalores_ufemissor_id,"onUpdate:modelValue":i[3]||(i[3]=g=>e(_).tabvalores_ufemissor_id=g),items:e(U).ufItems,label:"UF","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),o(p,{md:"2"},{default:a(()=>[se(o(h,{modelValue:e(_).data_emissao,"onUpdate:modelValue":i[4]||(i[4]=g=>e(_).data_emissao=g),label:"Emissão",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[ee,"##/##/####"]])]),_:1}),o(p,{md:"2"},{default:a(()=>[se(o(h,{modelValue:e(_).data_vencimento,"onUpdate:modelValue":i[5]||(i[5]=g=>e(_).data_vencimento=g),label:"Validade",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[ee,"##/##/####"]])]),_:1}),N("div",{class:"mt-1"},[N("img",{style:{width:"40px",height:"40px",cursor:"pointer"},src:Ce,alt:"novo",onClick:le})])]),_:1}),o(Se,{style:{"max-height":"330px"},headers:c,items:e(U).pessoasDocsItems,"item-key":"id"},{"item.actions":a(({item:g})=>[o(j,{style:{display:"flex","margin-top":"-8px",gap:"10px"}},{default:a(()=>[N("div",{onClick:oe=>$(g),title:"editar"},i[15]||(i[15]=[N("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:Le,alt:"editar"},null,-1)]),8,io),N("div",{onClick:oe=>s(g),title:"deletar"},[g.excluido?(m(),K("img",uo)):(m(),K("img",co))],8,no)]),_:2},1024)]),_:1},8,["items"]),o(Ie,{modelValue:e(M),"onUpdate:modelValue":i[14]||(i[14]=g=>pe(M)?M.value=g:null),"max-width":"600px"},{default:a(()=>[o(Ee,null,{default:a(()=>[o(He,{style:{color:"green"}},{default:a(()=>i[16]||(i[16]=[H("Atualizar Endereço")])),_:1}),o(Je,null,{default:a(()=>[o(j,null,{default:a(()=>[o(p,{cols:"12",md:"6"},{default:a(()=>[o(ae,{modelValue:e(v).tabvalores_tipodoc_id,"onUpdate:modelValue":i[6]||(i[6]=g=>e(v).tabvalores_tipodoc_id=g),items:e(U).tipoDocumentoItems,label:"Tipo","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),o(p,{cols:"12",md:"6"},{default:a(()=>[o(h,{modelValue:e(v).numero,"onUpdate:modelValue":i[7]||(i[7]=g=>e(v).numero=g),label:"Número"},null,8,["modelValue"])]),_:1}),o(p,{cols:"12",md:"6"},{default:a(()=>[o(h,{modelValue:e(v).emissor,"onUpdate:modelValue":i[8]||(i[8]=g=>e(v).emissor=g),label:"Número"},null,8,["modelValue"])]),_:1}),o(p,{cols:"12",md:"6"},{default:a(()=>[o(ae,{modelValue:e(v).tabvalores_ufemissor_id,"onUpdate:modelValue":i[9]||(i[9]=g=>e(v).tabvalores_ufemissor_id=g),items:e(U).ufItems,label:"UF","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),o(p,{cols:"12",md:"6"},{default:a(()=>[se(o(h,{modelValue:e(v).data_emissao,"onUpdate:modelValue":i[10]||(i[10]=g=>e(v).data_emissao=g),label:"Emissão",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[ee,"##/##/####"]])]),_:1}),o(p,{cols:"12",md:"6"},{default:a(()=>[se(o(h,{modelValue:e(v).data_vencimento,"onUpdate:modelValue":i[11]||(i[11]=g=>e(v).data_vencimento=g),label:"Validade",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[ee,"##/##/####"]])]),_:1})]),_:1})]),_:1}),o(Ke,null,{default:a(()=>[o(Re),o(Z,{color:"green",text:"",onClick:i[12]||(i[12]=g=>M.value=!1)},{default:a(()=>i[17]||(i[17]=[H("Cancelar")])),_:1}),o(Z,{color:"green",text:"",onClick:i[13]||(i[13]=g=>n(e(v).id))},{default:a(()=>i[18]||(i[18]=[H("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),o(Y,{onClick:F},{default:a(()=>[o(Z,{size:"large",class:"ml-10 mb-5",color:"red"},{default:a(()=>i[19]||(i[19]=[H("Voltar")])),_:1})]),_:1})],64)}}},po=["onClick"],fo={key:0,style:{width:"30px",height:"30px"},src:Fe,alt:"Visualizar",title:"Reativar"},vo={key:1,src:Te,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},_o={__name:"Representantes",props:{isModal:{type:Boolean,default:!1}},async setup(J){let b,y;const V=J,P=ce(),{$toast:x}=ve(),f=Ve(),I=ye(),w=`${P.public.auth}/service/gerencia/pesquisarPessoas`,S=`${P.public.auth}/service/gerencia/listarPapeis`,A=`${P.public.auth}/service/gerencia/representante`,W=`${P.public.auth}/service/gerencia/representante`,Q=`${P.public.auth}/service/gerencia/representante`,z=B(q("user-data").value.cartorio_token),{id:k}=f.params,u=Number(k||q("pessoa-id").value),M=B([]),v=B([]),t=B([]),D=B(!1),_=[{title:"Documento",align:"start",key:"representante",value:n=>{var s,F;return((s=n.representante)==null?void 0:s.doc_identificacao)||((F=n.representante)==null?void 0:F.documento)}},{title:"Pessoa",align:"start",key:"representante.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{value:"actions"}],c=be({papeis:null,nome:null,pessoa:null,documento:null}),{data:R}=([b,y]=$e(()=>G(S,{method:"POST",body:{rotina:"CADASTRO_PJ"}})),b=await b,y(),b);t.value=R.value;async function C(){try{const{data:n,error:s}=await G(w,{method:"POST",body:{cartorio_token:z.value,documento:c.documento,nome:c.nome}});n.value.length>0?(M.value=n.value,c.pessoa=M.value[0]):M.value=[]}catch(n){console.error("Erro na requisição",n)}}const U=()=>{D.value=!0},E=async()=>{const n={representante:c.pessoa,papel:t.value.find(s=>s.id===c.papeis)};try{const{data:s,error:F,status:r}=await G(A,{method:"POST",body:{ato_id:null,representante_id:c.pessoa.id,pessoa_id:u||k,papel_id:c.papeis,user_id:q("user-data").value.usuario_id}});r.value==="success"?(n.id=s.value.id,x.success("Pessoa Registrada com Sucesso!"),v.value.push(n)):x.error("Erro ao registrar a pessoa!")}catch{x.error("Erro no servidor. Tente novamente.")}};async function O(){const{data:n,error:s}=await G(`${W}/${k}`,{method:"GET"});v.value=n.value}async function le(n){n.excluido=!n.excluido;try{await G(`${Q}/${n.id}`,{method:"PUT",body:JSON.stringify({excluido:n.excluido})})}catch(s){console.error("Erro ao excluir pessoa:",s)}}const $=()=>{if(V.isModal===!0){emit("close-modal");return}I.push("/pessoas/lista")};return Ae(()=>{k&&O()}),(n,s)=>{const F=Jo,r=je;return m(),K(fe,null,[o(ne,{style:{height:"425px"}},{default:a(()=>[o(j,{class:"mt-1"},{default:a(()=>[o(p,{cols:"3"},{default:a(()=>[o(h,{label:"Documento",modelValue:e(c).documento,"onUpdate:modelValue":s[0]||(s[0]=i=>e(c).documento=i)},null,8,["modelValue"])]),_:1}),o(p,{cols:"4"},{default:a(()=>[o(h,{label:"Pessoa",modelValue:e(c).nome,"onUpdate:modelValue":s[1]||(s[1]=i=>e(c).nome=i)},null,8,["modelValue"])]),_:1}),N("div",null,[N("img",{class:"mt-1",src:We,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:C})]),N("div",null,[N("img",{class:"mt-1 ml-2",src:Ce,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:U})])]),_:1}),o(j,null,{default:a(()=>[o(p,{cols:"4"},{default:a(()=>[o(ae,{label:"Selecione a Pessoa",modelValue:e(c).pessoa,"onUpdate:modelValue":s[2]||(s[2]=i=>e(c).pessoa=i),items:e(M),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),o(p,{cols:"3"},{default:a(()=>[o(ae,{label:"Papel",modelValue:e(c).papeis,"onUpdate:modelValue":s[3]||(s[3]=i=>e(c).papeis=i),items:e(t),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),N("div",null,[N("img",{class:"mt-1",src:Ce,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:E})])]),_:1}),o(j,null,{default:a(()=>[o(p,null,{default:a(()=>[o(Se,{style:{"max-height":"330px"},headers:_,items:e(v)},{"item.actions":a(({item:i})=>[o(j,null,{default:a(()=>[N("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:Y=>le(i),title:"Deletar Pessoa"},[i.excluido?(m(),K("img",fo)):(m(),K("img",vo))],8,po)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),o(F,{show:e(D),onClose:s[4]||(s[4]=i=>D.value=!1)},null,8,["show"])]),_:1}),o(r,{onClick:$},{default:a(()=>[o(Z,{size:"large",class:"ml-10 mb-5",color:"red"},{default:a(()=>s[5]||(s[5]=[H("Voltar")])),_:1})]),_:1})],64)}}},go={class:"mt-1"},yo={style:{width:"150px","font-weight":"500"}},bo={style:{width:"200px","font-weight":"500"}},Vo=["onClick"],ko=["onClick"],$o={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:Fe,alt:"Visualizar",title:"Reativar"},xo={key:1,src:Te,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},Co={__name:"Endereco",props:{isModal:{type:Boolean,default:!1}},emits:["close-modal"],async setup(J,{emit:b}){let y,V;const P=b,x=J,{$toast:f}=ve(),I=Ve(),{id:w}=I.params,S=ye(),A=ce(),W=`${A.public.auth}/service/gerencia/listarPais`,Q=`${A.public.auth}/service/gerencia/getPessoaEnderecoById`,z=`${A.public.auth}/service/gerencia/createPessoaEndereco`,k=`${A.public.auth}/service/gerencia/updatePessoaEndereco`,u=`${A.public.auth}/service/gerencia/cep`,M=B(q("user-data").value.usuario_id).value,v=Number(w||q("pessoa-id").value),t=be({tabvalores_pais_id:null,cidade_id:null,codcep:null,logradouro:null,numero:null,bairro:null,complemento:null,cidade_estrangeira:null}),D=[{title:"País",value:"pais.descricao"},{title:"CEP",value:"codcep"},{title:"Endereço",value:"logradouro"},{title:"N*",value:"numero"},{title:"Complemento",value:"complemento"},{title:"Bairro",value:"bairro"},{title:"Cidade",value:"cidade"},{value:"actions"}],_=B(!1),c=B(null),R=De(()=>{const L=$.value.paisItems.find(l=>l.id===t.tabvalores_pais_id);return L?L.estrangeiro:!1}),C=L=>{var l;return((l=L.cidades)==null?void 0:l.nome)||L.cidade_estrangeira},U={numero:{required:re.withMessage("O campo é obrigatorio",ie)},bairro:{required:re.withMessage("O campo é obrigatorio",ie)},logradouro:{required:re.withMessage("O campo é obrigatorio",ie)},codcep:{required:re.withMessage("O campo é obrigatorio e precisa de 8 digitos",ie)}},E=he(U,t),le=q("auth_token").value,{data:$,status:n,pending:s,refresh:F}=([y,V]=$e(async()=>Be("cliente-enderecos",async()=>{const[L,l,te]=await Promise.all([ue(W),ue(`${Q}/${v}`),ue(`${A.public.auth}/service/gerencia/listarCidades`)]);return{paisItems:L,enderecosItems:l,cidadesItems:te}})),y=await y,V(),y);async function r(){if(await E.value.$validate()){const l={...{...t},user_id:M,pessoa_id:v},{data:te,error:d,status:me}=await G(z,{method:"POST",body:l});if(me.value==="error"&&d.value.statusCode===500)f.error("Erro ao cadastrar endereço,erro no sistema.");else{f.success("Endereço cadastrado com sucesso!"),F();for(const ke in t)t[ke]=null;E.value.$reset()}}else f.error("Erro ao cadastrar Endereço, preencha os campos obrigatorios.")}async function i(){if(!t.cidade_estrangeira||!t.logradouro){f.error("Os Campos Cidade Estrangeira e Endereço são obrigatorios!");return}const l={...{...t},user_id:M,pessoa_id:v},{data:te,error:d,status:me}=await G(z,{method:"POST",body:l});if(me.value==="error"&&d.value.statusCode===500)f.error("Erro ao cadastrar endereço,erro no sistema.");else{f.success("Endereço cadastrado com sucesso!"),F();for(const ke in t)t[ke]=null;E.value.$reset()}}function Y(L){const l=$.value.enderecosItems.find(te=>te.id===L);l&&(c.value=l,_.value=!0)}async function ee(L){const l={tabvalores_pais_id:c.value.tabvalores_pais_id,cidade_id:c.value.cidade_id,codcep:c.value.codcep,logradouro:c.value.logradouro,numero:c.value.numero,bairro:c.value.bairro,complemento:c.value.complemento},{status:te}=await G(`${k}/${L}`,{method:"PUT",body:l});te.value==="success"&&(_.value=!1,f.success("Endereço atualizado com sucesso!"),F())}Ne(()=>t.codcep,async L=>{if(L.length===8)try{const{data:l,error:te}=await de(`${u}/${L}`,{headers:{Authorization:le}},"$xTfPNGciav");if(te.value){console.error("Erro ao buscar CEP:",te.value),f.error("Erro ao buscar CEP no servidor.");return}if(l.value.logradouro&&l.value.bairro&&l.value.localidade&&l.value.uf){t.logradouro=l.value.logradouro,t.bairro=l.value.bairro,t.complemento=l.value.complemento;let d=`${l.value.localidade}/${l.value.uf}`.toUpperCase();const me=$.value.cidadesItems.find(ke=>ke.descricao===d);me?(t.cidade_id=me.id,t.tabvalores_pais_id=76):f.error("Cidade não encontrada na lista!")}else f.error("CEP não retornou dados válidos!")}catch(l){console.error("Erro inesperado:",l),f.error("Erro inesperado. Verifique sua conexão.")}});async function g(L){L.excluido=!L.excluido;try{await G(`${k}/${L.id}`,{method:"PUT",body:{excluido:L.excluido}})}catch(l){console.error("Erro ao excluir pessoa:",l)}}const oe=()=>{if(x.isModal===!0){P("close-modal");return}S.push("/pessoas/lista")};return(L,l)=>{const te=we("mask");return m(),K(fe,null,[e(s)?X("",!0):(m(),T(ne,{key:0,class:"mt-3",style:{height:"425px"}},{default:a(()=>[o(j,null,{default:a(()=>[o(p,{md:"2"},{default:a(()=>[o(ae,{modelValue:e(t).tabvalores_pais_id,"onUpdate:modelValue":l[0]||(l[0]=d=>e(t).tabvalores_pais_id=d),items:e($).paisItems,label:"País","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),o(p,{md:"2"},{default:a(()=>[e(R)?se((m(),T(h,{key:1,modelValue:e(t).codcep,"onUpdate:modelValue":l[2]||(l[2]=d=>e(t).codcep=d),label:"CEP"},null,8,["modelValue"])),[[te,"########"]]):se((m(),T(h,{key:0,modelValue:e(t).codcep,"onUpdate:modelValue":l[1]||(l[1]=d=>e(t).codcep=d),"error-messages":e(E).codcep.$errors.map(d=>d.$message),required:"",onBlur:e(E).codcep.$touch,onInput:e(E).codcep.$touch,label:"CEP"},null,8,["modelValue","error-messages","onBlur","onInput"])),[[te,"########"]])]),_:1}),o(p,{md:"6"},{default:a(()=>[e(R)?(m(),T(h,{key:1,modelValue:e(t).logradouro,"onUpdate:modelValue":l[4]||(l[4]=d=>e(t).logradouro=d),label:"Endereço"},null,8,["modelValue"])):(m(),T(h,{key:0,modelValue:e(t).logradouro,"onUpdate:modelValue":l[3]||(l[3]=d=>e(t).logradouro=d),label:"Endereço","error-messages":e(E).logradouro.$errors.map(d=>d.$message),required:"",onBlur:e(E).logradouro.$touch,onInput:e(E).logradouro.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]))]),_:1}),o(p,{md:"1"},{default:a(()=>[e(R)?(m(),T(h,{key:1,modelValue:e(t).numero,"onUpdate:modelValue":l[6]||(l[6]=d=>e(t).numero=d),label:"N*"},null,8,["modelValue"])):(m(),T(h,{key:0,modelValue:e(t).numero,"onUpdate:modelValue":l[5]||(l[5]=d=>e(t).numero=d),required:"","error-messages":e(E).numero.$errors.map(d=>d.$message),onBlur:e(E).numero.$touch,onInput:e(E).numero.$touch,label:"N*"},null,8,["modelValue","error-messages","onBlur","onInput"]))]),_:1}),N("div",go,[N("img",{style:{width:"40px",height:"40px",cursor:"pointer"},src:Ce,alt:"novo",onClick:l[7]||(l[7]=d=>e(R)?i():r())})]),o(p,{md:"5"},{default:a(()=>[o(h,{modelValue:e(t).complemento,"onUpdate:modelValue":l[8]||(l[8]=d=>e(t).complemento=d),label:"Complemento"},null,8,["modelValue"])]),_:1}),o(p,{md:"3"},{default:a(()=>[e(R)?(m(),T(h,{key:1,modelValue:e(t).bairro,"onUpdate:modelValue":l[10]||(l[10]=d=>e(t).bairro=d),label:"Bairro"},null,8,["modelValue"])):(m(),T(h,{key:0,modelValue:e(t).bairro,"onUpdate:modelValue":l[9]||(l[9]=d=>e(t).bairro=d),"error-messages":e(E).bairro.$errors.map(d=>d.$message),required:"",onBlur:e(E).bairro.$touch,onInput:e(E).bairro.$touch,label:"Bairro"},null,8,["modelValue","error-messages","onBlur","onInput"]))]),_:1}),o(p,{md:"3"},{default:a(()=>[e(R)?(m(),T(h,{key:1,modelValue:e(t).cidade_estrangeira,"onUpdate:modelValue":l[12]||(l[12]=d=>e(t).cidade_estrangeira=d),label:"Cidade Estrangeira"},null,8,["modelValue"])):(m(),T(ae,{key:0,modelValue:e(t).cidade_id,"onUpdate:modelValue":l[11]||(l[11]=d=>e(t).cidade_id=d),items:e($).cidadesItems,label:"Cidade","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"]))]),_:1})]),_:1}),o(Se,{style:{"max-height":"330px"},headers:D,items:e($).enderecosItems,"item-key":"id"},{"item.cidade":a(({item:d})=>[N("h4",yo,Pe(C(d)),1)]),"item.logradouro":a(({item:d})=>[N("h4",bo,Pe(d.logradouro),1)]),"item.actions":a(({item:d})=>[o(j,{style:{display:"flex","margin-top":"-8px",gap:"10px"}},{default:a(()=>[N("div",{onClick:me=>Y(d.id),title:"Visualizar"},l[24]||(l[24]=[N("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:Le,alt:"Visualizar"},null,-1)]),8,Vo),N("div",{onClick:me=>g(d),title:"Visualizar"},[d.excluido?(m(),K("img",$o)):(m(),K("img",xo))],8,ko)]),_:2},1024)]),_:1},8,["items"]),o(Ie,{modelValue:e(_),"onUpdate:modelValue":l[23]||(l[23]=d=>pe(_)?_.value=d:null),"max-width":"600px"},{default:a(()=>[o(Ee,null,{default:a(()=>[o(He,{style:{color:"green"}},{default:a(()=>l[25]||(l[25]=[H("Atualizar Endereço")])),_:1}),o(Je,null,{default:a(()=>[o(j,null,{default:a(()=>[o(p,{cols:"12",md:"6"},{default:a(()=>[o(ae,{modelValue:e(c).tabvalores_pais_id,"onUpdate:modelValue":l[13]||(l[13]=d=>e(c).tabvalores_pais_id=d),items:e($).paisItems,label:"País","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),o(p,{cols:"12",md:"6"},{default:a(()=>[o(h,{modelValue:e(c).logradouro,"onUpdate:modelValue":l[14]||(l[14]=d=>e(c).logradouro=d),label:"Logradouro"},null,8,["modelValue"])]),_:1}),o(p,{cols:"12",md:"6"},{default:a(()=>[o(h,{modelValue:e(c).complemento,"onUpdate:modelValue":l[15]||(l[15]=d=>e(c).complemento=d),label:"Complemento"},null,8,["modelValue"])]),_:1}),o(p,{cols:"12",md:"6"},{default:a(()=>[o(h,{modelValue:e(c).numero,"onUpdate:modelValue":l[16]||(l[16]=d=>e(c).numero=d),label:"Número"},null,8,["modelValue"])]),_:1}),o(p,{cols:"12",md:"6"},{default:a(()=>[o(h,{modelValue:e(c).bairro,"onUpdate:modelValue":l[17]||(l[17]=d=>e(c).bairro=d),label:"Bairro"},null,8,["modelValue"])]),_:1}),o(p,{cols:"12",md:"6"},{default:a(()=>[o(h,{modelValue:e(c).codcep,"onUpdate:modelValue":l[18]||(l[18]=d=>e(c).codcep=d),label:"CEP"},null,8,["modelValue"])]),_:1}),o(p,{cols:"12",md:"6"},{default:a(()=>[e(c).cidade_estrangeira?(m(),T(ae,{key:0,modelValue:e(c).cidade_id,"onUpdate:modelValue":l[19]||(l[19]=d=>e(c).cidade_id=d),items:e($).cidadesItems,label:"Cidade","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])):(m(),T(h,{key:1,modelValue:e(c).cidade_estrangeira,"onUpdate:modelValue":l[20]||(l[20]=d=>e(c).cidade_estrangeira=d),label:"Cidade Estrangeira"},null,8,["modelValue"]))]),_:1})]),_:1})]),_:1}),o(Ke,null,{default:a(()=>[o(Re),o(Z,{color:"green",text:"",onClick:l[21]||(l[21]=d=>_.value=!1)},{default:a(()=>l[26]||(l[26]=[H("Cancelar")])),_:1}),o(Z,{color:"green",text:"",onClick:l[22]||(l[22]=d=>ee(e(c).id))},{default:a(()=>l[27]||(l[27]=[H("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),o(Z,{onClick:oe,class:"ml-10 mb-5",size:"large",color:"red"},{default:a(()=>l[28]||(l[28]=[H("Voltar")])),_:1})],64)}}},ho={class:"finger-container"},wo=["onClick"],Ao=["onClick"],Io={__name:"Digital",setup(J){const b=B(["E1","E2","E3","E4","E5"]);var y=B(["red","red","red","red","red"]);const V=B(["D1","D2","D3","D4","D5"]);var P=B(["red","red","red","red","red"]);const x=Ve(),{$toast:f}=ve(),I=ce(),{id:w}=x.params,S=B(q("pessoa-id").value).value,A=`${I.public.biometria}/capture-finger`,W=`${I.public.managemant}/createPessoaBiometria`,Q=`${I.public.managemant}/getPessoaBiometriaById`;async function z(){const{status:v,data:t}=await de(`${Q}/${w||S}`,{method:"GET"},"$wrCckM1pY4");v.value==="success"&&t.value&&t.value.forEach(D=>{(b.value.includes(D.dedo)||V.value.includes(D.dedo))&&u(D.dedo,"green")})}Ae(()=>{z()});async function k(v){const{status:t,data:D}=await de(A,{method:"GET"},"$b5yqRnLFV9");if(t.value==="success"){const _=D.value.hash,c={user_id:q("user-data").value.usuario_id,pessoa_id:Number(w)||S,dedo:v,hash:_},{status:R}=await de(W,{method:"POST",body:c},"$cWP9jlCX2Z");R.value==="success"?(f.success("Biometria enviada com sucesso!"),u(v,"green")):f.error("Falha ao enviar a biometria.")}else f.error("Erro ao Capturar biometria para o sistema.")}function u(v,t){const D=b.value.findIndex(_=>_===v);if(D!==-1)y.value[D]=t;else{const _=V.value.findIndex(c=>c===v);_!==-1&&(P.value[_]=t)}}function M(v,t){const _={E1:{top:82,left:-10},E2:{top:35,left:4},E3:{top:0,left:30},E4:{top:15,left:75},E5:{top:50,left:170},D1:{top:50,left:210},D2:{top:18,left:300},D3:{top:5,left:350},D4:{top:35,left:375},D5:{top:80,left:390}}[v];let c="red";if(t==="left"){const R=b.value.indexOf(v);R!==-1&&(c=y.value[R])}else if(t==="right"){const R=V.value.indexOf(v);R!==-1&&(c=P.value[R])}return{backgroundColor:c,top:`${_.top}px`,left:`${_.left}px`}}return(v,t)=>(m(),T(p,{style:{"margin-top":"20px"},cols:"auto",class:"biometria-container"},{default:a(()=>[N("div",ho,[(m(!0),K(fe,null,Me(e(b),(D,_)=>(m(),K("div",{key:_,class:"finger",style:Ue(M(D,"left")),onClick:c=>k(D)},null,12,wo))),128)),(m(!0),K(fe,null,Me(e(V),(D,_)=>(m(),K("div",{key:_,class:"finger",style:Ue(M(D,"right")),onClick:c=>k(D)},null,12,Ao))),128))])]),_:1}))}},Eo=Oe(Io,[["__scopeId","data-v-02650459"]]),Po="data:image/png;base64,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",Do=["src"],Uo={key:2,src:Po},Bo={__name:"ReconhecimentoFacial",setup(J){const b=B(null),y=B([]),V=B(""),P=B(!1),x=B(null),f=B(null),I=Ve(),{id:w}=I.params,S=B(1),W=q("pessoa_token").value,z=q("user-data").value.nome,k=ce(),u=`${k.public.managemant}/upload`,M=`${k.public.managemant}/getLinkTipo`,v=`${k.public.managemant}/download`,{$toast:t}=ve(),D=De(()=>!!f.value),_=De(()=>!!x.value),c=B(!1),R=async()=>{const $=await navigator.mediaDevices.enumerateDevices();y.value=$.filter(n=>n.kind==="videoinput").map(n=>({deviceId:n.deviceId,label:n.label||`Camera ${y.value.length+1}`}))},C=async()=>{P.value=!0;try{await navigator.mediaDevices.getUserMedia({video:!0}),await R()}catch($){console.error("Erro ao acessar dispositivos de mídia:",$)}},U=()=>{P.value=!1;const $=b.value.srcObject;$&&$.getTracks().forEach(s=>s.stop())},E=async()=>{if(V.value){const $=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:V.value}}});b.value.srcObject=$}},O=async()=>{const $=document.createElement("canvas"),n=$.getContext("2d"),s=b.value.videoWidth,F=b.value.videoHeight,r=s*S.value,i=F*S.value,Y=(s-r)/2,ee=(F-i)/2;$.width=s,$.height=F,n.drawImage(b.value,Y,ee,r,i),$.toBlob(async g=>{const oe=new FormData;oe.append("file",g,`${z}.jpg`),oe.append("cartorio_token",q("user-data").value.cartorio_token),oe.append("token",W),oe.append("tipo","foto");const{status:L}=await de(u,{method:"POST",body:oe},"$fRRPU47ULS");if(L.value==="success"){t.success("Imagem enviada!");const l=URL.createObjectURL(g);x.value=l,U()}else t.error("Erro ao enviar imagem para o sistema.")},"image/jpeg")};return w&&(async $=>{var i;if(!$)return;const{data:n}=await de(M,{method:"POST",body:{tipo:"foto",id:$}},"$N16ZtKMkSh");if(!((i=n.value)!=null&&i.link))return;const{data:s}=await de(v,{method:"POST",body:{bucket:q("user-data").value.cartorio_token,path:n.value.link}},"$mC9TAMOeqI"),F=n.value.link,r=s.value;/\.(tr7|tiff)$/i.test(F)?(f.value=r,c.value=!1):x.value=r})(w),Ae(async()=>{try{await navigator.mediaDevices.getUserMedia({video:!0}),await R()}catch($){console.error("Erro ao acessar dispositivos de mídia:",$)}}),($,n)=>{const s=Ze;return m(),T(p,{cols:"auto"},{default:a(()=>[o(Ie,{"max-width":"700",modelValue:e(P),"onUpdate:modelValue":n[3]||(n[3]=F=>pe(P)?P.value=F:null)},{activator:a(({props:F})=>[o(Z,Ge(F,{variant:"outlined",style:{width:"300px",height:"300px"},onClick:C}),{default:a(()=>[e(D)&&!e(c)?(m(),T(s,{key:0,"tiff-url":e(f),onError:n[0]||(n[0]=r=>c.value=!0)},null,8,["tiff-url"])):e(_)?(m(),K("img",{key:1,src:e(x),style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,Do)):(m(),K("img",Uo))]),_:2},1040)]),default:a(({isActive:F})=>[o(Ee,{title:"Biometria"},{default:a(()=>[o(j,null,{default:a(()=>[o(p,null,{default:a(()=>[o(ne,null,{default:a(()=>[o(qe,{items:e(y),modelValue:e(V),"onUpdate:modelValue":n[1]||(n[1]=r=>pe(V)?V.value=r:null),"item-title":"label","item-value":"deviceId",label:"Selecionar Webcam"},null,8,["items","modelValue"])]),_:1})]),_:1})]),_:1}),o(j,null,{default:a(()=>[o(p,null,{default:a(()=>[o(Z,{size:"large",class:"ml-5",onClick:E},{default:a(()=>n[4]||(n[4]=[H("Exibir")])),_:1})]),_:1})]),_:1}),o(ne,null,{default:a(()=>[o(Qe,{modelValue:e(S),"onUpdate:modelValue":n[2]||(n[2]=r=>pe(S)?S.value=r:null),min:1,max:3,step:"0.1",label:"Zoom"},null,8,["modelValue"])]),_:1}),o(j,null,{default:a(()=>[o(ne,{style:{overflow:"hidden"}},{default:a(()=>[o(p,{class:"d-flex justify-center align-center"},{default:a(()=>[N("video",{ref_key:"video",ref:b,width:"360",height:"300",autoplay:"",style:Ue({transform:`scale(${e(S)})`,transformOrigin:"center center"})},null,4)]),_:1})]),_:1})]),_:1}),o(j,{class:"mt-10 mb-5 ml-5"},{default:a(()=>[o(Z,{color:"red",size:"large",onClick:U},{default:a(()=>n[5]||(n[5]=[H("Fechar")])),_:1}),o(Z,{color:"green",size:"large",class:"ml-5",onClick:O},{default:a(()=>n[6]||(n[6]=[H("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Fo=""+new URL("escanearFicha.CgD8l9Wn.png",import.meta.url).href,To={__name:"Scanner",setup(J){const b=ce(),{$toast:y}=ve(),V=`${b.public.envioDoc}`,P=`${b.public.biometria}/run-scanner`,f=q("pessoa_token").value;async function I(){try{await w(),await S()}catch(A){console.error("Erro ao executar scanner ou listar arquivos:",A)}}async function w(){try{const{data:A}=await de(P,{method:"GET"},"$qlTK399Ixo")}catch(A){y.error("Erro ao acionar o scanner:",A)}}async function S(){try{const{status:A,data:W}=await de(V,{method:"POST",body:{tipo:"ficha",token:f,cartorio_token:q("user-data").value.cartorio_token}},"$JkvEThvk9m")}catch(A){y.error(A),console.error("Erro ao enviar o arquivo:",A)}}return(A,W)=>(m(),K("div",null,[N("img",{onClick:I,src:Fo,style:{width:"280px",height:"120px",cursor:"pointer","margin-top":"30px"}})]))}},So=""+new URL("imprimirFicha.BlhLZ85F.png",import.meta.url).href,Mo={style:{display:"flex","flex-direction":"column"}},Ro={key:0},No={__name:"Impressao",props:{linkFicha:String},async setup(J){let b,y;const V=J,P=B(""),x=ce(),f=`${x.public.managemant}/gerarRelatorioPessoa`,I=`${x.public.managemant}/download`,w=B(null),S=B(!1),A=B(!1),W=async()=>{const k=await de(f,{method:"POST",body:{consulta:"FICHA ASSINATURA",pessoa_token:q("pessoa_token").value}},"$LOyFO5WGQE");P.value=k.data.value};if(V.linkFicha){const{data:k}=([b,y]=$e(()=>de(I,{method:"POST",body:{bucket:q("user-data").value.cartorio_token,path:V.linkFicha}},"$BxSla0y3eT")),b=await b,y(),b);w.value=k.value}const Q=()=>{A.value=!0,S.value=!0},z=async()=>{await W();const k=document.createElement("iframe");k.style.position="absolute",k.style.width="0px",k.style.height="0px",k.style.border="none",document.body.appendChild(k);const u=k.contentWindow.document;u.open(),u.write(P.value),u.close(),k.contentWindow.focus(),k.contentWindow.print(),document.body.removeChild(k)};return(k,u)=>{const M=To,v=eo;return m(),K(fe,null,[o(p,{cols:"auto"},{default:a(()=>[N("div",Mo,[N("img",{onClick:u[0]||(u[0]=t=>z()),src:So,style:{width:"280px",height:"120px",cursor:"pointer"}}),o(M)]),V.linkFicha?(m(),K("div",Ro,[N("img",{onClick:u[1]||(u[1]=t=>Q()),style:{width:"80px",height:"80px",cursor:"pointer"},src:We,alt:"Ver ficha"})])):X("",!0)]),_:1}),e(A)?(m(),T(v,{key:0,show:e(A),"link-view":e(w),"is-view":!0,onClose:u[2]||(u[2]=t=>A.value=!1)},null,8,["show","link-view"])):X("",!0)],64)}}},Oo={__name:"Index",props:{isModal:{type:Boolean,default:!1},linkFicha:String},emits:["close-modal"],setup(J,{emit:b}){const y=ye(),V=b,P=J,x=()=>{if(P.isModal===!0){V("close-modal");return}y.push("/pessoas/lista")};return(f,I)=>{const w=Eo,S=Bo,A=No;return m(),K(fe,null,[o(ne,null,{default:a(()=>[o(j,{class:"d-flex align-items-center"},{default:a(()=>[o(w),o(S,{class:"ml-5 mr-5"}),o(A,{"link-ficha":P.linkFicha},null,8,["link-ficha"])]),_:1})]),_:1}),o(Z,{onClick:x,class:"mt-10",size:"large",color:"red"},{default:a(()=>I[0]||(I[0]=[H("Voltar")])),_:1})],64)}}},zo={},qo={style:{height:"425px"}};function jo(J,b){return m(),K("div",qo,b[0]||(b[0]=[N("h1",null,"Restrições",-1)]))}const Lo=Oe(zo,[["render",jo]]),Ho={style:{"background-color":"#f5f2f2",padding:"5px 0px 0px 20px"}},Jo={__name:"RegistroPessoas",props:{show:Boolean},emits:["close"],setup(J,{emit:b}){const y=J,V=B(y.show),P=b,x=B("dados"),f=B(!1),I=B(!1),w=B(!1),S=be({tipo_pessoa:"FISICA"}),A=[{label:"FÍSICA",value:"FISICA"},{label:"JURÍDICA",value:"JURIDICA"},{label:"ESTRANGEIRA",value:"ESTRANGEIRA"}],W=()=>{f.value=!0,w.value=!0},Q=()=>{I.value=!0,w.value=!0};Ne(()=>y.show,k=>{V.value=k});const z=()=>{V.value=!1,P("close")};return(k,u)=>{const M=lo,v=ro,t=mo,D=_o,_=Co,c=Oo,R=Lo;return m(),T(Ie,{persistent:"",modelValue:e(V),"onUpdate:modelValue":u[3]||(u[3]=C=>pe(V)?V.value=C:null),"max-width":"900"},{default:a(()=>[o(Ee,null,{default:a(()=>[o(ne,null,{default:a(()=>[u[10]||(u[10]=N("h1",{style:{"background-color":"#f5f2f2",color:"#525050",padding:"10px 0px 0px 20px"}}," Cadastramento de pessoas ",-1)),N("div",Ho,[o(ae,{modelValue:e(S).tipo_pessoa,"onUpdate:modelValue":u[0]||(u[0]=C=>e(S).tipo_pessoa=C),style:{width:"200px"},items:A,"item-title":"label","item-value":"value",label:"Tipo de pessoa","bg-color":"#F6F6F6",disabled:e(w)},null,8,["modelValue","disabled"])]),o(oo,{modelValue:e(x),"onUpdate:modelValue":u[1]||(u[1]=C=>pe(x)?x.value=C:null),"bg-color":"#f5f2f2"},{default:a(()=>[o(_e,{value:"dados"},{default:a(()=>u[4]||(u[4]=[H("Dados")])),_:1}),e(f)?(m(),T(_e,{key:0,value:"documento"},{default:a(()=>u[5]||(u[5]=[H("Documentos")])),_:1})):X("",!0),e(I)?(m(),T(_e,{key:1,value:"representante"},{default:a(()=>u[6]||(u[6]=[H("Representantes")])),_:1})):X("",!0),e(I)||e(f)?(m(),T(_e,{key:2,value:"endereco"},{default:a(()=>u[7]||(u[7]=[H("Endereços")])),_:1})):X("",!0),e(f)?(m(),T(_e,{key:3,value:"biometria"},{default:a(()=>u[8]||(u[8]=[H("Biometria")])),_:1})):X("",!0),e(I)||e(f)?(m(),T(_e,{key:4,value:"restricao"},{default:a(()=>u[9]||(u[9]=[H("Restrições")])),_:1})):X("",!0)]),_:1},8,["modelValue"]),o(ao,{modelValue:e(x),"onUpdate:modelValue":u[2]||(u[2]=C=>pe(x)?x.value=C:null)},{default:a(()=>[o(ge,{value:"dados"},{default:a(()=>[e(S).tipo_pessoa==="FISICA"?(m(),T(M,{key:0,onSaved:W,onCloseModal:z,isModal:!0})):e(S).tipo_pessoa==="JURIDICA"?(m(),T(v,{key:1,onSaved:Q,onCloseModal:z,isModal:!0})):X("",!0)]),_:1}),k.showTabs?(m(),T(ge,{key:0,value:"documento"},{default:a(()=>[o(t,{onCloseModal:z,isModal:!0})]),_:1})):X("",!0),e(I)?(m(),T(ge,{key:1,value:"representante"},{default:a(()=>[o(D,{onCloseModal:z,isModal:!0})]),_:1})):X("",!0),e(I)||e(f)?(m(),T(ge,{key:2,value:"endereco"},{default:a(()=>[o(_,{onCloseModal:z,isModal:!0})]),_:1})):X("",!0),k.showTabs?(m(),T(ge,{key:3,value:"biometria"},{default:a(()=>[o(ne,null,{default:a(()=>[o(c,{onCloseModal:z,isModal:!0})]),_:1})]),_:1})):X("",!0),k.showTabs?(m(),T(ge,{key:4,value:"restricao"},{default:a(()=>[o(R,{onCloseModal:z,isModal:!0})]),_:1})):X("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};export{Jo as _,ro as a,mo as b,_o as c,Co as d,Oo as e,Lo as f,lo as g};
