import{_ as M}from"./WXhL-rHV.js";import{_ as S}from"./BVz1G1IN.js";import{_ as j}from"./egs2J4sT.js";import{_ as q}from"./Bvb9VvYv.js";import{_ as F,a as G}from"./DJvq3mCv.js";import{m as w,L as O,r as p,G as W,I as H,z as J,p as K,w as r,v as Q,o as V,b as a,a as i,C as f,q as l,s as _,B as X,c as b}from"./BEuqywk4.js";import{f as $}from"./B0IxRygJ.js";import{f as Y}from"./D0DKwFHy.js";import{V as Z}from"./D2ABHjug.js";import{V as h}from"./DARs971S.js";import{V as D}from"./CZEjr6Vq.js";import{V as ee}from"./Kg70ixMV.js";import"./Cq6Whg1H.js";import"./vRQ8OJJf.js";import"./B48GOA9C.js";import"./BZKrK648.js";import"./CyVw0FD3.js";import"./uDJ1maCw.js";import"./BqBpuqHo.js";import"./CPf0QefJ.js";import"./DRW5y29H.js";const te=["onClick"],oe=["onClick"],ae=["onClick"],re={key:0,style:{width:"30px",height:"30px"},src:F,alt:"Visualizar",title:"Reativar"},ie={key:1,src:G,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ze={__name:"index",async setup(le){let s,g;const k=Q(),z=`${k.public.auth}/service/gerencia/listar_matriculas`,L=`${k.public.auth}/service/gerencia/matriculas`,N=w("auth_token"),C=O(),n=p(""),c=p(""),u=p(""),d=p(""),T=[{title:"Número",value:"numero"},{title:"Data",value:"data"},{title:"Protocolo",value:"protocolo"},{title:"Descrição",value:"descricao"},{value:"actions"}],y=([s,g]=W(()=>$fetch(`${z}?pageNumber=1&pageSize=1000000`,{method:"POST",body:{cartorio_token:w("user-data").value.cartorio_token},headers:{Authorization:`Bearer ${N.value}`}})),s=await s,g(),s),U=H(()=>!y||y.length===0?[]:y.filter(e=>{const t=e.numero?e.numero.toLowerCase():"",v=e.descricao?e.descricao.toLowerCase():"",x=e.protocolo?e.protocolo.toLowerCase():"",o=e.data?$(e.data,"dd/mm/yyyy"):"",m=t.includes(c.value.toLowerCase()),A=v.includes(n.value.toLowerCase()),E=x.includes(u.value.toLowerCase()),I=o.includes(d.value);return m&&A&&E&&I}).map(e=>({...e,data:$(e.data,"dd/mm/yyyy")})));async function B(e){e.excluido=!e.excluido;try{await Y(`${L}/${e.id}`,{method:"PUT",body:{excluido:e.excluido}})}catch(t){console.error("Erro ao excluir pessoa:",t)}}function P(e){C.push({path:`/matriculas/vizualizar/${e}`})}function R(e){C.push({path:`/matriculas/atualizar/${e}`})}return(e,t)=>{const v=M,x=J("mask");return V(),K(Z,{class:"mt-5"},{default:r(()=>[a(v,{to:"/matriculas/cadastro"},{default:r(()=>t[4]||(t[4]=[i("img",{style:{cursor:"pointer"},src:S,alt:"Cadastro"},null,-1)])),_:1}),a(D,{style:{gap:"0.5rem"}},{default:r(()=>[a(h,{cols:"2"},{default:r(()=>[a(f,{class:"mt-7 mb-4",modelValue:l(c),"onUpdate:modelValue":t[0]||(t[0]=o=>_(c)?c.value=o:null),label:"Número","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),a(h,{cols:"2"},{default:r(()=>[X(a(f,{class:"mt-7 mb-4",modelValue:l(d),"onUpdate:modelValue":t[1]||(t[1]=o=>_(d)?d.value=o:null),label:"Data","prepend-inner-icon":"mdi-magnify",placeholder:"dd/mm/yyyy",variant:"outlined","hide-details":""},null,8,["modelValue"]),[[x,"##/##/####"]])]),_:1}),a(h,{cols:"2"},{default:r(()=>[a(f,{class:"mt-7 mb-4",modelValue:l(u),"onUpdate:modelValue":t[2]||(t[2]=o=>_(u)?u.value=o:null),label:"Protocolo","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),a(h,{cols:"3"},{default:r(()=>[a(f,{class:"mt-7 mb-4",modelValue:l(n),"onUpdate:modelValue":t[3]||(t[3]=o=>_(n)?n.value=o:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),a(ee,{density:"compact",headers:T,items:l(U),"item-key":"id"},{"item.actions":r(({item:o})=>[a(D,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:r(()=>[i("div",{style:{cursor:"pointer"},onClick:m=>P(o.id),title:"Visualizar"},t[5]||(t[5]=[i("img",{style:{width:"30px",height:"30px"},src:j,alt:"Visualizar"},null,-1)]),8,te),i("div",{style:{cursor:"pointer"},onClick:m=>R(o.id),title:"Atualizar"},t[6]||(t[6]=[i("img",{style:{width:"30px",height:"30px"},src:q,alt:"Atualizar"},null,-1)]),8,oe),i("div",{style:{cursor:"pointer"},onClick:m=>B(o),title:"Deletar"},[o.excluido?(V(),b("img",re)):(V(),b("img",ie))],8,ae)]),_:2},1024)]),_:1},8,["items"])]),_:1})}}};export{ze as default};
