import{_ as v,r as i,q as h,h as b,c as u,a as o,F as g,O as y,B as _,P as x,J as k,s as E,o as d,E as S,t as M}from"./KmxbTDZB.js";const w={class:"chat-container"},B={__name:"index",setup(C){const n=i(""),m=i([]),c=i(null);let t=null;function r(s,e){m.value.push({from:s,text:e}),E(()=>{c.value&&(c.value.scrollTop=c.value.scrollHeight)})}function f(){if(!n.value.trim())return;const s=p(n.value);r("user",s);const e={type:"chat_bot_message",message:s,cartorio_token:"qvgjz"};t.send(JSON.stringify(e)),n.value=""}h(()=>{t=new WebSocket("ws://localhost:3452?room=chat1&user_name=Deborah2"),t.addEventListener("open",()=>{console.log("✅ Conectado ao servidor")}),t.addEventListener("message",s=>{try{const e=JSON.parse(s.data);e.message?r("server",e.message):e.type==="connection_info"||r("server",JSON.stringify(e))}catch{r("server",s.data)}}),t.addEventListener("close",()=>{console.log("❌ Conexão encerrada"),r("system","⚠️ Conexão encerrada")}),t.addEventListener("error",s=>{console.error("⚠️ Erro na conexão:",s),r("system","⚠️ Erro na conexão")})});function p(s){const e=typeof s=="object"?s.message:s,a=/(https?:\/\/[^\s]+)/g;return e.replace(a,l=>`<a href="${l}" target="_blank" class="chat-link">${l}</a>`)}return b(()=>{t&&t.readyState===WebSocket.OPEN&&t.close()}),(s,e)=>(d(),u("div",w,[e[2]||(e[2]=o("div",{class:"chat-header"},[o("span",{class:"chat-title"},"Chat"),o("button",{class:"chat-close"},"×")],-1)),o("div",{ref_key:"chatHistory",ref:c,class:"chat-history"},[(d(!0),u(g,null,y(m.value,(a,l)=>(d(),u("div",{key:l,class:S(["chat-bubble",a.from==="user"?"user-bubble":a.from==="system"?"system-bubble":"server-bubble"])},M(a.text.message||a.text),3))),128))],512),o("form",{onSubmit:k(f,["prevent"]),class:"chat-input-area"},[_(o("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),type:"text",placeholder:"Digite sua mensagem...",class:"chat-input"},null,512),[[x,n.value]]),e[1]||(e[1]=o("button",{type:"submit",class:"chat-send-button"},"➤",-1))],32)]))}},N=v(B,[["__scopeId","data-v-f36f3c54"]]);export{N as default};
