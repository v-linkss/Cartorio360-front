import{_ as Q}from"./B41Lx2gy.js";import{_ as W,a as ee,b as te}from"./CFG7XnG6.js";import{_ as ae,V as oe,a as se,b as re,c as ne}from"./xFUKCNJg.js";import{c as A,r as B,u as le}from"./b7D-CSPU.js";import{u as ie,n as ue,m as de,r as u,y as g,p as pe,z as I,L as me,q as h,w as n,x as ce,o as p,b as s,a as l,t as _e,s as a,M as fe,V as b,N as ve,O as ge,c as S,v as ke,d as Ve}from"./C-hm3pip.js";import{u as w}from"./BVem4ykp.js";import{V as xe}from"./ClYNr6qF.js";import{V as k}from"./BD7jNUml.js";import{V}from"./R1c6xaoo.js";import{V as ye}from"./BljimMkL.js";import"./B3Waa__K.js";import"./CmoVpC65.js";import"./BljOkCAh.js";import"./DqM5IsAD.js";import"./CnKQoh3C.js";const $e={style:{color:"red","margin-left":"30px"}},he=["onClick"],be=["onClick","title"],we=["disabled","onClick"],Ce={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:re,alt:"Visualizar",title:"Reativar"},Oe={key:1,src:ne,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},Ge={__name:"[id]",async setup(Re){let i,m;const{$toast:C}=ie(),T=ue(),{id:c}=T.params,O=de(),x=ce(),q=`${x.public.managemant}/updateOrdensServico`,z=`${x.public.managemant}/getOrdensServicoById`,N=`${x.public.managemant}/listarAtos`,P=u(g("user-data").value.cartorio_id),D=u(g("user-data").value.usuario_id),F=u(g("user-service").value.token).value||null,M=u(g("user-data").value.cartorio_token).value,y=u([]),$=u(!1),R=u(null),_=u(null),o=pe({nacionalidade:"brasileiro",apresentante_nome:null,apresentante_cpf:null,documento:null}),L=[{title:"ID",value:"id"},{title:"Protocolo",value:"protocolo"},{title:"Usuario",value:"usuario_nome"},{title:"Situação",value:"situacao"},{title:"Valor",value:"valor"},{title:"Tipo",value:"tipo"},{value:"actions"}],G=[{title:"BRASILEIRO",value:!1},{title:"ESTRANGEIRO",value:!0}],K={apresentante_nome:{required:A.withMessage("O campo é obrigatorio",B)},apresentante_cpf:{required:A.withMessage("O campo é obrigatorio",B)}},d=le(K,o);function X(r){if(r)return r.replace(/[.\-]/g,"");r=null}const Y=r=>{R.value=r,$.value=!0},Z=r=>{r.tipo==="PROCURAÇÃO"&&O.push({path:`/fontes/atos/procuracoes/atualizar/${r.id}`,query:{origem:"atualizar",id:c,ato_id:r.id,ato_token_edit:r.token,numero_os:_.value}})};async function j(){const r={apresentante_cpf:X(o.apresentante_cpf),apresentante_nome:o.apresentante_nome,user_id:D.value,cartorio_id:P.value},{error:t,status:v}=await w(`${q}/${c}`,{method:"PUT",body:r},"$Fud06ay483");v.value==="error"&&t.value.statusCode===500?C.error("Erro ao cadastrar ordem,erro no sistema."):(C.success("Ordem Atualizada com sucesso!"),O.push({path:"/os/lista"}))}const{data:f}=([i,m]=I(()=>w(`${z}/${c}`,{method:"GET"},"$wPUkUpDvPf")),i=await i,m(),i);_.value=f.value.numero,o.nacionalidade=f.value.estrangeiro,o.apresentante_cpf=f.value.apresentante_cpf,o.apresentante_nome=f.value.apresentante_nome;const{data:E}=([i,m]=I(()=>w(N,{method:"POST",body:{cartorio_token:M,ordemserv_token:F}},"$YXZ55K3IUf")),i=await i,m(),i);return E.value.length>0?y.value=E.value:y.value=[],(r,t)=>{const v=Q,H=te,J=me("mask");return p(),h(xe,{class:"mt-5"},{default:n(()=>[s(k,{class:"mb-5"},{default:n(()=>[t[6]||(t[6]=l("h1",null,"Ordem de Serviço nº",-1)),l("h1",$e,_e(a(_)),1)]),_:1}),s(k,null,{default:n(()=>[s(V,{md:"3"},{default:n(()=>[s(ye,{label:"Nacionalidade",items:G,modelValue:a(o).nacionalidade,"onUpdate:modelValue":t[0]||(t[0]=e=>a(o).nacionalidade=e)},null,8,["modelValue"])]),_:1}),s(V,{md:"2"},{default:n(()=>[a(o).nacionalidade==="brasileiro"?fe((p(),h(b,{key:0,autofocus:"",modelValue:a(o).apresentante_cpf,"onUpdate:modelValue":t[1]||(t[1]=e=>a(o).apresentante_cpf=e),label:"CPF",required:"","error-messages":a(d).apresentante_cpf.$errors.map(e=>e.$message),onBlur:a(d).apresentante_cpf.$touch,onInput:a(d).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])),[[J,"###.###.###-##"]]):(p(),h(b,{key:1,autofocus:"",modelValue:a(o).apresentante_cpf,"onUpdate:modelValue":t[2]||(t[2]=e=>a(o).apresentante_cpf=e),label:"Documento",required:"","error-messages":a(d).apresentante_cpf.$errors.map(e=>e.$message),onBlur:a(d).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur"]))]),_:1}),s(V,{md:"4"},{default:n(()=>[s(b,{modelValue:a(o).apresentante_nome,"onUpdate:modelValue":t[3]||(t[3]=e=>a(o).apresentante_nome=e),label:"Nome Apresentante",required:"","error-messages":a(d).apresentante_nome.$errors.map(e=>e.$message),onInput:a(d).apresentante_nome.$touch},null,8,["modelValue","error-messages","onInput"])]),_:1}),s(V,null,{default:n(()=>[l("div",null,[l("img",{style:{width:"40px",height:"40px",cursor:"pointer"},src:W,alt:"Salvar",onClick:t[4]||(t[4]=e=>j())})])]),_:1})]),_:1}),s(k,{style:{display:"flex","margin-bottom":"10px",gap:"2rem"}},{default:n(()=>[t[9]||(t[9]=l("h1",{class:"ml-5"},"Atos",-1)),s(v,{to:{path:"/os/criar-ato",query:{origem:"atualizar",id:a(c),numeroOs:a(_)}}},{default:n(()=>t[7]||(t[7]=[l("img",{style:{width:"45px",height:"45px",cursor:"pointer"},src:ae,alt:"novo"},null,-1)])),_:1},8,["to"]),s(oe,{headers:L,items:a(y),"item-key":"id"},{"item.actions":n(({item:e})=>[s(k,{style:{display:"flex",gap:"10px","margin-top":"-5px"}},{default:n(()=>[l("div",{onClick:U=>Y(e.token),title:"Reimprimir"},t[8]||(t[8]=[l("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:ee,alt:"Reimprimir"},null,-1)]),8,he),l("div",{class:ge({disabled:!e.btn_editar}),onClick:U=>e.btn_editar?Z({id:e.id,tipo:e.tipo,token:e.token}):null,title:e.btn_editar?"Editar":"Desabilitado"},[l("img",{style:ve({cursor:e.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:se,alt:"Editar"},null,4)],10,be),l("div",{disabled:!e.btn_cancelar,onClick:U=>e.btn_cancelar?r.deleteEndereco(e):null,title:"Excluir"},[e.excluido?(p(),S("img",Ce)):(p(),S("img",Oe))],8,we)]),_:2},1024)]),_:1},8,["items"]),s(H,{show:a($),ato_token:a(R),onClose:t[5]||(t[5]=e=>$.value=!1)},null,8,["show","ato_token"])]),_:1}),s(v,{to:"/os/lista"},{default:n(()=>[s(ke,{size:"large",color:"red"},{default:n(()=>t[10]||(t[10]=[Ve("Voltar")])),_:1})]),_:1})]),_:1})}}};export{Ge as default};
