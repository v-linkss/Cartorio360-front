import{_ as a}from"./4de_rhUN.js";import{u as e,r as l,D as t,F as o,o as i,A as u,w as r,x as n,b as s,a as d,s as m,q as c,K as _,L as p,c as v,J as f}from"./Cqiv77yc.js";import{u as h}from"./D0-0VRaN.js";import{a as V,_ as b,b as k,c as y}from"./CBYd86re.js";import{_ as x}from"./DCsXQasW.js";import{_ as g}from"./DmmIIbRx.js";import{V as w}from"./sftuTnbG.js";import{V as U}from"./B5iMDmra.js";import{V as S}from"./03NkGgWs.js";import{V as A}from"./DGrEsPnk.js";const E=d("h1",null,"Ordens de Serviço",-1),C=d("hr",{class:"mt-5 mb-5"},null,-1),$=["onClick"],j=[d("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:g,alt:"Receber"},null,-1)],D=["onClick","title"],N=["disabled","onClick"],O={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:k,alt:"Visualizar",title:"Reativar"},P={key:1,src:y,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},L={__name:"index",setup(k){const y=n(),g=`${y.public.managemant}/listarUsuarios`,L=`${y.public.managemant}/listarOrdensServico`,T=`${y.public.managemant}/tipoAtos`,q=e(),F=l(t("auth_token").value)||null,R=l(t("user-data").value.cartorio_token)||null,z=l([]),M=l([]),G=l([]),K=l(["PENDENTE","EM ANDAMENTO","CONCLUÍDA","LAVRADA"]),Z=o({numero:null,data_inicio:J(),data_fim:J(),data_lavratura_inicio:null,data_lavratura_fim:null,protocolo:null,livro:null,folha:null,situacao:null,usuario_token:F.value,selo:null,ato_tipo_token:null,apresentante:null}),H=[{title:"Número",value:"numero"},{title:"Situação",value:"situacao"},{title:"CPF",value:"apresentante_cpf"},{title:"Apresentante",value:"apresentante_nome"},{title:"Usuario",value:"usuario_nome"},{title:"Data Recebimento",value:"dt_pagto"},{value:"actions"}];function J(){const a=new Date;return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}async function W(){try{const{data:a,error:e}=await h(L,{method:"POST",body:{cartorio_token:R.value,numero:Z.numero,data_inicio:Z.data_inicio,data_fim:Z.data_fim,data_lavratura_inicio:Z.data_lavratura_inicio,data_lavratura_fim:Z.data_lavratura_fim,protocolo:Z.protocolo,livro:Z.livro,folha:Z.folha,situacao:Z.situacao,usuario_token:Z.usuario_token,selo:Z.selo,ato_tipo_token:Z.ato_tipo_token,apresentante:Z.apresentante}},"$GorUGsNsKS");a.value.length>0?z.value=a.value:z.value=[]}catch(a){console.error("Erro na requisição",a)}}function Y(a){const e=t("user-service"),l=z.value.find((e=>e.id===a));e.value=l.token,q.push({path:`/ordens-servicos/atualizar/${a}`})}!async function(){const{data:a,error:e}=await h(g,{method:"POST",body:{cartorio_token:R.value}},"$865v1qFEsl");M.value=a.value}(),async function(){const{data:a,error:e}=await h(T,{method:"POST",body:{cartorio_token:R.value,usuario_token:F.value}},"$wkWiNo8Od3");G.value=a.value}(),async function(){const a=J(),{data:e,error:l}=await h(L,{method:"POST",body:{cartorio_token:R.value,usuario_token:F.value,data_fim:a,data_inicio:a}},"$zDH8ovqZZe");e.value.length>0?(z.value=e.value,console.log(e.value)):z.value=[]}();const B=l(null),I=()=>{const a=t("user-service"),e=t("ordem-button");a.value=null,B.value=!0,e.value=B.value};return(e,l)=>{const t=a;return i(),u(w,{class:"mt-5"},{default:r((()=>[s(U,{class:"mb-5"},{default:r((()=>[E,s(t,{to:"/ordens-servicos/criar-registro"},{default:r((()=>[d("img",{style:{width:"60px",height:"60px",cursor:"pointer","margin-left":"70px"},src:V,alt:"novo",onClick:I})])),_:1})])),_:1}),s(U,{style:{"margin-bottom":"-35px"}},{default:r((()=>[s(S,null,{default:r((()=>[s(m,{modelValue:c(Z).numero,"onUpdate:modelValue":l[0]||(l[0]=a=>c(Z).numero=a),label:"Número",style:{width:"110px"}},null,8,["modelValue"])])),_:1}),s(S,null,{default:r((()=>[s(m,{modelValue:c(Z).data_inicio,"onUpdate:modelValue":l[1]||(l[1]=a=>c(Z).data_inicio=a),type:"date",label:"Abertura de",style:{width:"150px"}},null,8,["modelValue"])])),_:1}),s(S,null,{default:r((()=>[s(m,{modelValue:c(Z).data_fim,"onUpdate:modelValue":l[2]||(l[2]=a=>c(Z).data_fim=a),type:"date",label:"Abertura até",style:{width:"150px"}},null,8,["modelValue"])])),_:1}),s(S,null,{default:r((()=>[s(m,{modelValue:c(Z).data_lavratura_inicio,"onUpdate:modelValue":l[3]||(l[3]=a=>c(Z).data_lavratura_inicio=a),type:"date",label:"Lavratura de",style:{width:"150px"}},null,8,["modelValue"])])),_:1}),s(S,null,{default:r((()=>[s(m,{modelValue:c(Z).data_lavratura_fim,"onUpdate:modelValue":l[4]||(l[4]=a=>c(Z).data_lavratura_fim=a),type:"date",label:"Lavratura até",style:{width:"150px"}},null,8,["modelValue"])])),_:1}),s(S,null,{default:r((()=>[s(m,{modelValue:c(Z).protocolo,"onUpdate:modelValue":l[5]||(l[5]=a=>c(Z).protocolo=a),label:"Protocolo",style:{width:"110px"}},null,8,["modelValue"])])),_:1}),s(S,{md:"1"},{default:r((()=>[s(m,{modelValue:c(Z).livro,"onUpdate:modelValue":l[6]||(l[6]=a=>c(Z).livro=a),label:"Livro",style:{width:"80px"}},null,8,["modelValue"])])),_:1}),s(S,{md:"1"},{default:r((()=>[s(m,{modelValue:c(Z).folha,"onUpdate:modelValue":l[7]||(l[7]=a=>c(Z).folha=a),label:"Folha",style:{width:"80px"}},null,8,["modelValue"])])),_:1})])),_:1}),s(U,null,{default:r((()=>[s(S,{md:"3"},{default:r((()=>[s(A,{modelValue:c(Z).situacao,"onUpdate:modelValue":l[8]||(l[8]=a=>c(Z).situacao=a),items:c(K),label:"Situação"},null,8,["modelValue","items"])])),_:1}),s(S,{md:"2"},{default:r((()=>[s(A,{items:c(M),modelValue:c(Z).usuario_token,"onUpdate:modelValue":l[9]||(l[9]=a=>c(Z).usuario_token=a),"item-title":"user_nome","item-value":"user_token",label:"Usuario"},null,8,["items","modelValue"])])),_:1}),s(S,{md:"1"},{default:r((()=>[s(m,{modelValue:c(Z).selo,"onUpdate:modelValue":l[10]||(l[10]=a=>c(Z).selo=a),label:"Selo"},null,8,["modelValue"])])),_:1}),s(S,{md:"3"},{default:r((()=>[s(A,{modelValue:c(Z).ato_tipo_token,"onUpdate:modelValue":l[11]||(l[11]=a=>c(Z).ato_tipo_token=a),items:c(G),"item-title":"descricao","item-value":"token",label:"Serviço"},null,8,["modelValue","items"])])),_:1}),s(S,{md:"2"},{default:r((()=>[s(m,{modelValue:c(Z).apresentante,"onUpdate:modelValue":l[12]||(l[12]=a=>c(Z).apresentante=a),label:"Apresentante"},null,8,["modelValue"])])),_:1}),s(S,null,{default:r((()=>[d("div",null,[d("img",{onClick:W,style:{width:"40px",height:"40px",cursor:"pointer"},src:x,alt:"Pesquisar"})])])),_:1})])),_:1}),C,s(f,{headers:H,items:c(z),"item-key":"id"},{"item.actions":r((({item:a})=>[s(U,{style:{display:"flex",gap:"10px","margin-top":"-5px"}},{default:r((()=>[d("div",{onClick:e=>Y(a.id),title:"Receber"},j,8,$),d("div",{class:p({disabled:!a.btn_editar}),onClick:e=>a.btn_editar?Y(a.id):null,title:a.btn_editar?"Editar":"Desabilitado"},[d("img",{style:_({cursor:a.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:b,alt:"Editar"},null,4)],10,D),d("div",{disabled:!a.btn_cancelar,onClick:e=>a.btn_cancelar?async function(a){console.log("excluido")}():null,title:"Excluir"},[a.excluido?(i(),v("img",O)):(i(),v("img",P))],8,N)])),_:2},1024)])),_:1},8,["items"])])),_:1})}}};export{L as default};
