import{_ as re}from"./BU89_0Xo.js";import{ah as P,ai as D,aj as F,ak as M,am as A,b as l,aq as ce,as as de,at as te,av as ae,aU as le,aF as L,bh as ve,bk as me,bn as oe,az as fe,al as ge,aB as C,z as h,aC as be,b8 as O,aL as W,bU as he,r as Q,aJ as ye,H as $,h as ne,I as _e,e5 as Se,ax as ke,bP as Ve,e6 as xe,Q as E,a9 as Te,ap as Be,bd as Ce,b1 as Ne,ay as we,b2 as Pe,e7 as Ie,bl as He,e8 as Re,bT as Le,p as Ee,bN as Me,U as X,bc as Ae,bj as We,e9 as $e,_ as Ue,ea as qe,f as U,K as De,o as B,k as H,w as c,a as j,t as R,M as Fe,c as z,F as J,D as Y,b6 as G,x as q,d as w,T as Oe,eb as je,m as ze}from"./CGzqYOTp.js";import{V as Je}from"./k7bHqbNA.js";import{c as se,a as K,b as Z,d as p}from"./DObPo075.js";import"./GjS0Qw-Y.js";const Ye=""+new URL("logo_navbar.WRqgS9jl.png",import.meta.url).href,Xe=P({text:String,...D(),...F()},"VToolbarTitle"),Qe=M()({name:"VToolbarTitle",props:Xe(),setup(e,g){let{slots:t}=g;return A(()=>{const b=!!(t.default||t.text||e.text);return l(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var s;return[b&&l("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(s=t.default)==null?void 0:s.call(t)])]}})}),{}}}),Ge=[null,"prominent","default","comfortable","compact"],ie=P({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Ge.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ce(),...D(),...de(),...te(),...F({tag:"header"}),...ae()},"VToolbar"),ee=M()({name:"VToolbar",props:ie(),setup(e,g){var _;let{slots:t}=g;const{backgroundColorClasses:b,backgroundColorStyles:s}=le(L(e,"color")),{borderClasses:o}=ve(e),{elevationClasses:m}=me(e),{roundedClasses:d}=oe(e),{themeClasses:f}=fe(e),{rtlClasses:k}=ge(),i=C(!!(e.extended||(_=t.extension)!=null&&_.call(t))),v=h(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),u=h(()=>i.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return be({VBtn:{variant:"text"}}),A(()=>{var V;const r=!!(e.title||t.title),y=!!(t.image||e.image),S=(V=t.extension)==null?void 0:V.call(t);return i.value=!!(e.extended||S),l(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},b.value,o.value,m.value,d.value,f.value,k.value,e.class],style:[s.value,e.style]},{default:()=>[y&&l("div",{key:"image",class:"v-toolbar__image"},[t.image?l(O,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):l(Je,{key:"image-img",cover:!0,src:e.image},null)]),l(O,{defaults:{VTabs:{height:W(v.value)}}},{default:()=>{var n,a,x;return[l("div",{class:"v-toolbar__content",style:{height:W(v.value)}},[t.prepend&&l("div",{class:"v-toolbar__prepend"},[(n=t.prepend)==null?void 0:n.call(t)]),r&&l(Qe,{key:"title",text:e.title},{text:t.title}),(a=t.default)==null?void 0:a.call(t),t.append&&l("div",{class:"v-toolbar__append"},[(x=t.append)==null?void 0:x.call(t)])])]}}),l(O,{defaults:{VTabs:{height:W(u.value)}}},{default:()=>[l(he,null,{default:()=>[i.value&&l("div",{class:"v-toolbar__extension",style:{height:W(u.value)}},[S])]})]})]})}),{contentHeight:v,extensionHeight:u}}}),Ke=P({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ze(e){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=g;let b=0,s=0;const o=Q(null),m=C(0),d=C(0),f=C(0),k=C(!1),i=C(!1),v=h(()=>Number(e.scrollThreshold)),u=h(()=>ye((v.value-m.value)/v.value||0)),_=()=>{const r=o.value;if(!r||t&&!t.value)return;b=m.value,m.value="window"in r?r.pageYOffset:r.scrollTop;const y=r instanceof Window?document.documentElement.scrollHeight:r.scrollHeight;if(s!==y){s=y;return}i.value=m.value<b,f.value=Math.abs(m.value-v.value)};return $(i,()=>{d.value=d.value||m.value}),$(k,()=>{d.value=0}),ne(()=>{$(()=>e.scrollTarget,r=>{var S;const y=r?document.querySelector(r):window;y&&y!==o.value&&((S=o.value)==null||S.removeEventListener("scroll",_),o.value=y,o.value.addEventListener("scroll",_,{passive:!0}))},{immediate:!0})}),_e(()=>{var r;(r=o.value)==null||r.removeEventListener("scroll",_)}),t&&$(t,_,{immediate:!0}),{scrollThreshold:v,currentScroll:m,currentThreshold:f,isScrollActive:k,scrollRatio:u,isScrollingUp:i,savedScroll:d}}const pe=P({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...ie(),...Se(),...Ke(),height:{type:[Number,String],default:64}},"VAppBar"),et=M()({name:"VAppBar",props:pe(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:t}=g;const b=Q(),s=ke(e,"modelValue"),o=h(()=>{var x;const a=new Set(((x=e.scrollBehavior)==null?void 0:x.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),m=h(()=>{const a=o.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!s.value}),{currentScroll:d,scrollThreshold:f,isScrollingUp:k,scrollRatio:i}=Ze(e,{canScroll:m}),v=h(()=>o.value.hide||o.value.fullyHide),u=h(()=>e.collapse||o.value.collapse&&(o.value.inverted?i.value>0:i.value===0)),_=h(()=>e.flat||o.value.fullyHide&&!s.value||o.value.elevate&&(o.value.inverted?d.value>0:d.value===0)),r=h(()=>o.value.fadeImage?o.value.inverted?1-i.value:i.value:void 0),y=h(()=>{var T,N;const a=Number(((T=b.value)==null?void 0:T.contentHeight)??e.height),x=Number(((N=b.value)==null?void 0:N.extensionHeight)??0);return v.value?d.value<f.value||o.value.fullyHide?a+x:a:a+x});Ve(h(()=>!!e.scrollBehavior),()=>{Te(()=>{v.value?o.value.inverted?s.value=d.value>f.value:s.value=k.value||d.value<f.value:s.value=!0})});const{ssrBootStyles:S}=se(),{layoutItemStyles:V,layoutIsReady:n}=xe({id:e.name,order:h(()=>parseInt(e.order,10)),position:L(e,"location"),layoutSize:y,elementSize:C(void 0),active:s,absolute:L(e,"absolute")});return A(()=>{const a=ee.filterProps(e);return l(ee,E({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...V.value,"--v-toolbar-image-opacity":r.value,height:void 0,...S.value},e.style]},a,{collapse:u.value,flat:_.value}),t)}),n}}),tt=P({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Be,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...D(),...Ce({location:"top end"}),...te(),...F(),...ae(),...Ne({transition:"scale-rotate-transition"})},"VBadge"),at=M()({name:"VBadge",inheritAttrs:!1,props:tt(),setup(e,g){const{backgroundColorClasses:t,backgroundColorStyles:b}=le(L(e,"color")),{roundedClasses:s}=oe(e),{t:o}=we(),{textColorClasses:m,textColorStyles:d}=Pe(L(e,"textColor")),{themeClasses:f}=Ie(),{locationStyles:k}=He(e,!0,i=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(i)?+(e.offsetY??0):["left","right"].includes(i)?+(e.offsetX??0):0));return A(()=>{const i=Number(e.content),v=!e.max||isNaN(i)?e.content:i<=+e.max?i:`${e.max}+`,[u,_]=Re(g.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return l(e.tag,E({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},_,{style:e.style}),{default:()=>{var r,y;return[l("div",{class:"v-badge__wrapper"},[(y=(r=g.slots).default)==null?void 0:y.call(r),l(Le,{transition:e.transition},{default:()=>{var S,V;return[Ee(l("span",E({class:["v-badge__badge",f.value,t.value,s.value,m.value],style:[b.value,d.value,e.inline?{}:k.value],"aria-atomic":"true","aria-label":o(e.label,i),"aria-live":"polite",role:"status"},u),[e.dot?void 0:g.slots.badge?(V=(S=g.slots).badge)==null?void 0:V.call(S):e.icon?l(X,{icon:e.icon},null):v]),[[Me,e.modelValue]])]}})])]}})}),{}}}),lt=P({scrollable:Boolean,...D(),...Ae(),...F({tag:"main"})},"VMain"),ot=M()({name:"VMain",props:lt(),setup(e,g){let{slots:t}=g;const{dimensionStyles:b}=We(e),{mainStyles:s,layoutIsReady:o}=$e(),{ssrBootStyles:m}=se();return A(()=>l(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[s.value,m.value,b.value,e.style]},{default:()=>{var d,f;return[e.scrollable?l("div",{class:"v-main__scroller"},[(d=t.default)==null?void 0:d.call(t)]):(f=t.default)==null?void 0:f.call(t)]}})),o}}),nt={class:"d-flex align-center"},st={class:"cartorio ml-6"},it={__name:"default",setup(e){const g=ze(),t=qe(),b=[{title:"Alterar Senha"},{title:"Sair"}],s=U("menu-navbar"),o=U("user-data"),m=U("auth_token"),d=h(()=>Object.keys(s.value||{}).filter(n=>n!=="Tela Principal").map(n=>({name:n,subMenus:Object.keys(s.value[n]).map(a=>({name:a,url:s.value[n][a].url}))}))),f=h(()=>{var n;return((n=o.value)==null?void 0:n.nome)??"Usuário"}),k=h(()=>{var n;return((n=o.value)==null?void 0:n.cartorio_nome)??""}),i=U("userName");i.value=f.value;const v=Q(0);let u=null;function _(){t.push("/chat_atendimento")}function r(){u=new WebSocket(`${g.public.chat_bot}?user_name=${f.value}&room_id=notifications`),u.onopen=()=>{console.log("🔌 WebSocket conectado"),V()},u.onmessage=n=>{try{console.log(n.data);const a=JSON.parse(n.data);switch(a.type){case"notification":console.log("Nova notificação recebida:",a),v.value=a.queue.length||0;break;case"queue_list":console.log("Lista de notificações recebida:",a),v.value=a.totalRequests||0;break}}catch(a){console.error("Falha ao parsear mensagem:",a)}},u.onclose=()=>{console.warn("WebSocket desconectado — reconectando em 5 s…"),setTimeout(r,5e3)},u.onerror=n=>{console.error("Erro WebSocket:",n),u.close()}}ne(r),De(()=>u==null?void 0:u.close());function y(n){n==="Sair"&&S()}function S(){o.value="",m.value="",t.push("/login")}function V(){if(u&&u.readyState===WebSocket.OPEN){const n={type:"queue_list",message:"1",id:"notifications"};u.send(JSON.stringify(n)),console.log("📤 Evento enviado ao WebSocket:",n)}else console.warn("⚠️ WebSocket não está conectado. Tentando novamente em 1 segundo..."),setTimeout(V,1e3)}return(n,a)=>{const x=re;return B(),H(je,null,{default:c(()=>[l(et,{color:"#0a063b",height:"100"},{default:c(()=>[j("div",nt,[a[0]||(a[0]=j("img",{class:"ml-5 mt-2",width:"300",height:"50",src:Ye},null,-1)),j("h3",st,R(k.value),1)]),l(Fe),(B(!0),z(J,null,Y(d.value,(T,N)=>(B(),H(G,{key:`menu-${N}`},{activator:c(({props:I})=>[l(q,E({ref_for:!0},I,{text:"",class:"white--text"}),{default:c(()=>[w(R(T.name),1)]),_:2},1040)]),default:c(()=>[l(K,null,{default:c(()=>[(B(!0),z(J,null,Y(T.subMenus,(I,ue)=>(B(),H(Z,{key:`submenu-${ue}`},{default:c(()=>[l(x,{to:`/${I.url}`,class:"text-decoration-none inherit"},{default:c(()=>[l(p,null,{default:c(()=>[w(R(I.name),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128)),v.value>0?(B(),H(at,{key:0,content:v.value,color:"red",overlap:""},{default:c(()=>[l(q,{icon:"",onClick:_},{default:c(()=>[l(X,{color:"white"},{default:c(()=>a[1]||(a[1]=[w("mdi-bell")])),_:1})]),_:1})]),_:1},8,["content"])):(B(),H(q,{key:1,icon:"",onClick:_},{default:c(()=>[l(X,{color:"white"},{default:c(()=>a[2]||(a[2]=[w("mdi-bell")])),_:1})]),_:1})),l(G,null,{activator:c(({props:T})=>[l(q,E({class:"user"},T),{default:c(()=>[w(R(f.value),1)]),_:2},1040)]),default:c(()=>[l(K,null,{default:c(()=>[(B(),z(J,null,Y(b,(T,N)=>l(Z,{key:`item-${N}`,onClick:I=>y(T.title)},{default:c(()=>[l(p,null,{default:c(()=>[w(R(T.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1}),l(ot,null,{default:c(()=>[Oe(n.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}},mt=Ue(it,[["__scopeId","data-v-079f6ec8"]]);export{mt as default};
