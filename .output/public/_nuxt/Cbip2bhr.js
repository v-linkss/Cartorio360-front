import{r as i,n as I,p as N,g as P,H as U,o as q,y as E,w as l,b as a,a as d,X as M,d as X,x as t,M as b,A as j}from"./_pbk85KF.js";import{c as z,r as H,u as L}from"./YWhYXMKL.js";import{u as _}from"./BTAJRLch.js";import{V as Y,c as G}from"./Xs32ti1O.js";import{V as J}from"./ur0BkWio.js";import{V as W}from"./Dt4oBfoF.js";import{V as Z}from"./Cpx_y1oe.js";import{V as K}from"./C-nlEHFf.js";import{V as Q}from"./C9Q6mebG.js";const ee=""+new URL("selo.D9mIBRmY.png",import.meta.url).href,me={__name:"Selos",props:{show:Boolean,ato_token:String},emits:["close"],async setup(w,{emit:g}){let u,V;const p=w,n=i(p.show),v=j(),k=i(I("user-data").value.cartorio_token).value,$=`${v.public.managemant}/listarSelos`,y=`${v.public.envioDoc}/print`,C=`${v.public.managemant}/listarEscrevente`,f=i([]),r=i([]),F=i([]),m=N({escrevente:null}),D=g,h={escrevente:{required:z.withMessage("O campo é obrigatorio",H)}},c=L(h,m),O=[{title:"Numero",value:"numero"},{title:"Referencia",value:"referencia"},{value:"actions"}];P(()=>p.show,s=>{n.value=s,s&&T()});const S=()=>{n.value=!1,m.escrevente=null,r.value=null,D("close")},{data:B}=([u,V]=U(()=>_(C,{method:"POST",body:{cartorio_token:k}},"$V2ulT7DYvP")),u=await u,V(),u);F.value=B.value[0].func_json_escreventes;const R=async()=>{if(await c.value.$validate()){r.value.map(A=>({selo_token:A}));const s={zpl:`^XA
^CF0,40
^FO50,30^FDCartório 360^FS
^CF0,30
^FO50,80^FDDocumento: 123456^FS
^FO50,120^FDData: 21/06/2025^FS
^FO50,160^FDAssinatura:___________________^FS
^FO50,210^GB700,3,3^FS
^CF0,25
^FO50,230^FDEste documento foi autenticado eletronicamente.^FS
^XZ`},{data:e,error:o,status:x}=await _(`${y}`,{method:"POST",body:s},"$45J51uHTfa");x.value==="success"&&S()}},T=async()=>{const{data:s,error:e}=await _(`${$}`,{method:"POST",body:{ato_token:p.ato_token}},"$rLWIRtrfDz");s.value.selos===null?f.value=[]:f.value=s.value.selos};return(s,e)=>(q(),E(Q,{persistent:"",modelValue:t(n),"onUpdate:modelValue":e[2]||(e[2]=o=>b(n)?n.value=o:null),"max-width":"500"},{default:l(()=>[a(Y,null,{default:l(()=>[a(J,null,{default:l(()=>[a(W,{class:"mt-1 mb-3",style:{"justify-content":"space-between"}},{default:l(()=>[e[4]||(e[4]=d("h1",{class:"ml-4"},"Reimpressão de Selos",-1)),a(M,{class:"mt-4 mr-4",style:{color:"red"},onClick:S},{default:l(()=>e[3]||(e[3]=[X("mdi-close")])),_:1})]),_:1}),e[5]||(e[5]=d("hr",{class:"mb-5"},null,-1)),a(Z,{class:"mb-5",label:"Tabelião/escrivão",modelValue:t(m).escrevente,"onUpdate:modelValue":e[0]||(e[0]=o=>t(m).escrevente=o),items:t(F),"item-title":"nome","item-value":"token",required:"","error-messages":t(c).escrevente.$errors.map(o=>o.$message),onBlur:t(c).escrevente.$touch,onInput:t(c).escrevente.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"]),a(K,{headers:O,items:t(f),"item-value":"token","show-select":"",modelValue:t(r),"onUpdate:modelValue":e[1]||(e[1]=o=>b(r)?r.value=o:null)},null,8,["items","modelValue"])]),_:1}),a(G,null,{default:l(()=>[d("div",null,[d("img",{src:ee,style:{cursor:"pointer"},onClick:R})])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{me as _,ee as a};
