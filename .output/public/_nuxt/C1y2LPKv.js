import{_ as j}from"./BwoOglyv.js";import{_ as W}from"./CikoERET.js";import{n as X,E as Y,u as ee,r as d,D as _,F as te,G as S,o as c,A as V,w as r,x as ae,H as oe,b as s,a as n,t as se,q as t,I as re,s as k,J as ne,K as le,L as ie,c as B}from"./CtDV-ous.js";import{u as w}from"./CD94D2s7.js";import{c as A,r as I,u as ue,_ as de}from"./5dVDj7iE.js";import{_ as ce,a as pe,b as me,c as _e}from"./CBYd86re.js";import{_ as fe}from"./DmmIIbRx.js";import{_ as ve}from"./ToPptOUL.js";import{V as ge}from"./CWiJ1Bav.js";import{V as f}from"./lKL4zjLk.js";import{V as v}from"./DnovXfEg.js";import{V as he}from"./qPaL_Swk.js";import"./BK2ApIgh.js";const be=n("h1",null,"Ordem de Serviço nº",-1),$e={style:{color:"red","margin-left":"30px"}},xe=n("h1",{class:"ml-5"},"Atos",-1),ye=n("img",{style:{width:"45px",height:"45px",cursor:"pointer"},src:pe,alt:"novo"},null,-1),Ve=n("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:fe,alt:"Receber"},null,-1),ke=[Ve],we=["onClick","title"],Ce=["disabled","onClick"],Oe={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:me,alt:"Visualizar",title:"Reativar"},Re={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},Ee=n("img",{class:"btn-pointer mt-5",src:ve,alt:"Sair"},null,-1),Ke={__name:"[id]",async setup(Se){let l,p;const{$toast:C}=X(),T=Y(),{id:g}=T.params,U=ee(),h=ae(),q=`${h.public.managemant}/updateOrdensServico`,D=`${h.public.managemant}/getOrdensServicoById`,F=`${h.public.managemant}/listarAtos`,N=d(_("user-data").value.cartorio_id),P=d(_("user-data").value.usuario_id),z=d(_("user-service").value).value||null,G=d(_("user-data").value.cartorio_token).value,b=d([]),$=d(!1),O=d(null),o=te({nacionalidade:"brasileiro",apresentante_nome:null,apresentante_cpf:null,documento:null}),M=[{title:"Protocolo",value:"protocolo"},{title:"Usuario",value:"usuario_nome"},{title:"Situação",value:"situacao"},{title:"Valor",value:"valor"},{title:"Tipo",value:"tipo"},{value:"actions"}],K=[{title:"BRASILEIRO",value:"brasileiro"},{title:"ESTRANGEIRO",value:"estrangeiro"}],L={apresentante_nome:{required:A.withMessage("O campo é obrigatorio",I)},apresentante_cpf:{required:A.withMessage("O campo é obrigatorio",I)}},i=ue(L,o);function Q(u){if(u)return u.replace(/[.\-]/g,"");u=null}const H=()=>{$.value=!0};async function J(){const u={apresentante_cpf:Q(o.apresentante_cpf),apresentante_nome:o.apresentante_nome,user_id:P.value,cartorio_id:N.value};if(await i.value.$validate()){const{data:a,error:m,status:y}=await w(`${q}/${g}`,{method:"PUT",body:u},"$K99ffdcGQC");y.value==="error"&&m.value.statusCode===500?C.error("Erro ao cadastrar ordem,erro no sistema."):(C.success("Ordem Atualizada com sucesso!"),U.push({path:"/ordens-servicos"}))}}const{data:x}=([l,p]=S(()=>w(`${D}/${g}`,{method:"GET"},"$Q22OaB87ZU")),l=await l,p(),l);O.value=x.value.numero,o.apresentante_cpf=x.value.apresentante_cpf,o.apresentante_nome=x.value.apresentante_nome;const{data:R}=([l,p]=S(()=>w(F,{method:"POST",body:{cartorio_token:G,ordemserv_token:z}},"$Fci2yt5KvV")),l=await l,p(),l);return R.value.length>0?b.value=R.value:b.value=[],(u,a)=>{const m=j,y=W,Z=oe("mask");return c(),V(ge,{class:"mt-5"},{default:r(()=>[s(f,{class:"mb-5"},{default:r(()=>[be,n("h1",$e,se(t(O)),1)]),_:1}),s(f,null,{default:r(()=>[s(v,{md:"3"},{default:r(()=>[s(he,{label:"Nacionalidade",items:K,modelValue:t(o).nacionalidade,"onUpdate:modelValue":a[0]||(a[0]=e=>t(o).nacionalidade=e)},null,8,["modelValue"])]),_:1}),s(v,{md:"2"},{default:r(()=>[t(o).nacionalidade==="brasileiro"?re((c(),V(k,{key:0,autofocus:"",modelValue:t(o).apresentante_cpf,"onUpdate:modelValue":a[1]||(a[1]=e=>t(o).apresentante_cpf=e),label:"CPF",required:"","error-messages":t(i).apresentante_cpf.$errors.map(e=>e.$message),onBlur:t(i).apresentante_cpf.$touch,onInput:t(i).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])),[[Z,"###.###.###-##"]]):(c(),V(k,{key:1,autofocus:"",modelValue:t(o).apresentante_cpf,"onUpdate:modelValue":a[2]||(a[2]=e=>t(o).apresentante_cpf=e),label:"Documento",required:"","error-messages":t(i).apresentante_cpf.$errors.map(e=>e.$message),onBlur:t(i).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur"]))]),_:1}),s(v,{md:"4"},{default:r(()=>[s(k,{modelValue:t(o).apresentante_nome,"onUpdate:modelValue":a[3]||(a[3]=e=>t(o).apresentante_nome=e),label:"Nome Apresentante",required:"","error-messages":t(i).apresentante_nome.$errors.map(e=>e.$message),onInput:t(i).apresentante_nome.$touch},null,8,["modelValue","error-messages","onInput"])]),_:1}),s(v,null,{default:r(()=>[n("div",null,[n("img",{style:{width:"40px",height:"40px",cursor:"pointer"},src:de,alt:"Salvar",onClick:a[4]||(a[4]=e=>J())})])]),_:1})]),_:1}),s(f,{style:{display:"flex","margin-bottom":"10px",gap:"2rem"}},{default:r(()=>[xe,s(m,{to:{path:"/ordens-servicos/criar-ato",query:{origem:"atualizar",id:t(g)}}},{default:r(()=>[ye]),_:1},8,["to"]),s(ne,{headers:M,items:t(b),"item-key":"id"},{"item.actions":r(({item:e})=>[s(f,{style:{display:"flex",gap:"10px","margin-top":"-5px"}},{default:r(()=>[n("div",{onClick:a[5]||(a[5]=E=>H()),title:"Receber"},ke),n("div",{class:ie({disabled:!e.btn_editar}),onClick:E=>e.btn_editar?u.redirectToUpdate(e.id):null,title:e.btn_editar?"Editar":"Desabilitado"},[n("img",{style:le({cursor:e.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:ce,alt:"Editar"},null,4)],10,we),n("div",{disabled:!e.btn_cancelar,onClick:E=>e.btn_cancelar?u.deleteEndereco(e):null,title:"Excluir"},[e.excluido?(c(),B("img",Oe)):(c(),B("img",Re))],8,Ce)]),_:2},1024)]),_:1},8,["items"]),s(y,{show:t($),onClose:a[6]||(a[6]=e=>$.value=!1)},null,8,["show"])]),_:1}),s(m,{to:"/ordens-servicos"},{default:r(()=>[Ee]),_:1})]),_:1})}}};export{Ke as default};
