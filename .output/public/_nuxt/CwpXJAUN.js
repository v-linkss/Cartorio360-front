import{_ as ie}from"./DW9c6zGv.js";import{c as ne,d as ue,e as me,f as re,g as pe,h as ce}from"./BlmIFYUh.js";import{_ as fe,r as p,D as _e,u as ve,H as Ve,m as R,E as be,n as Ce,L as Ie,C as c,w as o,A as ke,o as m,b as a,a as $,t as B,s as l,c as J,O as xe,d as f,J as b,v as M,V as r,M as x,z}from"./DWgrBppU.js";import{$ as y,f as ye}from"./4WM5AZz6.js";import{f as W,a as ge}from"./B0IxRygJ.js";import{V as Ue}from"./B8SLkU2Q.js";import{V as i}from"./DjOMB91Y.js";import{V as _}from"./CbBA5moI.js";import{V as U}from"./BZfBrEUn.js";import{V as C,a as Ae,e as I,d as De}from"./BQtkI4Bb.js";import{V as j}from"./N9Geqejo.js";import{V as Pe}from"./BPRiKK4L.js";import"./C1AUaJ6l.js";import"./LnqWqiK5.js";import"./BVz1G1IN.js";import"./BpshXySn.js";import"./DJvq3mCv.js";import"./DsZlH1QY.js";import"./CUWM9CBk.js";import"./DHFgpDzC.js";import"./D8bdZDWZ.js";import"./YAvCC_OM.js";import"./BCM1h7yI.js";import"./CJWaDPLh.js";const Re={style:{color:"#525050",padding:"10px 0px 0px 30px"}},$e={style:{color:"#525050",padding:"20px 10px 10px 10px"}},Fe={style:{"background-color":"#f5f2f2",padding:"20px 0px 20px 20px"}},Se={key:0,class:"d-flex justify-center"},Ne={key:1},Te={__name:"[id]",emits:["saved"],setup(we,{emit:Ee}){const v=p(null),L=_e(),{$toast:O}=ve(),G=Ve(),{id:g}=G.params,V=ke(),H=`${V.public.auth}/service/gerencia/updatePessoa`,q=`${V.public.auth}/service/gerencia/listarEstadoCivil`,K=`${V.public.auth}/service/gerencia/listarCapacidadeCivil`,Q=`${V.public.auth}/service/gerencia/listarCidades`,X=`${V.public.auth}/service/gerencia/getPessoaById`,Y=`${V.public.auth}/service/gerencia/listarSexo`,F=p([]),S=p([]),N=p([]),T=p([]),A=p(!0),w=p(null),E=p(null),Z={nome:null,nome_pai:null,nome_mae:null,profissao:null,fone_celular:null,data_nascimento:null,doc_identificacao:null,cpf_pai:null,cpf_mae:null,tipo_pessoa:"FISICA",tabvalores_estadocivil_id:null,tabvalores_capacidadecivil_id:null,cidade_natural_id:null,tabvalores_sexo_id:null,cartorio_id:R("user-data").value.cartorio_id,user_id:R("user-data").value.usuario_id},h=[{label:"FÍSICA",value:"FISICA"},{label:"JURÍDICA",value:"JURIDICA"},{label:"ESTRANGEIRA",value:"ESTRANGEIRA"}],t=be({...Z});function ee(d){if(d)return d.replace(/[.\-]/g,"");d=null}async function ae(){try{const[d,e,n,u,D]=await Promise.all([y(q),y(K),y(Q),y(`${X}/${g}`),y(Y)]),P=R("pessoa_token");P.value=u.token,F.value=d,S.value=e,N.value=n,T.value=D,(u.data_nascimento||u.created)&&(u.data_nascimento=W(u.data_nascimento,"dd/mm/yyyy"),u.created=W(u.created,"dd/mm/yyyy")),E.value=u.created,w.value=u.link_ficha,Object.assign(t,u)}catch(d){console.error("Erro ao carregar os dados da pessoa:",d)}finally{A.value=!1}}Ce(()=>{g?ae():A.value=!1});function le(d){const e={};for(const n in d)switch(n){case"doc_identificacao":case"cpf_pai":case"cpf_mae":e[n]=ee(d[n]);break;case"data_nascimento":e[n]=ge(d[n]);break;case"fone_celular":e[n]=d[n]?d[n].replace(/[^0-9]/g,""):null;break;default:e[n]=d[n]===""?null:d[n];break}return e}async function oe(){const d=le(t);await ye(`${H}/${g}`,{method:"PUT",body:d}),O.success("Pessoa atualizada com sucesso!"),L.push("/pessoas/lista")}return(d,e)=>{const n=ie,u=ne,D=ue,P=me,te=re,se=pe,de=ce,k=Ie("mask");return m(),c(Ue,{width:"1300"},{default:o(()=>[a(_,{style:{"background-color":"#f5f2f2"}},{default:o(()=>[a(i,null,{default:o(()=>[$("h1",Re,B(l(g)?"Atualização de Pessoas":"Cadastramento de Pessoas"),1)]),_:1}),a(i,{class:"d-flex justify-end"},{default:o(()=>[$("h3",$e," Cadastrado em "+B(l(E)),1)]),_:1})]),_:1}),$("div",Fe,[a(U,{modelValue:l(t).tipo_pessoa,"onUpdate:modelValue":e[0]||(e[0]=s=>l(t).tipo_pessoa=s),style:{width:"200px"},items:h,"item-title":"label","item-value":"value",label:"Tipo de pessoa","bg-color":"#F6F6F6",disabled:""},null,8,["modelValue"])]),l(A)?(m(),J("div",Se,[a(xe,{indeterminate:"",class:"loading-spinner",size:"64"})])):(m(),J("div",Ne,[a(Ae,{modelValue:l(v),"onUpdate:modelValue":e[1]||(e[1]=s=>M(v)?v.value=s:null),"bg-color":"#f5f2f2"},{default:o(()=>[a(C,{value:"dados"},{default:o(()=>e[18]||(e[18]=[f("Dados")])),_:1}),l(t).tipo_pessoa==="FISICA"?(m(),c(C,{key:0,value:"documento"},{default:o(()=>e[19]||(e[19]=[f("Documentos")])),_:1})):b("",!0),l(t).tipo_pessoa==="JURIDICA"?(m(),c(C,{key:1,value:"representante"},{default:o(()=>e[20]||(e[20]=[f("Representantes")])),_:1})):b("",!0),l(t).tipo_pessoa==="JURIDICA"||l(t).tipo_pessoa==="FISICA"?(m(),c(C,{key:2,value:"endereco"},{default:o(()=>e[21]||(e[21]=[f("Endereços")])),_:1})):b("",!0),l(t).tipo_pessoa==="FISICA"?(m(),c(C,{key:3,value:"biometria"},{default:o(()=>e[22]||(e[22]=[f("Biometria")])),_:1})):b("",!0),l(t).tipo_pessoa==="JURIDICA"||l(t).tipo_pessoa==="FISICA"?(m(),c(C,{key:4,value:"restricao"},{default:o(()=>e[23]||(e[23]=[f("Restrições")])),_:1})):b("",!0)]),_:1},8,["modelValue"]),a(De,{modelValue:l(v),"onUpdate:modelValue":e[17]||(e[17]=s=>M(v)?v.value=s:null)},{default:o(()=>[a(I,{value:"dados"},{default:o(()=>[l(t).tipo_pessoa==="FISICA"?(m(),c(j,{key:0},{default:o(()=>[a(_,null,{default:o(()=>[a(i,{cols:"12",md:"6"},{default:o(()=>[a(r,{modelValue:l(t).nome,"onUpdate:modelValue":e[2]||(e[2]=s=>l(t).nome=s),label:"Nome"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4"},{default:o(()=>[x(a(r,{modelValue:l(t).doc_identificacao,"onUpdate:modelValue":e[3]||(e[3]=s=>l(t).doc_identificacao=s),label:"CPF"},null,8,["modelValue"]),[[k,"###.###.###-##"]])]),_:1}),a(i,{md:"2"},{default:o(()=>[a(Pe,{label:"Sexo",modelValue:l(t).tabvalores_sexo_id,"onUpdate:modelValue":e[4]||(e[4]=s=>l(t).tabvalores_sexo_id=s),items:l(T),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(_,null,{default:o(()=>[a(i,{cols:"12",md:"4"},{default:o(()=>[a(U,{modelValue:l(t).tabvalores_estadocivil_id,"onUpdate:modelValue":e[5]||(e[5]=s=>l(t).tabvalores_estadocivil_id=s),items:l(F),"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),a(i,{cols:"12",md:"4"},{default:o(()=>[a(r,{modelValue:l(t).profissao,"onUpdate:modelValue":e[6]||(e[6]=s=>l(t).profissao=s),label:"Profissão"},null,8,["modelValue"])]),_:1}),a(i,{cols:"12",md:"4"},{default:o(()=>[a(r,{modelValue:l(t).local_trabalho,"onUpdate:modelValue":e[7]||(e[7]=s=>l(t).local_trabalho=s),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,null,{default:o(()=>[a(i,{cols:"12",md:"2"},{default:o(()=>[x(a(r,{modelValue:l(t).data_nascimento,"onUpdate:modelValue":e[8]||(e[8]=s=>l(t).data_nascimento=s),label:"Data de nascimento",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[k,"##/##/####"]])]),_:1}),a(i,{cols:"12",md:"2"},{default:o(()=>[x(a(r,{modelValue:l(t).fone_celular,"onUpdate:modelValue":e[9]||(e[9]=s=>l(t).fone_celular=s),label:"Celular",placeholder:"'(99) 99999-9999'"},null,8,["modelValue"]),[[k,"(##) #####-####"]])]),_:1}),a(i,{cols:"12",md:"4"},{default:o(()=>[a(U,{modelValue:l(t).tabvalores_capacidadecivil_id,"onUpdate:modelValue":e[10]||(e[10]=s=>l(t).tabvalores_capacidadecivil_id=s),items:l(S),label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),a(i,{cols:"12",md:"4"},{default:o(()=>[a(U,{modelValue:l(t).cidade_natural_id,"onUpdate:modelValue":e[11]||(e[11]=s=>l(t).cidade_natural_id=s),items:l(N),label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(_,null,{default:o(()=>[a(i,{cols:"12",md:"4"},{default:o(()=>[x(a(r,{modelValue:l(t).cpf_pai,"onUpdate:modelValue":e[12]||(e[12]=s=>l(t).cpf_pai=s),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[k,"###.###.###-##"]])]),_:1}),a(i,{cols:"12",md:"4"},{default:o(()=>[a(r,{modelValue:l(t).nome_pai,"onUpdate:modelValue":e[13]||(e[13]=s=>l(t).nome_pai=s),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,null,{default:o(()=>[a(i,{cols:"12",md:"4"},{default:o(()=>[x(a(r,{modelValue:l(t).cpf_mae,"onUpdate:modelValue":e[14]||(e[14]=s=>l(t).cpf_mae=s),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[k,"###.###.###-##"]])]),_:1}),a(i,{cols:"12",md:"4"},{default:o(()=>[a(r,{modelValue:l(t).nome_mae,"onUpdate:modelValue":e[15]||(e[15]=s=>l(t).nome_mae=s),modelModifiers:{date:!0},label:"Nome da Mãe"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{class:"mb-3"},{default:o(()=>[a(n,{to:"/pessoas/lista"},{default:o(()=>[a(z,{size:"large",color:"red"},{default:o(()=>e[24]||(e[24]=[f("Voltar")])),_:1})]),_:1}),a(z,{onClick:e[16]||(e[16]=s=>oe()),class:"ml-4",size:"large",color:"green"},{default:o(()=>e[25]||(e[25]=[f("Salvar")])),_:1})]),_:1})]),_:1})):l(t).tipo_pessoa==="JURIDICA"?(m(),c(u,{key:1})):b("",!0)]),_:1}),a(I,{value:"documento"},{default:o(()=>[a(D)]),_:1}),a(I,{value:"representante"},{default:o(()=>[a(P)]),_:1}),a(I,{value:"endereco"},{default:o(()=>[a(te)]),_:1}),a(I,{value:"biometria"},{default:o(()=>[a(j,{class:"mt-5"},{default:o(()=>[a(se,{"link-ficha":l(w)},null,8,["link-ficha"])]),_:1})]),_:1}),a(I,{value:"restricao"},{default:o(()=>[a(de)]),_:1})]),_:1},8,["modelValue"])]))]),_:1})}}},ia=fe(Te,[["__scopeId","data-v-b6ddd758"]]);export{ia as default};
