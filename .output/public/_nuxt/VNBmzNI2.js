import{_ as A}from"./C2QOmlVi.js";import{_ as I}from"./a7LG_d5L.js";import{_ as J}from"./BVz1G1IN.js";import{_ as F}from"./64KkF2dG.js";import{_ as L}from"./RBabJb33.js";import{_ as q}from"./C5KI-zNh.js";import{_ as G,a as W}from"./DJvq3mCv.js";import{r as i,B as X,h as m,w as n,k as H,o as l,b as r,a,s as g,i as s,j as w,N as K,d as Q,t as Y,c as f,p as $,e as b}from"./B-AAU5sB.js";import{f as C}from"./D5o3OgHD.js";import{u as Z}from"./Cskx3R5i.js";import{V as ee}from"./D4eqc8HE.js";import{V as P}from"./DdbRibm3.js";import{V as te}from"./vC7T8AWi.js";import"./Ys38wLQh.js";import"./CoFKZj7V.js";import"./u5d2r_VS.js";import"./BsJ2aXD8.js";import"./COIESEkv.js";import"./B-2hMERd.js";import"./BSU_Glvy.js";import"./CpO82v_f.js";import"./CeHnMVw3.js";import"./CIWRfvc0.js";import"./Ctbvsm1O.js";const oe={style:{width:"200px"}},se={style:{width:"150px"}},ae={style:{width:"300px"}},ie=["onClick"],le={key:0,style:{width:"30px",height:"30px"},src:F,alt:"Visualizar",title:"Possui Ficha"},ne={key:1,style:{width:"30px",height:"30px"},src:L,alt:"Visualizar",title:"N達o Ficha"},re=["onClick"],ue=["onClick"],ce={key:0,style:{width:"30px",height:"30px"},src:G,alt:"Visualizar",title:"Reativar"},de={key:1,src:W,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Re={__name:"index",setup(pe){const _=H(),N=`${_.public.auth}/service/gerencia/pesquisarPessoas`,z=`${_.public.auth}/service/gerencia/updatePessoa`,D=`${_.public.managemant}/download`,h=i(!1),v=i(!1),y=i([]),T=i(null),u=i(!1),x=i({}),c=i(null),d=i(null),p=i(null),j=[{title:"Documento",value:"doc_identificacao",width:"190px"},{title:"Cart達o",value:"numero_ficha"},{title:"Nome/Raz達o Social",value:"nome",width:"400px"},{value:"actions"}],E=async()=>{u.value=!0;const{data:t,status:e}=await C(`${N}`,{method:"POST",body:{cartorio_token:b("user-data").value.cartorio_token,nome:c.value?c.value:null,documento:d.value?d.value.replace(/\D/g,""):null,numero_ficha:Number(p.value)?Number(p.value):null}});e.value==="success"&&(u.value=!1,pessoasItems.value=t.value)};function U(t){if(!t)return"";const e=t.replace(/\D/g,"");return e.length===11?e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):e.length===14?e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):t}const M=async(t,e)=>{u.value=!0;const{data:k}=await Z(D,{method:"POST",body:{bucket:b("user-data").value.cartorio_token,path:t}},"$Jxa9V4cJXG");y.value=k.value,T.value=t,x.value=e,u.value=!1,console.log("Normal"),h.value=!0};async function R(t){t.excluido=!t.excluido;try{await C(`${z}/${t.id}`,{method:"PUT",body:{excluido:t.excluido}})}catch(e){console.error("Erro ao excluir pessoa:",e)}}function B(t){router.push({path:`/pessoas/atualizar/${t}`})}return(t,e)=>{const k=A,O=I,S=X("ModalFichaEspecial");return l(),m(ee,{class:"mt-5"},{default:n(()=>[r(k,{to:"/pessoas/cadastro"},{default:n(()=>e[6]||(e[6]=[a("img",{style:{cursor:"pointer"},src:J,alt:"Cadastro"},null,-1)])),_:1}),r(P,{style:{gap:"1rem"}},{default:n(()=>[a("div",oe,[r(g,{class:"mt-7 mb-4",modelValue:s(d),"onUpdate:modelValue":e[0]||(e[0]=o=>w(d)?d.value=o:null),label:"Documento","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),a("div",se,[r(g,{class:"mt-7 mb-4",modelValue:s(p),"onUpdate:modelValue":e[1]||(e[1]=o=>w(p)?p.value=o:null),label:"Cart達o","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),a("div",ae,[r(g,{class:"mt-7 mb-4",modelValue:s(c),"onUpdate:modelValue":e[2]||(e[2]=o=>w(c)?c.value=o:null),label:"Pessoa","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),a("div",{style:{cursor:"pointer"},onClick:e[3]||(e[3]=o=>E()),title:"Visualizar",class:"mt-7"},e[7]||(e[7]=[a("img",{style:{width:"40px",height:"40px"},src:F,alt:"Visualizar",title:"Possui Ficha"},null,-1)]))]),_:1}),s(u)?(l(),m(K,{key:0,class:"loading-spinner",indeterminate:"",size:"80"})):(l(),m(te,{key:1,density:"compact",headers:j,items:t.pessoasItems,"item-key":"id","items-per-page-options":[10,25,50]},{"item.doc_identificacao":n(({item:o})=>[Q(Y(U(o.documento)),1)]),"item.actions":n(({item:o})=>[r(P,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:n(()=>[a("div",{style:{cursor:"pointer"},onClick:V=>M(o.link_ficha,o),title:"Visualizar"},[o.link_ficha?(l(),f("img",le)):(l(),f("img",ne))],8,ie),a("div",{style:{cursor:"pointer"},onClick:V=>B(o.id),title:"Atualizar"},e[8]||(e[8]=[a("img",{style:{width:"30px",height:"30px"},src:q,alt:"Atualizar"},null,-1)]),8,re),a("div",{style:{cursor:"pointer"},onClick:V=>R(o),title:"Deletar"},[o.excluido?(l(),f("img",ce)):(l(),f("img",de))],8,ue)]),_:2},1024)]),_:1},8,["items"])),s(h)&&!s(v)?(l(),m(O,{key:2,show:s(h),"link-view":s(y),"is-view":!0,"pessoa-obj":s(x),onClose:e[4]||(e[4]=o=>h.value=!1)},null,8,["show","link-view","pessoa-obj"])):$("",!0),s(v)?(l(),m(S,{key:3,show:s(v),"link-view":s(y),"is-view":!0,"pessoa-obj":s(x),onClose:e[5]||(e[5]=o=>v.value=!1)},null,8,["show","link-view","pessoa-obj"])):$("",!0)]),_:1})}}};export{Re as default};
