import{_ as $}from"./CrjMs5Lr.js";import{_ as B}from"./Cx8pqlMA.js";import{_ as F}from"./-zgYk4Vu.js";import{u as V,n as d,r as a,x as t,c as f,b as u,P as b,y as I,w as N,A as z,o as m,a as s,t as O,z as P}from"./IL2fGfV9.js";import{u as S}from"./C36Xc3gB.js";import{V as j}from"./C0Mqmaum.js";import"./ObOe9Trw.js";import"./BTWFcycM.js";import"./DhcOacd6.js";import"./By5Scaoj.js";import"./C2TIHISg.js";const D={key:0,class:"d-flex align-center justify-center",style:{height:"80vh"}},E={key:0,class:"ml-4",style:{"font-size":"1.3rem"}},X={__name:"importa-onrtd",setup(M){const _=z(),{$toast:p}=V(),v=`${_.public.managemant}/importa_caixa_onrtd`,C=d("user-data").value.cartorio_token,g=d("auth_token").value,o=a(null),n=a(null),r=a(!1),i=a(null);function k(){i.value&&i.value.click()}function y(l){const e=l.target.files[0];o.value=e||null}const h=()=>{r.value=!0};async function x(){n.value="pending";const{data:l,status:e,error:c}=await S(v,{method:"POST",body:{cartorio_token:C,usuario_token:g,conteudo:o.value}},"$wpU3kJtn6B");n.value=e.value,e.value==="success"?p.success("Importação realizada com sucesso!"):p.error(`Erro: ${c.value.data.details}`)}return(l,e)=>{const c=$,w=B;return t(n)==="pending"?(m(),f("div",D,[u(b,{class:"loading-spinner",indeterminate:"",size:"64"})])):(m(),I(j,{key:1},{default:N(()=>[e[2]||(e[2]=s("h1",null,"Importar Lançamentos do Caixa (ONRTD)",-1)),s("input",{ref_key:"fileInput",ref:i,type:"file",accept:".json",style:{display:"none"},onChange:y},null,544),s("div",{class:"mt-2",onClick:k,title:"Criar"},[e[1]||(e[1]=s("img",{class:"mt-3 ml-2",style:{width:"80px",height:"80px",cursor:"pointer"},src:F,alt:"Criar"},null,-1)),t(o)?(m(),f("span",E,O(t(o).name),1)):P("",!0)]),u(c,{text:"Importar",class:"mt-5",disabled:!t(o),onSave:h},null,8,["disabled"]),u(w,{show:t(r),"cond-message":"Deseja continuar com a importação? Essa operação não poderá ser desfeita.",onClose:e[0]||(e[0]=A=>r.value=!1),onConfirm:x},null,8,["show"])]),_:1}))}}};export{X as default};
