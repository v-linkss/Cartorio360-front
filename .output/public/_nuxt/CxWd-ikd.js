import{_ as de}from"./DKM8ZKQw.js";import{_ as Q}from"./YhFgboLL.js";import{_ as X}from"./BVz1G1IN.js";import{_ as Y}from"./04OqTqjO.js";import{_ as Z}from"./DyPCmj71.js";import{_ as ee,a as te}from"./DJvq3mCv.js";import{L as oe,M as ae,u as ce,r as m,m as W,n as me,D as j,o as w,x as se,w as o,b as t,v as s,a as i,t as le,c as q,J as F,d as D,N as pe,E as P,z as ie,H as _e,V as H}from"./Dg-eFJyq.js";import{u as O}from"./DtICNxMd.js";import{V}from"./B-FCuE96.js";import{V as G}from"./Ctj67pAZ.js";import{V as x}from"./Cz8yEchp.js";import{V as K}from"./DKdoBUSy.js";import{V as re}from"./B_RJAnXA.js";import{V as ve}from"./C19IhJW2.js";import{V as fe,a as ye,b as ge,c as ke}from"./EhWut9xS.js";import{V as ne}from"./DKNva2nt.js";import{_ as Ve,a as xe}from"./BFzm44kp.js";import{f as N}from"./pa1sK5kZ.js";const he={style:{width:"800px","font-weight":"500"}},be=["onClick"],$e=["onClick"],we=["onClick"],Ce={key:0,style:{width:"30px",height:"30px"},src:ee,alt:"Reativar",title:"Reativar"},ze={key:1,src:te,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},et={__name:"Bens",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(R){let c,_;const p=R,h=oe(),C=ae(),v=ie(),{$toast:f}=ce(),M=`${v.public.managemant}/atos_bens`,y=`${v.public.managemant}/atos_bens`,b=`${v.public.managemant}/listarBens`,z=`${v.public.managemant}/listarTipoBens`,T=m(W("user-data").value.cartorio_token),S=m(W("user-data").value.usuario_id).value,$=m([]),d=m([]),g=m(!1),E=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"vlr_alienacao"},{align:"end",value:"actions"}],n=me({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),I=async()=>{if(!n.vlr_alienacao&&!n.descricao){f.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:r,status:e}=await O(`${M}`,{method:"POST",body:{descricao:n.descricao,tipo_id:n.tipo_id,valor_mercado:"0.00",vlr_alienacao:n.vlr_alienacao.replace(/,/g,""),user_id:S,ato_id:Number.parseInt(p.ato_id),token:C.query.ato_token_edit}},"$TVfAAEMyym");e.value==="success"&&(f.success("Bem registrado com sucesso!"),$.value.push(r.value),Object.assign(n,{vlr_alienacao:null,descricao:null,tipo_id:null}))},U=async r=>{const{status:e}=await O(`${y}/${r}`,{method:"PUT",body:{descricao:d.value.descricao,tipo_id:d.value.tipo_id,vlr_alienacao:d.value.vlr_alienacao.replace(/,/g,"")}},"$TRbOfiOtJ9");e.value==="success"&&(f.success("Bem Atualizado com sucesso!"),g.value=!1)},L=r=>{const e=$.value.find(k=>k.id===r);e&&(d.value=e,g.value=!0)},{data:u}=([c,_]=j(()=>O(`${z}`,{method:"POST",body:{cartorio_token:T.value,imoveis:!1}},"$rrOfkMLqML")),c=await c,_(),c);n.tiposBens=u.value;const{data:a}=([c,_]=j(()=>O(`${b}`,{method:"POST",body:{ato_token:p.ato_token}},"$qhjPuJWFwD")),c=await c,_(),c);$.value=a.value&&Object.keys(a.value).length===0?[]:a.value;async function B(r){r.excluido=!r.excluido;try{await O(`${y}/${r.id}`,{method:"PUT",body:JSON.stringify({excluido:r.excluido})},"$1s7uo0EeAe")}catch(e){console.error("Erro ao excluir pessoa:",e)}}const A=()=>{const r=C.query.origem||"criar",e=C.query.id;switch(r){case"atualizar":case"vizualizar":h.push(`/os/atualizar/${e}`);break;case"atualizar-lista":case"vizualizar-lista":h.push("/atos/lista");break;default:h.push("/os/criar-registro");break}};return(r,e)=>{const k=de,ue=Q;return w(),se(ne,null,{default:o(()=>[t(V,{class:"mt-5",cols:"12"},{default:o(()=>[t(G,{label:"Descrição",modelValue:s(n).descricao,"onUpdate:modelValue":e[0]||(e[0]=l=>s(n).descricao=l)},null,8,["modelValue"])]),_:1}),t(x,{class:"ml-1 mb-3"},{default:o(()=>[t(V,{class:"mt-6",cols:"8"},{default:o(()=>[t(K,{label:"Selecione o Tipo",items:s(n).tiposBens,modelValue:s(n).tipo_id,"onUpdate:modelValue":e[1]||(e[1]=l=>s(n).tipo_id=l),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(V,{class:"ml-5",cols:"3"},{default:o(()=>[e[9]||(e[9]=i("label",null,"Valor",-1)),t(k,{modelValue:s(n).vlr_alienacao,"onUpdate:modelValue":e[2]||(e[2]=l=>s(n).vlr_alienacao=l)},null,8,["modelValue"])]),_:1}),i("div",null,[i("img",{class:"mt-7 ml-4",src:X,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:I})])]),_:1}),t(x,null,{default:o(()=>[t(V,null,{default:o(()=>[t(re,{style:{height:"465px"},headers:E,items:s($)},{"item.descricao":o(({item:l})=>[i("h3",he,le(l.descricao),1)]),"item.actions":o(({item:l})=>[t(x,{style:{"margin-top":"-8px"},justify:"end"},{default:o(()=>[i("div",{style:{cursor:"pointer"},class:"mr-2",onClick:J=>r.redirectToFicha(l),title:"Visualizar Ficha"},e[10]||(e[10]=[i("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Visualizar"},null,-1)]),8,be),i("div",{style:{cursor:"pointer"},class:"mr-2",onClick:J=>L(l.id),title:"Alterar Papel"},e[11]||(e[11]=[i("img",{style:{width:"30px",height:"30px"},src:Z,alt:"Editar"},null,-1)]),8,$e),i("div",{style:{cursor:"pointer"},class:"mr-2",onClick:J=>B(l),title:"Deletar Pessoa"},[l.excluido?(w(),q("img",Ce)):(w(),q("img",ze))],8,we)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),t(ve,{modelValue:s(g),"onUpdate:modelValue":e[8]||(e[8]=l=>F(g)?g.value=l:null),"max-width":"600px"},{default:o(()=>[t(fe,null,{default:o(()=>[t(ye,{style:{color:"green"}},{default:o(()=>e[12]||(e[12]=[D("Atualizar Bem")])),_:1}),t(ge,null,{default:o(()=>[t(V,{class:"mt-1",cols:"12"},{default:o(()=>[t(G,{label:"Descrição",modelValue:s(d).descricao,"onUpdate:modelValue":e[3]||(e[3]=l=>s(d).descricao=l)},null,8,["modelValue"])]),_:1}),t(x,null,{default:o(()=>[t(V,{class:"mt-6 ml-3",cols:"8"},{default:o(()=>[t(K,{label:"Selecione o Tipo",items:s(n).tiposBens,modelValue:s(d).tipo_id,"onUpdate:modelValue":e[4]||(e[4]=l=>s(d).tipo_id=l),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(V,{class:"ml-5",cols:"3"},{default:o(()=>[e[13]||(e[13]=i("label",null,"Valor",-1)),t(k,{modelValue:s(d).vlr_alienacao,"onUpdate:modelValue":e[5]||(e[5]=l=>s(d).vlr_alienacao=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(ke,null,{default:o(()=>[t(pe),t(P,{color:"green",text:"",onClick:e[6]||(e[6]=l=>g.value=!1)},{default:o(()=>e[14]||(e[14]=[D("Cancelar")])),_:1}),t(P,{color:"green",text:"",onClick:e[7]||(e[7]=l=>U(s(d).id))},{default:o(()=>e[15]||(e[15]=[D("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(x,null,{default:o(()=>[t(ue,{onClick:A},{default:o(()=>[t(P,{size:"large",color:"red"},{default:o(()=>e[16]||(e[16]=[D("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Te={style:{width:"200px"}},Be={style:{width:"300px"}},Ae={style:{width:"800px","font-weight":"500"}},Oe=["onClick"],De=["onClick"],Me=["onClick"],Se={key:0,style:{width:"30px",height:"30px"},src:ee,alt:"Visualizar",title:"Reativar"},Ue={key:1,src:te,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},tt={__name:"Imoveis",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0},ato_token_selected:{type:String,required:!0}},async setup(R){let c,_;const p=R,h=ie(),C=`${h.public.auth}/service/gerencia/atos_bens`,v=`${h.public.auth}/service/gerencia/atos_imoveis`,f=oe(),M=ae(),y=m(""),b=m(""),z=m(!1),T=m(!1),S=m(null),$=[{title:"Matrícula",value:"registro_matricula"},{title:"Descrição",value:"descricao"},{value:"actions"}],{data:d,status:g}=([c,_]=j(()=>N(v,{method:"POST",body:{ato_token:p.ato_token}})),c=await c,_(),c),E=_e(()=>{if(Object.keys(d.value).length!==0)return d.value.filter(u=>{const a=u.matricula?u.matricula.toLowerCase():"",B=u.descricao?u.descricao.toLowerCase():"",A=a.includes(b.value.toLowerCase()),r=B.includes(y.value.toLowerCase());return A&&r})});async function n(u){u.excluido=!u.excluido;try{await N(`${C}/${u.id}`,{method:"PUT",body:{excluido:u.excluido}})}catch(a){console.error("Erro ao excluir pessoa:",a)}}function I(u){S.value=u,T.value=!0}const U=async()=>{await N(v,{method:"POST",body:{ato_token:p.ato_token}})},L=()=>{const u=M.query.origem||"criar",a=M.query.id;switch(u){case"atualizar":case"vizualizar":f.push(`/os/atualizar/${a}`);break;case"atualizar-lista":case"vizualizar-lista":f.push("/atos/lista");break;default:f.push("/os/criar-registro");break}};return(u,a)=>{const B=Q,A=Ve,r=xe;return w(),se(ne,{class:"mt-5"},{default:o(()=>[i("img",{onClick:a[0]||(a[0]=e=>z.value=!0),style:{cursor:"pointer"},src:X,alt:"Cadastro"}),t(x,{style:{gap:"3rem"}},{default:o(()=>[i("div",Te,[t(H,{class:"mt-7 mb-4",modelValue:s(b),"onUpdate:modelValue":a[1]||(a[1]=e=>F(b)?b.value=e:null),label:"Matrícula","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),i("div",Be,[t(H,{class:"mt-7 mb-4",modelValue:s(y),"onUpdate:modelValue":a[2]||(a[2]=e=>F(y)?y.value=e:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),t(re,{density:"compact",headers:$,items:s(E),"item-key":"id"},{"item.descricao":o(({item:e})=>[i("h3",Ae,le(e.descricao),1)]),"item.actions":o(({item:e})=>[t(x,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:o(()=>[i("div",{style:{cursor:"pointer"},onClick:k=>u.redirectToView(e.id),title:"Visualizar"},a[5]||(a[5]=[i("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Visualizar"},null,-1)]),8,Oe),i("div",{style:{cursor:"pointer"},onClick:k=>I(e.id),title:"Atualizar"},a[6]||(a[6]=[i("img",{style:{width:"30px",height:"30px"},src:Z,alt:"Atualizar"},null,-1)]),8,De),i("div",{style:{cursor:"pointer"},onClick:k=>n(e),title:"Deletar"},[e.excluido?(w(),q("img",Se)):(w(),q("img",Ue))],8,Me)]),_:2},1024)]),_:1},8,["items"]),t(B,{onClick:L},{default:o(()=>[t(P,{size:"large",color:"red"},{default:o(()=>a[7]||(a[7]=[D("Voltar")])),_:1})]),_:1}),t(A,{onRefresh:U,ato_id:p.ato_id,ato_token:p.ato_token,ato_token_selected:p.ato_token_selected,show:s(z),onClose:a[3]||(a[3]=e=>z.value=!1)},null,8,["ato_id","ato_token","ato_token_selected","show"]),t(r,{onRefresh:U,imovel_id:s(S),show:s(T),ato_token_selected:p.ato_token_selected,onClose:a[4]||(a[4]=e=>T.value=!1)},null,8,["imovel_id","show","ato_token_selected"])]),_:1})}}};export{et as _,tt as a};
