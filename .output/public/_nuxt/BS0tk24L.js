import{_ as T}from"./Ca_Xhbd5.js";import{_ as L}from"./j5WDG2nq.js";import{_ as N,u as P,E as R,r as n,D as _,F as z,G as F,o as U,A as X,x as j,w as p,b as r,a as l,q as t,s as D,p as G,e as J}from"./BUVVZfhT.js";import{u as g}from"./DRXdnPS6.js";import{_ as K}from"./ToPptOUL.js";import{c as Q,r as W,u as H,V as Y,_ as Z}from"./PV7ygOIe.js";import{V as ee}from"./EISkJB2m.js";import{V as te}from"./BYw93oFs.js";import{a as oe}from"./CG-Cg3Kq.js";const ae=u=>(G("data-v-3a8a6b3c"),u=u(),J(),u),se={style:{width:"600px","margin-top":"10px"}},ne={style:{width:"180px","margin-top":"20px"}},re=ae(()=>l("img",{class:"btn-pointer mt-10 mb-5",src:K,alt:"Sair"},null,-1)),ue={__name:"autenticacao",props:{ato_token:{type:String,required:!0}},async setup(u){let d,b;const $=u,w=P(),V=R(),v=j(),x=`${v.public.managemant}/listarEscrevente`,f=n(_("user-data").value.cartorio_token).value,y=n(_("user-service").value.token).value||n(_("user-service").value).value,A=_("auth_token").value,C=`${v.public.managemant}/atoAutentica`,S=`${v.public.managemant}/etiquetaAutentica`,k=n(!1),h=n(""),a=z({escrevente:null,quantidade:1}),q=n([]),{data:I}=([d,b]=F(()=>g(x,{method:"POST",body:{cartorio_token:f}},"$nXL9eJBhI7")),d=await d,b(),d);q.value=I.value[0].func_json_escreventes;const B={escrevente:{required:Q.withMessage("O campo é obrigatorio",W)}},m=H(B,a),M=async()=>{if(await m.value.$validate()){const{data:o,status:e,error:i}=await g(C,{method:"POST",body:{usuario_token:A,cartorio_token:f,quantidade:Number(a.quantidade),ordemserv_token:y,ato_tipo_token:$.ato_token}},"$dpfLzAlO85");e.value==="success"&&o.value.status==="OK"?O(o.value.token):(k.value=!0,h.value=o.value.status_mensagem||i.value.data.details)}},O=async o=>{const{data:e,status:i}=await g(S,{method:"POST",body:{escrevente_token:a.escrevente,cartorio_token:f,ato_token:o}},"$fPnSl9XMLA");if(i.value==="success"){const c=window.open("","_blank");c.document.open(),c.document.write(e.value.etiqueta),c.document.close()}},E=()=>{const o=V.query.origem||"criar",e=V.query.id;o==="atualizar"?w.push(`/ordens-servicos/atualizar/${e}`):w.push("/ordens-servicos/criar-registro")};return(o,e)=>{const i=T,c=L;return U(),X(oe,{class:"mt-10",title:"Autenticação"},{default:p(()=>[r(te,null,{default:p(()=>[l("div",se,[r(Y,{label:"Tabelião/escrivão",modelValue:t(a).escrevente,"onUpdate:modelValue":e[0]||(e[0]=s=>t(a).escrevente=s),items:t(q),"item-title":"nome","item-value":"token",required:"","error-messages":t(m).escrevente.$errors.map(s=>s.$message),onBlur:t(m).escrevente.$touch,onInput:t(m).escrevente.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),l("div",ne,[r(D,{type:"number",label:"Quantidade",modelValue:t(a).quantidade,"onUpdate:modelValue":e[1]||(e[1]=s=>t(a).quantidade=s)},null,8,["modelValue"])]),r(ee,null,{default:p(()=>[l("div",null,[r(i,{onClick:E},{default:p(()=>[re]),_:1})]),l("img",{class:"btn-pointer mt-10",src:Z,onClick:M})]),_:1})]),_:1}),r(c,{show:t(k),errorMessage:t(h),onClose:e[2]||(e[2]=s=>k.value=!1)},null,8,["show","errorMessage"])]),_:1})}}},ke=N(ue,[["__scopeId","data-v-3a8a6b3c"]]);export{ke as default};
