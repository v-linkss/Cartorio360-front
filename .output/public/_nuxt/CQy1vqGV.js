import{_ as be,a as xe,b as $e,c as ke,d as we,e as Ae}from"./C5jaOJQ8.js";import{_ as Ce}from"./WS0uarKA.js";import{_ as ie}from"./Bi_lbJ_M.js";import{_ as ne,a as re,b as ue}from"./BP1uhy__.js";import{_ as de}from"./B6U4AxO7.js";import{_ as Y}from"./BIsWweD_.js";import{C as ce,H as Z,u as Te,r as m,m as X,D as me,I as J,o as B,G as K,w as o,b as e,v as a,a as i,t as ee,c as H,x as D,d as y,J as he,A as q,s as te,p as Pe,V as le,K as pe,g as Be,F as ze,y as Se}from"./CLQ3TAfl.js";import{u as F,V as T}from"./Cz35Qhbb.js";import{V as P}from"./DUEtmalS.js";import{V as se}from"./Bu2GKrm4.js";import{V as E}from"./sWqJIHtN.js";import{V as _e}from"./CJ7gNTRH.js";import{V as ve,a as oe,b as Ue,c as Oe,d as fe}from"./DLZVdTNF.js";import{V as ae}from"./CdYFebNX.js";import{_ as De,a as Ie}from"./D0DjZcLG.js";import{f as G}from"./CeRf1xEL.js";import{V as Me,a as U,b as Re,c as O}from"./DUmNdMh8.js";import"./Dd1ZQYOy.js";import"./C9l3aaz8.js";import"./CdP3NN9a.js";import"./B9IF_oQw.js";import"./3kmtERP3.js";import"./0kgA2AVM.js";import"./CqsRosCI.js";import"./COFv2-qL.js";import"./AlnS5eEB.js";import"./D8xXyRD1.js";const qe={style:{width:"800px","font-weight":"500"}},Ee=["onClick"],Le=["onClick"],Ne=["onClick"],je={key:0,style:{width:"30px",height:"30px"},src:re,alt:"Reativar",title:"Reativar"},Fe={key:1,src:ue,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},Ge={__name:"Bens",async setup(R){let u,V;const g=ce(),d=Z(),f=te(),{$toast:w}=Te(),x=`${f.public.managemant}/atos_bens`,A=`${f.public.managemant}/atos_bens`,r=`${f.public.managemant}/listarBens`,$=`${f.public.managemant}/listarTipoBens`,I=m(X("user-data").value.cartorio_token),M=m(X("user-data").value.usuario_id).value,k=m([]),v=m([]),C=m(!1),z=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"vlr_alienacao"},{align:"end",value:"actions"}],p=me({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),L=async()=>{if(!p.vlr_alienacao&&!p.descricao){w.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:c,status:t}=await F(`${x}`,{method:"POST",body:{descricao:p.descricao,tipo_id:p.tipo_id,valor_mercado:"0.00",vlr_alienacao:p.vlr_alienacao.replace(/,/g,""),user_id:M,ato_id:Number.parseInt(d.query.ato_id),token:d.query.ato_token_edit}},"$aGIwRtPn6M");t.value==="success"&&(w.success("Bem registrado com sucesso!"),k.value.push(c.value),Object.assign(p,{vlr_alienacao:null,descricao:null,tipo_id:null}))},N=async c=>{const{status:t}=await F(`${A}/${c}`,{method:"PUT",body:{descricao:v.value.descricao,tipo_id:v.value.tipo_id,vlr_alienacao:v.value.vlr_alienacao.replace(/,/g,"")}},"$4hUMyAQlzU");t.value==="success"&&(w.success("Bem Atualizado com sucesso!"),C.value=!1)},j=c=>{const t=k.value.find(h=>h.id===c);t&&(v.value=t,C.value=!0)},{data:_}=([u,V]=J(()=>F(`${$}`,{method:"POST",body:{cartorio_token:I.value,imoveis:!1}},"$da802I2H8c")),u=await u,V(),u);p.tiposBens=_.value;const{data:s}=([u,V]=J(()=>F(`${r}`,{method:"POST",body:{ato_token:d.query.ato_token_edit}},"$iXfJJrO35d")),u=await u,V(),u);k.value=s.value&&Object.keys(s.value).length===0?[]:s.value;async function b(c){c.excluido=!c.excluido;try{await F(`${A}/${c.id}`,{method:"PUT",body:JSON.stringify({excluido:c.excluido})},"$PGKHfsa7Pl")}catch(t){console.error("Erro ao excluir pessoa:",t)}}const l=()=>{const c=d.query.origem||"criar",t=d.query.id;c==="atualizar"?g.push(`/os/atualizar/${t}`):g.push("/os/criar-registro")};return(c,t)=>{const h=Ce,Q=ie;return B(),K(ae,null,{default:o(()=>[e(P,{class:"mt-5",cols:"12"},{default:o(()=>[e(se,{label:"Descrição",modelValue:a(p).descricao,"onUpdate:modelValue":t[0]||(t[0]=n=>a(p).descricao=n)},null,8,["modelValue"])]),_:1}),e(T,{class:"ml-1 mb-3"},{default:o(()=>[e(P,{class:"mt-6",cols:"8"},{default:o(()=>[e(E,{label:"Selecione o Tipo",items:a(p).tiposBens,modelValue:a(p).tipo_id,"onUpdate:modelValue":t[1]||(t[1]=n=>a(p).tipo_id=n),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(P,{class:"ml-5",cols:"3"},{default:o(()=>[t[9]||(t[9]=i("label",null,"Valor",-1)),e(h,{modelValue:a(p).vlr_alienacao,"onUpdate:modelValue":t[2]||(t[2]=n=>a(p).vlr_alienacao=n)},null,8,["modelValue"])]),_:1}),i("div",null,[i("img",{class:"mt-7 ml-4",src:ne,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:L})])]),_:1}),e(T,null,{default:o(()=>[e(P,null,{default:o(()=>[e(_e,{style:{height:"465px"},headers:z,items:a(k)},{"item.descricao":o(({item:n})=>[i("h3",qe,ee(n.descricao),1)]),"item.actions":o(({item:n})=>[e(T,{style:{"margin-top":"-8px"},justify:"end"},{default:o(()=>[i("div",{style:{cursor:"pointer"},class:"mr-2",onClick:W=>c.redirectToFicha(n),title:"Visualizar Ficha"},t[10]||(t[10]=[i("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1)]),8,Ee),i("div",{style:{cursor:"pointer"},class:"mr-2",onClick:W=>j(n.id),title:"Alterar Papel"},t[11]||(t[11]=[i("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Editar"},null,-1)]),8,Le),i("div",{style:{cursor:"pointer"},class:"mr-2",onClick:W=>b(n),title:"Deletar Pessoa"},[n.excluido?(B(),H("img",je)):(B(),H("img",Fe))],8,Ne)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(ve,{modelValue:a(C),"onUpdate:modelValue":t[8]||(t[8]=n=>D(C)?C.value=n:null),"max-width":"600px"},{default:o(()=>[e(oe,null,{default:o(()=>[e(Ue,{style:{color:"green"}},{default:o(()=>t[12]||(t[12]=[y("Atualizar Bem")])),_:1}),e(Oe,null,{default:o(()=>[e(P,{class:"mt-1",cols:"12"},{default:o(()=>[e(se,{label:"Descrição",modelValue:a(v).descricao,"onUpdate:modelValue":t[3]||(t[3]=n=>a(v).descricao=n)},null,8,["modelValue"])]),_:1}),e(T,null,{default:o(()=>[e(P,{class:"mt-6 ml-3",cols:"8"},{default:o(()=>[e(E,{label:"Selecione o Tipo",items:a(p).tiposBens,modelValue:a(v).tipo_id,"onUpdate:modelValue":t[4]||(t[4]=n=>a(v).tipo_id=n),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(P,{class:"ml-5",cols:"3"},{default:o(()=>[t[13]||(t[13]=i("label",null,"Valor",-1)),e(h,{modelValue:a(v).vlr_alienacao,"onUpdate:modelValue":t[5]||(t[5]=n=>a(v).vlr_alienacao=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(fe,null,{default:o(()=>[e(he),e(q,{color:"green",text:"",onClick:t[6]||(t[6]=n=>C.value=!1)},{default:o(()=>t[14]||(t[14]=[y("Cancelar")])),_:1}),e(q,{color:"green",text:"",onClick:t[7]||(t[7]=n=>N(a(v).id))},{default:o(()=>t[15]||(t[15]=[y("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(T,null,{default:o(()=>[e(Q,{onClick:l},{default:o(()=>[e(q,{size:"large",color:"red"},{default:o(()=>t[16]||(t[16]=[y("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Je={style:{width:"200px"}},He={style:{width:"300px"}},We={style:{width:"800px","font-weight":"500"}},Ke=["onClick"],Qe=["onClick"],Xe=["onClick"],Ye={key:0,style:{width:"30px",height:"30px"},src:re,alt:"Visualizar",title:"Reativar"},Ze={key:1,src:ue,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},et={__name:"Imoveis",async setup(R){let u,V;const g=te(),d=`${g.public.auth}/service/gerencia/atos_imoveis`,f=`${g.public.auth}/service/gerencia/atos_bens`,w=ce(),x=Z(),A=m(""),r=m(""),$=m(!1),I=m(!1),M=m(null),k=[{title:"Matrícula",value:"registro_matricula"},{title:"Descrição",value:"descricao"},{value:"actions"}],{data:v,status:C}=([u,V]=J(()=>G(d,{method:"POST",body:{ato_token:x.query.ato_token_edit}})),u=await u,V(),u),z=Pe(()=>{if(Object.keys(v.value).length!==0)return v.value.filter(_=>{const s=_.matricula?_.matricula.toLowerCase():"",b=_.descricao?_.descricao.toLowerCase():"",l=s.includes(r.value.toLowerCase()),c=b.includes(A.value.toLowerCase());return l&&c})});async function p(_){_.excluido=!_.excluido;try{await G(`${f}/${_.id}`,{method:"PUT",body:{excluido:_.excluido}})}catch(s){console.error("Erro ao excluir pessoa:",s)}}function L(_){M.value=_,I.value=!0}const N=async()=>{await G(d,{method:"POST",body:{ato_token:x.query.ato_token_edit}})},j=()=>{const _=x.query.origem||"criar",s=x.query.id;_==="atualizar"?w.push(`/os/atualizar/${s}`):w.push("/os/criar-registro")};return(_,s)=>{const b=ie,l=De,c=Ie;return a(C)==="success"?(B(),K(ae,{key:0,class:"mt-5"},{default:o(()=>[i("img",{onClick:s[0]||(s[0]=t=>$.value=!0),style:{cursor:"pointer"},src:ne,alt:"Cadastro"}),e(T,{style:{gap:"3rem"}},{default:o(()=>[i("div",Je,[e(le,{class:"mt-7 mb-4",modelValue:a(r),"onUpdate:modelValue":s[1]||(s[1]=t=>D(r)?r.value=t:null),label:"Matrícula","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),i("div",He,[e(le,{class:"mt-7 mb-4",modelValue:a(A),"onUpdate:modelValue":s[2]||(s[2]=t=>D(A)?A.value=t:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),e(_e,{density:"compact",headers:k,items:a(z),"item-key":"id"},{"item.descricao":o(({item:t})=>[i("h3",We,ee(t.descricao),1)]),"item.actions":o(({item:t})=>[e(T,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:o(()=>[i("div",{style:{cursor:"pointer"},onClick:h=>_.redirectToView(t.id),title:"Visualizar"},s[5]||(s[5]=[i("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1)]),8,Ke),i("div",{style:{cursor:"pointer"},onClick:h=>L(t.id),title:"Atualizar"},s[6]||(s[6]=[i("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Atualizar"},null,-1)]),8,Qe),i("div",{style:{cursor:"pointer"},onClick:h=>p(t),title:"Deletar"},[t.excluido?(B(),H("img",Ye)):(B(),H("img",Ze))],8,Xe)]),_:2},1024)]),_:1},8,["items"]),e(b,{onClick:j},{default:o(()=>[e(q,{size:"large",color:"red"},{default:o(()=>s[7]||(s[7]=[y("Voltar")])),_:1})]),_:1}),e(l,{onRefresh:N,show:a($),onClose:s[3]||(s[3]=t=>$.value=!1)},null,8,["show"]),e(c,{onRefresh:N,imovel_id:a(M),show:a(I),onClose:s[4]||(s[4]=t=>I.value=!1)},null,8,["imovel_id","show"])]),_:1})):pe("",!0)}}},tt={__name:"TiposAtos",props:{show:Boolean,servicos:Array,tiposAtos:Array},emits:["close","save"],setup(R,{emit:u}){const V=R,g=m(V.show),d=me({selectedServico:null,selectedTipoAto:null}),f=u;Be(()=>V.show,A=>{g.value=A});const w=()=>{d.selectedServico=null,d.selectedTipoAto=null,g.value=!1,f("close")},x=()=>{f("save",{servico:d.selectedServico,tipoAto:d.selectedTipoAto}),w()};return(A,r)=>(B(),K(ve,{persistent:"",modelValue:a(g),"onUpdate:modelValue":r[2]||(r[2]=$=>D(g)?g.value=$:null),"max-width":"500"},{default:o(()=>[e(oe,null,{default:o(()=>[e(ae,null,{default:o(()=>[e(T,{class:"mt-1 mb-3",style:{"justify-content":"space-between"}},{default:o(()=>r[3]||(r[3]=[i("h1",{class:"ml-4"},"Tipos de Atos",-1)])),_:1}),r[4]||(r[4]=i("hr",{class:"mb-5"},null,-1)),e(E,{class:"mb-5",label:"Selecione o Serviço",modelValue:a(d).selectedServico,"onUpdate:modelValue":r[0]||(r[0]=$=>a(d).selectedServico=$),items:R.servicos},null,8,["modelValue","items"]),e(E,{class:"mb-5",label:"Selecione o Tipo de Ato",modelValue:a(d).selectedTipoAto,"onUpdate:modelValue":r[1]||(r[1]=$=>a(d).selectedTipoAto=$),items:R.tiposAtos},null,8,["modelValue","items"])]),_:1}),e(fe,null,{default:o(()=>[e(q,{style:{"background-color":"red",color:"white"},onClick:w},{default:o(()=>r[5]||(r[5]=[y("Voltar")])),_:1}),e(q,{style:{"background-color":"green",color:"white"},onClick:x},{default:o(()=>r[6]||(r[6]=[y("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ot={class:"mb-10"},at={style:{color:"red","margin-left":"30px"}},zt={__name:"[id]",async setup(R){let u,V;const g=m(null),d=m(null),f=m(null),w=te(),x=Z(),A=`${w.public.auth}/service/gerencia/listarSituacoes`,r=`${w.public.auth}/service/gerencia/getAtos`,$=m(X("user-data").value.cartorio_token),I=x.query.id?{ato_token:x.query.tipo_ato_token}:{cartorio_token:$},M=m([]),k=m([]),v=m("PROCURAÇÕES"),C=m("PROCURAÇÃO COM BENS"),z=m(!1);async function p(){try{const{data:b}=await G(`${r}/${x.query.ato_id}`,{method:"GET"});k.value=b.value}catch(b){console.log(b)}}[u,V]=J(()=>p()),await u,V();const{data:L,status:N}=([u,V]=J(()=>G(A,{method:"POST",body:I})),u=await u,V(),u);M.value=L.value;const j=b=>{g.value=b},_=b=>{d.value=b};function s(){k.dt_lavratura||(z.value=!0)}return(b,l)=>{const c=be,t=xe,h=Ge,Q=et,n=$e,W=ke,Ve=we,ye=Ae,ge=tt;return B(),H(ze,null,[i("div",ot,[e(T,{class:"mb-5 mt-5"},{default:o(()=>[l[5]||(l[5]=i("h1",null,"Ordem de Serviço nº",-1)),i("h1",at,ee(a(x).query.numero_os),1)]),_:1}),e(T,null,{default:o(()=>[e(P,{md:"6"},{default:o(()=>[e(E,{class:"mr-5",modelValue:a(v),"onUpdate:modelValue":l[0]||(l[0]=S=>D(v)?v.value=S:null),disabled:""},null,8,["modelValue"])]),_:1}),e(P,{md:"5"},{default:o(()=>[e(E,{modelValue:a(C),"onUpdate:modelValue":l[1]||(l[1]=S=>D(C)?C.value=S:null),disabled:""},null,8,["modelValue"])]),_:1}),i("div",null,[i("img",{class:"mt-2",style:Se({cursor:a(k).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:Y,alt:"Editar",onClick:s},null,4)])]),_:1})]),e(oe,{width:"1300"},{default:o(()=>[e(Me,{modelValue:a(f),"onUpdate:modelValue":l[2]||(l[2]=S=>D(f)?f.value=S:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(U,{value:"dados"},{default:o(()=>l[6]||(l[6]=[y("Dados")])),_:1}),e(U,{value:"partes"},{default:o(()=>l[7]||(l[7]=[y("Partes")])),_:1}),e(U,{value:"bens"},{default:o(()=>l[8]||(l[8]=[y("Bens")])),_:1}),e(U,{value:"imoveis"},{default:o(()=>l[9]||(l[9]=[y("Imoveis")])),_:1}),e(U,{value:"minuta"},{default:o(()=>l[10]||(l[10]=[y("Minuta")])),_:1}),e(U,{value:"livro"},{default:o(()=>l[11]||(l[11]=[y("Livro")])),_:1}),e(U,{value:"observacao"},{default:o(()=>l[12]||(l[12]=[y("Observações")])),_:1}),e(U,{value:"anexo"},{default:o(()=>l[13]||(l[13]=[y("Anexos")])),_:1})]),_:1},8,["modelValue"]),e(Re,{modelValue:a(f),"onUpdate:modelValue":l[3]||(l[3]=S=>D(f)?f.value=S:null)},{default:o(()=>[e(O,{value:"dados"},{default:o(()=>[e(c,{item_dados:a(k),item_situacoes:a(M)},null,8,["item_dados","item_situacoes"])]),_:1}),e(O,{value:"partes"},{default:o(()=>[e(t)]),_:1}),e(O,{value:"bens"},{default:o(()=>[e(h)]),_:1}),e(O,{value:"imoveis"},{default:o(()=>[e(Q)]),_:1}),e(O,{value:"minuta"},{default:o(()=>[e(n,{onPage:j,onDoc:_})]),_:1}),e(O,{value:"livro"},{default:o(()=>[e(W,{pages:a(g),document:a(d)},null,8,["pages","document"])]),_:1}),e(O,{value:"observacao"},{default:o(()=>[e(Ve)]),_:1}),e(O,{value:"anexo"},{default:o(()=>[e(ye)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(z)?(B(),K(ge,{key:0,show:a(z),servicos:a(k).servicos||[],tiposAtos:a(k).tiposAtos||[],onClose:l[4]||(l[4]=S=>z.value=!1)},null,8,["show","servicos","tiposAtos"])):pe("",!0)],64)}}};export{zt as default};
