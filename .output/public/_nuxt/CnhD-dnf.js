import{_ as O,S as K,T as L,r as i,o as m,c as P,a as v,b as a,P as T,y as o,V as S,w as s,A as I,K as p,L as J,d as _,s as y,U as w,z as x,p as R,e as $,u as f}from"./CGGPSomy.js";import{a as z}from"./BuE6p3pa.js";import{V as F}from"./0HJKBehT.js";import{V as C}from"./CfMo_FrX.js";import"./BgQync5K.js";const j=""+new URL("cartorio_logo.CfnnJMUp.jpeg",import.meta.url).href,E=u=>(R("data-v-bb4a7be4"),u=u(),$(),u),q={class:"container-main"},M={class:"container-form"},X=E(()=>v("div",{class:"text"},"Log in",-1)),G=E(()=>v("a",{class:"text-decoration-none",rel:"noopener noreferrer",style:{color:"#429946"}}," Esqueceu a senha?",-1)),H=E(()=>v("div",{class:"background-image"},null,-1)),Q={__name:"index",setup(u){const N=K(),{$toast:U}=L(),r=i({senha:"",email:""}),d=i(!1),l=i(!1),h=i(!1),k=i(!1),V=i(!1),g=()=>{h.value=!1,k.value=!1,V.value=!1,l.value=!1},A=async()=>{const{data:b,status:e,error:t}=await z("http://localhost:3333/login",{method:"POST",body:{senha:r.value.senha,email:r.value.email}},"$iX10IJN3fa");if(e.value==="success"){N.push("/home");const n=b.value[0].func_autentica_acesso_v1[0].registro[0],c=f("user-data");c.value=c.value=JSON.stringify({nome:n.nome,usuario_id:n.id,cartorio_id:n.cartorios[0].cartorio_id,cartorio_nome:n.cartorios[0].cartorio_descricao}),U.success("Login realizado com sucesso!");const B=b.value[0].func_autentica_acesso_v1[0].registro[0].token,D=f("auth_token");D.value=B}else{const n=f("counter");n.value=1,console.log(f("value").value);const c=t.value.data[0].func_autentica_acesso_v1[0];switch(c.status_mensagem){case"Esse email não está cadastrado no Durabil.":k.value=!0;break;case"Senha inválida.":h.value=!0;break;default:c.error==="Erro ao autenticar usuário"&&(V.value=!0);break}}};return(b,e)=>(m(),P("div",q,[v("div",M,[a(T,{class:"image",width:300,height:"230",src:j}),X,a(S,{autofocus:"",autocomplete:"email",type:"email",modelValue:o(r).email,"onUpdate:modelValue":e[0]||(e[0]=t=>o(r).email=t),"persistent-hint":"",class:"input",density:"compact",placeholder:"Email","prepend-inner-icon":"mdi-email-outline",variant:"outlined"},null,8,["modelValue"]),a(S,{modelValue:o(r).senha,"onUpdate:modelValue":e[1]||(e[1]=t=>o(r).senha=t),class:"input","append-inner-icon":o(d)?"mdi-eye-off":"mdi-eye",type:o(d)?"text":"password",density:"compact",placeholder:"Senha","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":e[2]||(e[2]=t=>d.value=!o(d))},null,8,["modelValue","append-inner-icon","type"]),a(F,{modelValue:o(l),"onUpdate:modelValue":e[4]||(e[4]=t=>I(l)?l.value=t:null),"max-width":"400",persistent:""},{activator:s(({props:t})=>[a(p,J({block:"",rounded:"",class:"button mb-10 mt-4"},t,{onClick:A,modelValue:o(l),"onUpdate:modelValue":e[3]||(e[3]=n=>I(l)?l.value=n:null)}),{default:s(()=>[_(" Acessar ")]),_:2},1040,["modelValue"])]),default:s(()=>[o(h)?(m(),y(C,{key:0,text:"Senha inválida."},{actions:s(()=>[a(w),a(p,{onClick:g,style:{"background-color":"#429946",color:"white"}},{default:s(()=>[_(" OK ")]),_:1})]),_:1})):x("",!0),o(k)?(m(),y(C,{key:1,text:"Esse email não está cadastrado."},{actions:s(()=>[a(w),a(p,{onClick:g,style:{"background-color":"#429946",color:"white"}},{default:s(()=>[_(" OK ")]),_:1})]),_:1})):x("",!0),o(V)?(m(),y(C,{key:2,text:"Erro no sistema"},{actions:s(()=>[a(w),a(p,{onClick:g,style:{"background-color":"#429946",color:"white"}},{default:s(()=>[_(" OK ")]),_:1})]),_:1})):x("",!0)]),_:1},8,["modelValue"]),G]),H]))}},ae=O(Q,[["__scopeId","data-v-bb4a7be4"]]);export{ae as default};
