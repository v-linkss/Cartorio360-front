import{_ as te}from"./D3Zkslhf.js";import{a as oe,_ as ae}from"./BbF3VnZg.js";import{_ as re}from"./CcLZWOEO.js";import{_ as se}from"./BVz1G1IN.js";import{_ as ne}from"./Bs9PzlvQ.js";import{_ as ie}from"./Di4HcEpm.js";import{_ as le,a as ue}from"./DJvq3mCv.js";import{c as T,r as E,u as pe}from"./Cchgzj3Q.js";import{u as de,J as me,e as ce,r as u,f as h,g as _e,v as U,i as fe,k as w,w as n,m as ve,o as c,b as s,a as i,t as ge,j as a,p as ke,V as C,s as he,q as xe,c as q,x as $e,d as ye}from"./0ASXu1I8.js";import{u as z}from"./IDM6nxX6.js";import{f as be}from"./C45GQfni.js";import{V as Ve}from"./DyRoUmHq.js";import{V as x}from"./D75hKqua.js";import{V as $}from"./CZPTnH6m.js";import{V as we}from"./CPLO_28S.js";import{V as Ce}from"./WhOr7tkD.js";import"./e1rVhNDg.js";import"./BRPAwoTo.js";import"./CTgc_0Wr.js";import"./BLKT_aoi.js";import"./B9Rc9bSR.js";import"./CzHeg48R.js";import"./BzUs1SPx.js";const ze={style:{color:"red","margin-left":"30px"}},Oe=["onClick"],Re=["onClick"],Ae=["onClick","title"],Te=["disabled","onClick"],Ee={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:le,alt:"Visualizar",title:"Reativar"},Ue={key:1,src:ue,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},rt={__name:"[id]",async setup(qe){let l,_;const{$toast:O}=de(),B=me(),{id:d}=B.params,f=ce(),v=ve(),I=`${v.public.managemant}/updateOrdensServico`,S=`${v.public.managemant}/getOrdensServicoById`,P=`${v.public.managemant}/listarAtos`,D=`${v.public.managemant}/updateAtos`,N=u(h("user-data").value.cartorio_id),F=u(h("user-data").value.usuario_id),M=u(h("user-service").value.token).value||null,G=u(h("user-data").value.cartorio_token).value,y=u([]),b=u(!1),R=u(null),m=u(null),r=_e({nacionalidade:"brasileiro",apresentante_nome:null,apresentante_cpf:null,documento:null}),L=[{title:"ID",value:"id"},{title:"Protocolo",value:"protocolo"},{title:"Usuario",value:"usuario_nome"},{title:"Situação",value:"situacao"},{title:"Valor",value:"valor"},{title:"Tipo",value:"tipo"},{value:"actions"}],j=[{title:"BRASILEIRO",value:!1},{title:"ESTRANGEIRO",value:!0}],J={apresentante_nome:{required:T.withMessage("O campo é obrigatorio",E)},apresentante_cpf:{required:T.withMessage("O campo é obrigatorio",E)}},p=pe(J,r);function K(e){if(e)return e.replace(/[.\-]/g,"");e=null}const W=e=>{R.value=e,b.value=!0},X=e=>{(e.rota==="/fontes/atos/ato-com-bem/geral"||e.rota==="/fontes/atos/ato-sem-bem/geral")&&f.push({path:`/fontes/atos/atos-com-bem/atualizar/${e.id}`,query:{origem:"vizualizar",id:d,ato_id:e.id,tipo_ato_token:e.tipo_token,tipo_ato:e.tipo,ato_token_edit:e.token,numero_os:m.value,usa_imoveis:e.usa_imoveis}})},Y=e=>{e.rota==="/fontes/atos/ato-com-bem/geral"||e.rota==="/fontes/atos/ato-sem-bem/geral"?f.push({path:`/fontes/atos/atos-com-bem/atualizar/${e.id}`,query:{origem:"atualizar",id:d,ato_id:e.id,tipo_ato_token:e.tipo_token,tipo_ato:e.tipo,ato_token_edit:e.token,numero_os:m.value}}):e.rota==="/fontes/atos/divorcio/geral"&&f.push({path:`/fontes/atos/divorcio/atualizar/${e.id}`,query:{origem:"atualizar",id:d,ato_id:e.id,tipo_ato_token:e.tipo_token,tipo_ato:e.tipo,ato_token_edit:e.token,numero_os:m.value}})};async function Z(){const e={apresentante_cpf:K(r.apresentante_cpf),apresentante_nome:r.apresentante_nome,user_id:F.value,cartorio_id:N.value},{error:o,status:k}=await z(`${I}/${d}`,{method:"PUT",body:e},"$Fud06ay483");k.value==="error"&&o.value.statusCode===500?O.error("Erro ao cadastrar ordem,erro no sistema."):(O.success("Ordem Atualizada com sucesso!"),f.push({path:"/os/lista"}))}const{data:g}=([l,_]=U(()=>z(`${S}/${d}`,{method:"GET"},"$wPUkUpDvPf")),l=await l,_(),l);m.value=g.value.numero,r.nacionalidade=g.value.estrangeiro,r.apresentante_cpf=g.value.apresentante_cpf,r.apresentante_nome=g.value.apresentante_nome;const{data:A}=([l,_]=U(()=>z(P,{method:"POST",body:{cartorio_token:G,ordemserv_token:M}},"$YXZ55K3IUf")),l=await l,_(),l);async function H(e){e.excluido=!e.excluido;try{await be(`${D}/${e.id}`,{method:"PUT",body:{excluido:e.excluido}})}catch(o){console.error("Erro ao excluir pessoa:",o)}}return A.value.length>0?y.value=A.value:y.value=[],(e,o)=>{const k=te,Q=ae,ee=fe("mask");return c(),w(Ve,{class:"mt-5"},{default:n(()=>[s(x,{class:"mb-5"},{default:n(()=>[o[6]||(o[6]=i("h1",null,"Ordem de Serviço nº",-1)),i("h1",ze,ge(a(m)),1)]),_:1}),s(x,null,{default:n(()=>[s($,{md:"3"},{default:n(()=>[s(we,{label:"Nacionalidade",items:j,modelValue:a(r).nacionalidade,"onUpdate:modelValue":o[0]||(o[0]=t=>a(r).nacionalidade=t)},null,8,["modelValue"])]),_:1}),s($,{md:"2"},{default:n(()=>[a(r).nacionalidade==="brasileiro"?ke((c(),w(C,{key:0,autofocus:"",modelValue:a(r).apresentante_cpf,"onUpdate:modelValue":o[1]||(o[1]=t=>a(r).apresentante_cpf=t),label:"CPF",required:"","error-messages":a(p).apresentante_cpf.$errors.map(t=>t.$message),onBlur:a(p).apresentante_cpf.$touch,onInput:a(p).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])),[[ee,"###.###.###-##"]]):(c(),w(C,{key:1,autofocus:"",modelValue:a(r).apresentante_cpf,"onUpdate:modelValue":o[2]||(o[2]=t=>a(r).apresentante_cpf=t),label:"Documento",required:"","error-messages":a(p).apresentante_cpf.$errors.map(t=>t.$message),onBlur:a(p).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur"]))]),_:1}),s($,{md:"4"},{default:n(()=>[s(C,{modelValue:a(r).apresentante_nome,"onUpdate:modelValue":o[3]||(o[3]=t=>a(r).apresentante_nome=t),label:"Nome Apresentante",required:"","error-messages":a(p).apresentante_nome.$errors.map(t=>t.$message),onInput:a(p).apresentante_nome.$touch},null,8,["modelValue","error-messages","onInput"])]),_:1}),s($,null,{default:n(()=>[i("div",null,[i("img",{style:{width:"40px",height:"40px",cursor:"pointer"},src:re,alt:"Salvar",onClick:o[4]||(o[4]=t=>Z())})])]),_:1})]),_:1}),s(x,{style:{display:"flex","margin-bottom":"10px",gap:"2rem"}},{default:n(()=>[o[10]||(o[10]=i("h1",{class:"ml-5"},"Atos",-1)),s(k,{to:{path:"/os/criar-ato",query:{origem:"atualizar",id:a(d),numeroOs:a(m)}}},{default:n(()=>o[7]||(o[7]=[i("img",{style:{width:"45px",height:"45px",cursor:"pointer"},src:se,alt:"novo"},null,-1)])),_:1},8,["to"]),s(Ce,{headers:L,items:a(y),"item-key":"id"},{"item.actions":n(({item:t})=>[s(x,{style:{display:"flex",gap:"2px","margin-top":"-5px"}},{default:n(()=>[i("div",{onClick:V=>X(t),title:"Visualizar"},o[8]||(o[8]=[i("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:ne,alt:"Visualizar"},null,-1)]),8,Oe),i("div",{onClick:V=>W(t.token),title:"Reimprimir"},o[9]||(o[9]=[i("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:oe,alt:"Reimprimir"},null,-1)]),8,Re),i("div",{class:xe({disabled:!t.btn_editar}),onClick:V=>t.btn_editar?Y({id:t.id,tipo:t.tipo,token:t.token,tipo_token:t.tipo_token,rota:t.rota}):null,title:t.btn_editar?"Editar":"Desabilitado"},[i("img",{style:he({cursor:t.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:ie,alt:"Editar"},null,4)],10,Ae),i("div",{disabled:!t.btn_cancelar,onClick:V=>t.btn_cancelar?H(t):null,title:"Excluir"},[t.excluido?(c(),q("img",Ee)):(c(),q("img",Ue))],8,Te)]),_:2},1024)]),_:1},8,["items"]),s(Q,{show:a(b),ato_token:a(R),onClose:o[5]||(o[5]=t=>b.value=!1)},null,8,["show","ato_token"])]),_:1}),s(k,{to:"/os/lista"},{default:n(()=>[s($e,{size:"large",color:"red"},{default:n(()=>o[11]||(o[11]=[ye("Voltar")])),_:1})]),_:1})]),_:1})}}};export{rt as default};
