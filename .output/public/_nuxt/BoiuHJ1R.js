import{_ as te}from"./B7KVRnph.js";import{n as H,q as Z,u as Q,r as i,A as B,s as se,B as ee,o as b,v as D,w as o,b as e,x as t,V as Y,y as L,d as M,z as X,a as y,c as G,C as oe,D as Re,F as Ie,G as F,H as he,I as ge,t as ue}from"./CmLaF6he.js";import{u as $}from"./DoUwG6Q5.js";import{c as ye,r as be,u as ke}from"./B5Fxaj8v.js";import{V as R}from"./GwXOSlqS.js";import{V as j}from"./CuVACmLA.js";import{V as ce}from"./_0HDBEHl.js";import{V as re}from"./CijNiOfi.js";import{_ as Be,a as J,V as je,c as K,b as Ue}from"./BLFc8t77.js";import{_ as Ne,a as Fe,b as Le,T as We,W as Ge,r as xe,D as $e,c as Je,d as Ke,e as Ye}from"./BsAC0fFl.js";import{_ as de}from"./Dc43tMm0.js";import{_ as ae,V as me,a as pe,b as _e,c as He}from"./DJXv-iAj.js";import{V as Ve,a as ne}from"./BVVREZoT.js";import{V as Ze}from"./C7Qq-rwt.js";import{_ as Qe}from"./DfjuBLsA.js";import"./CyXw18Qd.js";import"./DHnzuTxT.js";import"./CzluxLML.js";import"./CdWXPEAW.js";const Xe={__name:"Dados",props:{ato_token:{type:String,required:!0}},emits:["saved"],async setup(U,{emit:m}){let c,p;const k=U,V=m,_=H(),d=Z(),w=X(),{$toast:h}=Q(),P=`${w.public.managemant}/listarSituacoes`,I=`${w.public.managemant}/createAtos`,T=`${w.public.managemant}/getAtosTiposByToken`,C=i(B("user-data").value.cartorio_token),N=i(B("user-service").value.id).value||i(B("user-service").value).value,q=i([]),r=se({dt_abertura:null,status:"EM EDIÇÃO",mne:null}),x={status:{required:ye.withMessage("O campo é obrigatorio",be)}},s=ke(x,r),{data:v}=([c,p]=ee(()=>$(`${T}/${k.ato_token}`,{method:"GET"},"$9ZmTYsLk0K")),c=await c,p(),c);async function a(){if(await s.value.$validate()){const{data:l,error:u,status:W}=await $(I,{method:"POST",body:{ato_tipo_id:v.value.id,cartorio_id:B("user-data").value.cartorio_id,ordemserv_id:N,status:r.status,dt_abertura:r.dt_abertura,mne:r.mne,user_id:B("user-data").value.usuario_id,user_alteracao_id:B("user-data").value.usuario_id}},"$hyq5YcBEjF");W.value==="success"&&(h.success("Ato registrado com sucesso!"),V("saved",{id:l.value.id,token:l.value.token}))}else h.error("Preencha os campos obrigatorios.")}const{data:f}=([c,p]=ee(()=>$(P,{method:"POST",body:{cartorio_token:C.value}},"$S3qwbpImEh")),c=await c,p(),c);q.value=f.value;const S=()=>{const l=d.query.origem||"criar",u=d.query.id;l==="atualizar"?_.push(`/os/atualizar/${u}`):_.push("/os/criar-registro")};return(l,u)=>{const W=te;return b(),D(re,null,{default:o(()=>[e(R,{class:"mt-5"},{default:o(()=>[e(j,{cols:"3"},{default:o(()=>[e(ce,{label:"Situação",modelValue:t(r).status,"onUpdate:modelValue":u[0]||(u[0]=E=>t(r).status=E),items:t(q),"item-title":"descricao","item-value":"descricao",required:"","error-messages":t(s).status.$errors.map(E=>E.$message),onBlur:t(s).status.$touch,onInput:t(s).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),e(R,null,{default:o(()=>[e(j,{cols:"5"},{default:o(()=>[e(Y,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:t(r).mne,"onUpdate:modelValue":u[1]||(u[1]=E=>t(r).mne=E)},null,8,["modelValue"])]),_:1})]),_:1}),e(R,null,{default:o(()=>[e(j,{cols:"2"},{default:o(()=>[e(Y,{modelValue:t(r).dt_abertura,"onUpdate:modelValue":u[2]||(u[2]=E=>t(r).dt_abertura=E),type:"date",label:"Data Lavratura",disabled:"",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(R,{class:"mb-3"},{default:o(()=>[e(W,{onClick:S},{default:o(()=>[e(L,{size:"large",color:"red"},{default:o(()=>[M("Voltar")]),_:1})]),_:1}),e(L,{class:"ml-10",onClick:a,size:"large",color:"green"},{default:o(()=>[M("Salvar")]),_:1})]),_:1})]),_:1})}}},et=["onClick"],tt=y("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1),ot=[tt],at=["onClick"],st=y("img",{style:{width:"30px",height:"30px"},src:He,alt:"Visualizar"},null,-1),rt=[st],nt=["onClick"],lt={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},it={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ut=["onClick"],ct=y("img",{style:{width:"30px",height:"30px"},src:Le,alt:"Visualizar"},null,-1),dt=[ct],mt={__name:"Partes",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(U){let m,c;const p=U,k=H(),V=Z(),_=X(),{$toast:d}=Q(),w=`${_.public.managemant}/pesquisarPessoas`,h=`${_.public.managemant}/listarPapeis`,P=`${_.public.managemant}/getLinkTipo`,I=`${_.public.managemant}/createAtosPessoa`,T=`${_.public.managemant}/getAtosPessoaById`,C=`${_.public.managemant}/updateAtosPessoa`,N=i(B("user-data").value.cartorio_token),q=i([]),r=i([]),x=i([]),s=i(!1),v=i(!1),a=i(!1),f=i(!1),S=i(null),l=i(null),u=i(null),W=i(null);i(null);const E=i(null),ve=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],z=se({papeis:null,nome:null,pessoa:null,documento:null}),{data:we}=([m,c]=ee(()=>$(h,{method:"POST",body:{tipo_ato_token:p.ato_token}},"$fFKndZhA4W")),m=await m,c(),m);x.value=we.value;async function Pe(){try{const{data:g,error:n}=await $(w,{method:"POST",body:{cartorio_token:N.value,documento:z.documento,nome:z.nome}},"$o3ZL1rvYrY");g.value.length>0?(q.value=g.value,z.pessoa=q.value[0]):q.value=[]}catch(g){console.error("Erro na requisição",g)}}const Ce=()=>{v.value=!0},Ee=g=>{r.value=r.value.map(n=>n.id===u.value?{...n,papel:{...n.papel,descricao:g}}:n)},Ae=g=>{const n=r.value.find(O=>O.pessoa.id===W.value);n.representante.nome=g},Te=async()=>{const g={pessoa:z.pessoa,papel:x.value.find(O=>O.id===z.papeis),representante:{nome:null}},n=await $(`${T}/${p.ato_id}`,{method:"GET"},"$kXSxUa4grs");for(const O of n.data.value)if(O.pessoa_id===z.pessoa.id&&O.ato_id===p.ato_id&&O.tipo_parte_id===z.papeis){d.error("Pessoa Já Registrada Com Esse Papel!");return}try{const{data:O,error:fe,status:le}=await $(I,{method:"POST",body:{ato_id:p.ato_id,pessoa_id:z.pessoa.id,tipo_parte_id:z.papeis,user_id:B("user-data").value.usuario_id}},"$So3qnQu7ek");le.value==="success"?(g.id=O.value.id,d.success("Pessoa Registrada com Sucesso!"),r.value.push(g)):d.error("Erro ao registrar a pessoa!")}catch{d.error("Erro no servidor. Tente novamente.")}},Se=async g=>{a.value=!0,E.value=null;const{data:n}=await $(`${P}`,{method:"POST",body:{id:g.pessoa.id,tipo:"ficha"}},"$Q3kbIwtd9t");n.value&&n.value.link?E.value=`data:image/jpeg;base64,${n.value.link}`:E.value=null},qe=g=>{const n=r.value.filter(O=>O.pessoa.id!==g.pessoa.id).map(O=>({id:O.pessoa.id,nome:O.pessoa.nome}));u.value=g.id,S.value=n,s.value=!0,l.value=g.pessoa.nome,W.value=g.pessoa.id},ze=g=>{u.value=g.id,f.value=!0,l.value=g.pessoa.nome};async function Oe(g){g.excluido=!g.excluido;try{await $(`${C}/${u.value}`,{method:"PUT",body:JSON.stringify({excluido:g.excluido})},"$9xStKwGd7o")}catch(n){console.error("Erro ao excluir pessoa:",n)}}const De=()=>{const g=V.query.origem||"criar",n=V.query.id;g==="atualizar"?k.push(`/os/atualizar/${n}`):k.push("/os/criar-registro")};return(g,n)=>{const O=Be,fe=Ne,le=Fe,Me=te;return b(),D(re,null,{default:o(()=>[e(R,{class:"mt-5"},{default:o(()=>[e(j,{cols:"3"},{default:o(()=>[e(Y,{label:"Documento",modelValue:t(z).documento,"onUpdate:modelValue":n[0]||(n[0]=A=>t(z).documento=A)},null,8,["modelValue"])]),_:1}),e(j,{cols:"4"},{default:o(()=>[e(Y,{label:"Pessoa",modelValue:t(z).nome,"onUpdate:modelValue":n[1]||(n[1]=A=>t(z).nome=A)},null,8,["modelValue"])]),_:1}),y("div",null,[y("img",{class:"mt-3",src:de,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Pe})]),y("div",null,[y("img",{class:"mt-3 ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Ce})])]),_:1}),e(R,null,{default:o(()=>[e(j,{cols:"4"},{default:o(()=>[e(ce,{label:"Selecione a Pessoa",modelValue:t(z).pessoa,"onUpdate:modelValue":n[2]||(n[2]=A=>t(z).pessoa=A),items:t(q),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(j,{cols:"3"},{default:o(()=>[e(ce,{label:"Papel",modelValue:t(z).papeis,"onUpdate:modelValue":n[3]||(n[3]=A=>t(z).papeis=A),items:t(x),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),y("div",null,[y("img",{class:"mt-3",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Te})])]),_:1}),e(R,null,{default:o(()=>[e(j,null,{default:o(()=>[e(me,{style:{height:"465px"},headers:ve,items:t(r)},{"item.actions":o(({item:A})=>[e(R,null,{default:o(()=>[y("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ie=>Se(A),title:"Visualizar Ficha"},ot,8,et),y("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ie=>ze(A),class:"mr-2",title:"Alterar Papel"},rt,8,at),y("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ie=>Oe(A),title:"Deletar Pessoa"},[A.excluido?(b(),G("img",lt)):(b(),G("img",it))],8,nt),y("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ie=>qe(A),title:"Selecionar Representante"},dt,8,ut)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(O,{show:t(v),onClose:n[4]||(n[4]=A=>v.value=!1)},null,8,["show"]),e(fe,{representante_nome:t(l),representantes:t(S),ato_id:t(u),show:t(s),onClose:n[5]||(n[5]=A=>s.value=!1),onUpdateRepresentante:Ae},null,8,["representante_nome","representantes","ato_id","show"]),e(le,{representante_nome:t(l),ato_token:p.ato_token,ato_id:t(u),show:t(f),onClose:n[6]||(n[6]=A=>f.value=!1),onUpdatePapel:Ee},null,8,["representante_nome","ato_token","ato_id","show"]),e(Ve,{modelValue:t(a),"onUpdate:modelValue":n[8]||(n[8]=A=>oe(a)?a.value=A:null),width:"600"},{default:o(()=>[e(ne,{"max-width":"600",title:"Ficha"},{default:o(()=>[e(Ze,{src:t(E)},null,8,["src"]),e(L,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:n[7]||(n[7]=A=>a.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(R,null,{default:o(()=>[e(Me,{onClick:De},{default:o(()=>[e(L,{size:"large",color:"red"},{default:o(()=>[M("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},pt={key:0,class:"loading-overlay"},_t="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",vt={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(U,{emit:m}){const c=U;Re("DocumentEditorContainer",[We,Ge]);const p=X(),{$toast:k}=Q(),V=H(),_=Z(),d=m;xe(`${p.public.docEditor}`);const w=`${p.public.managemant}/upload`,h=i(null),P=i(!1),I=async()=>{const v=await h.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),a=new FileReader;a.onload=()=>{const f=a.result;d("doc",f)},a.readAsText(v)},T=async()=>{P.value=!0;try{const v=await h.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),a=new FormData;a.append("file",v,"anexo.docx"),a.append("cartorio_token",B("user-data").value.cartorio_token),a.append("token",c.ato_token),a.append("tipo","ato_minuta");const{data:f,status:S}=await $(w,{method:"POST",body:a},"$071xxdqs20");if(S.value==="success"){k.success("Documento enviado!");const u=h.value.ej2Instances.documentEditor.pageCount;I(),d("page",u)}else k.error("Erro ao enviar documento para o sistema.")}catch(s){k.error("Erro ao salvar documento."),console.error(s)}finally{P.value=!1}},C=async()=>{r(!0);try{await N(),r(!0);const{data:s,status:v}=await $(substituirModelo,{method:"POST",body:{ato_token:c.ato_token}},"$0ktpWliD4l");s.value&&q(s.value)}catch(s){console.error("Erro ao gerar a minuta:",s),k.error("Ocorreu um erro ao gerar a minuta.")}finally{r(!1)}},N=async()=>{try{const{data:s}=await $(baixarDocumento,{method:"POST",body:{bucket:"qvgjz",path:"provider/modeloAto.sfdt"}},"$jXVvQjEE6u"),v=await fetchBlobFromMinIO(s.value);if(v){const a=new FileReader;a.onload=()=>{const f=a.result;h.value.ej2Instances.documentEditor.open(f),d("doc",f)},a.readAsText(v)}}catch(s){console.error("Erro ao carregar o modelo de minuta:",s),k.error("Falha ao carregar o modelo de minuta.")}},q=s=>{const v=h.value.ej2Instances.documentEditor,a=f=>{for(const[S,l]of Object.entries(f))if(/^<<.+>>$/.test(S))try{v.search.findAll(S),v.search.searchResults.length>0&&v.search.searchResults.replaceAll(l)}catch(u){console.error(`Erro ao substituir o marcador ${S}:`,u)}else if(S==="partes"&&Array.isArray(l)&&l.length>0)for(const u of l)typeof u=="object"&&a(u)};a(s)},r=s=>{P.value=s},x=()=>{const s=_.query.origem||"criar",v=_.query.id;s==="atualizar"?V.push(`/os/atualizar/${v}`):V.push("/os/criar-registro")};return(s,v)=>{const a=te;return b(),G(he,null,[e(t($e),{height:"900px",ref_key:"documentEditorContainer",ref:h,serviceUrl:_t,enableToolbar:!0,enableWordExport:!0},null,512),t(P)?(b(),G("div",pt,[e(Ie,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):F("",!0),e(R,{class:"ml-4 mt-4 mb-4"},{default:o(()=>[e(a,{class:"mr-4"},{default:o(()=>[e(L,{size:"large",onClick:x,color:"red"},{default:o(()=>[M("Voltar")]),_:1})]),_:1}),e(L,{size:"large",color:"green",onClick:T,disabled:t(P)},{default:o(()=>[M("Salvar")]),_:1},8,["disabled"]),e(L,{class:"ml-4",size:"large",color:"blue",onClick:C},{default:o(()=>[M("Gerar Minuta")]),_:1})]),_:1})],64)}}},ft={class:"d-flex align-center justify-center"},gt=["innerHTML"],ht={__name:"Livro",props:{ato_token:{type:String,required:!0},pages:{type:Number,required:!0},document:{type:String,required:!0}},setup(U){const m=U,c=X();xe(`${c.public.docEditor}`);const{$toast:p}=Q(),k=H(),V=Z(),_=`${c.public.managemant}/lavrarAto`,d=i("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),w=i(!1),h=i(null),P=i(null),I=i(null),T=async()=>{try{const{data:r,status:x}=await $(_,{method:"POST",body:{ato_token:m.ato_token,qtd_paginas:m.pages}},"$ZKnVBNYxp9");x.value==="success"?(h.value=r.value,P.value=r.value[0].selo,p.success("Ato lavrado com sucesso!")):p.error("Falha ao lavrar o ato.")}catch{p.error("Erro ao conectar com o servidor.")}},C=()=>{w.value=!1,T()},N=function(){I.value.ej2Instances.documentEditor.open(m.document)},q=()=>{const r=V.query.origem||"criar",x=V.query.id;r==="atualizar"?k.push(`/os/atualizar/${x}`):k.push("/os/criar-registro")};return(r,x)=>{const s=Ke;return b(),G(he,null,[e(R,null,{default:o(()=>[e(j,null,{default:o(()=>[(b(),D(t($e),{restrictEditing:!0,enableToolbar:!1,created:m.document?N:null,ref_key:"documentEditorContainer",ref:I,height:"850px",width:"850px",key:m.document},null,8,["created"]))]),_:1}),e(j,null,{default:o(()=>[y("div",ft,[y("div",null,[y("img",{onClick:x[0]||(x[0]=v=>w.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:Je}),t(h)?(b(),D(ne,{key:0,class:"mr-16"},{default:o(()=>[e(R,{"no-gutters":""},{default:o(()=>[e(j,null,{default:o(()=>[e(ge,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:o(()=>[M(" Livro: "+ue(t(h)[0].livro_numero),1)]),_:1})]),_:1}),e(j,null,{default:o(()=>[e(ge,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:o(()=>[M(" Folhas : "+ue(t(h)[0].pagina_inicial)+" Á "+ue(t(h)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),y("div",{innerHTML:t(P)},null,8,gt)]),_:1})):F("",!0)])])]),_:1})]),_:1}),e(L,{color:"red",size:"large",onClick:q},{default:o(()=>[M("Voltar")]),_:1}),e(s,{show:t(w),condMessage:t(d),onClose:x[1]||(x[1]=v=>w.value=!1),onConfirm:C},null,8,["show","condMessage"])],64)}}},yt=["onClick"],bt={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},kt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},xt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(U){let m,c;const p=U,k=H(),V=Z(),_=X(),{$toast:d}=Q(),w=`${_.public.managemant}/listarEscrevente`,h=`${_.public.managemant}/getAtosTiposByToken`,P=`${_.public.managemant}/createAtosObservacao`,I=`${_.public.managemant}/updateAtosObservacao`,T=i(B("user-data").value.cartorio_token),C=i([]),N=i([]),q=[{title:"Data",align:"start",key:"data"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],r=se({observacao:null}),x={observacao:{required:ye.withMessage("O campo é obrigatorio",be)}},s=ke(x,r);[m,c]=ee(()=>$(`${h}/${p.ato_token}`,{method:"GET"},"$aJM1TL1buW")),m=await m,c();async function v(){if(await s.value.$validate()){const{data:l,error:u,status:W}=await $(P,{method:"POST",body:{ato_id:p.ato_id,observacao:r.observacao,user_id:B("user-data").value.usuario_id}},"$dMg99jeUNP");W.value==="success"&&(C.value.push({data:Qe(l.value.created,"dd/mm/yyyy hh:mm"),observacao:l.value.observacao,id:l.value.id,escrevente:B("user-data").value.nome}),d.success("Observação registrada com sucesso"))}else d.error("Preencha os campos obrigatorios.")}async function a(l){l.excluido=!l.excluido;try{await $(`${I}/${l.id}`,{method:"PUT",body:JSON.stringify({excluido:l.excluido})},"$B6PdRx8Gp4")}catch(u){console.error("Erro ao excluir observacao:",u)}}const{data:f}=([m,c]=ee(()=>$(w,{method:"POST",body:{cartorio_token:T}},"$xFHPGua26S")),m=await m,c(),m);N.value=f.value[0].func_json_escreventes;const S=()=>{const l=V.query.origem||"criar",u=V.query.id;l==="atualizar"?k.push(`/os/atualizar/${u}`):k.push("/os/criar-registro")};return(l,u)=>{const W=te;return b(),D(re,null,{default:o(()=>[e(R,{class:"mt-5"},{default:o(()=>[e(Y,{label:"Observação",modelValue:t(r).observacao,"onUpdate:modelValue":u[0]||(u[0]=E=>t(r).observacao=E),required:"","error-messages":t(s).observacao.$errors.map(E=>E.$message),onBlur:t(s).observacao.$touch,onInput:t(s).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),y("div",null,[y("img",{class:"btn-pointer ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:v})])]),_:1}),e(R,null,{default:o(()=>[e(j,null,{default:o(()=>[e(me,{style:{height:"465px"},headers:q,items:t(C)},{"item.actions":o(({item:E})=>[y("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ve=>a(E),title:"Deletar Observação"},[E.excluido?(b(),G("img",bt)):(b(),G("img",kt))],8,yt)]),_:1},8,["items"])]),_:1})]),_:1}),e(R,null,{default:o(()=>[e(W,{onClick:S},{default:o(()=>[e(L,{size:"large",color:"red"},{default:o(()=>[M("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},$t=y("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Ye,alt:"Escanear"},null,-1),Vt=[$t],wt=y("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ae,alt:"Criar"},null,-1),Pt=[wt],Ct=["onClick"],Et=y("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1),At=[Et],Tt=["onClick"],St={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},qt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},zt={__name:"Anexos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(U){const m=U,c=X(),{$toast:p}=Q(),k=H(),V=Z(),_=`${c.public.biometria}/run-scanner`,d=`${c.public.managemant}/atos_anexos`,w=`${c.public.managemant}/atos_anexos`,h=i(!1),P=i([]),I=se({descricao:""}),T=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}];async function C(){try{await N(),await q()}catch(a){console.error("Erro ao executar scanner ou listar arquivos:",a)}}async function N(){try{const{data:a}=await $(_,{method:"GET"},"$WazoKp68Tw")}catch(a){p.error("Erro ao acionar o scanner:",a)}}async function q(){try{const{data:a,status:f}=await $("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:m.ato_token,cartorio_token:B("user-data").value.cartorio_token}},"$03Wxiia3aI")}catch(a){console.error("Erro ao enviar o arquivo:",a)}}const r=async()=>{h.value=!0},x=async()=>{const{data:a,error:f,status:S}=await $(d,{method:"POST",body:{ato_id:m.ato_id,descricao:I.descricao,user_id:B("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$D2PdkmlmwW");S.value==="success"&&(p.success("Anexo registrado com sucesso!"),P.value.push(a.value))};async function s(a){a.excluido=!a.excluido;try{await $(`${w}/${a.id}`,{method:"PUT",body:JSON.stringify({excluido:a.excluido})},"$WyW0hasRPI")}catch(f){console.error("Erro ao excluir pessoa:",f)}}const v=()=>{const a=V.query.origem||"criar",f=V.query.id;a==="atualizar"?k.push(`/os/atualizar/${f}`):k.push("/os/criar-registro")};return(a,f)=>{const S=te;return b(),D(re,null,{default:o(()=>[e(R,null,{default:o(()=>[e(j,{cols:"5"},{default:o(()=>[e(Y,{modelValue:t(I).descricao,"onUpdate:modelValue":f[0]||(f[0]=l=>t(I).descricao=l),label:"Descrição"},null,8,["modelValue"])]),_:1}),y("div",{onClick:C,title:"Escanear"},Vt),y("div",{onClick:x,title:"Criar"},Pt)]),_:1}),e(me,{headers:T,items:t(P),style:{height:"465px","max-width":"600px"}},{"item.actions":o(({item:l})=>[e(R,null,{default:o(()=>[y("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:u=>r(l),title:"Visualizar Anexo"},At,8,Ct),y("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:u=>s(l),title:"Deletar Pessoa"},[l.excluido?(b(),G("img",St)):(b(),G("img",qt))],8,Tt)]),_:2},1024)]),_:1},8,["items"]),e(Ve,{modelValue:t(h),"onUpdate:modelValue":f[2]||(f[2]=l=>oe(h)?h.value=l:null),width:"600"},{default:o(()=>[e(ne,{"max-width":"600",title:"Anexo"},{default:o(()=>[e(L,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:f[1]||(f[1]=l=>h.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(S,{onClick:v},{default:o(()=>[e(L,{size:"large",color:"red"},{default:o(()=>[M("Voltar")]),_:1})]),_:1})]),_:1})}}},Xt={__name:"procuracao",props:{ato_token:{type:String,required:!0}},setup(U){const m=U,c=i(null),p=i(null),k=i(null),V=i(null),_=i(null),d=i(!1),w=i(m.ato_token),h=({id:T,token:C})=>{c.value=T,p.value=C,d.value=!0},P=T=>{k.value=T},I=T=>{V.value=T};return(T,C)=>{const N=Xe,q=mt,r=vt,x=ht,s=xt,v=zt;return b(),D(ne,{width:"1300"},{default:o(()=>[e(je,{modelValue:t(_),"onUpdate:modelValue":C[0]||(C[0]=a=>oe(_)?_.value=a:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(J,{value:"dados"},{default:o(()=>[M("Dados")]),_:1}),t(d)?(b(),D(J,{key:0,value:"partes"},{default:o(()=>[M("Partes")]),_:1})):F("",!0),t(d)?(b(),D(J,{key:1,value:"minuta"},{default:o(()=>[M("Minuta")]),_:1})):F("",!0),t(d)?(b(),D(J,{key:2,value:"livro"},{default:o(()=>[M("Livro")]),_:1})):F("",!0),t(d)?(b(),D(J,{key:3,value:"observacao"},{default:o(()=>[M("Observações")]),_:1})):F("",!0),t(d)?(b(),D(J,{key:4,value:"anexo"},{default:o(()=>[M("Anexos")]),_:1})):F("",!0)]),_:1},8,["modelValue"]),e(Ue,{modelValue:t(_),"onUpdate:modelValue":C[1]||(C[1]=a=>oe(_)?_.value=a:null)},{default:o(()=>[e(K,{value:"dados"},{default:o(()=>[e(N,{onSaved:h,ato_token:t(w)},null,8,["ato_token"])]),_:1}),t(d)?(b(),D(K,{key:0,value:"partes"},{default:o(()=>[e(q,{ato_token:t(w),ato_id:t(c)},null,8,["ato_token","ato_id"])]),_:1})):F("",!0),t(d)?(b(),D(K,{key:1,value:"minuta"},{default:o(()=>[e(r,{onPage:P,onDoc:I,ato_token:t(p)},null,8,["ato_token"])]),_:1})):F("",!0),t(d)?(b(),D(K,{key:2,value:"livro"},{default:o(()=>[e(x,{pages:t(k),ato_token:t(p),document:t(V)},null,8,["pages","ato_token","document"])]),_:1})):F("",!0),t(d)?(b(),D(K,{key:3,value:"observacao"},{default:o(()=>[e(s,{ato_id:t(c)},null,8,["ato_id"])]),_:1})):F("",!0),t(d)?(b(),D(K,{key:4,value:"anexo"},{default:o(()=>[e(v,{ato_token:t(p),ato_id:t(c)},null,8,["ato_token","ato_id"])]),_:1})):F("",!0)]),_:1},8,["modelValue"])]),_:1})}}};export{Xt as default};
