import{_ as P,u as R,n as T,r as c,o as _,c as z,a as k,b as s,V as F,q as t,s as O,w as n,v as U,x as L,y as v,z as M,d as h,A as w,B as b,C,p as X,e as j,D as A}from"./Doy_hywm.js";import{u as G}from"./YRoDzBEv.js";import{_ as H}from"./Be6fegN8.js";import{V as Q}from"./BztJFi75.js";import{V as E}from"./CHys887S.js";const S=p=>(X("data-v-8129e019"),p=p(),j(),p),W={class:"container-main"},Y={class:"container-form"},Z=S(()=>k("div",{class:"text"},"Log in",-1)),ee=S(()=>k("a",{class:"text-decoration-none",rel:"noopener noreferrer",style:{color:"#429946"}}," Esqueceu a senha?",-1)),oe=S(()=>k("div",{class:"background-image"},null,-1)),ae={__name:"index",setup(p){const N=R(),{$toast:$}=T(),r=c({senha:"",email:""}),f=c(!1),i=c(!1),g=c(!1),V=c(!1),u=c(!1),y=()=>{g.value=!1,V.value=!1,u.value=!1,i.value=!1},q=L().public.auth,D=async()=>{const{data:a,status:e,error:o}=await G(`${q}/login`,{method:"POST",body:{senha:r.value.senha,email:r.value.email}},"$iX10IJN3fa");return{data:a==null?void 0:a.value,status:e==null?void 0:e.value,error:o==null?void 0:o.value}},I=a=>{const e=A("user-data");e.value=JSON.stringify({nome:a.nome,usuario_id:a.id,cartorio_id:a.cartorios[0].cartorio_id,cartorio_nome:a.cartorios[0].cartorio_descricao,cartorio_token:a.cartorios[0].cartorio_token});const o=A("auth_token");o.value=a.token},J=a=>{var l,d,m;const e=(m=(d=(l=a==null?void 0:a.data)==null?void 0:l[0])==null?void 0:d.func_autentica_acesso_v1)==null?void 0:m[0],o=e==null?void 0:e.status_mensagem;if(!e){u.value=!0;return}switch(o){case"Esse email não está cadastrado no Durabil.":V.value=!0;break;case"Senha inválida.":g.value=!0;break;default:u.value=!0;break}},K=async()=>{var l,d,m,B;const{data:a,status:e,error:o}=await D();if(e==="success"){const x=(B=(m=(d=(l=a==null?void 0:a[0])==null?void 0:l.func_autentica_acesso_v1)==null?void 0:d[0])==null?void 0:m.registro)==null?void 0:B[0];if(I(x),x.cartorios.length>1){N.push({path:"/login/tipo-perfil",query:{cartorios:JSON.stringify(x.cartorios)}});return}$.success("Login realizado com sucesso!"),N.push("/")}else e==="error"&&(o==null?void 0:o.statusCode)===500?u.value=!0:J(o)};return(a,e)=>(_(),z("div",W,[k("div",Y,[s(F,{class:"image",width:300,height:"230",src:H}),Z,s(O,{autofocus:"",autocomplete:"email",type:"email",modelValue:t(r).email,"onUpdate:modelValue":e[0]||(e[0]=o=>t(r).email=o),"persistent-hint":"",class:"input",density:"compact",placeholder:"Email","prepend-inner-icon":"mdi-email-outline",variant:"outlined"},null,8,["modelValue"]),s(O,{modelValue:t(r).senha,"onUpdate:modelValue":e[1]||(e[1]=o=>t(r).senha=o),class:"input","append-inner-icon":t(f)?"mdi-eye-off":"mdi-eye",type:t(f)?"text":"password",density:"compact",placeholder:"Senha","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":e[2]||(e[2]=o=>f.value=!t(f))},null,8,["modelValue","append-inner-icon","type"]),s(Q,{modelValue:t(i),"onUpdate:modelValue":e[4]||(e[4]=o=>U(i)?i.value=o:null),"max-width":"400",persistent:""},{activator:n(({props:o})=>[s(v,M({block:"",rounded:"",class:"button mb-10 mt-4"},o,{onClick:K,modelValue:t(i),"onUpdate:modelValue":e[3]||(e[3]=l=>U(i)?i.value=l:null)}),{default:n(()=>[h(" Acessar ")]),_:2},1040,["modelValue"])]),default:n(()=>[t(g)?(_(),w(E,{key:0,text:"Senha inválida."},{actions:n(()=>[s(b),s(v,{onClick:y,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[h(" OK ")]),_:1})]),_:1})):C("",!0),t(V)?(_(),w(E,{key:1,text:"Esse email não está cadastrado."},{actions:n(()=>[s(b),s(v,{onClick:y,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[h(" OK ")]),_:1})]),_:1})):C("",!0),t(u)?(_(),w(E,{key:2,text:"Erro no sistema, fora do ar."},{actions:n(()=>[s(b),s(v,{onClick:y,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[h(" OK ")]),_:1})]),_:1})):C("",!0)]),_:1},8,["modelValue"]),ee]),oe]))}},ce=P(ae,[["__scopeId","data-v-8129e019"]]);export{ce as default};
