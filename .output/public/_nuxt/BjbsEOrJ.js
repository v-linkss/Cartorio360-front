import{_ as lo}from"./n4WPfc52.js";import{_ as so,a as ro}from"./BurdTE-8.js";import{_ as no}from"./NQAMZlMh.js";import{_ as io}from"./3b8Y0Edn.js";import{_ as M}from"./CraDKwTS.js";import{_ as uo}from"./zsZvsc1P.js";import{_ as mo,a as po}from"./DJvq3mCv.js";import{_ as _o,u as co,m as vo,r as i,n as A,p as fo,q as yo,s as ko,v as Vo,c as S,b as s,w as r,a as d,x as l,y as bo,z as ho,F as go,A as $o,o as V,B as f,V as m,C as xo,D as wo,E as Ao,G as So}from"./BCTJrYaF.js";import{u as b}from"./Bl0-5K7H.js";import{f as h}from"./B0IxRygJ.js";import{f as Co}from"./aIyg5d2y.js";import{V as Uo}from"./Ckw2oCzO.js";import{V as Do}from"./CRSrYMIR.js";import{V as C}from"./DxSkXP2I.js";import{V as u}from"./BKhgG4M5.js";import{V as U}from"./CWijzqFD.js";import{V as Po}from"./DkPwEEL1.js";import"./DHK50UJA.js";import"./bSmePs98.js";import"./BmACI2qJ.js";import"./DVCIAReP.js";import"./oRK-gfot.js";import"./SZxdC2-3.js";import"./BVz1G1IN.js";import"./EWhLG2UM.js";import"./Cj4J6WoV.js";import"./Cp99c2y6.js";const Oo=["innerHTML"],To={style:{width:"1300px",margin:"0 auto"}},No={style:{display:"flex",gap:"4px","justify-content":"center"}},Eo=["onClick"],qo=["onClick"],zo=["onClick","title"],Io=["disabled","onClick"],Ro={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:mo,alt:"Visualizar",title:"Reativar"},Mo={key:1,src:po,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},Fo={__name:"index",setup(Lo){const y=$o(),{$toast:F}=co(),L=`${y.public.managemant}/listarUsuarios`,H=`${y.public.managemant}/listar_tipo_atos`,B=`${y.public.managemant}/updateAtos`,D=`${y.public.managemant}/pesquisaAtos`,P=vo(),g=i(A("auth_token").value)||null,$=i(A("user-data").value.cartorio_token)||null,x=i(!1),k=i([]),O=i([]),T=i([]),j=i(["PENDENTE","EM ANDAMENTO","CONCLUÍDA","LAVRADA"]),N=i(!1),E=i(!1);i(null);const J=i(null),q=i(null),W=i({}),w=i(!1),z=i(null),a=fo({numero:null,data_inicio:I(),data_fim:I(),data_lavratura_inicio:null,data_lavratura_fim:null,protocolo:null,parte:null,livro:null,folha:null,situacao:null,usuario_token:g.value,selo:null,ato_tipo_token:null,apresentante_cpf:null,apresentante_nome:null,valor:null}),Y=[{title:"ID/Protocolo",key:"protocoloId",width:"70px",value:o=>o.protocolo?`${o.id}
${o.protocolo}`:`${o.id}`,cellProps:{style:{whiteSpace:"pre-line",lineHeight:"2"}}},{title:"Abertura/CPF",key:"aberturaCpf",value:o=>o.dt_abertura?`${o.dt_abertura}
${o.apresentante_cpf}`:`${o.apresentante_cpf}`,cellProps:{style:{whiteSpace:"pre-line",lineHeight:"2"}}},{title:"Data lavratura/Parte",key:"lavraturaNome",value:o=>o.dt_lavratura?`${o.dt_lavratura}
${o.apresentante_nome}`:`${o.apresentante_nome}`,cellProps:{style:{whiteSpace:"pre-line",lineHeight:"2"}}},{title:"N° OS",value:"numero_os"},{title:"Usuario",value:"usuario_nome"},{title:"Situação/Serviço",key:"situacaoServico",value:o=>o.situacao?`${o.situacao}
${o.ato_servico}`:`${o.ato_servico}`,cellProps:{style:{whiteSpace:"pre-line",lineHeight:"2"}}},{title:"Livro",value:"livro_numero"},{title:"Folha",value:"folha"},{title:"Valor",value:"valor"},{title:"Ações",value:"actions"}];function I(){const o=new Date,e=o.getFullYear(),n=String(o.getMonth()+1).padStart(2,"0");return`${String(o.getDate()).padStart(2,"0")}-${n}-${e}`}function _(o){if(!o)return null;const[e,n,p]=o.split("/");return`${p}-${n}-${e}`}async function R(){const o=sessionStorage.getItem("pesquisaAto"),e=JSON.parse(o),{data:n}=await b(D,{method:"POST",body:{cartorio_token:A("user-data").value.cartorio_token,usuario_token:e.usuario_token||g.value,data_fim:_(e==null?void 0:e.data_fim),data_inicio:_(e==null?void 0:e.data_inicio)}},"$1U9Iv6Es1X");n.value.length>0&&(k.value=n.value.map(p=>({...p,dt_lavratura:p.dt_lavratura?h(p.dt_lavratura,"dd/mm/yyyy hh:mm"):null,dt_abertura:h(p.dt_abertura,"dd/mm/yyyy")})))}async function G(){const{data:o}=await b(L,{method:"POST",body:{cartorio_token:$.value}},"$hvipqUJYtS");O.value=o.value}async function Q(){try{sessionStorage.setItem("pesquisaAto",JSON.stringify(a));const{data:o,error:e}=await b(D,{method:"POST",body:{cartorio_token:$.value,numero:a.numero||null,data_inicio:_(a.data_inicio)||null,data_fim:_(a.data_fim)||null,data_lavratura_inicio:_(a.data_lavratura_inicio)||null,data_lavratura_fim:_(a.data_lavratura_fim)||null,protocolo:a.protocolo||null,livro:a.livro||null,folha:a.folha||null,situacao:a.situacao||null,usuario_token:a.usuario_token,selo:a.selo||null,ato_tipo_token:a.ato_tipo_token,parte:a.parte||null}},"$OjamgBH6nj");o.value.length>0?k.value=o.value.map(n=>({...n,dt_lavratura:n.dt_lavratura?h(n.dt_lavratura,"dd/mm/yyyy hh:mm"):null,dt_abertura:n.dt_abertura?h(n.dt_abertura,"dd/mm/yyyy"):null})):(k.value=[],F.error("Não existe ato Registrado!"))}catch(o){console.error("Erro na requisição",o)}}const X=o=>{P.push({path:`/fontes/atos/atos-com-bem/atualizar/${o.id}`,query:{origem:"vizualizar-lista",id:o.id,ato_id:o.id,tipo_ato_token:o.tipo_token,tipo_ato:o.ato_servico,ato_token_edit:o.token,numero_os:o.numero_os,usa_imoveis:!0}})};async function Z(){const{data:o,error:e}=await b(H,{method:"POST",body:{cartorio_token:$.value,usuario_token:g.value,tipo_retorno:"servico_ato"}},"$QxIfw0Zxe4");T.value=o.value.map(n=>({...n,descricao:n.descricao.replace(/\(/g,"<br>(")}))}const K=o=>{z.value=o,w.value=!0};async function oo(o){o.excluido=!o.excluido;try{await Co(`${B}/${o.id}`,{method:"PUT",body:{excluido:o.excluido}})}catch(e){console.error("Erro ao excluir pessoa:",e)}}const eo=o=>{(o.usa_imoveis||!o.usa_imoveis)&&P.push({path:`/fontes/atos/atos-com-bem/atualizar/${o.id}`,query:{origem:"atualizar-lista",id:o.id,ato_id:o.id,tipo_ato_token:o.tipo_token,tipo_ato:o.tipo,ato_token_edit:o.token,numero_os:o.numero_os,usa_imoveis:!0}})};return yo(()=>{ko(async()=>{const o=sessionStorage.getItem("pesquisaAto");if(o){const e=JSON.parse(o);Object.assign(a,e)}await R()})}),G(),Z(),(o,e)=>{const n=lo,p=so,to=no,ao=io,c=Vo("mask");return V(),S(go,null,[s(Uo,{class:"mt-5"},{default:r(()=>[s(C,{class:"mb-5"},{default:r(()=>e[19]||(e[19]=[d("h1",null,"Atos",-1)])),_:1}),s(C,null,{default:r(()=>[s(u,{cols:"2"},{default:r(()=>[f(s(m,{modelValue:l(a).data_inicio,"onUpdate:modelValue":e[0]||(e[0]=t=>l(a).data_inicio=t),label:"Abertura de",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[c,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:r(()=>[f(s(m,{modelValue:l(a).data_fim,"onUpdate:modelValue":e[1]||(e[1]=t=>l(a).data_fim=t),label:"Abertura até",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[c,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:r(()=>[f(s(m,{modelValue:l(a).data_lavratura_inicio,"onUpdate:modelValue":e[2]||(e[2]=t=>l(a).data_lavratura_inicio=t),label:"Lavratura de",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[c,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:r(()=>[f(s(m,{modelValue:l(a).data_lavratura_fim,"onUpdate:modelValue":e[3]||(e[3]=t=>l(a).data_lavratura_fim=t),label:"Lavratura até",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[c,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:r(()=>[s(m,{modelValue:l(a).numero,"onUpdate:modelValue":e[4]||(e[4]=t=>l(a).numero=t),label:"N° OS"},null,8,["modelValue"])]),_:1}),s(u,{cols:"2"},{default:r(()=>[s(m,{modelValue:l(a).selo,"onUpdate:modelValue":e[5]||(e[5]=t=>l(a).selo=t),label:"Selo",dense:""},null,8,["modelValue"])]),_:1})]),_:1}),s(C,null,{default:r(()=>[s(u,{cols:"2"},{default:r(()=>[s(m,{modelValue:l(a).protocolo,"onUpdate:modelValue":e[6]||(e[6]=t=>l(a).protocolo=t),label:"Protocolo"},null,8,["modelValue"])]),_:1}),s(u,{cols:"2"},{default:r(()=>[f(s(m,{modelValue:l(a).apresentante_cpf,"onUpdate:modelValue":e[7]||(e[7]=t=>l(a).apresentante_cpf=t),label:"CPF",dense:""},null,8,["modelValue"]),[[c,"###.###.###-##"]])]),_:1}),s(u,{cols:"3"},{default:r(()=>[s(m,{modelValue:l(a).parte,"onUpdate:modelValue":e[8]||(e[8]=t=>l(a).parte=t),label:"Parte",dense:""},null,8,["modelValue"])]),_:1}),s(u,{cols:"3"},{default:r(()=>[s(U,{modelValue:l(a).ato_tipo_token,"onUpdate:modelValue":e[9]||(e[9]=t=>l(a).ato_tipo_token=t),items:l(T),"item-value":"token",label:"Tipo Serviço","menu-props":{maxWidth:"680px",width:"680px"},dense:""},{item:r(({props:t,item:v})=>[s(Po,xo(wo(t)),{title:r(()=>[d("span",{innerHTML:v.raw.descricao},null,8,Oo)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1}),s(u,{cols:"2"},{default:r(()=>[s(U,{items:l(O),modelValue:l(a).usuario_token,"onUpdate:modelValue":e[10]||(e[10]=t=>l(a).usuario_token=t),"item-title":"user_nome","item-value":"user_token",label:"Usuário",dense:""},null,8,["items","modelValue"])]),_:1}),s(u,{cols:"3"},{default:r(()=>[s(U,{modelValue:l(a).situacao,"onUpdate:modelValue":e[11]||(e[11]=t=>l(a).situacao=t),items:l(j),label:"Situação",dense:""},null,8,["modelValue","items"])]),_:1}),s(u,{cols:"1"},{default:r(()=>[s(m,{modelValue:l(a).livro,"onUpdate:modelValue":e[12]||(e[12]=t=>l(a).livro=t),label:"Livro",dense:""},null,8,["modelValue"])]),_:1}),s(u,{cols:"1"},{default:r(()=>[s(m,{modelValue:l(a).folha,"onUpdate:modelValue":e[13]||(e[13]=t=>l(a).folha=t),label:"Folha",dense:""},null,8,["modelValue"])]),_:1}),s(u,null,{default:r(()=>[d("div",null,[d("img",{onClick:Q,style:{width:"40px",height:"40px",cursor:"pointer"},src:M,alt:"Pesquisar"})])]),_:1})]),_:1})]),_:1}),d("div",To,[e[22]||(e[22]=d("hr",{class:"mt-5 mb-5"},null,-1)),s(Do,{headers:Y,items:l(k),style:{"font-size":"12px"},"item-key":"id"},{"item.actions":r(({item:t})=>[d("div",No,[d("div",{onClick:v=>X(t),title:"Visualizar"},e[20]||(e[20]=[d("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:M,alt:"Visualizar"},null,-1)]),8,Eo),d("div",{onClick:v=>K(t.token),title:"Reimprimir"},e[21]||(e[21]=[d("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:ro,alt:"Reimprimir"},null,-1)]),8,qo),d("div",{class:Ao({disabled:!t.btn_editar}),onClick:v=>t.btn_editar?eo({id:t.id,tipo:t.tipo,token:t.token,tipo_token:t.tipo_token,usa_imoveis:t.usa_imoveis}):null,title:t.btn_editar?"Editar":"Desabilitado"},[d("img",{style:So({cursor:t.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:uo,alt:"Editar"},null,4)],10,zo),d("div",{disabled:!t.btn_cancelar,onClick:v=>t.btn_cancelar?oo(t):null,title:"Excluir"},[t.excluido?(V(),S("img",Ro)):(V(),S("img",Mo))],8,Io)])]),_:1},8,["items"])]),l(x)?(V(),bo(n,{key:0,show:l(x),servicos:o.dadosData.servicos||[],tiposAtos:o.dadosData.tiposAtos||[],onClose:e[14]||(e[14]=t=>x.value=!1),onUpdateAto:o.handleUpdateAto},null,8,["show","servicos","tiposAtos","onUpdateAto"])):ho("",!0),s(p,{show:l(w),ato_token:l(z),onClose:e[15]||(e[15]=t=>w.value=!1)},null,8,["show","ato_token"]),s(to,{show:l(N),numero_os:l(q),ordem:l(W),onClose:e[16]||(e[16]=t=>N.value=!1),onRefreshValue:e[17]||(e[17]=t=>R())},null,8,["show","numero_os","ordem"]),s(ao,{show:l(E),numero_os:l(q),ordemserv_token:l(J),onClose:e[18]||(e[18]=t=>E.value=!1)},null,8,["show","numero_os","ordemserv_token"])],64)}}},fe=_o(Fo,[["__scopeId","data-v-a35f46c4"]]);export{fe as default};
