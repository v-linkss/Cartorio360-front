import{_ as ue}from"./7CWMc4qa.js";import{_ as Q}from"./E27MDY6b.js";import{_ as X}from"./BVz1G1IN.js";import{_ as Y}from"./gy-Fg3zd.js";import{_ as Z,a as ee,b as te}from"./CjmuKnL0.js";import{B as oe,G as ae,u as de,r as m,m as J,C as ce,H as L,o as b,E as le,w as o,b as t,v as s,a as r,t as me,c as q,I as j,d as O,J as pe,z as S,s as se,p as _e,V as W}from"./5pBL-l3i.js";import{u as A}from"./BRizonRx.js";import{V as y}from"./Bbzd2I6x.js";import{V as G}from"./BYyJO_bZ.js";import{V}from"./CoSrfGpU.js";import{V as H}from"./Ci5TxU-y.js";import{V as ie}from"./C5VTu2K8.js";import{V as ve,a as fe,b as ye,c as Ve,d as ge}from"./aqO6SOXo.js";import{V as re}from"./KhtokRUV.js";import{_ as xe,a as ke}from"./VEK-vtx7.js";import{f as K}from"./D7rwbFre.js";const $e={style:{width:"800px","font-weight":"500"}},be=["onClick"],he=["onClick"],Ce=["onClick"],we={key:0,style:{width:"30px",height:"30px"},src:ee,alt:"Reativar",title:"Reativar"},Be={key:1,src:te,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},Xe={__name:"Bens",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(E){let c,p;const U=E,h=oe(),C=ae(),g=se(),{$toast:x}=de(),D=`${g.public.managemant}/atos_bens`,_=`${g.public.managemant}/atos_bens`,k=`${g.public.managemant}/listarBens`,w=`${g.public.managemant}/listarTipoBens`,B=m(J("user-data").value.cartorio_token),M=m(J("user-data").value.usuario_id).value,$=m([]),d=m([]),v=m(!1),I=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"vlr_alienacao"},{align:"end",value:"actions"}],n=ce({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),N=async()=>{if(!n.vlr_alienacao&&!n.descricao){x.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:a,status:e}=await A(`${D}`,{method:"POST",body:{descricao:n.descricao,tipo_id:n.tipo_id,valor_mercado:"0.00",vlr_alienacao:n.vlr_alienacao,user_id:M,ato_id:Number.parseInt(U.ato_id),token:C.query.ato_token_edit}},"$TVfAAEMyym");e.value==="success"&&(x.success("Bem registrado com sucesso!"),$.value.push(a.value),Object.assign(n,{vlr_alienacao:null,descricao:null,tipo_id:null}))},R=async a=>{const{status:e}=await A(`${_}/${a}`,{method:"PUT",body:{descricao:d.value.descricao,tipo_id:d.value.tipo_id,vlr_alienacao:d.value.vlr_alienacao}},"$TRbOfiOtJ9");e.value==="success"&&(x.success("Bem Atualizado com sucesso!"),v.value=!1)},u=a=>{const e=$.value.find(P=>P.id===a);e&&(d.value=e,v.value=!0)},{data:l}=([c,p]=L(()=>A(`${w}`,{method:"POST",body:{cartorio_token:B.value,imoveis:!1}},"$rrOfkMLqML")),c=await c,p(),c);n.tiposBens=l.value;const{data:f}=([c,p]=L(()=>A(`${k}`,{method:"POST",body:{ato_token:U.ato_token}},"$qhjPuJWFwD")),c=await c,p(),c);$.value=f.value&&Object.keys(f.value).length===0?[]:f.value;async function T(a){a.excluido=!a.excluido;try{await A(`${_}/${a.id}`,{method:"PUT",body:JSON.stringify({excluido:a.excluido})},"$1s7uo0EeAe")}catch(e){console.error("Erro ao excluir pessoa:",e)}}const z=()=>{const a=C.query.origem||"criar",e=C.query.id;a==="atualizar"?h.push(`/os/atualizar/${e}`):h.push("/os/criar-registro")};return(a,e)=>{const P=ue,ne=Q;return b(),le(re,null,{default:o(()=>[t(y,{class:"mt-5",cols:"12"},{default:o(()=>[t(G,{label:"Descrição",modelValue:s(n).descricao,"onUpdate:modelValue":e[0]||(e[0]=i=>s(n).descricao=i)},null,8,["modelValue"])]),_:1}),t(V,{class:"ml-1 mb-3"},{default:o(()=>[t(y,{class:"mt-6",cols:"8"},{default:o(()=>[t(H,{label:"Selecione o Tipo",items:s(n).tiposBens,modelValue:s(n).tipo_id,"onUpdate:modelValue":e[1]||(e[1]=i=>s(n).tipo_id=i),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(y,{class:"ml-5",cols:"3"},{default:o(()=>[e[9]||(e[9]=r("label",null,"Valor",-1)),t(P,{modelValue:s(n).vlr_alienacao,"onUpdate:modelValue":e[2]||(e[2]=i=>s(n).vlr_alienacao=i)},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-7 ml-4",src:X,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:N})])]),_:1}),t(V,null,{default:o(()=>[t(y,null,{default:o(()=>[t(ie,{style:{height:"465px"},headers:I,items:s($)},{"item.descricao":o(({item:i})=>[r("h3",$e,me(i.descricao),1)]),"item.actions":o(({item:i})=>[t(V,{style:{"margin-top":"-8px"},justify:"end"},{default:o(()=>[r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:F=>a.redirectToFicha(i),title:"Visualizar Ficha"},e[10]||(e[10]=[r("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Visualizar"},null,-1)]),8,be),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:F=>u(i.id),title:"Alterar Papel"},e[11]||(e[11]=[r("img",{style:{width:"30px",height:"30px"},src:Z,alt:"Editar"},null,-1)]),8,he),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:F=>T(i),title:"Deletar Pessoa"},[i.excluido?(b(),q("img",we)):(b(),q("img",Be))],8,Ce)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),t(ve,{modelValue:s(v),"onUpdate:modelValue":e[8]||(e[8]=i=>j(v)?v.value=i:null),"max-width":"600px"},{default:o(()=>[t(fe,null,{default:o(()=>[t(ye,{style:{color:"green"}},{default:o(()=>e[12]||(e[12]=[O("Atualizar Bem")])),_:1}),t(Ve,null,{default:o(()=>[t(y,{class:"mt-1",cols:"12"},{default:o(()=>[t(G,{label:"Descrição",modelValue:s(d).descricao,"onUpdate:modelValue":e[3]||(e[3]=i=>s(d).descricao=i)},null,8,["modelValue"])]),_:1}),t(V,null,{default:o(()=>[t(y,{class:"mt-6 ml-3",cols:"8"},{default:o(()=>[t(H,{label:"Selecione o Tipo",items:s(n).tiposBens,modelValue:s(d).tipo_id,"onUpdate:modelValue":e[4]||(e[4]=i=>s(d).tipo_id=i),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(y,{class:"ml-5",cols:"3"},{default:o(()=>[e[13]||(e[13]=r("label",null,"Valor",-1)),t(P,{modelValue:s(d).vlr_alienacao,"onUpdate:modelValue":e[5]||(e[5]=i=>s(d).vlr_alienacao=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(ge,null,{default:o(()=>[t(pe),t(S,{color:"green",text:"",onClick:e[6]||(e[6]=i=>v.value=!1)},{default:o(()=>e[14]||(e[14]=[O("Cancelar")])),_:1}),t(S,{color:"green",text:"",onClick:e[7]||(e[7]=i=>R(s(d).id))},{default:o(()=>e[15]||(e[15]=[O("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(V,null,{default:o(()=>[t(ne,{onClick:z},{default:o(()=>[t(S,{size:"large",color:"red"},{default:o(()=>e[16]||(e[16]=[O("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Te={style:{width:"200px"}},ze={style:{width:"300px"}},Ae=["onClick"],Oe=["onClick"],Ue=["onClick"],De={key:0,style:{width:"30px",height:"30px"},src:ee,alt:"Visualizar",title:"Reativar"},Me={key:1,src:te,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Ye={__name:"Imoveis",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(E){let c,p;const U=E,h=se(),C=`${h.public.auth}/service/gerencia/atos_bens`,g=`${h.public.auth}/service/gerencia/atos_imoveis`,x=oe(),D=ae(),_=m(""),k=m(""),w=m(!1),B=m(!1),M=m(null),$=[{title:"Matrícula",value:"registro_matricula"},{title:"Descrição",value:"descricao"},{value:"actions"}],{data:d,status:v}=([c,p]=L(()=>K(g,{method:"POST",body:{ato_token:U.ato_token}})),c=await c,p(),c),I=_e(()=>{if(Object.keys(d.value).length!==0)return d.value.filter(u=>{const l=u.matricula?u.matricula.toLowerCase():"",f=u.descricao?u.descricao.toLowerCase():"",T=l.includes(k.value.toLowerCase()),z=f.includes(_.value.toLowerCase());return T&&z})});async function n(u){u.excluido=!u.excluido;try{await K(`${C}/${u.id}`,{method:"PUT",body:{excluido:u.excluido}})}catch(l){console.error("Erro ao excluir pessoa:",l)}}function N(u){M.value=u,B.value=!0}const R=()=>{const u=D.query.origem||"criar",l=D.query.id;u==="atualizar"?x.push(`/os/atualizar/${l}`):x.push("/os/criar-registro")};return(u,l)=>{const f=Q,T=xe,z=ke;return b(),le(re,{class:"mt-5"},{default:o(()=>[r("img",{onClick:l[0]||(l[0]=a=>w.value=!0),style:{cursor:"pointer"},src:X,alt:"Cadastro"}),t(V,{style:{gap:"3rem"}},{default:o(()=>[r("div",Te,[t(W,{class:"mt-7 mb-4",modelValue:s(k),"onUpdate:modelValue":l[1]||(l[1]=a=>j(k)?k.value=a:null),label:"Matrícula","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),r("div",ze,[t(W,{class:"mt-7 mb-4",modelValue:s(_),"onUpdate:modelValue":l[2]||(l[2]=a=>j(_)?_.value=a:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),t(ie,{density:"compact",headers:$,items:s(I),"item-key":"id"},{"item.actions":o(({item:a})=>[t(V,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:o(()=>[r("div",{style:{cursor:"pointer"},onClick:e=>u.redirectToView(a.id),title:"Visualizar"},l[5]||(l[5]=[r("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Visualizar"},null,-1)]),8,Ae),r("div",{style:{cursor:"pointer"},onClick:e=>N(a.id),title:"Atualizar"},l[6]||(l[6]=[r("img",{style:{width:"30px",height:"30px"},src:Z,alt:"Atualizar"},null,-1)]),8,Oe),r("div",{style:{cursor:"pointer"},onClick:e=>n(a),title:"Deletar"},[a.excluido?(b(),q("img",De)):(b(),q("img",Me))],8,Ue)]),_:2},1024)]),_:1},8,["items"]),t(f,{onClick:R},{default:o(()=>[t(S,{size:"large",color:"red"},{default:o(()=>l[7]||(l[7]=[O("Voltar")])),_:1})]),_:1}),t(T,{show:s(w),onClose:l[3]||(l[3]=a=>w.value=!1)},null,8,["show"]),t(z,{imovel_id:s(M),show:s(B),onClose:l[4]||(l[4]=a=>B.value=!1)},null,8,["imovel_id","show"])]),_:1})}}};export{Xe as _,Ye as a};
