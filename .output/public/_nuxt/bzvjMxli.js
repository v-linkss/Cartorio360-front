import{_ as ke,a as we,b as he,c as Ce,d as Ae,e as Oe,f as Te}from"./puwyq3ys.js";import{_ as me}from"./DEs_xHPd.js";import{_ as oe}from"./BsBqLsIT.js";import{_ as ae,a as se,b as le}from"./BP1uhy__.js";import{_ as pe}from"./DQfhO4cu.js";import{_ as ie}from"./D0y31jax.js";import{C as re,H as Z,u as _e,r as m,m as Q,D as ve,I as j,o as $,G as E,w as o,b as t,v as a,a as r,t as ne,c as F,x as N,d as x,J as Pe,A as W,s as ee,p as ze,V as Y,K as J,L as Ue,M as De,F as Be,y as Se}from"./DDYVr_Xb.js";import{u as q}from"./DQCzJ4d1.js";import{V as k}from"./BM3aM5FZ.js";import{V as ce}from"./CbcZBMnh.js";import{V as h}from"./BUzwclY6.js";import{V as K}from"./Badmn8-U.js";import{V as ue}from"./D6T5cEZA.js";import{V as Ie}from"./DXbSyel1.js";import{V as fe,a as qe,b as Me,c as Re}from"./CkJG2yAH.js";import{V as de}from"./aulT2kd1.js";import{_ as Ee,a as Le}from"./CoI6O8eQ.js";import{f as H}from"./CktTyHh2.js";import{c as Ne,r as je,u as Fe}from"./DiUQmmg5.js";import{_ as Ge}from"./CVilXGDu.js";import{V as Je,a as S,b as Qe,c as I}from"./Bae8556M.js";import"./CAcqjtvn.js";import"./DR08TZSm.js";import"./x5RGegOZ.js";import"./B2p6Emjz.js";import"./PLeHit_j.js";import"./DaCcLMuH.js";import"./BZxxLGS9.js";import"./CprPpthP.js";const We={style:{width:"800px","font-weight":"500"}},He=["onClick"],Ke=["onClick"],Xe=["onClick"],Ye={key:0,style:{width:"30px",height:"30px"},src:se,alt:"Reativar",title:"Reativar"},Ze={key:1,src:le,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},et={__name:"Bens",async setup(te){let i,y;const A=re(),g=Z(),v=ee(),{$toast:w}=_e(),V=`${v.public.managemant}/atos_bens`,O=`${v.public.managemant}/atos_bens`,z=`${v.public.managemant}/listarBens`,B=`${v.public.managemant}/listarTipoBens`,U=m(Q("user-data").value.cartorio_token),D=m(Q("user-data").value.usuario_id).value,b=m([]),_=m([]),u=m(!1),T=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"vlr_alienacao"},{align:"end",value:"actions"}],d=ve({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),L=async()=>{if(!d.vlr_alienacao&&!d.descricao){w.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:s,status:e}=await q(`${V}`,{method:"POST",body:{descricao:d.descricao,tipo_id:d.tipo_id,valor_mercado:"0.00",vlr_alienacao:d.vlr_alienacao.replace(/,/g,""),user_id:D,ato_id:Number.parseInt(g.query.ato_id),token:g.query.ato_token_edit}},"$aGIwRtPn6M");e.value==="success"&&(w.success("Bem registrado com sucesso!"),b.value.push(s.value),Object.assign(d,{vlr_alienacao:null,descricao:null,tipo_id:null}))},M=async s=>{const{status:e}=await q(`${O}/${s}`,{method:"PUT",body:{descricao:_.value.descricao,tipo_id:_.value.tipo_id,vlr_alienacao:_.value.vlr_alienacao.replace(/,/g,"")}},"$4hUMyAQlzU");e.value==="success"&&(w.success("Bem Atualizado com sucesso!"),u.value=!1)},G=s=>{const e=b.value.find(P=>P.id===s);e&&(_.value=e,u.value=!0)},{data:p}=([i,y]=j(()=>q(`${B}`,{method:"POST",body:{cartorio_token:U.value,imoveis:!1}},"$da802I2H8c")),i=await i,y(),i);d.tiposBens=p.value;const{data:l}=([i,y]=j(()=>q(`${z}`,{method:"POST",body:{ato_token:g.query.ato_token_edit}},"$iXfJJrO35d")),i=await i,y(),i);b.value=l.value&&Object.keys(l.value).length===0?[]:l.value;async function f(s){s.excluido=!s.excluido;try{await q(`${O}/${s.id}`,{method:"PUT",body:JSON.stringify({excluido:s.excluido})},"$PGKHfsa7Pl")}catch(e){console.error("Erro ao excluir pessoa:",e)}}const c=()=>{const s=g.query.origem||"criar",e=g.query.id;s==="atualizar"?A.push(`/os/atualizar/${e}`):A.push("/os/criar-registro")};return(s,e)=>{const P=me,C=oe;return $(),E(de,null,{default:o(()=>[t(k,{class:"mt-5",cols:"12"},{default:o(()=>[t(ce,{label:"Descrição",modelValue:a(d).descricao,"onUpdate:modelValue":e[0]||(e[0]=n=>a(d).descricao=n)},null,8,["modelValue"])]),_:1}),t(h,{class:"ml-1 mb-3"},{default:o(()=>[t(k,{class:"mt-6",cols:"8"},{default:o(()=>[t(K,{label:"Selecione o Tipo",items:a(d).tiposBens,modelValue:a(d).tipo_id,"onUpdate:modelValue":e[1]||(e[1]=n=>a(d).tipo_id=n),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(k,{class:"ml-5",cols:"3"},{default:o(()=>[e[9]||(e[9]=r("label",null,"Valor",-1)),t(P,{modelValue:a(d).vlr_alienacao,"onUpdate:modelValue":e[2]||(e[2]=n=>a(d).vlr_alienacao=n)},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-7 ml-4",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:L})])]),_:1}),t(h,null,{default:o(()=>[t(k,null,{default:o(()=>[t(ue,{style:{height:"465px"},headers:T,items:a(b)},{"item.descricao":o(({item:n})=>[r("h3",We,ne(n.descricao),1)]),"item.actions":o(({item:n})=>[t(h,{style:{"margin-top":"-8px"},justify:"end"},{default:o(()=>[r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:X=>s.redirectToFicha(n),title:"Visualizar Ficha"},e[10]||(e[10]=[r("img",{style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar"},null,-1)]),8,He),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:X=>G(n.id),title:"Alterar Papel"},e[11]||(e[11]=[r("img",{style:{width:"30px",height:"30px"},src:ie,alt:"Editar"},null,-1)]),8,Ke),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:X=>f(n),title:"Deletar Pessoa"},[n.excluido?($(),F("img",Ye)):($(),F("img",Ze))],8,Xe)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),t(Ie,{modelValue:a(u),"onUpdate:modelValue":e[8]||(e[8]=n=>N(u)?u.value=n:null),"max-width":"600px"},{default:o(()=>[t(fe,null,{default:o(()=>[t(qe,{style:{color:"green"}},{default:o(()=>e[12]||(e[12]=[x("Atualizar Bem")])),_:1}),t(Me,null,{default:o(()=>[t(k,{class:"mt-1",cols:"12"},{default:o(()=>[t(ce,{label:"Descrição",modelValue:a(_).descricao,"onUpdate:modelValue":e[3]||(e[3]=n=>a(_).descricao=n)},null,8,["modelValue"])]),_:1}),t(h,null,{default:o(()=>[t(k,{class:"mt-6 ml-3",cols:"8"},{default:o(()=>[t(K,{label:"Selecione o Tipo",items:a(d).tiposBens,modelValue:a(_).tipo_id,"onUpdate:modelValue":e[4]||(e[4]=n=>a(_).tipo_id=n),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(k,{class:"ml-5",cols:"3"},{default:o(()=>[e[13]||(e[13]=r("label",null,"Valor",-1)),t(P,{modelValue:a(_).vlr_alienacao,"onUpdate:modelValue":e[5]||(e[5]=n=>a(_).vlr_alienacao=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(Re,null,{default:o(()=>[t(Pe),t(W,{color:"green",text:"",onClick:e[6]||(e[6]=n=>u.value=!1)},{default:o(()=>e[14]||(e[14]=[x("Cancelar")])),_:1}),t(W,{color:"green",text:"",onClick:e[7]||(e[7]=n=>M(a(_).id))},{default:o(()=>e[15]||(e[15]=[x("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(h,null,{default:o(()=>[t(C,{onClick:c},{default:o(()=>[t(W,{size:"large",color:"red"},{default:o(()=>e[16]||(e[16]=[x("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},tt={style:{width:"200px"}},ot={style:{width:"300px"}},at={style:{width:"800px","font-weight":"500"}},st=["onClick"],lt=["onClick"],it=["onClick"],rt={key:0,style:{width:"30px",height:"30px"},src:se,alt:"Visualizar",title:"Reativar"},nt={key:1,src:le,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ut={__name:"Imoveis",async setup(te){let i,y;const A=ee(),g=`${A.public.auth}/service/gerencia/atos_imoveis`,v=`${A.public.auth}/service/gerencia/atos_bens`,w=re(),V=Z(),O=m(""),z=m(""),B=m(!1),U=m(!1),D=m(null),b=[{title:"Matrícula",value:"registro_matricula"},{title:"Descrição",value:"descricao"},{value:"actions"}],{data:_,status:u}=([i,y]=j(()=>H(g,{method:"POST",body:{ato_token:V.query.ato_token_edit}})),i=await i,y(),i),T=ze(()=>{if(Object.keys(_.value).length!==0)return _.value.filter(p=>{const l=p.matricula?p.matricula.toLowerCase():"",f=p.descricao?p.descricao.toLowerCase():"",c=l.includes(z.value.toLowerCase()),s=f.includes(O.value.toLowerCase());return c&&s})});async function d(p){p.excluido=!p.excluido;try{await H(`${v}/${p.id}`,{method:"PUT",body:{excluido:p.excluido}})}catch(l){console.error("Erro ao excluir pessoa:",l)}}function L(p){D.value=p,U.value=!0}const M=async()=>{await H(g,{method:"POST",body:{ato_token:V.query.ato_token_edit}})},G=()=>{const p=V.query.origem||"criar",l=V.query.id;p==="atualizar"?w.push(`/os/atualizar/${l}`):w.push("/os/criar-registro")};return(p,l)=>{const f=oe,c=Ee,s=Le;return a(u)==="success"?($(),E(de,{key:0,class:"mt-5"},{default:o(()=>[r("img",{onClick:l[0]||(l[0]=e=>B.value=!0),style:{cursor:"pointer"},src:ae,alt:"Cadastro"}),t(h,{style:{gap:"3rem"}},{default:o(()=>[r("div",tt,[t(Y,{class:"mt-7 mb-4",modelValue:a(z),"onUpdate:modelValue":l[1]||(l[1]=e=>N(z)?z.value=e:null),label:"Matrícula","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),r("div",ot,[t(Y,{class:"mt-7 mb-4",modelValue:a(O),"onUpdate:modelValue":l[2]||(l[2]=e=>N(O)?O.value=e:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),t(ue,{density:"compact",headers:b,items:a(T),"item-key":"id"},{"item.descricao":o(({item:e})=>[r("h3",at,ne(e.descricao),1)]),"item.actions":o(({item:e})=>[t(h,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:o(()=>[r("div",{style:{cursor:"pointer"},onClick:P=>p.redirectToView(e.id),title:"Visualizar"},l[5]||(l[5]=[r("img",{style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar"},null,-1)]),8,st),r("div",{style:{cursor:"pointer"},onClick:P=>L(e.id),title:"Atualizar"},l[6]||(l[6]=[r("img",{style:{width:"30px",height:"30px"},src:ie,alt:"Atualizar"},null,-1)]),8,lt),r("div",{style:{cursor:"pointer"},onClick:P=>d(e),title:"Deletar"},[e.excluido?($(),F("img",rt)):($(),F("img",nt))],8,it)]),_:2},1024)]),_:1},8,["items"]),t(f,{onClick:G},{default:o(()=>[t(W,{size:"large",color:"red"},{default:o(()=>l[7]||(l[7]=[x("Voltar")])),_:1})]),_:1}),t(c,{onRefresh:M,show:a(B),onClose:l[3]||(l[3]=e=>B.value=!1)},null,8,["show"]),t(s,{onRefresh:M,imovel_id:a(D),show:a(U),onClose:l[4]||(l[4]=e=>U.value=!1)},null,8,["imovel_id","show"])]),_:1})):J("",!0)}}},dt=["onClick"],ct={key:0,style:{width:"30px",height:"30px"},src:se,alt:"Visualizar",title:"Reativar"},mt={key:1,src:le,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},pt={__name:"Outros",props:{ato_id:{type:Number,required:!0}},async setup(te){let i,y;const A=re(),g=Z(),v=ee(),{$toast:w}=_e(),V=`${v.public.managemant}/outros_tj`,O=`${v.public.managemant}/outros`,z=`${v.public.managemant}/atos_observacao`,B=`${v.public.managemant}/atos_observacao`;`${v.public.managemant}`;const U=m(Q("user-data").value.cartorio_token),D=m([]),b=m([]),_=[{title:"Data",align:"start",key:"created"},{title:"Quantidade",align:"start",key:"users.nome"},{title:"Valor Unitario",align:"start",key:"users.nome"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],u=ve({observacao:null,outros_tj_id:null,quantidade:1,valor_unitario:null}),T={observacao:{required:Ne.withMessage("O campo é obrigatório",je)}},d=Fe(T,u);async function L(){if(u.observacao.trim()===""){w.error("O campo de observação está vazio.");return}if(await d.value.$validate()){const{data:f,error:c,status:s}=await q(z,{method:"POST",body:{ato_id:g.query.ato_id,observacao:u.observacao,user_id:Q("user-data").value.usuario_id}},"$kQ0nj1mhl6");s.value==="success"&&(observacoesItems.value.push({created:Ge(f.value.created,"dd/mm/yyyy hh:mm"),observacao:f.value.observacao,id:f.value.id,escrevente:Q("user-data").value.nome}),u.observacao="",w.success("Observação registrada com sucesso"))}else w.error("Preencha os campos obrigatórios.")}async function M(f){f.excluido=!f.excluido;try{await q(`${B}/${f.id}`,{method:"PUT",body:JSON.stringify({excluido:f.excluido})},"$DwnPGm5aLw")}catch(c){console.error("Erro ao excluir observação:",c)}}const{data:G}=([i,y]=j(()=>q(V,{method:"POST",body:{cartorio_token:U}},"$2e0uNuFQSO")),i=await i,y(),i);b.value=G.value;const{data:p}=([i,y]=j(()=>q(O,{method:"POST",body:{cartorio_token:U}},"$YuLwFWKIry")),i=await i,y(),i);D.value=p.value||[];const l=()=>{const f=g.query.origem||"criar",c=g.query.id;f==="atualizar"?A.push(`/os/atualizar/${c}`):A.push("/os/criar-registro")};return(f,c)=>{const s=me,e=oe,P=Ue("mask");return $(),E(de,null,{default:o(()=>[t(h,null,{default:o(()=>[t(k,{cols:"5",class:"mt-6"},{default:o(()=>[t(K,{label:"Outros Atos",items:b.value,"item-title":"descricao","item-value":"id"},null,8,["items"])]),_:1}),t(k,{cols:"2",class:"mt-6"},{default:o(()=>[De(t(Y,{label:"QTD",type:"number",modelValue:u.quantidade,"onUpdate:modelValue":c[0]||(c[0]=C=>u.quantidade=C)},null,8,["modelValue"]),[[P,"###"]])]),_:1}),t(k,{cols:"2"},{default:o(()=>[c[3]||(c[3]=r("label",{for:""},"Valor unitario",-1)),t(s,{modelValue:u.valor_unitario,"onUpdate:modelValue":c[1]||(c[1]=C=>u.valor_unitario=C)},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"btn-pointer ml-2 mt-7",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:L})])]),_:1}),t(h,null,{default:o(()=>[t(k,{cols:"9"},{default:o(()=>[t(Y,{label:"Observação",modelValue:u.observacao,"onUpdate:modelValue":c[2]||(c[2]=C=>u.observacao=C)},null,8,["modelValue"])]),_:1})]),_:1}),t(h,null,{default:o(()=>[t(k,null,{default:o(()=>[t(ue,{style:{height:"465px"},headers:_,items:D.value},{"item.actions":o(({item:C})=>[r("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:n=>M(C),title:"Deletar Observação"},[C.excluido?($(),F("img",ct)):($(),F("img",mt))],8,dt)]),_:1},8,["items"])]),_:1})]),_:1}),t(h,null,{default:o(()=>[t(e,{onClick:l},{default:o(()=>[t(W,{size:"large",color:"red"},{default:o(()=>c[4]||(c[4]=[x("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},_t={class:"mb-10"},vt={style:{color:"red","margin-left":"30px"}},Gt={__name:"[id]",async setup(te){let i,y;const A=m(null),g=m(null),v=m(null),w=ee(),V=Z(),O=`${w.public.auth}/service/gerencia/listarSituacoes`,z=`${w.public.auth}/service/gerencia/getAtos`,B=m(Q("user-data").value.cartorio_token),U=V.query.id?{ato_token:V.query.tipo_ato_token}:{cartorio_token:B},D=m([]),b=m([]),_=m("PROCURAÇÕES"),u=m(!1),T=m(V.query.usa_imoveis==="true"),d=m(V.query.tipo_ato||"");async function L(){try{const{data:s}=await H(`${z}/${V.query.ato_id}`,{method:"GET"});b.value=s.value}catch(s){console.log(s)}}[i,y]=j(()=>L()),await i,y();const{data:M,status:G}=([i,y]=j(()=>H(O,{method:"POST",body:U})),i=await i,y(),i);D.value=M.value;const p=s=>{A.value=s},l=s=>{g.value=s};function f(){b.dt_lavratura||(u.value=!0)}function c({descricao:s,usaImoveisParams:e}){console.log(e),d.value=s,T.value=e}return(s,e)=>{const P=we,C=he,n=et,X=ut,ye=Ce,be=Ae,ge=Oe,Ve=Te,xe=pt,$e=ke;return $(),F(Be,null,[r("div",_t,[t(h,{class:"mb-5 mt-5"},{default:o(()=>[e[5]||(e[5]=r("h1",null,"Ordem de Serviço nº",-1)),r("h1",vt,ne(a(V).query.numero_os),1)]),_:1}),t(h,null,{default:o(()=>[t(k,{md:"6"},{default:o(()=>[t(K,{class:"mr-5",modelValue:a(_),"onUpdate:modelValue":e[0]||(e[0]=R=>N(_)?_.value=R:null),disabled:""},null,8,["modelValue"])]),_:1}),t(k,{md:"5"},{default:o(()=>[t(K,{modelValue:a(d),"onUpdate:modelValue":e[1]||(e[1]=R=>N(d)?d.value=R:null),label:"Serviço e Tipo de Ato Selecionado",disabled:""},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-2",style:Se({cursor:a(b).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:ie,alt:"Editar",onClick:f},null,4)])]),_:1})]),t(fe,{width:"1300"},{default:o(()=>[t(Je,{modelValue:a(v),"onUpdate:modelValue":e[2]||(e[2]=R=>N(v)?v.value=R:null),"bg-color":"#f5f2f2"},{default:o(()=>[t(S,{value:"dados"},{default:o(()=>e[6]||(e[6]=[x("Dados")])),_:1}),t(S,{value:"partes"},{default:o(()=>e[7]||(e[7]=[x("Partes")])),_:1}),a(T)?($(),E(S,{key:0,value:"bens"},{default:o(()=>e[8]||(e[8]=[x("Bens")])),_:1})):J("",!0),a(T)?($(),E(S,{key:1,value:"imoveis"},{default:o(()=>e[9]||(e[9]=[x("Imoveis")])),_:1})):J("",!0),t(S,{value:"minuta"},{default:o(()=>e[10]||(e[10]=[x("Minuta")])),_:1}),t(S,{value:"livro"},{default:o(()=>e[11]||(e[11]=[x("Livro")])),_:1}),t(S,{value:"observacao"},{default:o(()=>e[12]||(e[12]=[x("Observações")])),_:1}),t(S,{value:"anexo"},{default:o(()=>e[13]||(e[13]=[x("Anexos")])),_:1}),t(S,{value:"outros"},{default:o(()=>e[14]||(e[14]=[x("Outros")])),_:1})]),_:1},8,["modelValue"]),t(Qe,{modelValue:a(v),"onUpdate:modelValue":e[3]||(e[3]=R=>N(v)?v.value=R:null)},{default:o(()=>[t(I,{value:"dados"},{default:o(()=>[t(P,{item_dados:a(b),item_situacoes:a(D)},null,8,["item_dados","item_situacoes"])]),_:1}),t(I,{value:"partes"},{default:o(()=>[t(C)]),_:1}),a(T)?($(),E(I,{key:0,value:"bens"},{default:o(()=>[t(n)]),_:1})):J("",!0),a(T)?($(),E(I,{key:1,value:"imoveis"},{default:o(()=>[t(X)]),_:1})):J("",!0),t(I,{value:"minuta"},{default:o(()=>[t(ye,{onPage:p,onDoc:l})]),_:1}),t(I,{value:"livro"},{default:o(()=>[t(be,{pages:a(A),document:a(g)},null,8,["pages","document"])]),_:1}),t(I,{value:"observacao"},{default:o(()=>[t(ge)]),_:1}),t(I,{value:"anexo"},{default:o(()=>[t(Ve)]),_:1}),t(I,{value:"outros"},{default:o(()=>[t(xe)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(u)?($(),E($e,{key:0,show:a(u),servicos:a(b).servicos||[],tiposAtos:a(b).tiposAtos||[],onClose:e[4]||(e[4]=R=>u.value=!1),onUpdateAto:c},null,8,["show","servicos","tiposAtos"])):J("",!0)],64)}}};export{Gt as default};
