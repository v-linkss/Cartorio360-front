import{_ as fe,a as ye,b as Ve,c as ge,d as xe,e as be,f as $e}from"./Bx5Glk64.js";import{_ as ke}from"./39jC4laa.js";import{_ as le}from"./xX_v-sZz.js";import{_ as se,a as ie,b as re}from"./BP1uhy__.js";import{_ as ne}from"./xQXuZDXb.js";import{_ as Q}from"./DCZlzlpK.js";import{C as ue,H as X,u as we,r as m,m as K,D as Ce,I as N,o as B,G as Y,w as o,b as e,v as a,a as r,t as Z,c as F,x as M,d as V,J as Ae,A as J,s as ee,p as he,V as oe,K as de,F as Pe,y as Te}from"./BdPNHGLk.js";import{u as E,V as C}from"./CA5u19fk.js";import{V as w}from"./-yuwXDtq.js";import{V as ae}from"./YxvI8qq2.js";import{V as H}from"./B3pn1MKo.js";import{V as ce}from"./DRKVsOm3.js";import{V as ze,a as me,b as Be,c as Oe,d as Ue}from"./Clvho6vr.js";import{V as pe}from"./CxpX6iyZ.js";import{_ as De,a as Ie}from"./C6XbETvX.js";import{f as L}from"./CH0G1C9V.js";import{V as Se,a as T,b as Me,c as z}from"./DgcfZMVz.js";import"./CRDnUAoe.js";import"./DdymXg__.js";import"./CdP3NN9a.js";import"./BjTS7GMs.js";import"./BYrYseUA.js";import"./D1L69LUR.js";import"./UcotTkTI.js";import"./z9CfXJug.js";import"./CvFFxtLg.js";import"./Q3QYfZ6e.js";const Re={style:{width:"800px","font-weight":"500"}},qe=["onClick"],Ee=["onClick"],Le=["onClick"],Ne={key:0,style:{width:"30px",height:"30px"},src:ie,alt:"Reativar",title:"Reativar"},Fe={key:1,src:re,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},je={__name:"Bens",async setup(te){let n,g;const A=ue(),x=X(),_=ee(),{$toast:b}=we(),v=`${_.public.managemant}/atos_bens`,$=`${_.public.managemant}/atos_bens`,h=`${_.public.managemant}/listarBens`,O=`${_.public.managemant}/listarTipoBens`,U=m(K("user-data").value.cartorio_token),D=m(K("user-data").value.usuario_id).value,f=m([]),p=m([]),y=m(!1),R=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"vlr_alienacao"},{align:"end",value:"actions"}],d=Ce({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),j=async()=>{if(!d.vlr_alienacao&&!d.descricao){b.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:u,status:t}=await E(`${v}`,{method:"POST",body:{descricao:d.descricao,tipo_id:d.tipo_id,valor_mercado:"0.00",vlr_alienacao:d.vlr_alienacao.replace(/,/g,""),user_id:D,ato_id:Number.parseInt(x.query.ato_id),token:x.query.ato_token_edit}},"$aGIwRtPn6M");t.value==="success"&&(b.success("Bem registrado com sucesso!"),f.value.push(u.value),Object.assign(d,{vlr_alienacao:null,descricao:null,tipo_id:null}))},S=async u=>{const{status:t}=await E(`${$}/${u}`,{method:"PUT",body:{descricao:p.value.descricao,tipo_id:p.value.tipo_id,vlr_alienacao:p.value.vlr_alienacao.replace(/,/g,"")}},"$4hUMyAQlzU");t.value==="success"&&(b.success("Bem Atualizado com sucesso!"),y.value=!1)},q=u=>{const t=f.value.find(k=>k.id===u);t&&(p.value=t,y.value=!0)},{data:c}=([n,g]=N(()=>E(`${O}`,{method:"POST",body:{cartorio_token:U.value,imoveis:!1}},"$da802I2H8c")),n=await n,g(),n);d.tiposBens=c.value;const{data:l}=([n,g]=N(()=>E(`${h}`,{method:"POST",body:{ato_token:x.query.ato_token_edit}},"$iXfJJrO35d")),n=await n,g(),n);f.value=l.value&&Object.keys(l.value).length===0?[]:l.value;async function s(u){u.excluido=!u.excluido;try{await E(`${$}/${u.id}`,{method:"PUT",body:JSON.stringify({excluido:u.excluido})},"$PGKHfsa7Pl")}catch(t){console.error("Erro ao excluir pessoa:",t)}}const I=()=>{const u=x.query.origem||"criar",t=x.query.id;u==="atualizar"?A.push(`/os/atualizar/${t}`):A.push("/os/criar-registro")};return(u,t)=>{const k=ke,W=le;return B(),Y(pe,null,{default:o(()=>[e(w,{class:"mt-5",cols:"12"},{default:o(()=>[e(ae,{label:"Descrição",modelValue:a(d).descricao,"onUpdate:modelValue":t[0]||(t[0]=i=>a(d).descricao=i)},null,8,["modelValue"])]),_:1}),e(C,{class:"ml-1 mb-3"},{default:o(()=>[e(w,{class:"mt-6",cols:"8"},{default:o(()=>[e(H,{label:"Selecione o Tipo",items:a(d).tiposBens,modelValue:a(d).tipo_id,"onUpdate:modelValue":t[1]||(t[1]=i=>a(d).tipo_id=i),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(w,{class:"ml-5",cols:"3"},{default:o(()=>[t[9]||(t[9]=r("label",null,"Valor",-1)),e(k,{modelValue:a(d).vlr_alienacao,"onUpdate:modelValue":t[2]||(t[2]=i=>a(d).vlr_alienacao=i)},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-7 ml-4",src:se,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:j})])]),_:1}),e(C,null,{default:o(()=>[e(w,null,{default:o(()=>[e(ce,{style:{height:"465px"},headers:R,items:a(f)},{"item.descricao":o(({item:i})=>[r("h3",Re,Z(i.descricao),1)]),"item.actions":o(({item:i})=>[e(C,{style:{"margin-top":"-8px"},justify:"end"},{default:o(()=>[r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:G=>u.redirectToFicha(i),title:"Visualizar Ficha"},t[10]||(t[10]=[r("img",{style:{width:"30px",height:"30px"},src:ne,alt:"Visualizar"},null,-1)]),8,qe),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:G=>q(i.id),title:"Alterar Papel"},t[11]||(t[11]=[r("img",{style:{width:"30px",height:"30px"},src:Q,alt:"Editar"},null,-1)]),8,Ee),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:G=>s(i),title:"Deletar Pessoa"},[i.excluido?(B(),F("img",Ne)):(B(),F("img",Fe))],8,Le)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(ze,{modelValue:a(y),"onUpdate:modelValue":t[8]||(t[8]=i=>M(y)?y.value=i:null),"max-width":"600px"},{default:o(()=>[e(me,null,{default:o(()=>[e(Be,{style:{color:"green"}},{default:o(()=>t[12]||(t[12]=[V("Atualizar Bem")])),_:1}),e(Oe,null,{default:o(()=>[e(w,{class:"mt-1",cols:"12"},{default:o(()=>[e(ae,{label:"Descrição",modelValue:a(p).descricao,"onUpdate:modelValue":t[3]||(t[3]=i=>a(p).descricao=i)},null,8,["modelValue"])]),_:1}),e(C,null,{default:o(()=>[e(w,{class:"mt-6 ml-3",cols:"8"},{default:o(()=>[e(H,{label:"Selecione o Tipo",items:a(d).tiposBens,modelValue:a(p).tipo_id,"onUpdate:modelValue":t[4]||(t[4]=i=>a(p).tipo_id=i),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(w,{class:"ml-5",cols:"3"},{default:o(()=>[t[13]||(t[13]=r("label",null,"Valor",-1)),e(k,{modelValue:a(p).vlr_alienacao,"onUpdate:modelValue":t[5]||(t[5]=i=>a(p).vlr_alienacao=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Ue,null,{default:o(()=>[e(Ae),e(J,{color:"green",text:"",onClick:t[6]||(t[6]=i=>y.value=!1)},{default:o(()=>t[14]||(t[14]=[V("Cancelar")])),_:1}),e(J,{color:"green",text:"",onClick:t[7]||(t[7]=i=>S(a(p).id))},{default:o(()=>t[15]||(t[15]=[V("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(C,null,{default:o(()=>[e(W,{onClick:I},{default:o(()=>[e(J,{size:"large",color:"red"},{default:o(()=>t[16]||(t[16]=[V("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Ge={style:{width:"200px"}},Je={style:{width:"300px"}},He={style:{width:"800px","font-weight":"500"}},We=["onClick"],Ke=["onClick"],Qe=["onClick"],Xe={key:0,style:{width:"30px",height:"30px"},src:ie,alt:"Visualizar",title:"Reativar"},Ye={key:1,src:re,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Ze={__name:"Imoveis",async setup(te){let n,g;const A=ee(),x=`${A.public.auth}/service/gerencia/atos_imoveis`,_=`${A.public.auth}/service/gerencia/atos_bens`,b=ue(),v=X(),$=m(""),h=m(""),O=m(!1),U=m(!1),D=m(null),f=[{title:"Matrícula",value:"registro_matricula"},{title:"Descrição",value:"descricao"},{value:"actions"}],{data:p,status:y}=([n,g]=N(()=>L(x,{method:"POST",body:{ato_token:v.query.ato_token_edit}})),n=await n,g(),n),R=he(()=>{if(Object.keys(p.value).length!==0)return p.value.filter(c=>{const l=c.matricula?c.matricula.toLowerCase():"",s=c.descricao?c.descricao.toLowerCase():"",I=l.includes(h.value.toLowerCase()),u=s.includes($.value.toLowerCase());return I&&u})});async function d(c){c.excluido=!c.excluido;try{await L(`${_}/${c.id}`,{method:"PUT",body:{excluido:c.excluido}})}catch(l){console.error("Erro ao excluir pessoa:",l)}}function j(c){D.value=c,U.value=!0}const S=async()=>{await L(x,{method:"POST",body:{ato_token:v.query.ato_token_edit}})},q=()=>{const c=v.query.origem||"criar",l=v.query.id;c==="atualizar"?b.push(`/os/atualizar/${l}`):b.push("/os/criar-registro")};return(c,l)=>{const s=le,I=De,u=Ie;return a(y)==="success"?(B(),Y(pe,{key:0,class:"mt-5"},{default:o(()=>[r("img",{onClick:l[0]||(l[0]=t=>O.value=!0),style:{cursor:"pointer"},src:se,alt:"Cadastro"}),e(C,{style:{gap:"3rem"}},{default:o(()=>[r("div",Ge,[e(oe,{class:"mt-7 mb-4",modelValue:a(h),"onUpdate:modelValue":l[1]||(l[1]=t=>M(h)?h.value=t:null),label:"Matrícula","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),r("div",Je,[e(oe,{class:"mt-7 mb-4",modelValue:a($),"onUpdate:modelValue":l[2]||(l[2]=t=>M($)?$.value=t:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),e(ce,{density:"compact",headers:f,items:a(R),"item-key":"id"},{"item.descricao":o(({item:t})=>[r("h3",He,Z(t.descricao),1)]),"item.actions":o(({item:t})=>[e(C,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:o(()=>[r("div",{style:{cursor:"pointer"},onClick:k=>c.redirectToView(t.id),title:"Visualizar"},l[5]||(l[5]=[r("img",{style:{width:"30px",height:"30px"},src:ne,alt:"Visualizar"},null,-1)]),8,We),r("div",{style:{cursor:"pointer"},onClick:k=>j(t.id),title:"Atualizar"},l[6]||(l[6]=[r("img",{style:{width:"30px",height:"30px"},src:Q,alt:"Atualizar"},null,-1)]),8,Ke),r("div",{style:{cursor:"pointer"},onClick:k=>d(t),title:"Deletar"},[t.excluido?(B(),F("img",Xe)):(B(),F("img",Ye))],8,Qe)]),_:2},1024)]),_:1},8,["items"]),e(s,{onClick:q},{default:o(()=>[e(J,{size:"large",color:"red"},{default:o(()=>l[7]||(l[7]=[V("Voltar")])),_:1})]),_:1}),e(I,{onRefresh:S,show:a(O),onClose:l[3]||(l[3]=t=>O.value=!1)},null,8,["show"]),e(u,{onRefresh:S,imovel_id:a(D),show:a(U),onClose:l[4]||(l[4]=t=>U.value=!1)},null,8,["imovel_id","show"])]),_:1})):de("",!0)}}},et={class:"mb-10"},tt={style:{color:"red","margin-left":"30px"}},Tt={__name:"[id]",async setup(te){let n,g;const A=m(null),x=m(null),_=m(null),b=ee(),v=X(),$=`${b.public.auth}/service/gerencia/listarSituacoes`,h=`${b.public.auth}/service/gerencia/getAtos`,O=m(K("user-data").value.cartorio_token),U=v.query.id?{ato_token:v.query.tipo_ato_token}:{cartorio_token:O},D=m([]),f=m([]),p=m("PROCURAÇÕES");m("PROCURAÇÃO COM BENS");const y=m(!1);async function R(){try{const{data:l}=await L(`${h}/${v.query.ato_id}`,{method:"GET"});f.value=l.value}catch(l){console.log(l)}}[n,g]=N(()=>R()),await n,g();const{data:d,status:j}=([n,g]=N(()=>L($,{method:"POST",body:U})),n=await n,g(),n);D.value=d.value;const S=l=>{A.value=l},q=l=>{x.value=l};function c(){f.dt_lavratura||(y.value=!0)}return(l,s)=>{const I=ye,u=Ve,t=je,k=Ze,W=ge,i=xe,G=be,_e=$e,ve=fe;return B(),F(Pe,null,[r("div",et,[e(C,{class:"mb-5 mt-5"},{default:o(()=>[s[5]||(s[5]=r("h1",null,"Ordem de Serviço nº",-1)),r("h1",tt,Z(a(v).query.numero_os),1)]),_:1}),e(C,null,{default:o(()=>[e(w,{md:"6"},{default:o(()=>[e(H,{class:"mr-5",modelValue:a(p),"onUpdate:modelValue":s[0]||(s[0]=P=>M(p)?p.value=P:null),disabled:""},null,8,["modelValue"])]),_:1}),e(w,{md:"5"},{default:o(()=>[e(H,{modelValue:a(v).query.tipo_ato,"onUpdate:modelValue":s[1]||(s[1]=P=>a(v).query.tipo_ato=P),disabled:""},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-2",style:Te({cursor:a(f).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:Q,alt:"Editar",onClick:c},null,4)])]),_:1})]),e(me,{width:"1300"},{default:o(()=>[e(Se,{modelValue:a(_),"onUpdate:modelValue":s[2]||(s[2]=P=>M(_)?_.value=P:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(T,{value:"dados"},{default:o(()=>s[6]||(s[6]=[V("Dados")])),_:1}),e(T,{value:"partes"},{default:o(()=>s[7]||(s[7]=[V("Partes")])),_:1}),e(T,{value:"bens"},{default:o(()=>s[8]||(s[8]=[V("Bens")])),_:1}),e(T,{value:"imoveis"},{default:o(()=>s[9]||(s[9]=[V("Imoveis")])),_:1}),e(T,{value:"minuta"},{default:o(()=>s[10]||(s[10]=[V("Minuta")])),_:1}),e(T,{value:"livro"},{default:o(()=>s[11]||(s[11]=[V("Livro")])),_:1}),e(T,{value:"observacao"},{default:o(()=>s[12]||(s[12]=[V("Observações")])),_:1}),e(T,{value:"anexo"},{default:o(()=>s[13]||(s[13]=[V("Anexos")])),_:1})]),_:1},8,["modelValue"]),e(Me,{modelValue:a(_),"onUpdate:modelValue":s[3]||(s[3]=P=>M(_)?_.value=P:null)},{default:o(()=>[e(z,{value:"dados"},{default:o(()=>[e(I,{item_dados:a(f),item_situacoes:a(D)},null,8,["item_dados","item_situacoes"])]),_:1}),e(z,{value:"partes"},{default:o(()=>[e(u)]),_:1}),e(z,{value:"bens"},{default:o(()=>[e(t)]),_:1}),e(z,{value:"imoveis"},{default:o(()=>[e(k)]),_:1}),e(z,{value:"minuta"},{default:o(()=>[e(W,{onPage:S,onDoc:q})]),_:1}),e(z,{value:"livro"},{default:o(()=>[e(i,{pages:a(A),document:a(x)},null,8,["pages","document"])]),_:1}),e(z,{value:"observacao"},{default:o(()=>[e(G)]),_:1}),e(z,{value:"anexo"},{default:o(()=>[e(_e)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(y)?(B(),Y(ve,{key:0,show:a(y),servicos:a(f).servicos||[],tiposAtos:a(f).tiposAtos||[],onClose:s[4]||(s[4]=P=>y.value=!1)},null,8,["show","servicos","tiposAtos"])):de("",!0)],64)}}};export{Tt as default};
