import{_ as ve,a as fe,b as be,c as ge,d as Ve,e as ye}from"./C8v3bHRe.js";import{_ as Ae}from"./BkBMJN6j.js";import{g as ke,r as n,e as qe,J as H,u as we,v as h,z as $e,K as ze,o as U,k as Q,w as o,b as e,V as K,j as t,x as W,d as m,m as X,f as Pe,c as J,l as Y,F as De,a as C,t as Te,B,s as xe}from"./BuU6GUza.js";import{f as P}from"./Dd3436yv.js";import{u as Ce}from"./7p0pwjnI.js";import{V as R}from"./Bdj054C-.js";import{V as b}from"./pQYuRjW5.js";import{V as S}from"./Yx7fJ0vX.js";import{V as Z}from"./DTur8ifq.js";import{_ as Be,a as Ue,b as he}from"./Bf6c92dP.js";import{_ as Re}from"./BWfQ82oo.js";import{_ as Se}from"./gJYpHch3.js";import{V as Ee}from"./B1mE-bVm.js";import{a as Me,V as p,d as Ne,e as v}from"./t2RRfnnF.js";import"./Cqka4GJ5.js";import"./BIKWJMj6.js";import"./BEauihQK.js";import"./rY-A1tRn.js";import"./B0IxRygJ.js";import"./DLjxu6ZO.js";import"./C09bERnb.js";import"./CER4_mN8.js";import"./Bq6sJaB9.js";import"./BVz1G1IN.js";import"./DJvq3mCv.js";import"./DAv0OnYS.js";import"./5nX59Z32.js";import"./nalEmLSm.js";import"./D7U6VRdd.js";import"./BI9Jy1iW.js";import"./DEDBhBuS.js";import"./Uda3ovgg.js";import"./-zgYk4Vu.js";import"./DuxcQknf.js";import"./DLC_8_yR.js";import"./Bvg26YC2.js";import"./frlllHKP.js";const Fe={__name:"SeparacaoDivorcio",props:{tabEvent:{type:Number,default:0}},async setup(j){let r,f;const A=X(),i=ke({dt_casamento:null,tabvalores_regimecasamento_id:null,qtd_filhos_maiores:null,qtd_filhos_menores:null,responsavel_menores_id:null}),d=n([]),D=j,c=qe(),k=H(),{$toast:E}=we(),M=`${A.public.auth}/service/gerencia/getAtos/${k.query.ato_id}`,N=`${A.public.auth}/service/gerencia/regime_casamento`,F=`${A.public.auth}/service/gerencia/getAtosPessoaById/${k.query.ato_id}`,T=`${A.public.managemant}/updateAtos`,g=async()=>{const{data:l,status:s}=await P(M,{method:"GET"});l.value&&(i.dt_casamento=l.value[0].dt_casamento,i.tabvalores_regimecasamento_id=l.value[0].tabvalores_regimecasamento_id,i.qtd_filhos_maiores=l.value[0].qtd_filhos_maiores,i.qtd_filhos_menores=l.value[0].qtd_filhos_menores,i.responsavel_menores_id=l.value[0].responsavel_menores_id)},{data:q}=([r,f]=h(()=>P(N,{method:"GET"})),r=await r,f(),r),x=n([]),w=$e(()=>{var l;return((l=x.value)==null?void 0:l.map(s=>{var V;return{id:s.id,nome:((V=s.pessoa)==null?void 0:V.nome)||"Sem nome"}}))||[]});q.value&&(d.value=q.value);async function $(){const{data:l}=await P(F,{method:"GET"});l.value&&(x.value=l.value)}const I=()=>{const l=k.query.origem||"criar",s=k.query.id;switch(l){case"atualizar":case"vizualizar":c.push(`/os/atualizar/${s}`);break;case"atualizar-lista":case"vizualizar-lista":c.push("/atos/lista");break;default:c.push("/os/criar-registro");break}};async function O(){const{data:l,error:s,status:V}=await Ce(`${T}/${k.query.ato_id}`,{method:"PUT",body:{dt_casamento:i.dt_casamento,tabvalores_regimecasamento_id:i.tabvalores_regimecasamento_id,qtd_filhos_maiores:i.qtd_filhos_maiores,qtd_filhos_menores:i.qtd_filhos_menores,responsavel_menores_id:i.responsavel_menores_id}},"$sJMejO9HYY");V.value==="success"&&E.success("Divórcio salvo com sucesso")}ze(()=>D.tabEvent,async l=>{await $()}),[r,f]=h(()=>g()),await r,f();const z=l=>{const s=["Backspace","Tab","ArrowLeft","ArrowRight","Delete"];!/[0-9]/.test(l.key)&&!s.includes(l.key)&&l.preventDefault()};return(l,s)=>{const V=Ae;return U(),Q(Z,{class:"mt-5"},{default:o(()=>[e(R,{dense:""},{default:o(()=>[e(b,{cols:"12",sm:"4",md:"3"},{default:o(()=>[e(K,{modelValue:t(i).dt_casamento,"onUpdate:modelValue":s[0]||(s[0]=_=>t(i).dt_casamento=_),type:"date",label:"Data Casamento"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"4"},{default:o(()=>[e(S,{label:"Regime Bens",modelValue:t(i).tabvalores_regimecasamento_id,"onUpdate:modelValue":s[1]||(s[1]=_=>t(i).tabvalores_regimecasamento_id=_),items:t(d),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),e(b,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(K,{label:"Filhos Maiores",modelValue:t(i).qtd_filhos_maiores,"onUpdate:modelValue":s[2]||(s[2]=_=>t(i).qtd_filhos_maiores=_),modelModifiers:{number:!0},type:"number",min:"0",onKeydown:z},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(K,{label:"Filhos Menores",modelValue:t(i).qtd_filhos_menores,"onUpdate:modelValue":s[3]||(s[3]=_=>t(i).qtd_filhos_menores=_),type:"number",min:"0",onKeydown:z},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"4"},{default:o(()=>[e(S,{label:"Responsável",modelValue:t(i).responsavel_menores_id,"onUpdate:modelValue":s[4]||(s[4]=_=>t(i).responsavel_menores_id=_),items:t(w),"item-title":"nome","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(R,{class:"mt-5",justify:"start",align:"center"},{default:o(()=>[e(b,{cols:"auto"},{default:o(()=>[e(V,{onClick:I},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>s[5]||(s[5]=[m("Voltar")])),_:1})]),_:1})]),_:1}),e(b,{cols:"auto"},{default:o(()=>[e(W,{class:"ml-2",onClick:O,size:"large",color:"green"},{default:o(()=>s[6]||(s[6]=[m("Salvar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Ie={class:"mb-10"},Oe={style:{color:"red","margin-left":"30px"}},Le={key:0},Do={__name:"[id]",async setup(j){let r,f;const A=n(null),i=n(null),d=n(null),D=X(),c=H(),k=n(c.query.origem==="vizualizar"),E=`${D.public.auth}/service/gerencia/listarSituacoes`,M=`${D.public.auth}/service/gerencia/getAtos`,N=n(Pe("user-data").value.cartorio_token),F=c.query.id?{ato_token:c.query.tipo_ato_token}:{cartorio_token:N},T=n([]),g=n([]),q=n(!1),x=c.query.tipo_ato||"",w=n(null),$=n(null),[I,O]=x.split(" - "),z=n(0),l=n(0);w.value=I||"",$.value=O||"";async function s(){try{const{data:u}=await P(`${M}/${c.query.ato_id}`,{method:"GET"});g.value=u.value}catch(u){console.error(u)}}[r,f]=h(()=>s()),await r,f();const{data:V,status:_}=([r,f]=h(()=>P(E,{method:"POST",body:F})),r=await r,f(),r);T.value=V.value;const ee=u=>{A.value=u},oe=u=>{i.value=u};function ae(){g.dt_lavratura||(q.value=!0)}function te(u){u==="divorcio"&&z.value++}function se(){d.value==="divorcio"&&l.value<3&&(z.value++,l.value++)}function le({descricao:u,usaImoveisParams:a}){const[L,G]=u.split(" - ");w.value=L||"",$.value=G||""}return(u,a)=>{const L=ve,G=fe,ie=Fe,ne=Be,re=Ue,ue=be,me=ge,de=Ve,ce=ye,_e=he,pe=Re;return U(),J(De,null,[e(Z,null,{default:o(()=>[C("div",Ie,[e(R,{class:"mb-5 mt-5"},{default:o(()=>[a[5]||(a[5]=C("h1",null,"Ordem de Serviço nº",-1)),C("h1",Oe,Te(t(c).query.numero_os),1)]),_:1}),e(R,null,{default:o(()=>[e(b,{md:"6"},{default:o(()=>[e(S,{label:"Serviço",class:"mr-5",modelValue:t(w),"onUpdate:modelValue":a[0]||(a[0]=y=>B(w)?w.value=y:null),disabled:""},null,8,["modelValue"])]),_:1}),e(b,{md:"5"},{default:o(()=>[e(S,{modelValue:t($),"onUpdate:modelValue":a[1]||(a[1]=y=>B($)?$.value=y:null),label:"Tipo de Ato",disabled:""},null,8,["modelValue"])]),_:1}),t(k)?Y("",!0):(U(),J("div",Le,[C("img",{class:"mt-2",style:xe({cursor:t(g).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:Se,alt:"Editar",onClick:ae},null,4)]))]),_:1})]),e(Ee,{width:"1300"},{default:o(()=>[e(Me,{modelValue:t(d),"onUpdate:modelValue":a[2]||(a[2]=y=>B(d)?d.value=y:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(p,{value:"dados"},{default:o(()=>a[6]||(a[6]=[m("Dados")])),_:1}),e(p,{value:"partes"},{default:o(()=>a[7]||(a[7]=[m("Partes")])),_:1}),e(p,{value:"bens"},{default:o(()=>a[8]||(a[8]=[m("Bens")])),_:1}),e(p,{value:"imoveis"},{default:o(()=>a[9]||(a[9]=[m("Imoveis")])),_:1}),e(p,{onClick:se,value:"divorcio"},{default:o(()=>a[10]||(a[10]=[m("Matrimônio")])),_:1}),e(p,{value:"minuta"},{default:o(()=>a[11]||(a[11]=[m("Minuta")])),_:1}),e(p,{value:"livro"},{default:o(()=>a[12]||(a[12]=[m("Livro")])),_:1}),e(p,{value:"observacao"},{default:o(()=>a[13]||(a[13]=[m("Observações")])),_:1}),e(p,{value:"anexo"},{default:o(()=>a[14]||(a[14]=[m("Anexos")])),_:1}),e(p,{value:"outros"},{default:o(()=>a[15]||(a[15]=[m("Outros")])),_:1})]),_:1},8,["modelValue"]),e(Ne,{modelValue:t(d),"onUpdate:modelValue":[a[3]||(a[3]=y=>B(d)?d.value=y:null),te]},{default:o(()=>[e(v,{value:"dados"},{default:o(()=>[e(L,{item_dados:t(g),item_situacoes:t(T)},null,8,["item_dados","item_situacoes"])]),_:1}),e(v,{value:"partes"},{default:o(()=>[e(G)]),_:1}),e(v,{value:"divorcio"},{default:o(()=>[e(ie,{"tab-event":t(z)},null,8,["tab-event"])]),_:1}),e(v,{value:"bens"},{default:o(()=>[e(ne)]),_:1}),e(v,{value:"imoveis"},{default:o(()=>[e(re)]),_:1}),e(v,{value:"minuta"},{default:o(()=>[e(ue,{onPage:ee,onDoc:oe})]),_:1}),e(v,{value:"livro"},{default:o(()=>[e(me,{pages:t(A),document:t(i)},null,8,["pages","document"])]),_:1}),e(v,{value:"observacao"},{default:o(()=>[e(de)]),_:1}),e(v,{value:"anexo"},{default:o(()=>[e(ce)]),_:1}),e(v,{value:"outros"},{default:o(()=>[e(_e)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(q)?(U(),Q(pe,{key:0,show:t(q),servicos:t(g).servicos||[],tiposAtos:t(g).tiposAtos||[],onClose:a[4]||(a[4]=y=>q.value=!1),onUpdateAto:le},null,8,["show","servicos","tiposAtos"])):Y("",!0)],64)}}};export{Do as default};
