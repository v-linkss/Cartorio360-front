import{_ as te}from"./CaXXieqh.js";import{n as H,q as Q,u as X,r as n,A as M,s as se,B as Y,o as f,v as R,w as o,b as e,x as t,V as Z,y as W,d as B,z as ee,a as _,C as de,c as G,D as oe,E as Re,F as Be,H as Me,I as F,J as ye,K as ge,t as ue}from"./UejYr6cC.js";import{u as P}from"./BjnJ0BPK.js";import{c as he,r as xe,u as ke}from"./C5LfM9WH.js";import{V as O}from"./B9ktu_du.js";import{V as U}from"./Cz-aldi_.js";import{V as ce}from"./B9oGmQdH.js";import{V as re}from"./5vY_Pn2d.js";import{_ as Ue}from"./CYQLqf1d.js";import{_ as Ne,a as je,b as Fe,T as Le,W as We,r as be,D as $e,c as Ge,d as Ke,e as Je}from"./DKSfG4yU.js";import{_ as pe}from"./CpShmm27.js";import{_ as ae,a as me,b as _e,c as Ye}from"./kvUTZyXy.js";import{V as Ve,a as ne}from"./qSy77qGq.js";import{_ as Ze}from"./DfjuBLsA.js";import{a as K,V as He,c as J,b as Qe}from"./DRvYHRj_.js";import"./Dq0wd4aw.js";import"./DvBlBUkO.js";const Xe={__name:"Dados",props:{ato_token:{type:String,required:!0}},emits:["saved"],async setup(N,{emit:m}){let i,c;const x=N,$=m,d=H(),u=Q(),D=ee(),{$toast:k}=X(),S=`${D.public.managemant}/listarSituacoes`,A=`${D.public.managemant}/createAtos`,g=`${D.public.managemant}/getAtosTiposByToken`,V=n(M("user-data").value.cartorio_token),C=n(M("user-service").value.id).value||n(M("user-service").value).value,y=n([]),s=se({dt_abertura:null,status:"EM EDIÇÃO",mne:null}),I={status:{required:he.withMessage("O campo é obrigatorio",xe)}},b=ke(I,s),{data:w}=([i,c]=Y(()=>P(`${g}/${x.ato_token}`,{method:"GET"},"$9ZmTYsLk0K")),i=await i,c(),i);async function a(){if(await b.value.$validate()){const{data:l,error:v,status:L}=await P(A,{method:"POST",body:{ato_tipo_id:w.value.id,cartorio_id:M("user-data").value.cartorio_id,ordemserv_id:C,status:s.status,dt_abertura:s.dt_abertura,mne:s.mne,user_id:M("user-data").value.usuario_id,user_alteracao_id:M("user-data").value.usuario_id}},"$hyq5YcBEjF");L.value==="success"&&(k.success("Ato registrado com sucesso!"),$("saved",{id:l.value.id,token:l.value.token}))}else k.error("Preencha os campos obrigatorios.")}const{data:h}=([i,c]=Y(()=>P(S,{method:"POST",body:{cartorio_token:V.value}},"$S3qwbpImEh")),i=await i,c(),i);y.value=h.value;const j=()=>{const l=u.query.origem||"criar",v=u.query.id;l==="atualizar"?d.push(`/os/atualizar/${v}`):d.push("/os/criar-registro")};return(l,v)=>{const L=te;return f(),R(re,null,{default:o(()=>[e(O,{class:"mt-5"},{default:o(()=>[e(U,{cols:"3"},{default:o(()=>[e(ce,{label:"Situação",modelValue:t(s).status,"onUpdate:modelValue":v[0]||(v[0]=E=>t(s).status=E),items:t(y),"item-title":"descricao","item-value":"descricao",required:"","error-messages":t(b).status.$errors.map(E=>E.$message),onBlur:t(b).status.$touch,onInput:t(b).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),e(O,null,{default:o(()=>[e(U,{cols:"5"},{default:o(()=>[e(Z,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:t(s).mne,"onUpdate:modelValue":v[1]||(v[1]=E=>t(s).mne=E)},null,8,["modelValue"])]),_:1})]),_:1}),e(O,null,{default:o(()=>[e(U,{cols:"2"},{default:o(()=>[e(Z,{modelValue:t(s).dt_abertura,"onUpdate:modelValue":v[2]||(v[2]=E=>t(s).dt_abertura=E),type:"date",label:"Data Lavratura",disabled:"",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(O,{class:"mb-3"},{default:o(()=>[e(L,{onClick:j},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>[B("Voltar")]),_:1})]),_:1}),e(W,{class:"ml-10",onClick:a,size:"large",color:"green"},{default:o(()=>[B("Salvar")]),_:1})]),_:1})]),_:1})}}},et=["onClick"],tt=_("img",{style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar"},null,-1),ot=[tt],at=["onClick"],st=_("img",{style:{width:"30px",height:"30px"},src:Ye,alt:"Visualizar"},null,-1),rt=[st],nt=["onClick"],lt={key:0,style:{width:"30px",height:"30px"},src:me,alt:"Visualizar",title:"Reativar"},it={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ut=["onClick"],ct=_("img",{style:{width:"30px",height:"30px"},src:Fe,alt:"Visualizar"},null,-1),dt=[ct],pt={__name:"Partes",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(N){let m,i;const c=N,x=H(),$=Q(),d=ee(),{$toast:u}=X(),D=`${d.public.managemant}/pesquisarPessoas`,k=`${d.public.managemant}/listarPapeis`,S=`${d.public.managemant}/getLinkTipo`,A=`${d.public.managemant}/createAtosPessoa`,g=`${d.public.managemant}/getAtosPessoaById`,V=`${d.public.managemant}/updateAtosPessoa`,C=n(M("user-data").value.cartorio_token),y=n([]),s=n([]),I=n([]),b=n(!1),w=n(!1),a=n(!1),h=n(!1),j=n(null),l=n(null),v=n(null),L=n(null);n(null);const E=n(null),ve=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],q=se({papeis:null,nome:null,pessoa:null,documento:null}),{data:we}=([m,i]=Y(()=>P(k,{method:"POST",body:{tipo_ato_token:c.ato_token}},"$fFKndZhA4W")),m=await m,i(),m);I.value=we.value;async function Pe(){try{const{data:p,error:r}=await P(D,{method:"POST",body:{cartorio_token:C.value,documento:q.documento,nome:q.nome}},"$o3ZL1rvYrY");p.value.length>0?(y.value=p.value,q.pessoa=y.value[0]):y.value=[]}catch(p){console.error("Erro na requisição",p)}}const Ce=()=>{w.value=!0},Ee=p=>{s.value=s.value.map(r=>r.id===v.value?{...r,papel:{...r.papel,descricao:p}}:r)},Te=p=>{const r=s.value.find(z=>z.pessoa.id===L.value);r.representante.nome=p},Ae=async()=>{const p={pessoa:q.pessoa,papel:I.value.find(z=>z.id===q.papeis),representante:{nome:null}},r=await P(`${g}/${c.ato_id}`,{method:"GET"},"$kXSxUa4grs");for(const z of r.data.value)if(z.pessoa_id===q.pessoa.id&&z.ato_id===c.ato_id&&z.tipo_parte_id===q.papeis){u.error("Pessoa Já Registrada Com Esse Papel!");return}try{const{data:z,error:fe,status:le}=await P(A,{method:"POST",body:{ato_id:c.ato_id,pessoa_id:q.pessoa.id,tipo_parte_id:q.papeis,user_id:M("user-data").value.usuario_id}},"$So3qnQu7ek");le.value==="success"?(p.id=z.value.id,u.success("Pessoa Registrada com Sucesso!"),s.value.push(p)):u.error("Erro ao registrar a pessoa!")}catch{u.error("Erro no servidor. Tente novamente.")}},Se=async p=>{a.value=!0,E.value=null;const{data:r}=await P(`${S}`,{method:"POST",body:{id:p.pessoa.id,tipo:"ficha"}},"$Q3kbIwtd9t");r.value&&r.value.link?E.value=`data:image/jpeg;base64,${r.value.link}`:E.value=null},qe=p=>{const r=s.value.filter(z=>z.pessoa.id!==p.pessoa.id).map(z=>({id:z.pessoa.id,nome:z.pessoa.nome}));v.value=p.id,j.value=r,b.value=!0,l.value=p.pessoa.nome,L.value=p.pessoa.id},ze=p=>{v.value=p.id,h.value=!0,l.value=p.pessoa.nome};async function Oe(p){p.excluido=!p.excluido;try{await P(`${V}/${v.value}`,{method:"PUT",body:JSON.stringify({excluido:p.excluido})},"$9xStKwGd7o")}catch(r){console.error("Erro ao excluir pessoa:",r)}}const De=()=>{const p=$.query.origem||"criar",r=$.query.id;p==="atualizar"?x.push(`/os/atualizar/${r}`):x.push("/os/criar-registro")};return(p,r)=>{const z=Ue,fe=Ne,le=je,Ie=te;return f(),R(re,null,{default:o(()=>[e(O,{class:"mt-5"},{default:o(()=>[e(U,{cols:"3"},{default:o(()=>[e(Z,{label:"Documento",modelValue:t(q).documento,"onUpdate:modelValue":r[0]||(r[0]=T=>t(q).documento=T)},null,8,["modelValue"])]),_:1}),e(U,{cols:"4"},{default:o(()=>[e(Z,{label:"Pessoa",modelValue:t(q).nome,"onUpdate:modelValue":r[1]||(r[1]=T=>t(q).nome=T)},null,8,["modelValue"])]),_:1}),_("div",null,[_("img",{class:"mt-3",src:pe,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Pe})]),_("div",null,[_("img",{class:"mt-3 ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Ce})])]),_:1}),e(O,null,{default:o(()=>[e(U,{cols:"4"},{default:o(()=>[e(ce,{label:"Selecione a Pessoa",modelValue:t(q).pessoa,"onUpdate:modelValue":r[2]||(r[2]=T=>t(q).pessoa=T),items:t(y),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(U,{cols:"3"},{default:o(()=>[e(ce,{label:"Papel",modelValue:t(q).papeis,"onUpdate:modelValue":r[3]||(r[3]=T=>t(q).papeis=T),items:t(I),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),_("div",null,[_("img",{class:"mt-3",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Ae})])]),_:1}),e(O,null,{default:o(()=>[e(U,null,{default:o(()=>[e(de,{style:{height:"465px"},headers:ve,items:t(s)},{"item.actions":o(({item:T})=>[e(O,null,{default:o(()=>[_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ie=>Se(T),title:"Visualizar Ficha"},ot,8,et),_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ie=>ze(T),class:"mr-2",title:"Alterar Papel"},rt,8,at),_("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ie=>Oe(T),title:"Deletar Pessoa"},[T.excluido?(f(),G("img",lt)):(f(),G("img",it))],8,nt),_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ie=>qe(T),title:"Selecionar Representante"},dt,8,ut)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(z,{show:t(w),onClose:r[4]||(r[4]=T=>w.value=!1)},null,8,["show"]),e(fe,{representante_nome:t(l),representantes:t(j),ato_id:t(v),show:t(b),onClose:r[5]||(r[5]=T=>b.value=!1),onUpdateRepresentante:Te},null,8,["representante_nome","representantes","ato_id","show"]),e(le,{representante_nome:t(l),ato_token:c.ato_token,ato_id:t(v),show:t(h),onClose:r[6]||(r[6]=T=>h.value=!1),onUpdatePapel:Ee},null,8,["representante_nome","ato_token","ato_id","show"]),e(Ve,{modelValue:t(a),"onUpdate:modelValue":r[8]||(r[8]=T=>oe(a)?a.value=T:null),width:"600"},{default:o(()=>[e(ne,{"max-width":"600",title:"Ficha"},{default:o(()=>[e(Re,{src:t(E)},null,8,["src"]),e(W,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:r[7]||(r[7]=T=>a.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(O,null,{default:o(()=>[e(Ie,{onClick:De},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>[B("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},mt={key:0,class:"loading-overlay"},_t="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",vt={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(N,{emit:m}){const i=N;Be("DocumentEditorContainer",[Le,We]);const c=ee(),{$toast:x}=X(),$=H(),d=Q(),u=m;be(`${c.public.docEditor}`);const D=`${c.public.managemant}/upload`,k=n(null),S=n(!1),A=async()=>{const y=await k.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),s=new FileReader;s.onload=()=>{const I=s.result;u("doc",I)},s.readAsText(y)},g=async()=>{S.value=!0;try{const y=await k.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),s=new FormData;s.append("file",y,"anexo.docx"),s.append("cartorio_token",M("user-data").value.cartorio_token),s.append("token",i.ato_token),s.append("tipo","ato_minuta");const{data:I,status:b}=await P(D,{method:"POST",body:s},"$071xxdqs20");if(b.value==="success"){x.success("Documento enviado!");const a=k.value.ej2Instances.documentEditor.pageCount;A(),u("page",a)}else x.error("Erro ao enviar documento para o sistema.")}catch(C){x.error("Erro ao salvar documento."),console.error(C)}finally{S.value=!1}},V=()=>{const C=d.query.origem||"criar",y=d.query.id;C==="atualizar"?$.push(`/os/atualizar/${y}`):$.push("/os/criar-registro")};return(C,y)=>{const s=te;return f(),G(ye,null,[e(t($e),{height:"900px",ref_key:"documentEditorContainer",ref:k,serviceUrl:_t,enableToolbar:!0,enableWordExport:!0},null,512),t(S)?(f(),G("div",mt,[e(Me,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):F("",!0),e(O,{class:"ml-4 mt-4 mb-4"},{default:o(()=>[e(s,{class:"mr-4"},{default:o(()=>[e(W,{size:"large",onClick:V,color:"red"},{default:o(()=>[B("Voltar")]),_:1})]),_:1}),e(W,{size:"large",color:"green",onClick:g,disabled:t(S)},{default:o(()=>[B("Salvar")]),_:1},8,["disabled"])]),_:1})],64)}}},ft={class:"d-flex align-center justify-center"},gt=["innerHTML"],yt={__name:"Livro",props:{ato_token:{type:String,required:!0},pages:{type:Number,required:!0},document:{type:String,required:!0}},async setup(N){let m,i;const c=N,x=ee();be(`${x.public.docEditor}`);const{$toast:$}=X(),d=H(),u=Q(),D=`${x.public.managemant}/download`,k=`${x.public.managemant}/lavrarAto`,S=n("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),A=n(!1),g=n(null),V=n(null),C=n(null);[m,i]=Y(()=>P(D,{method:"POST",body:{bucket:"qvgjz",path:"fKumj/ato_minuta-2024-12-13T14:57:36.974Z"}},"$ZKnVBNYxp9")),m=await m,i();const y=async()=>{try{const{data:w,status:a}=await P(k,{method:"POST",body:{ato_token:c.ato_token,qtd_paginas:c.pages}},"$XouuxOFIWh");a.value==="success"?(g.value=w.value,V.value=w.value[0].selo,$.success("Ato lavrado com sucesso!")):$.error("Falha ao lavrar o ato.")}catch{$.error("Erro ao conectar com o servidor.")}},s=()=>{A.value=!1,y()},I=function(){C.value.ej2Instances.documentEditor.open(c.document)},b=()=>{const w=u.query.origem||"criar",a=u.query.id;w==="atualizar"?d.push(`/os/atualizar/${a}`):d.push("/os/criar-registro")};return(w,a)=>{const h=Ke;return f(),G(ye,null,[e(O,null,{default:o(()=>[e(U,null,{default:o(()=>[e(t($e),{restrictEditing:!0,enableToolbar:!1,created:c.document?I:null,ref_key:"documentEditorContainer",ref:C,height:"850px",width:"850px"},null,8,["created"])]),_:1}),e(U,null,{default:o(()=>[_("div",ft,[_("div",null,[_("img",{onClick:a[0]||(a[0]=j=>A.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:Ge}),t(g)?(f(),R(ne,{key:0,class:"mr-16"},{default:o(()=>[e(O,{"no-gutters":""},{default:o(()=>[e(U,null,{default:o(()=>[e(ge,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:o(()=>[B(" Livro: "+ue(t(g)[0].livro_numero),1)]),_:1})]),_:1}),e(U,null,{default:o(()=>[e(ge,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:o(()=>[B(" Folhas : "+ue(t(g)[0].pagina_inicial)+" Á "+ue(t(g)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),_("div",{innerHTML:t(V)},null,8,gt)]),_:1})):F("",!0)])])]),_:1})]),_:1}),e(W,{color:"red",size:"large",onClick:b},{default:o(()=>[B("Voltar")]),_:1}),e(h,{show:t(A),condMessage:t(S),onClose:a[1]||(a[1]=j=>A.value=!1),onConfirm:s},null,8,["show","condMessage"])],64)}}},ht=["onClick"],xt={key:0,style:{width:"30px",height:"30px"},src:me,alt:"Visualizar",title:"Reativar"},kt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},bt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(N){let m,i;const c=N,x=H(),$=Q(),d=ee(),{$toast:u}=X(),D=`${d.public.managemant}/listarEscrevente`,k=`${d.public.managemant}/getAtosTiposByToken`,S=`${d.public.managemant}/createAtosObservacao`,A=`${d.public.managemant}/updateAtosObservacao`,g=n(M("user-data").value.cartorio_token),V=n([]),C=n([]),y=[{title:"Data",align:"start",key:"data"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],s=se({observacao:null}),I={observacao:{required:he.withMessage("O campo é obrigatorio",xe)}},b=ke(I,s);[m,i]=Y(()=>P(`${k}/${c.ato_token}`,{method:"GET"},"$aJM1TL1buW")),m=await m,i();async function w(){if(await b.value.$validate()){const{data:l,error:v,status:L}=await P(S,{method:"POST",body:{ato_id:c.ato_id,observacao:s.observacao,user_id:M("user-data").value.usuario_id}},"$dMg99jeUNP");L.value==="success"&&(V.value.push({data:Ze(l.value.created,"dd/mm/yyyy hh:mm"),observacao:l.value.observacao,id:l.value.id,escrevente:M("user-data").value.nome}),u.success("Observação registrada com sucesso"))}else u.error("Preencha os campos obrigatorios.")}async function a(l){l.excluido=!l.excluido;try{await P(`${A}/${l.id}`,{method:"PUT",body:JSON.stringify({excluido:l.excluido})},"$B6PdRx8Gp4")}catch(v){console.error("Erro ao excluir observacao:",v)}}const{data:h}=([m,i]=Y(()=>P(D,{method:"POST",body:{cartorio_token:g}},"$xFHPGua26S")),m=await m,i(),m);C.value=h.value[0].func_json_escreventes;const j=()=>{const l=$.query.origem||"criar",v=$.query.id;l==="atualizar"?x.push(`/os/atualizar/${v}`):x.push("/os/criar-registro")};return(l,v)=>{const L=te;return f(),R(re,null,{default:o(()=>[e(O,{class:"mt-5"},{default:o(()=>[e(Z,{label:"Observação",modelValue:t(s).observacao,"onUpdate:modelValue":v[0]||(v[0]=E=>t(s).observacao=E),required:"","error-messages":t(b).observacao.$errors.map(E=>E.$message),onBlur:t(b).observacao.$touch,onInput:t(b).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),_("div",null,[_("img",{class:"btn-pointer ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:w})])]),_:1}),e(O,null,{default:o(()=>[e(U,null,{default:o(()=>[e(de,{style:{height:"465px"},headers:y,items:t(V)},{"item.actions":o(({item:E})=>[_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ve=>a(E),title:"Deletar Observação"},[E.excluido?(f(),G("img",xt)):(f(),G("img",kt))],8,ht)]),_:1},8,["items"])]),_:1})]),_:1}),e(O,null,{default:o(()=>[e(L,{onClick:j},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>[B("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},$t=_("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Je,alt:"Escanear"},null,-1),Vt=[$t],wt=_("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ae,alt:"Criar"},null,-1),Pt=[wt],Ct=["onClick"],Et=_("img",{style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar"},null,-1),Tt=[Et],At=["onClick"],St={key:0,style:{width:"30px",height:"30px"},src:me,alt:"Visualizar",title:"Reativar"},qt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},zt={__name:"Anexos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(N){const m=N,i=ee(),{$toast:c}=X(),x=H(),$=Q(),d=`${i.public.biometria}/run-scanner`,u=`${i.public.managemant}/atos_anexos`,D=`${i.public.managemant}/atos_anexos`,k=n(!1),S=n([]),A=se({descricao:""}),g=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}];async function V(){try{await C(),await y()}catch(a){console.error("Erro ao executar scanner ou listar arquivos:",a)}}async function C(){try{const{data:a}=await P(d,{method:"GET"},"$WazoKp68Tw")}catch(a){c.error("Erro ao acionar o scanner:",a)}}async function y(){try{const{data:a,status:h}=await P("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:m.ato_token,cartorio_token:M("user-data").value.cartorio_token}},"$03Wxiia3aI")}catch(a){console.error("Erro ao enviar o arquivo:",a)}}const s=async()=>{k.value=!0},I=async()=>{const{data:a,error:h,status:j}=await P(u,{method:"POST",body:{ato_id:m.ato_id,descricao:A.descricao,user_id:M("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$D2PdkmlmwW");j.value==="success"&&(c.success("Anexo registrado com sucesso!"),S.value.push(a.value))};async function b(a){a.excluido=!a.excluido;try{await P(`${D}/${a.id}`,{method:"PUT",body:JSON.stringify({excluido:a.excluido})},"$WyW0hasRPI")}catch(h){console.error("Erro ao excluir pessoa:",h)}}const w=()=>{const a=$.query.origem||"criar",h=$.query.id;a==="atualizar"?x.push(`/os/atualizar/${h}`):x.push("/os/criar-registro")};return(a,h)=>{const j=te;return f(),R(re,null,{default:o(()=>[e(O,null,{default:o(()=>[e(U,{cols:"5"},{default:o(()=>[e(Z,{modelValue:t(A).descricao,"onUpdate:modelValue":h[0]||(h[0]=l=>t(A).descricao=l),label:"Descrição"},null,8,["modelValue"])]),_:1}),_("div",{onClick:V,title:"Escanear"},Vt),_("div",{onClick:I,title:"Criar"},Pt)]),_:1}),e(de,{headers:g,items:t(S),style:{height:"465px","max-width":"600px"}},{"item.actions":o(({item:l})=>[e(O,null,{default:o(()=>[_("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:v=>s(l),title:"Visualizar Anexo"},Tt,8,Ct),_("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:v=>b(l),title:"Deletar Pessoa"},[l.excluido?(f(),G("img",St)):(f(),G("img",qt))],8,At)]),_:2},1024)]),_:1},8,["items"]),e(Ve,{modelValue:t(k),"onUpdate:modelValue":h[2]||(h[2]=l=>oe(k)?k.value=l:null),width:"600"},{default:o(()=>[e(ne,{"max-width":"600",title:"Anexo"},{default:o(()=>[e(W,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:h[1]||(h[1]=l=>k.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(j,{onClick:w},{default:o(()=>[e(W,{size:"large",color:"red"},{default:o(()=>[B("Voltar")]),_:1})]),_:1})]),_:1})}}},Ht={__name:"procuracao",props:{ato_token:{type:String,required:!0}},setup(N){const m=N,i=n(null),c=n(null),x=n(null),$=n(null),d=n(null),u=n(!1),D=n(m.ato_token),k=({id:g,token:V})=>{i.value=g,c.value=V,u.value=!0},S=g=>{x.value=g},A=g=>{$.value=g};return(g,V)=>{const C=Xe,y=pt,s=vt,I=yt,b=bt,w=zt;return f(),R(ne,{width:"1300"},{default:o(()=>[e(He,{modelValue:t(d),"onUpdate:modelValue":V[0]||(V[0]=a=>oe(d)?d.value=a:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(K,{value:"dados"},{default:o(()=>[B("Dados")]),_:1}),t(u)?(f(),R(K,{key:0,value:"partes"},{default:o(()=>[B("Partes")]),_:1})):F("",!0),t(u)?(f(),R(K,{key:1,value:"minuta"},{default:o(()=>[B("Minuta")]),_:1})):F("",!0),t(u)?(f(),R(K,{key:2,value:"livro"},{default:o(()=>[B("Livro")]),_:1})):F("",!0),t(u)?(f(),R(K,{key:3,value:"observacao"},{default:o(()=>[B("Observações")]),_:1})):F("",!0),t(u)?(f(),R(K,{key:4,value:"anexo"},{default:o(()=>[B("Anexos")]),_:1})):F("",!0)]),_:1},8,["modelValue"]),e(Qe,{modelValue:t(d),"onUpdate:modelValue":V[1]||(V[1]=a=>oe(d)?d.value=a:null)},{default:o(()=>[e(J,{value:"dados"},{default:o(()=>[e(C,{onSaved:k,ato_token:t(D)},null,8,["ato_token"])]),_:1}),t(u)?(f(),R(J,{key:0,value:"partes"},{default:o(()=>[e(y,{ato_token:t(D),ato_id:t(i)},null,8,["ato_token","ato_id"])]),_:1})):F("",!0),t(u)?(f(),R(J,{key:1,value:"minuta"},{default:o(()=>[e(s,{onPage:S,onDoc:A,ato_token:t(c)},null,8,["ato_token"])]),_:1})):F("",!0),t(u)?(f(),R(J,{key:2,value:"livro"},{default:o(()=>[e(I,{pages:t(x),ato_token:t(c),document:t($)},null,8,["pages","ato_token","document"])]),_:1})):F("",!0),t(u)?(f(),R(J,{key:3,value:"observacao"},{default:o(()=>[e(b,{ato_id:t(i)},null,8,["ato_id"])]),_:1})):F("",!0),t(u)?(f(),R(J,{key:4,value:"anexo"},{default:o(()=>[e(w,{ato_token:t(c),ato_id:t(i)},null,8,["ato_token","ato_id"])]),_:1})):F("",!0)]),_:1},8,["modelValue"])]),_:1})}}};export{Ht as default};
