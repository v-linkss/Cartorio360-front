import{_ as F}from"./DeSPCBoI.js";import{_ as E}from"./BVz1G1IN.js";import{_ as L}from"./60nPlHlz.js";import{G as S,r as h,n as I,A as j,s as l,p as q,w as i,K as G,q as K,o as r,b as s,a,V as f,C as x,d as M,t as W,c as m}from"./DdVW3JPf.js";import{_ as Z}from"./p1uKcEMj.js";import{_ as H,a as J}from"./DJvq3mCv.js";import{f as V}from"./D3Er4-BI.js";import{V as O}from"./9xbAygVN.js";import{V as $}from"./Du4g2KRY.js";import{V as Q}from"./CwNnN8V6.js";import"./CrPlJ0Wg.js";import"./CKDtF8Ti.js";import"./D9ml0-vo.js";import"./PtWDo2hh.js";import"./DNHEOMiZ.js";const X=""+new URL("visualizar-vermelho.BmNZ_xMd.png",import.meta.url).href,Y={style:{width:"200px"}},ee={style:{width:"150px"}},te={style:{width:"300px"}},oe=["onClick"],ae={key:0,style:{width:"30px",height:"30px"},src:L,alt:"Visualizar",title:"Possui Ficha"},se={key:1,style:{width:"30px",height:"30px"},src:X,alt:"Visualizar",title:"N達o Ficha"},ie=["onClick"],le=["onClick"],re={key:0,style:{width:"30px",height:"30px"},src:H,alt:"Visualizar",title:"Reativar"},ne={key:1,src:J,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Ce={__name:"index",async setup(ce){let n,y;const g=K(),w=`${g.public.auth}/service/gerencia/getAllPessoa`,k=`${g.public.auth}/service/gerencia/updatePessoa`,v=S(),c=h(""),d=h(""),u=h(""),C=[{title:"Documento",value:"doc_identificacao",width:"190px"},{title:"Cart達o",value:"numero_ficha"},{title:"Nome/Raz達o Social",value:"nome",width:"400px"},{value:"actions"}],{data:z,status:b}=([n,y]=I(()=>V(`${w}?pageNumber=1&pageSize=1000000`)),n=await n,y(),n),N=j(()=>{const t=e=>e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""):"";return z.value.data.filter(e=>{const _=t(e.doc_identificacao),o=t(e.nome),p=t(e.numero_ficha),U=_.includes(t(d.value)),A=o.includes(t(c.value)),B=p.includes(t(u.value));return U&&A&&B})});function D(t){if(!t)return"";const e=t.replace(/\D/g,"");return e.length===11?e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):e.length===14?e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):t}async function T(t){t.excluido=!t.excluido;try{await V(`${k}/${t.id}`,{method:"PUT",body:{excluido:t.excluido}})}catch(e){console.error("Erro ao excluir pessoa:",e)}}function P(t){v.push({path:`/pessoas/vizualizar/${t}`})}function R(t){v.push({path:`/pessoas/atualizar/${t}`})}return(t,e)=>{const _=F;return l(b)==="success"?(r(),q(O,{key:0,class:"mt-5"},{default:i(()=>[s(_,{to:"/pessoas/cadastro"},{default:i(()=>e[3]||(e[3]=[a("img",{style:{cursor:"pointer"},src:E,alt:"Cadastro"},null,-1)])),_:1}),s($,{style:{gap:"1rem"}},{default:i(()=>[a("div",Y,[s(f,{class:"mt-7 mb-4",modelValue:l(d),"onUpdate:modelValue":e[0]||(e[0]=o=>x(d)?d.value=o:null),label:"Documento","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),a("div",ee,[s(f,{class:"mt-7 mb-4",modelValue:l(u),"onUpdate:modelValue":e[1]||(e[1]=o=>x(u)?u.value=o:null),label:"Cart達o","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),a("div",te,[s(f,{class:"mt-7 mb-4",modelValue:l(c),"onUpdate:modelValue":e[2]||(e[2]=o=>x(c)?c.value=o:null),label:"Pessoa","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),s(Q,{density:"compact",headers:C,items:l(N),"item-key":"id","items-per-page-options":[10,25,50]},{"item.doc_identificacao":i(({item:o})=>[M(W(D(o.doc_identificacao)),1)]),"item.actions":i(({item:o})=>[s($,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:i(()=>[a("div",{style:{cursor:"pointer"},onClick:p=>P(o.id),title:"Visualizar"},[o.link_ficha?(r(),m("img",ae)):(r(),m("img",se))],8,oe),a("div",{style:{cursor:"pointer"},onClick:p=>R(o.id),title:"Atualizar"},e[4]||(e[4]=[a("img",{style:{width:"30px",height:"30px"},src:Z,alt:"Atualizar"},null,-1)]),8,ie),a("div",{style:{cursor:"pointer"},onClick:p=>T(o),title:"Deletar"},[o.excluido?(r(),m("img",re)):(r(),m("img",ne))],8,le)]),_:2},1024)]),_:1},8,["items"])]),_:1})):G("",!0)}}};export{Ce as default};
