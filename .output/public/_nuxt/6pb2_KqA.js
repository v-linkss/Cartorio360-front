import{_ as ro}from"./BsVnlWHq.js";import{_ as no,a as io}from"./BCD3fSC4.js";import{_ as uo}from"./BoWnh_Zw.js";import{_ as po}from"./BK8g591F.js";import{_ as F}from"./DsetoXn0.js";import{_ as _o}from"./DAZXULAK.js";import{_ as co,u as mo,m as vo,r as d,n as S,p as fo,q as yo,s as ko,v as Vo,c as U,b as s,w as r,a as i,x as l,y as bo,z as go,F as ho,A as $o,o as h,B as y,V as p,C as xo,D as wo,E as Ao,G as Co}from"./DZLix1Jq.js";import{_ as So,a as Uo}from"./DJvq3mCv.js";import{u as k}from"./C8AAuiZ-.js";import{f as $}from"./B0IxRygJ.js";import{f as Do}from"./DQrh2cos.js";import{V as Oo}from"./Db9coQLU.js";import{V as Po}from"./CySHFd79.js";import{V as D}from"./BkHOjNnW.js";import{V as u}from"./BPeq6mzW.js";import{V as O}from"./DgpHFTe0.js";import{V as To}from"./CRO3RK0A.js";import"./ik190lcV.js";import"./BQHu3Kol.js";import"./Bw-4aoy9.js";import"./lCPdiPOb.js";import"./Bj5GDgnJ.js";import"./BPx9KyGw.js";import"./BVz1G1IN.js";import"./IHORa5Pl.js";import"./pMM7_ndP.js";const Eo=""+new URL("btn_cancela_lavratura.DGZVG9h_.png",import.meta.url).href,No=["innerHTML"],zo={style:{width:"1300px",margin:"0 auto"}},Ro={style:{display:"flex",gap:"4px","justify-content":"center"}},qo=["onClick"],Mo=["onClick"],Io=["onClick","title"],Lo=["disabled","onClick"],Fo=["onClick"],Ho={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:So,alt:"Visualizar",title:"Reativar"},Bo={key:1,src:Uo,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},jo={__name:"index",setup(Jo){const v=$o(),{$toast:P}=mo(),H=`${v.public.managemant}/listarUsuarios`,B=`${v.public.managemant}/listar_tipo_atos`,j=`${v.public.managemant}/cancela_lavratura`,J=`${v.public.managemant}/updateAtos`,T=`${v.public.managemant}/pesquisaAtos`,V=vo(),b=d(S("auth_token").value)||null,x=d(S("user-data").value.cartorio_token)||null,w=d(!1),g=d([]),E=d([]),N=d([]),G=d(["PENDENTE","EM ANDAMENTO","CONCLUÍDA","LAVRADA"]),z=d(!1),A=d(!1),R=d(""),W=d(null),Y=d({}),C=d(!1),q=d(null),e=fo({numero:null,data_inicio:M(),data_fim:M(),data_lavratura_inicio:null,data_lavratura_fim:null,protocolo:null,parte:null,livro:null,folha:null,situacao:null,usuario_token:b.value,selo:null,ato_tipo_token:null,apresentante_cpf:null,apresentante_nome:null,valor:null}),Z=[{title:"ID/Protocolo",key:"protocoloId",width:"70px",value:o=>o.protocolo?`${o.id}
${o.protocolo}`:`${o.id}`,cellProps:{style:{whiteSpace:"pre-line",lineHeight:"2"}}},{title:"Abertura/CPF",key:"aberturaCpf",value:o=>o.dt_abertura?`${o.dt_abertura}
${o.apresentante_cpf}`:`${o.apresentante_cpf}`,cellProps:{style:{whiteSpace:"pre-line",lineHeight:"2"}}},{title:"Data lavratura/Parte",key:"lavraturaNome",value:o=>o.dt_lavratura?`${o.dt_lavratura}
${o.apresentante_nome}`:`${o.apresentante_nome}`,cellProps:{style:{whiteSpace:"pre-line",lineHeight:"2"}}},{title:"N° OS",value:"numero_os"},{title:"Usuario",value:"usuario_nome"},{title:"Situação/Serviço",key:"situacaoServico",value:o=>o.situacao?`${o.situacao}
${o.ato_servico}`:`${o.ato_servico}`,cellProps:{style:{whiteSpace:"pre-line",lineHeight:"2"}}},{title:"Livro",value:"livro_numero"},{title:"Folha",value:"folha"},{title:"Valor",value:"valor"},{title:"Ações",value:"actions"}];function M(){const o=new Date,a=o.getFullYear(),n=String(o.getMonth()+1).padStart(2,"0");return`${String(o.getDate()).padStart(2,"0")}-${n}-${a}`}function c(o){if(!o)return null;const[a,n,_]=o.split("/");return`${_}-${n}-${a}`}async function I(){const o=sessionStorage.getItem("pesquisaAto"),a=JSON.parse(o),{data:n}=await k(T,{method:"POST",body:{cartorio_token:S("user-data").value.cartorio_token,usuario_token:a.usuario_token||b.value,data_fim:c(a==null?void 0:a.data_fim),data_inicio:c(a==null?void 0:a.data_inicio)}},"$1U9Iv6Es1X");n.value.length>0&&(g.value=n.value.map(_=>({..._,dt_lavratura:_.dt_lavratura?$(_.dt_lavratura,"dd/mm/yyyy hh:mm"):null,dt_abertura:$(_.dt_abertura,"dd/mm/yyyy")})))}async function K(){const{data:o}=await k(H,{method:"POST",body:{cartorio_token:x.value}},"$hvipqUJYtS");E.value=o.value}async function Q(){try{sessionStorage.setItem("pesquisaAto",JSON.stringify(e));const{data:o,error:a}=await k(T,{method:"POST",body:{cartorio_token:x.value,numero:e.numero||null,data_inicio:c(e.data_inicio)||null,data_fim:c(e.data_fim)||null,data_lavratura_inicio:c(e.data_lavratura_inicio)||null,data_lavratura_fim:c(e.data_lavratura_fim)||null,protocolo:e.protocolo||null,livro:e.livro||null,folha:e.folha||null,situacao:e.situacao||null,usuario_token:e.usuario_token,selo:e.selo||null,ato_tipo_token:e.ato_tipo_token,parte:e.parte||null}},"$OjamgBH6nj");o.value.length>0?g.value=o.value.map(n=>({...n,dt_lavratura:n.dt_lavratura?$(n.dt_lavratura,"dd/mm/yyyy hh:mm"):null,dt_abertura:n.dt_abertura?$(n.dt_abertura,"dd/mm/yyyy"):null})):(g.value=[],P.error("Não existe ato Registrado!"))}catch(o){console.error("Erro na requisição",o)}}const X=o=>{o.rota==="/fontes/atos/ato-com-bem/geral"||o.rota==="/fontes/atos/ato-sem-bem/geral"?V.push({path:`/fontes/atos/atos-com-bem/atualizar/${o.id}`,query:{origem:"atualizar-lista",id:o.id,ato_id:o.id,tipo_ato_token:o.tipo_token,tipo_ato:o.tipo,ato_token_edit:o.token,numero_os:o.numero_os}}):o.rota==="/fontes/atos/divorcio/geral"&&V.push({path:`/fontes/atos/divorcio/atualizar/${o.id}`,query:{origem:"atualizar-lista",id:o.id,ato_id:o.id,tipo_ato_token:o.tipo_token,tipo_ato:o.tipo,ato_token_edit:o.token,numero_os:o.numero_os}})};async function oo(){const{data:o,error:a}=await k(B,{method:"POST",body:{cartorio_token:x.value,usuario_token:b.value,tipo_retorno:"servico_ato"}},"$QxIfw0Zxe4");N.value=o.value.map(n=>({...n,descricao:n.descricao.replace(/\(/g,"<br>(")}))}const ao=o=>{q.value=o,C.value=!0};async function to(o){o.excluido=!o.excluido;try{await Do(`${J}/${o.id}`,{method:"PUT",body:{excluido:o.excluido}})}catch(a){console.error("Erro ao excluir pessoa:",a)}}const L=async o=>{const{data:a,status:n}=await k(j,{method:"POST",body:{ato_token:o,user_token:b.value,cancelar_selo:!1}},"$ceiptlfDNO");n.value==="success"&&a.value[0].status==="OK"?P.success("Lavratura cancelada com sucesso!"):a.value[0].status==="ERRO"&&(A.value=!0,R.value=a.value[0].status_mensagem)},eo=o=>{o.rota==="/fontes/atos/ato-com-bem/geral"||o.rota==="/fontes/atos/ato-sem-bem/geral"?V.push({path:`/fontes/atos/atos-com-bem/atualizar/${o.id}`,query:{origem:"atualizar-lista",id:o.id,ato_id:o.id,tipo_ato_token:o.tipo_token,tipo_ato:o.tipo,ato_token_edit:o.token,numero_os:o.numero_os}}):o.rota==="/fontes/atos/divorcio/geral"&&V.push({path:`/fontes/atos/divorcio/atualizar/${o.id}`,query:{origem:"atualizar-lista",id:o.id,ato_id:o.id,tipo_ato_token:o.tipo_token,tipo_ato:o.tipo,ato_token_edit:o.token,numero_os:o.numero_os}})};return yo(()=>{ko(async()=>{const o=sessionStorage.getItem("pesquisaAto");if(o){const a=JSON.parse(o);Object.assign(e,a)}await I()})}),K(),oo(),(o,a)=>{const n=ro,_=no,lo=uo,so=po,f=Vo("mask");return h(),U(ho,null,[s(Oo,{class:"mt-5"},{default:r(()=>[s(D,{class:"mb-5"},{default:r(()=>a[19]||(a[19]=[i("h1",null,"Atos",-1)])),_:1}),s(D,null,{default:r(()=>[s(u,{cols:"2"},{default:r(()=>[y(s(p,{modelValue:l(e).data_inicio,"onUpdate:modelValue":a[0]||(a[0]=t=>l(e).data_inicio=t),label:"Abertura de",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[f,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:r(()=>[y(s(p,{modelValue:l(e).data_fim,"onUpdate:modelValue":a[1]||(a[1]=t=>l(e).data_fim=t),label:"Abertura até",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[f,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:r(()=>[y(s(p,{modelValue:l(e).data_lavratura_inicio,"onUpdate:modelValue":a[2]||(a[2]=t=>l(e).data_lavratura_inicio=t),label:"Lavratura de",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[f,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:r(()=>[y(s(p,{modelValue:l(e).data_lavratura_fim,"onUpdate:modelValue":a[3]||(a[3]=t=>l(e).data_lavratura_fim=t),label:"Lavratura até",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[f,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:r(()=>[s(p,{modelValue:l(e).numero,"onUpdate:modelValue":a[4]||(a[4]=t=>l(e).numero=t),label:"N° OS"},null,8,["modelValue"])]),_:1}),s(u,{cols:"2"},{default:r(()=>[s(p,{modelValue:l(e).selo,"onUpdate:modelValue":a[5]||(a[5]=t=>l(e).selo=t),label:"Selo",dense:""},null,8,["modelValue"])]),_:1})]),_:1}),s(D,null,{default:r(()=>[s(u,{cols:"2"},{default:r(()=>[s(p,{modelValue:l(e).protocolo,"onUpdate:modelValue":a[6]||(a[6]=t=>l(e).protocolo=t),label:"Protocolo"},null,8,["modelValue"])]),_:1}),s(u,{cols:"2"},{default:r(()=>[y(s(p,{modelValue:l(e).apresentante_cpf,"onUpdate:modelValue":a[7]||(a[7]=t=>l(e).apresentante_cpf=t),label:"CPF",dense:""},null,8,["modelValue"]),[[f,"###.###.###-##"]])]),_:1}),s(u,{cols:"3"},{default:r(()=>[s(p,{modelValue:l(e).parte,"onUpdate:modelValue":a[8]||(a[8]=t=>l(e).parte=t),label:"Parte",dense:""},null,8,["modelValue"])]),_:1}),s(u,{cols:"3"},{default:r(()=>[s(O,{modelValue:l(e).ato_tipo_token,"onUpdate:modelValue":a[9]||(a[9]=t=>l(e).ato_tipo_token=t),items:l(N),"item-value":"token",label:"Tipo Serviço","menu-props":{maxWidth:"680px",width:"680px"},dense:""},{item:r(({props:t,item:m})=>[s(To,xo(wo(t)),{title:r(()=>[i("span",{innerHTML:m.raw.descricao},null,8,No)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1}),s(u,{cols:"2"},{default:r(()=>[s(O,{items:l(E),modelValue:l(e).usuario_token,"onUpdate:modelValue":a[10]||(a[10]=t=>l(e).usuario_token=t),"item-title":"user_nome","item-value":"user_token",label:"Usuário",dense:""},null,8,["items","modelValue"])]),_:1}),s(u,{cols:"3"},{default:r(()=>[s(O,{modelValue:l(e).situacao,"onUpdate:modelValue":a[11]||(a[11]=t=>l(e).situacao=t),items:l(G),label:"Situação",dense:""},null,8,["modelValue","items"])]),_:1}),s(u,{cols:"1"},{default:r(()=>[s(p,{modelValue:l(e).livro,"onUpdate:modelValue":a[12]||(a[12]=t=>l(e).livro=t),label:"Livro",dense:""},null,8,["modelValue"])]),_:1}),s(u,{cols:"1"},{default:r(()=>[s(p,{modelValue:l(e).folha,"onUpdate:modelValue":a[13]||(a[13]=t=>l(e).folha=t),label:"Folha",dense:""},null,8,["modelValue"])]),_:1}),s(u,null,{default:r(()=>[i("div",null,[i("img",{onClick:Q,style:{width:"40px",height:"40px",cursor:"pointer"},src:F,alt:"Pesquisar"})])]),_:1})]),_:1})]),_:1}),i("div",zo,[a[23]||(a[23]=i("hr",{class:"mt-5 mb-5"},null,-1)),s(Po,{headers:Z,items:l(g),style:{"font-size":"12px"},"item-key":"id"},{"item.actions":r(({item:t})=>[i("div",Ro,[i("div",{onClick:m=>X({id:t.id,tipo:t.ato_servico,token:t.token,tipo_token:t.tipo_token,rota:t.rota,numero_os:t.numero_os}),title:"Visualizar"},a[20]||(a[20]=[i("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:F,alt:"Visualizar"},null,-1)]),8,qo),i("div",{onClick:m=>ao(t.token),title:"Reimprimir"},a[21]||(a[21]=[i("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:io,alt:"Reimprimir"},null,-1)]),8,Mo),i("div",{class:Ao({disabled:!t.btn_editar}),onClick:m=>t.btn_editar?eo({id:t.id,tipo:t.ato_servico,token:t.token,tipo_token:t.tipo_token,rota:t.rota,numero_os:t.numero_os}):null,title:t.btn_editar?"Editar":"Desabilitado"},[i("img",{style:Co({cursor:t.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:_o,alt:"Editar"},null,4)],10,Io),i("div",{disabled:!t.btn_cancelar,onClick:m=>t.btn_cancelar?L(t.token):null,title:"Excluir"},a[22]||(a[22]=[i("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:Eo,alt:"Cancelar",title:"Cancelar"},null,-1)]),8,Lo),i("div",{onClick:m=>to(t),title:"Excluir"},[t.excluido?(h(),U("img",Ho)):(h(),U("img",Bo))],8,Fo)])]),_:1},8,["items"])]),l(w)?(h(),bo(n,{key:0,show:l(w),servicos:o.dadosData.servicos||[],tiposAtos:o.dadosData.tiposAtos||[],onClose:a[14]||(a[14]=t=>w.value=!1),onUpdateAto:o.handleUpdateAto},null,8,["show","servicos","tiposAtos","onUpdateAto"])):go("",!0),s(_,{show:l(C),ato_token:l(q),onClose:a[15]||(a[15]=t=>C.value=!1)},null,8,["show","ato_token"]),s(lo,{show:l(z),numero_os:l(W),ordem:l(Y),onClose:a[16]||(a[16]=t=>z.value=!1),onRefreshValue:a[17]||(a[17]=t=>I())},null,8,["show","numero_os","ordem"]),s(so,{show:l(A),condMessage:l(R),onClose:a[18]||(a[18]=t=>A.value=!1),onConfirm:L},null,8,["show","condMessage"])],64)}}},Va=co(jo,[["__scopeId","data-v-dd3d7b19"]]);export{Va as default};
