import{_ as te}from"./Bh4gPtqy.js";import{b as se,c as ie,d as de,e as ne,f as ue,g as me}from"./Be1BTeLb.js";import{_ as re,r as f,D as pe,u as ce,H as fe,m as R,E as _e,n as ve,L as Ve,C as p,w as t,A as be,o as u,a as w,t as Ce,s as o,b as a,c as E,O as Ie,d as c,J as V,v as B,V as m,M as g,z as J}from"./EhouhAgw.js";import{$ as k,f as ke}from"./DLQ6RNRN.js";import{f as xe,a as ye}from"./B0IxRygJ.js";import{V as ge}from"./CzMneozR.js";import{V as U}from"./BiBj2GS7.js";import{V as b,a as Ue,e as C,d as Ae}from"./Dk9ZD94-.js";import{V as M}from"./D2IiOHFH.js";import{V as I}from"./CiYD_HWu.js";import{V as d}from"./By2JFqVX.js";import{V as De}from"./D94CoYSm.js";import"./DgVJQkan.js";import"./BLr7k3Y2.js";import"./BVz1G1IN.js";import"./DF-JZyPT.js";import"./DJvq3mCv.js";import"./BQ7QHoyj.js";import"./Bnt4aOAW.js";import"./NVVPz1_n.js";import"./MRGzRH5R.js";import"./CJlK7UN7.js";import"./DbmbSVZU.js";import"./CW2klcZC.js";const Pe={style:{"background-color":"#f5f2f2",color:"#525050",padding:"10px 0px 0px 20px"}},Re={style:{"background-color":"#f5f2f2",padding:"20px 0px 20px 20px"}},$e={key:0,class:"d-flex justify-center"},Fe={key:1},Se={__name:"[id]",emits:["saved"],setup(Ne,{emit:Te}){const _=f(null),z=pe(),{$toast:W}=ce(),L=fe(),{id:x}=L.params,v=be(),O=`${v.public.auth}/service/gerencia/updatePessoa`,j=`${v.public.auth}/service/gerencia/listarEstadoCivil`,G=`${v.public.auth}/service/gerencia/listarCapacidadeCivil`,H=`${v.public.auth}/service/gerencia/listarCidades`,q=`${v.public.auth}/service/gerencia/getPessoaById`,K=`${v.public.auth}/service/gerencia/listarSexo`,$=f([]),F=f([]),S=f([]),N=f([]),A=f(!0),T=f(null),Q={nome:null,nome_pai:null,nome_mae:null,profissao:null,data_nascimento:null,doc_identificacao:null,cpf_pai:null,cpf_mae:null,tipo_pessoa:"FISICA",tabvalores_estadocivil_id:null,tabvalores_capacidadecivil_id:null,cidade_natural_id:null,tabvalores_sexo_id:null,cartorio_id:R("user-data").value.cartorio_id,user_id:R("user-data").value.usuario_id},X=[{label:"FÍSICA",value:"FISICA"},{label:"JURÍDICA",value:"JURIDICA"},{label:"ESTRANGEIRA",value:"ESTRANGEIRA"}],l=_e({...Q});function Y(i){if(i)return i.replace(/[.\-]/g,"");i=null}async function Z(){try{const[i,e,n,r,D]=await Promise.all([k(j),k(G),k(H),k(`${q}/${x}`),k(K)]),P=R("pessoa_token");P.value=r.token,$.value=i,F.value=e,S.value=n,N.value=D,r.data_nascimento&&(r.data_nascimento=xe(r.data_nascimento,"dd/mm/yyyy")),T.value=r.link_ficha,Object.assign(l,r)}catch(i){console.error("Erro ao carregar os dados da pessoa:",i)}finally{A.value=!1}}ve(()=>{x?Z():A.value=!1});function h(i){const e={};for(const n in i)switch(n){case"doc_identificacao":case"cpf_pai":case"cpf_mae":e[n]=Y(i[n]);break;case"data_nascimento":e[n]=ye(i[n]);break;default:e[n]=i[n]===""?null:i[n];break}return e}async function ee(){const i=h(l);await ke(`${O}/${x}`,{method:"PUT",body:i}),W.success("Pessoa atualizada com sucesso!"),z.push("/pessoas/lista")}return(i,e)=>{const n=te,r=se,D=ie,P=de,ae=ne,oe=ue,le=me,y=Ve("mask");return u(),p(ge,{width:"1300"},{default:t(()=>[w("h1",Pe,Ce(o(x)?"Atualização de Pessoas":"Cadastramento de Pessoas"),1),w("div",Re,[a(U,{modelValue:o(l).tipo_pessoa,"onUpdate:modelValue":e[0]||(e[0]=s=>o(l).tipo_pessoa=s),style:{width:"200px"},items:X,"item-title":"label","item-value":"value",label:"Tipo de pessoa","bg-color":"#F6F6F6",disabled:""},null,8,["modelValue"])]),o(A)?(u(),E("div",$e,[a(Ie,{indeterminate:"",class:"loading-spinner",size:"64"})])):(u(),E("div",Fe,[a(Ue,{modelValue:o(_),"onUpdate:modelValue":e[1]||(e[1]=s=>B(_)?_.value=s:null),"bg-color":"#f5f2f2"},{default:t(()=>[a(b,{value:"dados"},{default:t(()=>e[17]||(e[17]=[c("Dados")])),_:1}),o(l).tipo_pessoa==="FISICA"?(u(),p(b,{key:0,value:"documento"},{default:t(()=>e[18]||(e[18]=[c("Documentos")])),_:1})):V("",!0),o(l).tipo_pessoa==="JURIDICA"?(u(),p(b,{key:1,value:"representante"},{default:t(()=>e[19]||(e[19]=[c("Representantes")])),_:1})):V("",!0),o(l).tipo_pessoa==="JURIDICA"||o(l).tipo_pessoa==="FISICA"?(u(),p(b,{key:2,value:"endereco"},{default:t(()=>e[20]||(e[20]=[c("Endereços")])),_:1})):V("",!0),o(l).tipo_pessoa==="FISICA"?(u(),p(b,{key:3,value:"biometria"},{default:t(()=>e[21]||(e[21]=[c("Biometria")])),_:1})):V("",!0),o(l).tipo_pessoa==="JURIDICA"||o(l).tipo_pessoa==="FISICA"?(u(),p(b,{key:4,value:"restricao"},{default:t(()=>e[22]||(e[22]=[c("Restrições")])),_:1})):V("",!0)]),_:1},8,["modelValue"]),a(Ae,{modelValue:o(_),"onUpdate:modelValue":e[16]||(e[16]=s=>B(_)?_.value=s:null)},{default:t(()=>[a(C,{value:"dados"},{default:t(()=>[o(l).tipo_pessoa==="FISICA"?(u(),p(M,{key:0},{default:t(()=>[a(I,null,{default:t(()=>[a(d,{cols:"12",md:"6"},{default:t(()=>[a(m,{modelValue:o(l).nome,"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).nome=s),label:"Nome"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"4"},{default:t(()=>[g(a(m,{modelValue:o(l).doc_identificacao,"onUpdate:modelValue":e[3]||(e[3]=s=>o(l).doc_identificacao=s),label:"CPF"},null,8,["modelValue"]),[[y,"###.###.###-##"]])]),_:1}),a(d,{md:"2"},{default:t(()=>[a(De,{label:"Sexo",modelValue:o(l).tabvalores_sexo_id,"onUpdate:modelValue":e[4]||(e[4]=s=>o(l).tabvalores_sexo_id=s),items:o(N),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(I,null,{default:t(()=>[a(d,{cols:"12",md:"4"},{default:t(()=>[a(U,{modelValue:o(l).tabvalores_estadocivil_id,"onUpdate:modelValue":e[5]||(e[5]=s=>o(l).tabvalores_estadocivil_id=s),items:o($),"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),a(d,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o(l).profissao,"onUpdate:modelValue":e[6]||(e[6]=s=>o(l).profissao=s),label:"Profissão"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o(l).local_trabalho,"onUpdate:modelValue":e[7]||(e[7]=s=>o(l).local_trabalho=s),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),a(I,null,{default:t(()=>[a(d,{cols:"12",md:"4"},{default:t(()=>[g(a(m,{modelValue:o(l).data_nascimento,"onUpdate:modelValue":e[8]||(e[8]=s=>o(l).data_nascimento=s),label:"Data de nascimento",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[y,"##/##/####"]])]),_:1}),a(d,{cols:"12",md:"4"},{default:t(()=>[a(U,{modelValue:o(l).tabvalores_capacidadecivil_id,"onUpdate:modelValue":e[9]||(e[9]=s=>o(l).tabvalores_capacidadecivil_id=s),items:o(F),label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),a(d,{cols:"12",md:"4"},{default:t(()=>[a(U,{modelValue:o(l).cidade_natural_id,"onUpdate:modelValue":e[10]||(e[10]=s=>o(l).cidade_natural_id=s),items:o(S),label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(I,null,{default:t(()=>[a(d,{cols:"12",md:"4"},{default:t(()=>[g(a(m,{modelValue:o(l).cpf_pai,"onUpdate:modelValue":e[11]||(e[11]=s=>o(l).cpf_pai=s),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[y,"###.###.###-##"]])]),_:1}),a(d,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o(l).nome_pai,"onUpdate:modelValue":e[12]||(e[12]=s=>o(l).nome_pai=s),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),a(I,null,{default:t(()=>[a(d,{cols:"12",md:"4"},{default:t(()=>[g(a(m,{modelValue:o(l).cpf_mae,"onUpdate:modelValue":e[13]||(e[13]=s=>o(l).cpf_mae=s),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[y,"###.###.###-##"]])]),_:1}),a(d,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o(l).nome_mae,"onUpdate:modelValue":e[14]||(e[14]=s=>o(l).nome_mae=s),modelModifiers:{date:!0},label:"Nome da Mãe"},null,8,["modelValue"])]),_:1})]),_:1}),a(I,{class:"mb-3"},{default:t(()=>[a(n,{to:"/pessoas/lista"},{default:t(()=>[a(J,{size:"large",color:"red"},{default:t(()=>e[23]||(e[23]=[c("Voltar")])),_:1})]),_:1}),a(J,{onClick:e[15]||(e[15]=s=>ee()),class:"ml-4",size:"large",color:"green"},{default:t(()=>e[24]||(e[24]=[c("Salvar")])),_:1})]),_:1})]),_:1})):o(l).tipo_pessoa==="JURIDICA"?(u(),p(r,{key:1})):V("",!0)]),_:1}),a(C,{value:"documento"},{default:t(()=>[a(D)]),_:1}),a(C,{value:"representante"},{default:t(()=>[a(P)]),_:1}),a(C,{value:"endereco"},{default:t(()=>[a(ae)]),_:1}),a(C,{value:"biometria"},{default:t(()=>[a(M,{class:"mt-5"},{default:t(()=>[a(oe,{"link-ficha":o(T)},null,8,["link-ficha"])]),_:1})]),_:1}),a(C,{value:"restricao"},{default:t(()=>[a(le)]),_:1})]),_:1},8,["modelValue"])]))]),_:1})}}},sa=re(Se,[["__scopeId","data-v-78b49ef4"]]);export{sa as default};
