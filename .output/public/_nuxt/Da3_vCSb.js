import{_ as ue}from"./B8aTIpaA.js";import{ag as P,ah as D,ai as q,aj as E,al as M,b as a,ap as re,ar as ce,as as ee,au as te,aT as ae,aE as R,bg as de,bj as ve,bm as le,ay as me,ak as fe,aA as C,z as y,aB as ge,b7 as O,aK as A,bT as be,r as X,aI as he,H as W,h as oe,I as ye,e4 as Se,aw as _e,bO as ke,e5 as Te,Q as L,a7 as Ve,ao as xe,bc as Be,b0 as Ce,ax as Ne,b1 as we,e6 as Pe,bk as Ie,e7 as He,bS as Re,p as Le,bM as Ee,T as J,bb as Me,bi as Ae,e8 as We,_ as $e,e9 as De,f as U,K as qe,o as B,k as I,w as d,a as j,t as H,M as Oe,c as F,F as z,D as Y,b5 as K,x as $,d as w,dp as Ue,ea as je,m as Fe}from"./BJ8rv8LJ.js";import{V as ze}from"./2tFoWymf.js";import{c as ne,a as Q,b as G,d as Z}from"./DqseQ1le.js";import"./DYLwqQAI.js";const Ye=""+new URL("logo_navbar.WRqgS9jl.png",import.meta.url).href,Je=P({text:String,...D(),...q()},"VToolbarTitle"),Xe=E()({name:"VToolbarTitle",props:Je(),setup(e,f){let{slots:t}=f;return M(()=>{const g=!!(t.default||t.text||e.text);return a(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var u;return[g&&a("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(u=t.default)==null?void 0:u.call(t)])]}})}),{}}}),Ke=[null,"prominent","default","comfortable","compact"],se=P({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Ke.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...re(),...D(),...ce(),...ee(),...q({tag:"header"}),...te()},"VToolbar"),p=E()({name:"VToolbar",props:se(),setup(e,f){var _;let{slots:t}=f;const{backgroundColorClasses:g,backgroundColorStyles:u}=ae(R(e,"color")),{borderClasses:o}=de(e),{elevationClasses:m}=ve(e),{roundedClasses:v}=le(e),{themeClasses:b}=me(e),{rtlClasses:V}=fe(),s=C(!!(e.extended||(_=t.extension)!=null&&_.call(t))),n=y(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),T=y(()=>s.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ge({VBtn:{variant:"text"}}),M(()=>{var l;const c=!!(e.title||t.title),S=!!(t.image||e.image),k=(l=t.extension)==null?void 0:l.call(t);return s.value=!!(e.extended||k),a(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},g.value,o.value,m.value,v.value,b.value,V.value,e.class],style:[u.value,e.style]},{default:()=>[S&&a("div",{key:"image",class:"v-toolbar__image"},[t.image?a(O,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):a(ze,{key:"image-img",cover:!0,src:e.image},null)]),a(O,{defaults:{VTabs:{height:A(n.value)}}},{default:()=>{var r,i,h;return[a("div",{class:"v-toolbar__content",style:{height:A(n.value)}},[t.prepend&&a("div",{class:"v-toolbar__prepend"},[(r=t.prepend)==null?void 0:r.call(t)]),c&&a(Xe,{key:"title",text:e.title},{text:t.title}),(i=t.default)==null?void 0:i.call(t),t.append&&a("div",{class:"v-toolbar__append"},[(h=t.append)==null?void 0:h.call(t)])])]}}),a(O,{defaults:{VTabs:{height:A(T.value)}}},{default:()=>[a(be,null,{default:()=>[s.value&&a("div",{class:"v-toolbar__extension",style:{height:A(T.value)}},[k])]})]})]})}),{contentHeight:n,extensionHeight:T}}}),Qe=P({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ge(e){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=f;let g=0,u=0;const o=X(null),m=C(0),v=C(0),b=C(0),V=C(!1),s=C(!1),n=y(()=>Number(e.scrollThreshold)),T=y(()=>he((n.value-m.value)/n.value||0)),_=()=>{const c=o.value;if(!c||t&&!t.value)return;g=m.value,m.value="window"in c?c.pageYOffset:c.scrollTop;const S=c instanceof Window?document.documentElement.scrollHeight:c.scrollHeight;if(u!==S){u=S;return}s.value=m.value<g,b.value=Math.abs(m.value-n.value)};return W(s,()=>{v.value=v.value||m.value}),W(V,()=>{v.value=0}),oe(()=>{W(()=>e.scrollTarget,c=>{var k;const S=c?document.querySelector(c):window;S&&S!==o.value&&((k=o.value)==null||k.removeEventListener("scroll",_),o.value=S,o.value.addEventListener("scroll",_,{passive:!0}))},{immediate:!0})}),ye(()=>{var c;(c=o.value)==null||c.removeEventListener("scroll",_)}),t&&W(t,_,{immediate:!0}),{scrollThreshold:n,currentScroll:m,currentThreshold:b,isScrollActive:V,scrollRatio:T,isScrollingUp:s,savedScroll:v}}const Ze=P({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...se(),...Se(),...Qe(),height:{type:[Number,String],default:64}},"VAppBar"),pe=E()({name:"VAppBar",props:Ze(),emits:{"update:modelValue":e=>!0},setup(e,f){let{slots:t}=f;const g=X(),u=_e(e,"modelValue"),o=y(()=>{var h;const i=new Set(((h=e.scrollBehavior)==null?void 0:h.split(" "))??[]);return{hide:i.has("hide"),fullyHide:i.has("fully-hide"),inverted:i.has("inverted"),collapse:i.has("collapse"),elevate:i.has("elevate"),fadeImage:i.has("fade-image")}}),m=y(()=>{const i=o.value;return i.hide||i.fullyHide||i.inverted||i.collapse||i.elevate||i.fadeImage||!u.value}),{currentScroll:v,scrollThreshold:b,isScrollingUp:V,scrollRatio:s}=Ge(e,{canScroll:m}),n=y(()=>o.value.hide||o.value.fullyHide),T=y(()=>e.collapse||o.value.collapse&&(o.value.inverted?s.value>0:s.value===0)),_=y(()=>e.flat||o.value.fullyHide&&!u.value||o.value.elevate&&(o.value.inverted?v.value>0:v.value===0)),c=y(()=>o.value.fadeImage?o.value.inverted?1-s.value:s.value:void 0),S=y(()=>{var N,x;const i=Number(((N=g.value)==null?void 0:N.contentHeight)??e.height),h=Number(((x=g.value)==null?void 0:x.extensionHeight)??0);return n.value?v.value<b.value||o.value.fullyHide?i+h:i:i+h});ke(y(()=>!!e.scrollBehavior),()=>{Ve(()=>{n.value?o.value.inverted?u.value=v.value>b.value:u.value=V.value||v.value<b.value:u.value=!0})});const{ssrBootStyles:k}=ne(),{layoutItemStyles:l,layoutIsReady:r}=Te({id:e.name,order:y(()=>parseInt(e.order,10)),position:R(e,"location"),layoutSize:S,elementSize:C(void 0),active:u,absolute:R(e,"absolute")});return M(()=>{const i=p.filterProps(e);return a(p,L({ref:g,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...l.value,"--v-toolbar-image-opacity":c.value,height:void 0,...k.value},e.style]},i,{collapse:T.value,flat:_.value}),t)}),r}}),et=P({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:xe,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...D(),...Be({location:"top end"}),...ee(),...q(),...te(),...Ce({transition:"scale-rotate-transition"})},"VBadge"),tt=E()({name:"VBadge",inheritAttrs:!1,props:et(),setup(e,f){const{backgroundColorClasses:t,backgroundColorStyles:g}=ae(R(e,"color")),{roundedClasses:u}=le(e),{t:o}=Ne(),{textColorClasses:m,textColorStyles:v}=we(R(e,"textColor")),{themeClasses:b}=Pe(),{locationStyles:V}=Ie(e,!0,s=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(s)?+(e.offsetY??0):["left","right"].includes(s)?+(e.offsetX??0):0));return M(()=>{const s=Number(e.content),n=!e.max||isNaN(s)?e.content:s<=+e.max?s:`${e.max}+`,[T,_]=He(f.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return a(e.tag,L({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},_,{style:e.style}),{default:()=>{var c,S;return[a("div",{class:"v-badge__wrapper"},[(S=(c=f.slots).default)==null?void 0:S.call(c),a(Re,{transition:e.transition},{default:()=>{var k,l;return[Le(a("span",L({class:["v-badge__badge",b.value,t.value,u.value,m.value],style:[g.value,v.value,e.inline?{}:V.value],"aria-atomic":"true","aria-label":o(e.label,s),"aria-live":"polite",role:"status"},T),[e.dot?void 0:f.slots.badge?(l=(k=f.slots).badge)==null?void 0:l.call(k):e.icon?a(J,{icon:e.icon},null):n]),[[Ee,e.modelValue]])]}})])]}})}),{}}}),at=P({scrollable:Boolean,...D(),...Me(),...q({tag:"main"})},"VMain"),lt=E()({name:"VMain",props:at(),setup(e,f){let{slots:t}=f;const{dimensionStyles:g}=Ae(e),{mainStyles:u,layoutIsReady:o}=We(),{ssrBootStyles:m}=ne();return M(()=>a(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[u.value,m.value,g.value,e.style]},{default:()=>{var v,b;return[e.scrollable?a("div",{class:"v-main__scroller"},[(v=t.default)==null?void 0:v.call(t)]):(b=t.default)==null?void 0:b.call(t)]}})),o}}),ot={class:"d-flex align-center"},nt={class:"cartorio ml-6"},st={__name:"default",setup(e){const f=Fe(),t=De(),g=[{title:"Alterar Senha"},{title:"Sair"}],u=U("menu-navbar"),o=U("user-data"),m=U("auth_token"),v=y(()=>Object.keys(u.value||{}).filter(l=>l!=="Tela Principal").map(l=>({name:l,subMenus:Object.keys(u.value[l]).map(r=>({name:r,url:u.value[l][r].url}))}))),b=y(()=>{var l;return((l=o.value)==null?void 0:l.nome)??"Usuário"}),V=y(()=>{var l;return((l=o.value)==null?void 0:l.cartorio_nome)??""}),s=X(0);let n=null;function T(){t.push("/chat_atendimento")}function _(){n=new WebSocket(`${f.public.chat_bot}?user_name=${b.value}&room_id=notifications`),n.onopen=()=>{console.log("🔌 WebSocket conectado"),k()},n.onmessage=l=>{try{console.log(l.data);const r=JSON.parse(l.data);switch(r.type){case"notification":console.log("Nova notificação recebida:",r),s.value=r.queue.length||0;break;case"queue_list":console.log("Lista de notificações recebida:",r),s.value=r.totalRequests||0;break}}catch(r){console.error("Falha ao parsear mensagem:",r)}},n.onclose=()=>{console.warn("WebSocket desconectado — reconectando em 5 s…"),setTimeout(_,5e3)},n.onerror=l=>{console.error("Erro WebSocket:",l),n.close()}}oe(_),qe(()=>n==null?void 0:n.close());function c(l){l==="Sair"&&S()}function S(){o.value="",m.value="",t.push("/login")}function k(){if(n&&n.readyState===WebSocket.OPEN){const l={type:"queue_list",message:"1",id:"notifications"};n.send(JSON.stringify(l)),console.log("📤 Evento enviado ao WebSocket:",l)}else console.warn("⚠️ WebSocket não está conectado. Tentando novamente em 1 segundo..."),setTimeout(k,1e3)}return(l,r)=>{const i=ue;return B(),I(je,null,{default:d(()=>[a(pe,{color:"#0a063b",height:"100"},{default:d(()=>[j("div",ot,[r[0]||(r[0]=j("img",{class:"ml-5 mt-2",width:"300",height:"50",src:Ye},null,-1)),j("h3",nt,H(V.value),1)]),a(Oe),(B(!0),F(z,null,Y(v.value,(h,N)=>(B(),I(K,{key:`menu-${N}`},{activator:d(({props:x})=>[a($,L({ref_for:!0},x,{text:"",class:"white--text"}),{default:d(()=>[w(H(h.name),1)]),_:2},1040)]),default:d(()=>[a(Q,null,{default:d(()=>[(B(!0),F(z,null,Y(h.subMenus,(x,ie)=>(B(),I(G,{key:`submenu-${ie}`},{default:d(()=>[a(i,{to:`/${x.url}`,class:"text-decoration-none inherit"},{default:d(()=>[a(Z,null,{default:d(()=>[w(H(x.name),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128)),s.value>0?(B(),I(tt,{key:0,content:s.value,color:"red",overlap:""},{default:d(()=>[a($,{icon:"",onClick:T},{default:d(()=>[a(J,{color:"white"},{default:d(()=>r[1]||(r[1]=[w("mdi-bell")])),_:1})]),_:1})]),_:1},8,["content"])):(B(),I($,{key:1,icon:"",onClick:T},{default:d(()=>[a(J,{color:"white"},{default:d(()=>r[2]||(r[2]=[w("mdi-bell")])),_:1})]),_:1})),a(K,null,{activator:d(({props:h})=>[a($,L({class:"user"},h),{default:d(()=>[w(H(b.value),1)]),_:2},1040)]),default:d(()=>[a(Q,null,{default:d(()=>[(B(),F(z,null,Y(g,(h,N)=>a(G,{key:`item-${N}`,onClick:x=>c(h.title)},{default:d(()=>[a(Z,null,{default:d(()=>[w(H(h.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1}),a(lt,null,{default:d(()=>[Ue(l.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}},vt=$e(st,[["__scopeId","data-v-7188ddf4"]]);export{vt as default};
