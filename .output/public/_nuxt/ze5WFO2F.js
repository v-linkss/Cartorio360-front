import{c as N,r as T,u as M}from"./Byc9VWvC.js";import{r as d,n as _,p as q,g as I,o as R,y as U,w as o,b as a,a as i,t as V,d as c,x as t,G as g,K as z,A as D}from"./DztwtQk6.js";import{u as k}from"./B2tA4ZsP.js";import{V as w,b as F}from"./B9at6Swz.js";import{V as C}from"./NhVSioRR.js";import{V as P}from"./NuMWwLZ5.js";import{V as j}from"./BTLCD0Gb.js";import{V as A}from"./Bxf_3dMK.js";const G={style:{color:"red","margin-left":"18px"}},K={class:"mb-5",style:{display:"flex","justify-content":"flex-start"}},W={class:"ml-6"},X={class:"ml-6"},ae={__name:"Ordem",props:{show:Boolean,numero_os:Number,ordemserv_token:String},emits:["close"],setup(b,{emit:h}){const l=b,n=d(l.show),v=D();d(_("user-data").value.cartorio_token).value;const $=_("auth_token").value,x=`${v.public.managemant}/analisaCancelamento`,y=`${v.public.managemant}/cancelaOs`,m=q({motivo:null}),f=d(null),O=h,B={motivo:{required:N.withMessage("O campo é obrigatorio",T)}},u=M(B,m);I(()=>l.show,s=>{n.value=s});const p=()=>{n.value=!1,O("close")};(async()=>{const{data:s,error:e}=await k(`${x}`,{method:"POST",body:{ordemserv_token:l.ordemserv_token}},"$1fnrIk2fgs");f.value=s.value.mensagem})();const S=async()=>{if(await u.value.$validate()){const{status:s}=await k(`${y}`,{method:"POST",body:{usuario_token:$,motivo:m.motivo,ordemserv_token:l.ordemserv_token}},"$21WlhUNXeM");s.value==="success"&&(window.location.reload(),p())}};return(s,e)=>(R(),U(A,{persistent:"",modelValue:t(n),"onUpdate:modelValue":e[1]||(e[1]=r=>z(n)?n.value=r:null),"max-width":"650"},{default:o(()=>[a(w,null,{default:o(()=>[a(C,null,{default:o(()=>[a(P,{class:"mb-5 mt-1 ml-2"},{default:o(()=>[e[2]||(e[2]=i("h1",null,"Cancelamento da OS nº",-1)),i("h1",G,V(l.numero_os),1)]),_:1}),a(C,null,{default:o(()=>[a(w,{variant:"outlined",class:"mb-5"},{default:o(()=>[a(F,null,{default:o(()=>[c(V(t(f)),1)]),_:1})]),_:1}),a(j,{label:"Motivo",modelValue:t(m).motivo,"onUpdate:modelValue":e[0]||(e[0]=r=>t(m).motivo=r),required:"","error-messages":t(u).motivo.$errors.map(r=>r.$message),onBlur:t(u).motivo.$touch,onInput:t(u).motivo.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1})]),_:1}),i("div",K,[i("div",W,[a(g,{size:"large",color:"red",onClick:p},{default:o(()=>e[3]||(e[3]=[c("Fechar")])),_:1})]),i("div",X,[a(g,{size:"large",color:"green",onClick:S},{default:o(()=>e[4]||(e[4]=[c("Salvar")])),_:1})])])]),_:1})]),_:1},8,["modelValue"]))}};export{ae as _};
