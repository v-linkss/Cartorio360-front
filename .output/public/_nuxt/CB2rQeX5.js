import{_ as le}from"./BtT1aVM4.js";import{b as te,c as se,d as ie,e as de,f as ue,g as ne}from"./BjvDUOMs.js";import{u as me}from"./D9rZ6LwO.js";import{_ as re,r as f,C as pe,u as ce,H as _e,m as P,D as fe,n as ve,Q as Ve,G as r,w as t,s as be,o as n,a as T,t as Ce,v as o,b as a,c as w,M as Ie,d as p,K as v,x as E,V as m,R,A as B}from"./DDtKO7-0.js";import{$ as I,f as xe}from"./V3Wx27PM.js";import{V as ge}from"./Pu_Wl7e0.js";import{V as k}from"./Ci3nKxz8.js";import{a as V,V as ke,c as b,b as Ue}from"./CiwVkHp2.js";import{V as M}from"./D_1A8m3V.js";import{V as C}from"./BI5L87bv.js";import{V as u}from"./DeW8--ZD.js";import{V as ye}from"./DQBrpoSu.js";import"./BAQmPJx8.js";import"./BP1uhy__.js";import"./BAL0c-DX.js";import"./CdP3NN9a.js";import"./CqSkn-a9.js";import"./BNQIPyd4.js";import"./D1ocbu1M.js";import"./cxYsYOEB.js";import"./sTLtLu4i.js";import"./D3BRDNO8.js";import"./CeXvRNTp.js";const Ae={style:{"background-color":"#f5f2f2",color:"#525050",padding:"10px 0px 0px 20px"}},De={style:{"background-color":"#f5f2f2",padding:"20px 0px 20px 20px"}},Pe={key:0,class:"d-flex justify-center"},Re={key:1},$e={__name:"[id]",emits:["saved"],setup(Fe,{emit:Se}){const c=f(null),J=pe(),{$toast:z}=ce(),W=_e(),{id:x}=W.params,_=be(),G=`${_.public.auth}/service/gerencia/updatePessoa`,j=`${_.public.auth}/service/gerencia/listarEstadoCivil`,L=`${_.public.auth}/service/gerencia/listarCapacidadeCivil`,H=`${_.public.auth}/service/gerencia/listarCidades`,K=`${_.public.auth}/service/gerencia/getPessoaById`,O=`${_.public.auth}/service/gerencia/listarSexo`,$=f([]),F=f([]),S=f([]),N=f([]),U=f(!0),Q={nome:null,nome_pai:null,nome_mae:null,profissao:null,data_nascimento:null,doc_identificacao:null,cpf_pai:null,cpf_mae:null,tipo_pessoa:"FISICA",tabvalores_estadocivil_id:null,tabvalores_capacidadecivil_id:null,cidade_natural_id:null,tabvalores_sexo_id:null,cartorio_id:P("user-data").value.cartorio_id,user_id:P("user-data").value.usuario_id},q=[{label:"FÍSICA",value:"FISICA"},{label:"JURÍDICA",value:"JURIDICA"},{label:"ESTRANGEIRA",value:"ESTRANGEIRA"}],l=fe({...Q});function X(i){if(i)return i.replace(/[.\-]/g,"");i=null}me(l);async function Y(){try{const[i,e,d,g,y]=await Promise.all([I(j),I(L),I(H),I(`${K}/${x}`),I(O)]),A=P("pessoa_token");A.value=g.token,$.value=i,F.value=e,S.value=d,N.value=y,Object.assign(l,g)}catch(i){console.error("Erro ao carregar os dados da pessoa:",i)}finally{U.value=!1}}ve(()=>{x?Y():U.value=!1});function Z(i){const e={};for(const d in i)i[d]===""?e[d]=null:d==="doc_identificacao"||d==="cpf_pai"||d==="cpf_mae"?e[d]=X(i[d]):e[d]=i[d];return e}async function h(){const i=Z(l);await xe(`${G}/${x}`,{method:"PUT",body:i}),z.success("Pessoa atualizada com sucesso!"),J.push("/pessoas/lista")}return(i,e)=>{const d=le,g=te,y=se,A=ie,ee=de,ae=ue,oe=ne,D=Ve("mask");return n(),r(ge,{width:"1300"},{default:t(()=>[T("h1",Ae,Ce(o(x)?"Atualização de Pessoas":"Cadastramento de Pessoas"),1),T("div",De,[a(k,{modelValue:o(l).tipo_pessoa,"onUpdate:modelValue":e[0]||(e[0]=s=>o(l).tipo_pessoa=s),style:{width:"200px"},items:q,"item-title":"label","item-value":"value",label:"Tipo de pessoa","bg-color":"#F6F6F6",disabled:""},null,8,["modelValue"])]),o(U)?(n(),w("div",Pe,[a(Ie,{indeterminate:"",class:"loading-spinner",size:"64"})])):(n(),w("div",Re,[a(ke,{modelValue:o(c),"onUpdate:modelValue":e[1]||(e[1]=s=>E(c)?c.value=s:null),"bg-color":"#f5f2f2"},{default:t(()=>[a(V,{value:"dados"},{default:t(()=>e[17]||(e[17]=[p("Dados")])),_:1}),o(l).tipo_pessoa==="FISICA"?(n(),r(V,{key:0,value:"documento"},{default:t(()=>e[18]||(e[18]=[p("Documentos")])),_:1})):v("",!0),o(l).tipo_pessoa==="JURIDICA"?(n(),r(V,{key:1,value:"representante"},{default:t(()=>e[19]||(e[19]=[p("Representantes")])),_:1})):v("",!0),o(l).tipo_pessoa==="JURIDICA"||o(l).tipo_pessoa==="FISICA"?(n(),r(V,{key:2,value:"endereco"},{default:t(()=>e[20]||(e[20]=[p("Endereços")])),_:1})):v("",!0),o(l).tipo_pessoa==="FISICA"?(n(),r(V,{key:3,value:"biometria"},{default:t(()=>e[21]||(e[21]=[p("Biometria")])),_:1})):v("",!0),o(l).tipo_pessoa==="JURIDICA"||o(l).tipo_pessoa==="FISICA"?(n(),r(V,{key:4,value:"restricao"},{default:t(()=>e[22]||(e[22]=[p("Restrições")])),_:1})):v("",!0)]),_:1},8,["modelValue"]),a(Ue,{modelValue:o(c),"onUpdate:modelValue":e[16]||(e[16]=s=>E(c)?c.value=s:null)},{default:t(()=>[a(b,{value:"dados"},{default:t(()=>[o(l).tipo_pessoa==="FISICA"?(n(),r(M,{key:0},{default:t(()=>[a(C,null,{default:t(()=>[a(u,{cols:"12",md:"6"},{default:t(()=>[a(m,{modelValue:o(l).nome,"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).nome=s),label:"Nome"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[R(a(m,{modelValue:o(l).doc_identificacao,"onUpdate:modelValue":e[3]||(e[3]=s=>o(l).doc_identificacao=s),label:"CPF"},null,8,["modelValue"]),[[D,"###.###.###-##"]])]),_:1}),a(u,{md:"2"},{default:t(()=>[a(ye,{label:"Sexo",modelValue:o(l).tabvalores_sexo_id,"onUpdate:modelValue":e[4]||(e[4]=s=>o(l).tabvalores_sexo_id=s),items:o(N),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(C,null,{default:t(()=>[a(u,{cols:"12",md:"4"},{default:t(()=>[a(k,{modelValue:o(l).tabvalores_estadocivil_id,"onUpdate:modelValue":e[5]||(e[5]=s=>o(l).tabvalores_estadocivil_id=s),items:o($),"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o(l).profissao,"onUpdate:modelValue":e[6]||(e[6]=s=>o(l).profissao=s),label:"Profissão"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o(l).local_trabalho,"onUpdate:modelValue":e[7]||(e[7]=s=>o(l).local_trabalho=s),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),a(C,null,{default:t(()=>[a(u,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o(l).data_nascimento,"onUpdate:modelValue":e[8]||(e[8]=s=>o(l).data_nascimento=s),type:"date","prepend-icon":"",label:"Data de nascimento"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(k,{modelValue:o(l).tabvalores_capacidadecivil_id,"onUpdate:modelValue":e[9]||(e[9]=s=>o(l).tabvalores_capacidadecivil_id=s),items:o(F),label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(k,{modelValue:o(l).cidade_natural_id,"onUpdate:modelValue":e[10]||(e[10]=s=>o(l).cidade_natural_id=s),items:o(S),label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(C,null,{default:t(()=>[a(u,{cols:"12",md:"4"},{default:t(()=>[R(a(m,{modelValue:o(l).cpf_pai,"onUpdate:modelValue":e[11]||(e[11]=s=>o(l).cpf_pai=s),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[D,"###.###.###-##"]])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o(l).nome_pai,"onUpdate:modelValue":e[12]||(e[12]=s=>o(l).nome_pai=s),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),a(C,null,{default:t(()=>[a(u,{cols:"12",md:"4"},{default:t(()=>[R(a(m,{modelValue:o(l).cpf_mae,"onUpdate:modelValue":e[13]||(e[13]=s=>o(l).cpf_mae=s),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[D,"###.###.###-##"]])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(m,{modelValue:o(l).nome_mae,"onUpdate:modelValue":e[14]||(e[14]=s=>o(l).nome_mae=s),modelModifiers:{date:!0},label:"Nome da Mãe"},null,8,["modelValue"])]),_:1})]),_:1}),a(C,{class:"mb-3"},{default:t(()=>[a(d,{to:"/pessoas/lista"},{default:t(()=>[a(B,{size:"large",color:"red"},{default:t(()=>e[23]||(e[23]=[p("Voltar")])),_:1})]),_:1}),a(B,{onClick:e[15]||(e[15]=s=>h()),class:"ml-4",size:"large",color:"green"},{default:t(()=>e[24]||(e[24]=[p("Salvar")])),_:1})]),_:1})]),_:1})):o(l).tipo_pessoa==="JURIDICA"?(n(),r(g,{key:1})):v("",!0)]),_:1}),a(b,{value:"documento"},{default:t(()=>[a(y)]),_:1}),a(b,{value:"representante"},{default:t(()=>[a(A)]),_:1}),a(b,{value:"endereco"},{default:t(()=>[a(ee)]),_:1}),a(b,{value:"biometria"},{default:t(()=>[a(M,{class:"mt-5"},{default:t(()=>[a(ae)]),_:1})]),_:1}),a(b,{value:"restricao"},{default:t(()=>[a(oe)]),_:1})]),_:1},8,["modelValue"])]))]),_:1})}}},oa=re($e,[["__scopeId","data-v-c2699b4e"]]);export{oa as default};
