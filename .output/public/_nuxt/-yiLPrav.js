import{_ as re}from"./CZttQRYh.js";import{ag as P,ah as q,ai as j,aj as A,al as M,b as l,ap as ce,ar as de,as as te,au as ae,aT as le,aE as L,bg as ve,bj as me,bm as oe,ay as fe,ak as ge,aA as C,y as h,aB as be,b7 as O,aK as W,bU as he,r as G,aI as ye,H as $,g as ne,I as Se,e4 as _e,aw as ke,bP as Te,e5 as Ve,P as E,a7 as xe,ao as Be,bc as Ce,b0 as Ne,ax as we,b1 as Pe,e6 as Ie,bk as He,e7 as Re,bT as Le,m as Ee,bN as Ae,T as X,bb as Me,bi as We,e8 as $e,_ as De,e9 as Ue,e as D,by as qe,o as B,j as H,w as c,a as F,t as R,L as je,c as Y,F as z,D as J,b5 as K,v as U,d as w,S as Oe,ea as Fe,l as Ye}from"./CEp8hW-s.js";import{V as ze}from"./CTbvjB4d.js";import{c as se,a as Q,b as Z,d as p}from"./Bgb-Wi5H.js";import"./ClEoY5Sf.js";import"./Dg8ROqy6.js";const Je=""+new URL("logo_navbar.WRqgS9jl.png",import.meta.url).href,Xe=P({text:String,...q(),...j()},"VToolbarTitle"),Ge=A()({name:"VToolbarTitle",props:Xe(),setup(e,g){let{slots:t}=g;return M(()=>{const b=!!(t.default||t.text||e.text);return l(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var s;return[b&&l("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(s=t.default)==null?void 0:s.call(t)])]}})}),{}}}),Ke=[null,"prominent","default","comfortable","compact"],ie=P({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Ke.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ce(),...q(),...de(),...te(),...j({tag:"header"}),...ae()},"VToolbar"),ee=A()({name:"VToolbar",props:ie(),setup(e,g){var S;let{slots:t}=g;const{backgroundColorClasses:b,backgroundColorStyles:s}=le(L(e,"color")),{borderClasses:o}=ve(e),{elevationClasses:m}=me(e),{roundedClasses:d}=oe(e),{themeClasses:f}=fe(e),{rtlClasses:k}=ge(),i=C(!!(e.extended||(S=t.extension)!=null&&S.call(t))),v=h(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),u=h(()=>i.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return be({VBtn:{variant:"text"}}),M(()=>{var T;const r=!!(e.title||t.title),y=!!(t.image||e.image),_=(T=t.extension)==null?void 0:T.call(t);return i.value=!!(e.extended||_),l(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},b.value,o.value,m.value,d.value,f.value,k.value,e.class],style:[s.value,e.style]},{default:()=>[y&&l("div",{key:"image",class:"v-toolbar__image"},[t.image?l(O,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):l(ze,{key:"image-img",cover:!0,src:e.image},null)]),l(O,{defaults:{VTabs:{height:W(v.value)}}},{default:()=>{var n,a,V;return[l("div",{class:"v-toolbar__content",style:{height:W(v.value)}},[t.prepend&&l("div",{class:"v-toolbar__prepend"},[(n=t.prepend)==null?void 0:n.call(t)]),r&&l(Ge,{key:"title",text:e.title},{text:t.title}),(a=t.default)==null?void 0:a.call(t),t.append&&l("div",{class:"v-toolbar__append"},[(V=t.append)==null?void 0:V.call(t)])])]}}),l(O,{defaults:{VTabs:{height:W(u.value)}}},{default:()=>[l(he,null,{default:()=>[i.value&&l("div",{class:"v-toolbar__extension",style:{height:W(u.value)}},[_])]})]})]})}),{contentHeight:v,extensionHeight:u}}}),Qe=P({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ze(e){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=g;let b=0,s=0;const o=G(null),m=C(0),d=C(0),f=C(0),k=C(!1),i=C(!1),v=h(()=>Number(e.scrollThreshold)),u=h(()=>ye((v.value-m.value)/v.value||0)),S=()=>{const r=o.value;if(!r||t&&!t.value)return;b=m.value,m.value="window"in r?r.pageYOffset:r.scrollTop;const y=r instanceof Window?document.documentElement.scrollHeight:r.scrollHeight;if(s!==y){s=y;return}i.value=m.value<b,f.value=Math.abs(m.value-v.value)};return $(i,()=>{d.value=d.value||m.value}),$(k,()=>{d.value=0}),ne(()=>{$(()=>e.scrollTarget,r=>{var _;const y=r?document.querySelector(r):window;y&&y!==o.value&&((_=o.value)==null||_.removeEventListener("scroll",S),o.value=y,o.value.addEventListener("scroll",S,{passive:!0}))},{immediate:!0})}),Se(()=>{var r;(r=o.value)==null||r.removeEventListener("scroll",S)}),t&&$(t,S,{immediate:!0}),{scrollThreshold:v,currentScroll:m,currentThreshold:f,isScrollActive:k,scrollRatio:u,isScrollingUp:i,savedScroll:d}}const pe=P({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...ie(),..._e(),...Qe(),height:{type:[Number,String],default:64}},"VAppBar"),et=A()({name:"VAppBar",props:pe(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:t}=g;const b=G(),s=ke(e,"modelValue"),o=h(()=>{var V;const a=new Set(((V=e.scrollBehavior)==null?void 0:V.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),m=h(()=>{const a=o.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!s.value}),{currentScroll:d,scrollThreshold:f,isScrollingUp:k,scrollRatio:i}=Ze(e,{canScroll:m}),v=h(()=>o.value.hide||o.value.fullyHide),u=h(()=>e.collapse||o.value.collapse&&(o.value.inverted?i.value>0:i.value===0)),S=h(()=>e.flat||o.value.fullyHide&&!s.value||o.value.elevate&&(o.value.inverted?d.value>0:d.value===0)),r=h(()=>o.value.fadeImage?o.value.inverted?1-i.value:i.value:void 0),y=h(()=>{var x,N;const a=Number(((x=b.value)==null?void 0:x.contentHeight)??e.height),V=Number(((N=b.value)==null?void 0:N.extensionHeight)??0);return v.value?d.value<f.value||o.value.fullyHide?a+V:a:a+V});Te(h(()=>!!e.scrollBehavior),()=>{xe(()=>{v.value?o.value.inverted?s.value=d.value>f.value:s.value=k.value||d.value<f.value:s.value=!0})});const{ssrBootStyles:_}=se(),{layoutItemStyles:T,layoutIsReady:n}=Ve({id:e.name,order:h(()=>parseInt(e.order,10)),position:L(e,"location"),layoutSize:y,elementSize:C(void 0),active:s,absolute:L(e,"absolute")});return M(()=>{const a=ee.filterProps(e);return l(ee,E({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...T.value,"--v-toolbar-image-opacity":r.value,height:void 0,..._.value},e.style]},a,{collapse:u.value,flat:S.value}),t)}),n}}),tt=P({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Be,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...q(),...Ce({location:"top end"}),...te(),...j(),...ae(),...Ne({transition:"scale-rotate-transition"})},"VBadge"),at=A()({name:"VBadge",inheritAttrs:!1,props:tt(),setup(e,g){const{backgroundColorClasses:t,backgroundColorStyles:b}=le(L(e,"color")),{roundedClasses:s}=oe(e),{t:o}=we(),{textColorClasses:m,textColorStyles:d}=Pe(L(e,"textColor")),{themeClasses:f}=Ie(),{locationStyles:k}=He(e,!0,i=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(i)?+(e.offsetY??0):["left","right"].includes(i)?+(e.offsetX??0):0));return M(()=>{const i=Number(e.content),v=!e.max||isNaN(i)?e.content:i<=+e.max?i:`${e.max}+`,[u,S]=Re(g.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return l(e.tag,E({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},S,{style:e.style}),{default:()=>{var r,y;return[l("div",{class:"v-badge__wrapper"},[(y=(r=g.slots).default)==null?void 0:y.call(r),l(Le,{transition:e.transition},{default:()=>{var _,T;return[Ee(l("span",E({class:["v-badge__badge",f.value,t.value,s.value,m.value],style:[b.value,d.value,e.inline?{}:k.value],"aria-atomic":"true","aria-label":o(e.label,i),"aria-live":"polite",role:"status"},u),[e.dot?void 0:g.slots.badge?(T=(_=g.slots).badge)==null?void 0:T.call(_):e.icon?l(X,{icon:e.icon},null):v]),[[Ae,e.modelValue]])]}})])]}})}),{}}}),lt=P({scrollable:Boolean,...q(),...Me(),...j({tag:"main"})},"VMain"),ot=A()({name:"VMain",props:lt(),setup(e,g){let{slots:t}=g;const{dimensionStyles:b}=We(e),{mainStyles:s,layoutIsReady:o}=$e(),{ssrBootStyles:m}=se();return M(()=>l(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[s.value,m.value,b.value,e.style]},{default:()=>{var d,f;return[e.scrollable?l("div",{class:"v-main__scroller"},[(d=t.default)==null?void 0:d.call(t)]):(f=t.default)==null?void 0:f.call(t)]}})),o}}),nt={class:"d-flex align-center"},st={class:"cartorio ml-6"},it={__name:"default",setup(e){const g=Ye(),t=Ue(),b=[{title:"Alterar Senha"},{title:"Sair"}],s=D("menu-navbar"),o=D("user-data"),m=D("auth_token"),d=h(()=>Object.keys(s.value||{}).filter(n=>n!=="Tela Principal").map(n=>({name:n,subMenus:Object.keys(s.value[n]).map(a=>({name:a,url:s.value[n][a].url}))}))),f=h(()=>{var n;return((n=o.value)==null?void 0:n.nome)??"Usuário"}),k=h(()=>{var n;return((n=o.value)==null?void 0:n.cartorio_nome)??""}),i=D("userName");i.value=f.value;const v=G(0);let u=null;function S(){t.push("/chat_atendimento")}function r(){u=new WebSocket(`${g.public.chat_bot}?user_name=${f.value}&room_id=notifications`),u.onopen=()=>{console.log("🔌 WebSocket conectado"),T()},u.onmessage=n=>{try{console.log(n.data);const a=JSON.parse(n.data);switch(a.type){case"notification":console.log("Nova notificação recebida:",a),v.value=a.queue.length||0;break;case"queue_list":console.log("Lista de notificações recebida:",a),v.value=a.totalRequests||0;break}}catch(a){console.error("Falha ao parsear mensagem:",a)}},u.onclose=()=>{console.warn("WebSocket desconectado — reconectando em 5 s…"),setTimeout(r,5e3)},u.onerror=n=>{console.error("Erro WebSocket:",n),u.close()}}ne(r),qe(()=>u==null?void 0:u.close());function y(n){n==="Sair"&&_()}function _(){o.value="",m.value="",t.push("/login")}function T(){if(u&&u.readyState===WebSocket.OPEN){const n={type:"queue_list",message:"1",id:"notifications"};u.send(JSON.stringify(n)),console.log("📤 Evento enviado ao WebSocket:",n)}else console.warn("⚠️ WebSocket não está conectado. Tentando novamente em 1 segundo..."),setTimeout(T,1e3)}return(n,a)=>{const V=re;return B(),H(Fe,null,{default:c(()=>[l(et,{color:"#0a063b",height:"100"},{default:c(()=>[F("div",nt,[a[0]||(a[0]=F("img",{class:"ml-5 mt-2",width:"300",height:"50",src:Je},null,-1)),F("h3",st,R(k.value),1)]),l(je),(B(!0),Y(z,null,J(d.value,(x,N)=>(B(),H(K,{key:`menu-${N}`},{activator:c(({props:I})=>[l(U,E({ref_for:!0},I,{text:"",class:"white--text"}),{default:c(()=>[w(R(x.name),1)]),_:2},1040)]),default:c(()=>[l(Q,null,{default:c(()=>[(B(!0),Y(z,null,J(x.subMenus,(I,ue)=>(B(),H(Z,{key:`submenu-${ue}`},{default:c(()=>[l(V,{to:`/${I.url}`,class:"text-decoration-none inherit"},{default:c(()=>[l(p,null,{default:c(()=>[w(R(I.name),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128)),v.value>0?(B(),H(at,{key:0,content:v.value,color:"red",overlap:""},{default:c(()=>[l(U,{icon:"",onClick:S},{default:c(()=>[l(X,{color:"white"},{default:c(()=>a[1]||(a[1]=[w("mdi-bell")])),_:1})]),_:1})]),_:1},8,["content"])):(B(),H(U,{key:1,icon:"",onClick:S},{default:c(()=>[l(X,{color:"white"},{default:c(()=>a[2]||(a[2]=[w("mdi-bell")])),_:1})]),_:1})),l(K,null,{activator:c(({props:x})=>[l(U,E({class:"user"},x),{default:c(()=>[w(R(f.value),1)]),_:2},1040)]),default:c(()=>[l(Q,null,{default:c(()=>[(B(),Y(z,null,J(b,(x,N)=>l(Z,{key:`item-${N}`,onClick:I=>y(x.title)},{default:c(()=>[l(p,null,{default:c(()=>[w(R(x.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1}),l(ot,null,{default:c(()=>[Oe(n.$slots,"default",{},void 0,!0)]),_:3})]),_:3})}}},ft=De(it,[["__scopeId","data-v-9706ff91"]]);export{ft as default};
