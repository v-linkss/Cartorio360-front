import{_ as T}from"./Bgj80jYW.js";import{_ as P}from"./CI2gOTNX.js";import{_ as $}from"./BMGF0xjM.js";import{u as B,m as u,r as c,n as I,p as z,q as D,s as L,o as U,w as n,b as o,a as r,t as v,v as b,V as f,x,y as d}from"./D1c8MT99.js";import{V as m}from"./DwksRT6y.js";import{V as C}from"./DZiR4O8B.js";import{V as q}from"./C5u4n-cQ.js";import{V as E}from"./C8eQ1OAb.js";import"./DV1a2Ht0.js";import"./BH1-Tibl.js";import"./DUtQO6Xq.js";import"./CNj5vv1D.js";const F=["title","onClick"],M=["onClick","title"],j=["onClick"],re={__name:"index",setup(G){const V=L(),{$toast:p}=B(),h=`${V.public.managemant}/listarOSCaixas`,g=u("caixa-service").value.usuario_nome,y=u("caixa-service").value.data,_=c([]),l=c(""),i=c(""),k=[{title:"Data Recebimento",value:"data"},{title:"Número",value:"numero"},{title:"Situação",value:"situacao"},{title:"CPF",value:"apresentante_cpf"},{title:"Apresentante",value:"apresentante_nome"},{title:"Usuário",value:"usuario_nome"},{title:"Valor",value:"valor"},{title:"Ações",value:"actions"}];async function S(){try{const a=await $fetch(h,{method:"POST",body:{caixa_token:u("caixa-service").value.caixa_token}});a&&Array.isArray(a)?_.value=a:(p.error("Nenhum dado retornado da API."),console.error("Nenhum dado retornado da API."))}catch(a){const t=a.message||"Erro ao buscar dados da API. Tente novamente.";p.error(t),console.error(t)}}I(()=>{S()});const w=z(()=>_.value.filter(a=>{const t=a.numero?a.numero.toString().toLowerCase():"",e=a.apresentante_nome?a.apresentante_nome.toLowerCase():"",s=t.includes(l.value.toLowerCase()),R=e.includes(i.value.toLowerCase());return s&&R}));function A(a,t){console.log("Cancelando OS:",{numero:a,token:t})}function N(a,t){console.log("Recebendo OS:",{numero:a,item:t})}function O(a){console.log("Editando OS:",a)}return(a,t)=>(U(),D(E,{class:"mt-5"},{default:n(()=>[o(m,{class:"mb-5"},{default:n(()=>[r("h1",null,"Recebimento de Ordens de Serviço - Caixa "+v(b(y))+" - "+v(b(g)),1)]),_:1}),o(m,null,{default:n(()=>[o(C,{cols:"2"},{default:n(()=>[o(f,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),type:"text",label:"Número"},null,8,["modelValue"])]),_:1}),o(C,{md:"3"},{default:n(()=>[o(f,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),label:"Apresentante"},null,8,["modelValue"])]),_:1})]),_:1}),t[3]||(t[3]=r("hr",{class:"mt-5 mb-5"},null,-1)),o(q,{headers:k,items:w.value,"item-key":"id"},{"item.actions":n(({item:e})=>[o(m,{style:{display:"flex",gap:"10px","margin-top":"-5px"}},{default:n(()=>[r("div",{class:d({disabled:!e.btn_receber}),title:e.btn_receber?"Receber":"Bloqueado",onClick:s=>e.btn_receber?N(e.numero,e):null},[r("img",{style:x({cursor:e.btn_receber?"pointer":"default",width:"30px",height:"30px"}),src:T,alt:"Receber"},null,4)],10,F),r("div",{class:d({disabled:!e.btn_editar}),onClick:s=>e.btn_editar?O(e.id):null,title:e.btn_editar?"Editar":"Bloqueado"},[r("img",{style:x({cursor:e.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:P,alt:"Salvar"},null,4)],10,M),r("div",{class:d({disabled:!e.btn_cancelar}),onClick:s=>e.btn_cancelar?A(e.numero,e.token):null,title:"Cancelamento"},t[2]||(t[2]=[r("img",{style:{width:"30px",height:"30px"},src:$,alt:"Visualizar",title:"Visualizar"},null,-1)]),10,j)]),_:2},1024)]),_:1},8,["items"])]),_:1}))}};export{re as default};
