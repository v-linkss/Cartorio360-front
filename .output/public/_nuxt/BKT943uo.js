import{r as O,J as W,G as j,m as G,H,u as _,n as J,M as K,p as k,w as t,q as Q,o as q,a as X,b as l,d as p,s as a,C as A,V as r,N as Y,v as c,K as Z}from"./ByxS8mcf.js";import{u as h,V as s}from"./M0h3MoQ4.js";import{f as ee,a as le}from"./B0IxRygJ.js";import{V as ae}from"./ze9GndAk.js";import{V as B,a as oe,e as w,d as de}from"./Q6uQSB6h.js";import{V as x}from"./DC0YASa2.js";import{V as u}from"./B9EE7m-T.js";import{V as f}from"./9Iw1fQb0.js";import"./B0axwumF.js";import"./C5cwBIOC.js";import"./DxsREfyq.js";import"./8lDJBU5b.js";const Ue={__name:"[id]",emits:["saved","close-modal"],async setup(te,{emit:ue}){let v,z;const m=O("dados"),U=W().params.id,I=j(),n=Q(),{$toast:g}=G(),T=`${n.public.auth}/service/gerencia/listar_situacao_matriculas`,M=`${n.public.auth}/service/gerencia/natureza_imoveis`,N=`${n.public.auth}/service/gerencia/tipo_logradouros`,D=`${n.public.auth}/service/gerencia/listarCidades`,L=`${n.public.auth}/service/gerencia/livro`,E=`${n.public.auth}/service/gerencia/matriculas`,d=H({numero:null,protocolo:null,livro:null,folhas:null,data:null,descricao:null,cnm:null,livro_id:null,observacao:null,inscricao_municipal:null,situacao_id:null,tabvalores_natureza_id:null,tabvalores_tipologradouro_id:null,end_logradouro:null,end_logradouro_numero:null,end_bairro:null,end_cidade_id:null,end_cep:null,end_complemento:null,end_quadra:null,end_lote:null,pagina_inicial:null,pagina_final:null,user_alteracao_id:_("user-data").value.usuario_id}),{data:V,status:ie,pending:P,error:ne}=([v,z]=J(()=>h("cliente-dados",R)),v=await v,z(),v);async function R(){const i=_("auth_token");try{const[e,$,o,S,F,b]=await Promise.all([$fetch(`${T}`,{method:"POST",body:{cartorio_token:_("user-data").value.cartorio_token},headers:{Authorization:`Bearer ${i.value}`}}),$fetch(`${M}`,{headers:{Authorization:`Bearer ${i.value}`}}),$fetch(`${N}`,{headers:{Authorization:`Bearer ${i.value}`}}),$fetch(`${D}`,{headers:{Authorization:`Bearer ${i.value}`}}),$fetch(`${L}`,{headers:{Authorization:`Bearer ${i.value}`}}),$fetch(`${E}/${U}`,{headers:{Authorization:`Bearer ${i.value}`}})]);return b.data&&(b.data=ee(b.data,"dd/mm/yyyy")),Object.assign(d,b),{situacaoItens:e,naturezaImoveisItens:$,tipoLogradouroItens:o,cidadesItens:S,livroItens:F}}catch(e){return console.error("Erro ao carregar dados:",e),{situacaoItens:[],naturezaImoveisItens:[],tipoLogradouroItens:[],cidadesItens:[],livroItens:[]}}}async function y(){try{const i=_("auth_token");d.data&&(d.data=le(d.data)),(await $fetch(`${n.public.auth}/service/gerencia/matriculas/${U}`,{method:"PUT",body:d,headers:{Authorization:`Bearer ${i.value}`}})).statusCode===500?g.error("Erro ao cadastrar Matricula."):(g.success("Matrícula atualizada com sucesso!"),I.push("/matriculas/lista"))}catch(i){console.log("Erro ao Atualizar:",i),g.error("Erro ao Atualizar. Tente novamente.")}}function C(){I.push("/matriculas/lista")}return(i,e)=>{const $=K("mask");return q(),k(ae,{width:"1300"},{default:t(()=>[e[31]||(e[31]=X("h1",{style:{"background-color":"#f5f2f2",color:"#525050",padding:"5px 0px 0px 20px"}}," Atualização de Matriculas ",-1)),l(oe,{modelValue:a(m),"onUpdate:modelValue":e[0]||(e[0]=o=>A(m)?m.value=o:null),"bg-color":"#f5f2f2"},{default:t(()=>[l(B,{value:"dados"},{default:t(()=>e[25]||(e[25]=[p("Dados")])),_:1}),l(B,{value:"enderecos"},{default:t(()=>e[26]||(e[26]=[p("Endereço")])),_:1})]),_:1},8,["modelValue"]),l(de,{modelValue:a(m),"onUpdate:modelValue":e[24]||(e[24]=o=>A(m)?m.value=o:null)},{default:t(()=>[l(w,{value:"dados"},{default:t(()=>[a(P)?Z("",!0):(q(),k(x,{key:0},{default:t(()=>[l(s,null,{default:t(()=>[l(u,{md:"6"},{default:t(()=>[l(r,{modelValue:a(d).numero,"onUpdate:modelValue":e[1]||(e[1]=o=>a(d).numero=o),label:"Matrícula",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).protocolo,"onUpdate:modelValue":e[2]||(e[2]=o=>a(d).protocolo=o),label:"Protocolo",required:"",disabled:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(f,{modelValue:a(d).livro_id,"onUpdate:modelValue":e[3]||(e[3]=o=>a(d).livro_id=o),items:a(V).livroItens.data,label:"Livro","item-title":"descricao","item-value":"id",disabled:""},null,8,["modelValue","items"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).pagina_inicial,"onUpdate:modelValue":e[4]||(e[4]=o=>a(d).pagina_inicial=o),modelModifiers:{number:!0},label:"Folha inicial",type:"number",required:"",min:"0",disabled:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).pagina_final,"onUpdate:modelValue":e[5]||(e[5]=o=>a(d).pagina_final=o),modelModifiers:{number:!0},label:"Folha Final",type:"number",min:"0",disabled:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:t(()=>[Y(l(r,{modelValue:a(d).data,"onUpdate:modelValue":e[6]||(e[6]=o=>a(d).data=o),placeholder:"dd/mm/yyyy",label:"Data"},null,8,["modelValue"]),[[$,"##/##/####"]])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(f,{modelValue:a(d).situacao_id,"onUpdate:modelValue":e[7]||(e[7]=o=>a(d).situacao_id=o),items:a(V).situacaoItens,label:"Situação","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).descricao,"onUpdate:modelValue":e[8]||(e[8]=o=>a(d).descricao=o),label:"Descrição",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).cnm,"onUpdate:modelValue":e[9]||(e[9]=o=>a(d).cnm=o),label:"CNM",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).observacao,"onUpdate:modelValue":e[10]||(e[10]=o=>a(d).observacao=o),label:"Observação",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{class:"mb-3"},{default:t(()=>[l(c,{onClick:C,size:"large",color:"red"},{default:t(()=>e[27]||(e[27]=[p("Voltar")])),_:1}),l(c,{onClick:e[11]||(e[11]=o=>y()),class:"ml-4",size:"large",color:"green"},{default:t(()=>e[28]||(e[28]=[p("Salvar")])),_:1})]),_:1})]),_:1}))]),_:1}),l(w,{value:"enderecos"},{default:t(()=>[l(x,null,{default:t(()=>[l(s,null,{default:t(()=>[l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).inscricao_municipal,"onUpdate:modelValue":e[12]||(e[12]=o=>a(d).inscricao_municipal=o),label:"Inscrição Municipal",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(f,{modelValue:a(d).tabvalores_natureza_id,"onUpdate:modelValue":e[13]||(e[13]=o=>a(d).tabvalores_natureza_id=o),items:a(V).naturezaImoveisItens,label:"Natureza Imovel","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(f,{modelValue:a(d).tabvalores_tipologradouro_id,"onUpdate:modelValue":e[14]||(e[14]=o=>a(d).tabvalores_tipologradouro_id=o),items:a(V).tipoLogradouroItens,label:"Tipo de Logradouro","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),l(s,null,{default:t(()=>[l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).end_logradouro,"onUpdate:modelValue":e[15]||(e[15]=o=>a(d).end_logradouro=o),label:"Endereço",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).end_logradouro_numero,"onUpdate:modelValue":e[16]||(e[16]=o=>a(d).end_logradouro_numero=o),label:"Numero",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).end_bairro,"onUpdate:modelValue":e[17]||(e[17]=o=>a(d).end_bairro=o),label:"Bairro",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,null,{default:t(()=>[l(u,{md:"4"},{default:t(()=>[l(f,{modelValue:a(d).end_cidade_id,"onUpdate:modelValue":e[18]||(e[18]=o=>a(d).end_cidade_id=o),items:a(V).cidadesItens,label:"Cidade","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).end_cep,"onUpdate:modelValue":e[19]||(e[19]=o=>a(d).end_cep=o),label:"CEP",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).end_complemento,"onUpdate:modelValue":e[20]||(e[20]=o=>a(d).end_complemento=o),label:"Complemento",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,null,{default:t(()=>[l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).end_quadra,"onUpdate:modelValue":e[21]||(e[21]=o=>a(d).end_quadra=o),label:"Quadra",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:t(()=>[l(r,{modelValue:a(d).end_lote,"onUpdate:modelValue":e[22]||(e[22]=o=>a(d).end_lote=o),label:"Lote",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{class:"mb-3"},{default:t(()=>[l(c,{onClick:C,size:"large",color:"red"},{default:t(()=>e[29]||(e[29]=[p("Voltar")])),_:1}),l(c,{onClick:e[23]||(e[23]=o=>y()),class:"ml-4",size:"large",color:"green"},{default:t(()=>e[30]||(e[30]=[p("Salvar")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{Ue as default};
