import{_ as oe}from"./Byv4AMHF.js";import{b as f,V as le,d as V,c as te,e as se,f as de,g as ie,h as ne,i as ue,j as me}from"./CX6qHkdK.js";import{_ as re,r as v,n as ce,u as pe,q as _e,A,s as fe,F as Ve,o as u,v as r,w as t,z as ve,M as be,a as N,t as Ce,x as a,b as e,c as w,G as Ie,d as c,H as b,C as E,V as m,N as F,y as T}from"./Di2Cfz7K.js";import{u as xe}from"./DXzHZJpH.js";import{u as ge}from"./C6nCx6I_.js";import{a as Ue}from"./CqAAljDQ.js";import{V as g}from"./BDNi5u2i.js";import{V as B}from"./CoNJzVJX.js";import{V as C}from"./Bw6TYB0H.js";import{V as n}from"./ByhyOEwS.js";import{V as ke}from"./DUsehzxt.js";import"./CfD_HTel.js";import"./DfjuBLsA.js";import"./BbxDF5Ur.js";import"./wr5av588.js";import"./8tzZzGZL.js";import"./DGOHYyds.js";import"./D8BKNhOv.js";const ye={style:{"background-color":"#f5f2f2",color:"#525050",padding:"10px 0px 0px 20px"}},$e={style:{"background-color":"#f5f2f2",padding:"20px 0px 20px 20px"}},Ae={key:0,class:"d-flex justify-center"},Fe={key:1},Pe={__name:"[id]",emits:["saved"],setup(De,{emit:Re}){const p=v(null),M=ce(),{$toast:J}=pe(),z=_e(),{id:I}=z.params,_=ve(),j=`${_.public.managemant}/updatePessoa`,G=`${_.public.managemant}/listarEstadoCivil`,L=`${_.public.managemant}/listarCapacidadeCivil`,W=`${_.public.managemant}/listarCidades`,q=`${_.public.managemant}/getPessoaById`,H=`${_.public.managemant}/listarSexo`,P=v([]),D=v([]),R=v([]),S=v([]),U=v(!0),O={nome:null,nome_pai:null,nome_mae:null,profissao:null,data_nascimento:null,doc_identificacao:null,cpf_pai:null,cpf_mae:null,tipo_pessoa:"FISICA",tabvalores_estadocivil_id:null,tabvalores_capacidadecivil_id:null,cidade_natural_id:null,tabvalores_sexo_id:null,cartorio_id:A("user-data").value.cartorio_id,user_id:A("user-data").value.usuario_id},K=[{label:"FÍSICA",value:"FISICA"},{label:"JURÍDICA",value:"JURIDICA"},{label:"ESTRANGEIRA",value:"ESTRANGEIRA"}],l=fe({...O});function Q(d){if(d)return d.replace(/[.\-]/g,"");d=null}ge(l);async function X(){try{const[d,o,i,x,k]=await Promise.all([$fetch(G),$fetch(L),$fetch(W),$fetch(`${q}/${I}`),$fetch(H)]),y=A("pessoa_token");y.value=x.token,P.value=d,D.value=o,R.value=i,S.value=k,Object.assign(l,x)}catch(d){console.error("Erro ao carregar os dados da pessoa:",d)}finally{U.value=!1}}Ve(()=>{I?X():U.value=!1});function Y(d){const o={};for(const i in d)d[i]===""?o[i]=null:i==="doc_identificacao"||i==="cpf_pai"||i==="cpf_mae"?o[i]=Q(d[i]):o[i]=d[i];return o}async function Z(){const d=Y(l);await xe(`${j}/${I}`,{method:"PUT",body:d},"$NdF8Uiv290"),J.success("Pessoa atualizada com sucesso!"),M.push("/pessoas/lista")}return(d,o)=>{const i=oe,x=se,k=de,y=ie,h=ne,ee=ue,ae=me,$=be("mask");return u(),r(Ue,{width:"1300"},{default:t(()=>[N("h1",ye,Ce(a(I)?"Atualização de Pessoas":"Cadastramento de Pessoas"),1),N("div",$e,[e(g,{modelValue:a(l).tipo_pessoa,"onUpdate:modelValue":o[0]||(o[0]=s=>a(l).tipo_pessoa=s),style:{width:"200px"},items:K,"item-title":"label","item-value":"value",label:"Tipo de pessoa","bg-color":"#F6F6F6",disabled:""},null,8,["modelValue"])]),a(U)?(u(),w("div",Ae,[e(Ie,{indeterminate:"",class:"loading-spinner",size:"64"})])):(u(),w("div",Fe,[e(le,{modelValue:a(p),"onUpdate:modelValue":o[1]||(o[1]=s=>E(p)?p.value=s:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(f,{value:"dados"},{default:t(()=>[c("Dados")]),_:1}),a(l).tipo_pessoa==="FISICA"?(u(),r(f,{key:0,value:"documento"},{default:t(()=>[c("Documentos")]),_:1})):b("",!0),a(l).tipo_pessoa==="JURIDICA"?(u(),r(f,{key:1,value:"representante"},{default:t(()=>[c("Representantes")]),_:1})):b("",!0),a(l).tipo_pessoa==="JURIDICA"||a(l).tipo_pessoa==="FISICA"?(u(),r(f,{key:2,value:"endereco"},{default:t(()=>[c("Endereços")]),_:1})):b("",!0),a(l).tipo_pessoa==="FISICA"?(u(),r(f,{key:3,value:"biometria"},{default:t(()=>[c("Biometria")]),_:1})):b("",!0),a(l).tipo_pessoa==="JURIDICA"||a(l).tipo_pessoa==="FISICA"?(u(),r(f,{key:4,value:"restricao"},{default:t(()=>[c("Restrições")]),_:1})):b("",!0)]),_:1},8,["modelValue"]),e(te,{modelValue:a(p),"onUpdate:modelValue":o[16]||(o[16]=s=>E(p)?p.value=s:null)},{default:t(()=>[e(V,{value:"dados"},{default:t(()=>[a(l).tipo_pessoa==="FISICA"?(u(),r(B,{key:0},{default:t(()=>[e(C,null,{default:t(()=>[e(n,{cols:"12",md:"6"},{default:t(()=>[e(m,{modelValue:a(l).nome,"onUpdate:modelValue":o[2]||(o[2]=s=>a(l).nome=s),label:"Nome"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"4"},{default:t(()=>[F(e(m,{modelValue:a(l).doc_identificacao,"onUpdate:modelValue":o[3]||(o[3]=s=>a(l).doc_identificacao=s),label:"CPF"},null,8,["modelValue"]),[[$,"###.###.###-##"]])]),_:1}),e(n,{md:"2"},{default:t(()=>[e(ke,{label:"Sexo",modelValue:a(l).tabvalores_sexo_id,"onUpdate:modelValue":o[4]||(o[4]=s=>a(l).tabvalores_sexo_id=s),items:a(S),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(n,{cols:"12",md:"4"},{default:t(()=>[e(g,{modelValue:a(l).tabvalores_estadocivil_id,"onUpdate:modelValue":o[5]||(o[5]=s=>a(l).tabvalores_estadocivil_id=s),items:a(P),"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"12",md:"4"},{default:t(()=>[e(m,{modelValue:a(l).profissao,"onUpdate:modelValue":o[6]||(o[6]=s=>a(l).profissao=s),label:"Profissão"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"4"},{default:t(()=>[e(m,{modelValue:a(l).local_trabalho,"onUpdate:modelValue":o[7]||(o[7]=s=>a(l).local_trabalho=s),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(n,{cols:"12",md:"4"},{default:t(()=>[e(m,{modelValue:a(l).data_nascimento,"onUpdate:modelValue":o[8]||(o[8]=s=>a(l).data_nascimento=s),type:"date","prepend-icon":"",label:"Data de nascimento"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"4"},{default:t(()=>[e(g,{modelValue:a(l).tabvalores_capacidadecivil_id,"onUpdate:modelValue":o[9]||(o[9]=s=>a(l).tabvalores_capacidadecivil_id=s),items:a(D),label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"12",md:"4"},{default:t(()=>[e(g,{modelValue:a(l).cidade_natural_id,"onUpdate:modelValue":o[10]||(o[10]=s=>a(l).cidade_natural_id=s),items:a(R),label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(n,{cols:"12",md:"4"},{default:t(()=>[F(e(m,{modelValue:a(l).cpf_pai,"onUpdate:modelValue":o[11]||(o[11]=s=>a(l).cpf_pai=s),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[$,"###.###.###-##"]])]),_:1}),e(n,{cols:"12",md:"4"},{default:t(()=>[e(m,{modelValue:a(l).nome_pai,"onUpdate:modelValue":o[12]||(o[12]=s=>a(l).nome_pai=s),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(n,{cols:"12",md:"4"},{default:t(()=>[F(e(m,{modelValue:a(l).cpf_mae,"onUpdate:modelValue":o[13]||(o[13]=s=>a(l).cpf_mae=s),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[$,"###.###.###-##"]])]),_:1}),e(n,{cols:"12",md:"4"},{default:t(()=>[e(m,{modelValue:a(l).nome_mae,"onUpdate:modelValue":o[14]||(o[14]=s=>a(l).nome_mae=s),modelModifiers:{date:!0},label:"Nome da Mãe"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{class:"mb-3"},{default:t(()=>[e(i,{to:"/pessoas/lista"},{default:t(()=>[e(T,{size:"large",color:"red"},{default:t(()=>[c("Voltar")]),_:1})]),_:1}),e(T,{onClick:o[15]||(o[15]=s=>Z()),class:"ml-4",size:"large",color:"green"},{default:t(()=>[c("Salvar")]),_:1})]),_:1})]),_:1})):a(l).tipo_pessoa==="JURIDICA"?(u(),r(x,{key:1})):b("",!0)]),_:1}),e(V,{value:"documento"},{default:t(()=>[e(k)]),_:1}),e(V,{value:"representante"},{default:t(()=>[e(y)]),_:1}),e(V,{value:"endereco"},{default:t(()=>[e(h)]),_:1}),e(V,{value:"biometria"},{default:t(()=>[e(B,{class:"mt-5"},{default:t(()=>[e(ee)]),_:1})]),_:1}),e(V,{value:"restricao"},{default:t(()=>[e(ae)]),_:1})]),_:1},8,["modelValue"])]))]),_:1})}}},Xe=re(Pe,[["__scopeId","data-v-40d7763a"]]);export{Xe as default};
