import{_ as se}from"./NNxuKPhX.js";import{c as he,r as we,u as Ce}from"./D4GViqMD.js";import{m as ee,n as te,u as oe,r as d,y as L,p as re,z as X,o as x,q as R,w as t,b as e,s as o,V as I,v as W,d as z,x as ae,a as m,c as K,A as le,t as ue,B as Pe,C as Fe,E as We,F as J,G as Te,H as Ve}from"./Bx7wdnE6.js";import{u as P}from"./C_oLDKbf.js";import{V as C}from"./BuKfHzC4.js";import{V as i}from"./BMCTY34k.js";import{V as Q}from"./BPHmnQjQ.js";import{V as ne}from"./CPAkAF8M.js";import{_ as Ge,b as Y,V as Je,d as H,c as Ze}from"./DbpUP_nU.js";import{_ as Ke,a as Qe,b as Ye,T as He,W as Xe,r as Ee,D as Ae,d as et,c as tt,e as ot}from"./tc3w-JFr.js";import{_ as de}from"./DshdCOpI.js";import{_ as ce,V as me,a as ke,b as pe,c as _e}from"./CQIfcP1X.js";import{V as ge,a as ie,b as Se,c as Be,d as Oe}from"./CyIRPyr4.js";import{V as at}from"./BfHFaFiP.js";import{_ as ze}from"./C1qFuICF.js";import{V as fe}from"./BNpNrbwv.js";import{_ as st}from"./CdP3NN9a.js";import"./D1bT8eQ3.js";import"./URQlhXIO.js";import"./CiBPrtuh.js";import"./DS53WQTp.js";import"./G88xwL-J.js";const lt={__name:"Dados",props:{ato_token:{type:String,required:!0}},emits:["saved"],async setup(G,{emit:p}){let _,b;const T=G,B=p,k=ee(),v=te(),M=ae(),{$toast:V}=oe(),q=`${M.public.managemant}/listarSituacoes`,w=`${M.public.managemant}/createAtos`,O=`${M.public.managemant}/getAtosTiposByToken`,g=d(L("user-data").value.cartorio_token),U=d(L("user-service").value.id).value||d(L("user-service").value).value,h=d([]),u=re({dt_abertura:null,status:"EM EDIÇÃO",mne:null}),E={status:{required:he.withMessage("O campo é obrigatorio",we)}},r=Ce(E,u),{data:y}=([_,b]=X(()=>P(`${O}/${T.ato_token}`,{method:"GET"},"$9ZmTYsLk0K")),_=await _,b(),_);async function s(){if(await r.value.$validate()){const{data:f,error:l,status:Z}=await P(w,{method:"POST",body:{ato_tipo_id:y.value.id,cartorio_id:L("user-data").value.cartorio_id,ordemserv_id:U,status:u.status,dt_abertura:u.dt_abertura,mne:u.mne,user_id:L("user-data").value.usuario_id,user_alteracao_id:L("user-data").value.usuario_id}},"$hyq5YcBEjF");Z.value==="success"&&(V.success("Ato registrado com sucesso!"),B("saved",{id:f.value.id,token:f.value.token}))}else V.error("Preencha os campos obrigatorios.")}const{data:a}=([_,b]=X(()=>P(q,{method:"POST",body:{cartorio_token:g.value}},"$S3qwbpImEh")),_=await _,b(),_);h.value=a.value;const A=()=>{const f=v.query.origem||"criar",l=v.query.id;f==="atualizar"?k.push(`/os/atualizar/${l}`):k.push("/os/criar-registro")};return(f,l)=>{const Z=se;return x(),R(ne,null,{default:t(()=>[e(C,{class:"mt-5"},{default:t(()=>[e(i,{cols:"3"},{default:t(()=>[e(Q,{label:"Situação",modelValue:o(u).status,"onUpdate:modelValue":l[0]||(l[0]=$=>o(u).status=$),items:o(h),"item-title":"descricao","item-value":"descricao",required:"","error-messages":o(r).status.$errors.map($=>$.$message),onBlur:o(r).status.$touch,onInput:o(r).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(i,{cols:"5"},{default:t(()=>[e(I,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:o(u).mne,"onUpdate:modelValue":l[1]||(l[1]=$=>o(u).mne=$)},null,8,["modelValue"])]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(i,{cols:"2"},{default:t(()=>[e(I,{modelValue:o(u).dt_abertura,"onUpdate:modelValue":l[2]||(l[2]=$=>o(u).dt_abertura=$),type:"date",label:"Data Lavratura",disabled:"",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{class:"mb-3"},{default:t(()=>[e(Z,{onClick:A},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>l[3]||(l[3]=[z("Voltar")])),_:1})]),_:1}),e(W,{class:"ml-10",onClick:s,size:"large",color:"green"},{default:t(()=>l[4]||(l[4]=[z("Salvar")])),_:1})]),_:1})]),_:1})}}},rt=["onClick"],nt=["onClick"],it=["onClick"],ut={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},dt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ct=["onClick"],mt={__name:"Partes",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(G){let p,_;const b=G,T=ee(),B=te(),k=ae(),{$toast:v}=oe(),M=`${k.public.managemant}/pesquisarPessoas`,V=`${k.public.managemant}/listarPapeis`,q=`${k.public.managemant}/getLinkTipo`,w=`${k.public.managemant}/createAtosPessoa`,O=`${k.public.managemant}/getAtosPessoaById`,g=`${k.public.managemant}/updateAtosPessoa`,U=d(L("user-data").value.cartorio_token),h=d([]),u=d([]),E=d([]),r=d(!1),y=d(!1),s=d(!1),a=d(!1),A=d(null),f=d(null),l=d(null),Z=d(null);d(null);const $=d(null),n=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],N=re({papeis:null,nome:null,pessoa:null,documento:null}),{data:ye}=([p,_]=X(()=>P(V,{method:"POST",body:{tipo_ato_token:b.ato_token}},"$fFKndZhA4W")),p=await p,_(),p);E.value=ye.value;async function D(){try{const{data:S,error:c}=await P(M,{method:"POST",body:{cartorio_token:U.value,documento:N.documento,nome:N.nome}},"$o3ZL1rvYrY");S.value.length>0?(h.value=S.value,N.pessoa=h.value[0]):h.value=[]}catch(S){console.error("Erro na requisição",S)}}const ve=()=>{y.value=!0},qe=S=>{u.value=u.value.map(c=>c.id===l.value?{...c,papel:{...c.papel,descricao:S}}:c)},De=S=>{const c=u.value.find(F=>F.pessoa.id===Z.value);c.representante.nome=S},Me=async()=>{const S={pessoa:N.pessoa,papel:E.value.find(F=>F.id===N.papeis),representante:{nome:null}},c=await P(`${O}/${b.ato_id}`,{method:"GET"},"$kXSxUa4grs");for(const F of c.data.value)if(F.pessoa_id===N.pessoa.id&&F.ato_id===b.ato_id&&F.tipo_parte_id===N.papeis){v.error("Pessoa Já Registrada Com Esse Papel!");return}try{const{data:F,error:$e,status:be}=await P(w,{method:"POST",body:{ato_id:b.ato_id,pessoa_id:N.pessoa.id,tipo_parte_id:N.papeis,user_id:L("user-data").value.usuario_id}},"$So3qnQu7ek");be.value==="success"?(S.id=F.value.id,v.success("Pessoa Registrada com Sucesso!"),u.value.push(S)):v.error("Erro ao registrar a pessoa!")}catch{v.error("Erro no servidor. Tente novamente.")}},Ue=async S=>{s.value=!0,$.value=null;const{data:c}=await P(`${q}`,{method:"POST",body:{id:S.pessoa.id,tipo:"ficha"}},"$Q3kbIwtd9t");c.value&&c.value.link?$.value=`data:image/jpeg;base64,${c.value.link}`:$.value=null},Ie=S=>{const c=u.value.filter(F=>F.pessoa.id!==S.pessoa.id).map(F=>({id:F.pessoa.id,nome:F.pessoa.nome}));l.value=S.id,A.value=c,r.value=!0,f.value=S.pessoa.nome,Z.value=S.pessoa.id},Re=S=>{l.value=S.id,a.value=!0,f.value=S.pessoa.nome};async function Ne(S){S.excluido=!S.excluido;try{await P(`${g}/${l.value}`,{method:"PUT",body:JSON.stringify({excluido:S.excluido})},"$9xStKwGd7o")}catch(c){console.error("Erro ao excluir pessoa:",c)}}const je=()=>{const S=B.query.origem||"criar",c=B.query.id;S==="atualizar"?T.push(`/os/atualizar/${c}`):T.push("/os/criar-registro")};return(S,c)=>{const F=Ge,$e=Qe,be=Ye,Le=se;return x(),R(ne,null,{default:t(()=>[e(C,{class:"mt-5"},{default:t(()=>[e(i,{cols:"3"},{default:t(()=>[e(I,{label:"Documento",modelValue:o(N).documento,"onUpdate:modelValue":c[0]||(c[0]=j=>o(N).documento=j)},null,8,["modelValue"])]),_:1}),e(i,{cols:"4"},{default:t(()=>[e(I,{label:"Pessoa",modelValue:o(N).nome,"onUpdate:modelValue":c[1]||(c[1]=j=>o(N).nome=j)},null,8,["modelValue"])]),_:1}),m("div",null,[m("img",{class:"mt-3",src:de,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:D})]),m("div",null,[m("img",{class:"mt-3 ml-2",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:ve})])]),_:1}),e(C,null,{default:t(()=>[e(i,{cols:"4"},{default:t(()=>[e(Q,{label:"Selecione a Pessoa",modelValue:o(N).pessoa,"onUpdate:modelValue":c[2]||(c[2]=j=>o(N).pessoa=j),items:o(h),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(i,{cols:"3"},{default:t(()=>[e(Q,{label:"Papel",modelValue:o(N).papeis,"onUpdate:modelValue":c[3]||(c[3]=j=>o(N).papeis=j),items:o(E),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),m("div",null,[m("img",{class:"mt-3",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Me})])]),_:1}),e(C,null,{default:t(()=>[e(i,null,{default:t(()=>[e(me,{style:{height:"465px"},headers:n,items:o(u)},{"item.actions":t(({item:j})=>[e(C,null,{default:t(()=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:xe=>Ue(j),title:"Visualizar Ficha"},c[9]||(c[9]=[m("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1)]),8,rt),m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:xe=>Re(j),class:"mr-2",title:"Alterar Papel"},c[10]||(c[10]=[m("img",{style:{width:"30px",height:"30px"},src:ke,alt:"Visualizar"},null,-1)]),8,nt),m("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:xe=>Ne(j),title:"Deletar Pessoa"},[j.excluido?(x(),K("img",ut)):(x(),K("img",dt))],8,it),m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:xe=>Ie(j),title:"Selecionar Representante"},c[11]||(c[11]=[m("img",{style:{width:"30px",height:"30px"},src:Ke,alt:"Visualizar"},null,-1)]),8,ct)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(F,{show:o(y),onClose:c[4]||(c[4]=j=>y.value=!1)},null,8,["show"]),e($e,{representante_nome:o(f),representantes:o(A),ato_id:o(l),show:o(r),onClose:c[5]||(c[5]=j=>r.value=!1),onUpdateRepresentante:De},null,8,["representante_nome","representantes","ato_id","show"]),e(be,{representante_nome:o(f),ato_token:b.ato_token,ato_id:o(l),show:o(a),onClose:c[6]||(c[6]=j=>a.value=!1),onUpdatePapel:qe},null,8,["representante_nome","ato_token","ato_id","show"]),e(ge,{modelValue:o(s),"onUpdate:modelValue":c[8]||(c[8]=j=>le(s)?s.value=j:null),width:"600"},{default:t(()=>[e(ie,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(at,{src:o($)},null,8,["src"]),e(W,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:c[7]||(c[7]=j=>s.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(C,null,{default:t(()=>[e(Le,{onClick:je},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>c[12]||(c[12]=[z("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},pt={style:{width:"800px","font-weight":"500"}},_t=["onClick"],vt=["onClick"],ft=["onClick"],gt={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Reativar",title:"Reativar"},yt={key:1,src:_e,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},bt={__name:"Bens",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(G){let p,_;const b=G,T=ee(),B=te(),k=ae(),{$toast:v}=oe(),M=`${k.public.managemant}/atos_bens`,V=`${k.public.managemant}/atos_bens`,q=`${k.public.managemant}/atos_bens`,w=`${k.public.managemant}/listarTipoBens`,O=d(L("user-data").value.cartorio_token),g=d(L("user-data").value.usuario_id).value,U=d([]),h=d([]),u=d(!1),E=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"valor_mercado"},{align:"end",value:"actions"}],r=re({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),y=async()=>{if(!r.vlr_alienacao&&!r.descricao){v.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:$,status:n}=await P(`${M}`,{method:"POST",body:{descricao:r.descricao,tipo_id:r.tipo_id,valor_mercado:r.vlr_alienacao,user_id:g,ato_id:Number.parseInt(b.ato_id),token:b.ato_token}},"$TVfAAEMyym");n.value==="success"&&(v.success("Bem registrado com sucesso!"),U.value.push($.value),Object.assign(r,{vlr_alienacao:null,descricao:null,tipo_id:null}))},s=async $=>{const{status:n}=await P(`${V}/${$}`,{method:"PUT",body:{descricao:h.value.descricao,tipo_id:h.value.tipo_id,valor_mercado:h.value.valor_mercado}},"$TRbOfiOtJ9");n.value==="success"&&(v.success("Bem Atualizado com sucesso!"),u.value=!1)},a=$=>{const n=U.value.find(N=>N.id===$);n&&(h.value=n,u.value=!0)},{data:A}=([p,_]=X(()=>P(`${w}`,{method:"POST",body:{cartorio_token:O.value,imoveis:!1}},"$rrOfkMLqML")),p=await p,_(),p);r.tiposBens=A.value;const{data:f}=([p,_]=X(()=>P(`${q}/${b.ato_id}`,{method:"GET"},"$qhjPuJWFwD")),p=await p,_(),p);U.value=f.value;async function l($){$.excluido=!$.excluido;try{await P(`${V}/${$.id}`,{method:"PUT",body:JSON.stringify({excluido:$.excluido})},"$1s7uo0EeAe")}catch(n){console.error("Erro ao excluir pessoa:",n)}}const Z=()=>{const $=B.query.origem||"criar",n=B.query.id;$==="atualizar"?T.push(`/os/atualizar/${n}`):T.push("/os/criar-registro")};return($,n)=>{const N=ze,ye=se;return x(),R(ne,null,{default:t(()=>[e(i,{class:"mt-5",cols:"12"},{default:t(()=>[e(fe,{label:"Descrição",modelValue:o(r).descricao,"onUpdate:modelValue":n[0]||(n[0]=D=>o(r).descricao=D)},null,8,["modelValue"])]),_:1}),e(C,{class:"ml-1 mb-3"},{default:t(()=>[e(i,{class:"mt-6",cols:"8"},{default:t(()=>[e(Q,{label:"Selecione o Tipo",items:o(r).tiposBens,modelValue:o(r).tipo_id,"onUpdate:modelValue":n[1]||(n[1]=D=>o(r).tipo_id=D),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(i,{class:"ml-5",cols:"3"},{default:t(()=>[n[9]||(n[9]=m("label",null,"Valor",-1)),e(N,{modelValue:o(r).vlr_alienacao,"onUpdate:modelValue":n[2]||(n[2]=D=>o(r).vlr_alienacao=D)},null,8,["modelValue"])]),_:1}),m("div",null,[m("img",{class:"mt-7 ml-4",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:y})])]),_:1}),e(C,null,{default:t(()=>[e(i,null,{default:t(()=>[e(me,{style:{height:"465px"},headers:E,items:o(U)},{"item.descricao":t(({item:D})=>[m("h3",pt,ue(D.descricao),1)]),"item.actions":t(({item:D})=>[e(C,{style:{"margin-top":"-8px"},justify:"end"},{default:t(()=>[m("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ve=>$.redirectToFicha(D),title:"Visualizar Ficha"},n[10]||(n[10]=[m("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1)]),8,_t),m("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ve=>a(D.id),title:"Alterar Papel"},n[11]||(n[11]=[m("img",{style:{width:"30px",height:"30px"},src:ke,alt:"Editar"},null,-1)]),8,vt),m("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ve=>l(D),title:"Deletar Pessoa"},[D.excluido?(x(),K("img",gt)):(x(),K("img",yt))],8,ft)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(ge,{modelValue:o(u),"onUpdate:modelValue":n[8]||(n[8]=D=>le(u)?u.value=D:null),"max-width":"600px"},{default:t(()=>[e(ie,null,{default:t(()=>[e(Se,{style:{color:"green"}},{default:t(()=>n[12]||(n[12]=[z("Atualizar Bem")])),_:1}),e(Be,null,{default:t(()=>[e(i,{class:"mt-1",cols:"12"},{default:t(()=>[e(fe,{label:"Descrição",modelValue:o(h).descricao,"onUpdate:modelValue":n[3]||(n[3]=D=>o(h).descricao=D)},null,8,["modelValue"])]),_:1}),e(C,null,{default:t(()=>[e(i,{class:"mt-6 ml-3",cols:"8"},{default:t(()=>[e(Q,{label:"Selecione o Tipo",items:o(r).tiposBens,modelValue:o(h).tipo_id,"onUpdate:modelValue":n[4]||(n[4]=D=>o(h).tipo_id=D),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(i,{class:"ml-5",cols:"3"},{default:t(()=>[n[13]||(n[13]=m("label",null,"Valor",-1)),e(N,{modelValue:o(h).valor_mercado,"onUpdate:modelValue":n[5]||(n[5]=D=>o(h).valor_mercado=D)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Oe,null,{default:t(()=>[e(Pe),e(W,{color:"green",text:"",onClick:n[6]||(n[6]=D=>u.value=!1)},{default:t(()=>n[14]||(n[14]=[z("Cancelar")])),_:1}),e(W,{color:"green",text:"",onClick:n[7]||(n[7]=D=>s(o(h).id))},{default:t(()=>n[15]||(n[15]=[z("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(C,null,{default:t(()=>[e(ye,{onClick:Z},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>n[16]||(n[16]=[z("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},xt={style:{width:"800px","font-weight":"500"}},kt=["onClick"],$t=["onClick"],Vt=["onClick"],ht={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Reativar",title:"Reativar"},wt={key:1,src:_e,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},Ct={__name:"Imoveis",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(G){let p,_;const b=ee(),T=te(),B=ae(),{$toast:k}=oe();`${B.public.managemant}`;const v=`${B.public.managemant}/atos_bens`;`${B.public.managemant}`;const M=`${B.public.managemant}/listarTipoBens`,V=d(L("user-data").value.cartorio_token);d(L("user-data").value.usuario_id).value;const q=d([]),w=d([]),O=d(!1),g=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"valor_mercado"},{align:"end",value:"actions"}],U=re({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),h=async s=>{const{status:a}=await P(`${v}/${s}`,{method:"PUT",body:{descricao:w.value.descricao,tipo_id:w.value.tipo_id,valor_mercado:w.value.valor_mercado}},"$5vOsfPutkW");a.value==="success"&&(k.success("Bem Atualizado com sucesso!"),O.value=!1)},u=s=>{const a=q.value.find(A=>A.id===s);a&&(w.value=a,O.value=!0)},{data:E}=([p,_]=X(()=>P(`${M}`,{method:"POST",body:{cartorio_token:V.value,imoveis:!1}},"$RZpQXdI40b")),p=await p,_(),p);U.tiposBens=E.value;async function r(s){s.excluido=!s.excluido;try{await P(`${v}/${s.id}`,{method:"PUT",body:JSON.stringify({excluido:s.excluido})},"$2X0Zo2w1OO")}catch(a){console.error("Erro ao excluir pessoa:",a)}}const y=()=>{const s=T.query.origem||"criar",a=T.query.id;s==="atualizar"?b.push(`/os/atualizar/${a}`):b.push("/os/criar-registro")};return(s,a)=>{const A=ze,f=se;return x(),R(ne,null,{default:t(()=>[e(i,{class:"mt-5",cols:"12"},{default:t(()=>[e(fe,{label:"Descrição",modelValue:o(U).descricao,"onUpdate:modelValue":a[0]||(a[0]=l=>o(U).descricao=l)},null,8,["modelValue"])]),_:1}),e(C,null,{default:t(()=>[e(i,{cols:"3"},{default:t(()=>[e(Q,{label:"Selecione o Tipo de Registro"})]),_:1}),e(i,{cols:"2"},{default:t(()=>[e(I,{label:"Cartório"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"Matricula"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"Letra"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"Natureza"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"CIB"})]),_:1}),e(i,{cols:"3"},{default:t(()=>[e(Q,{label:"Selecione a Cidade"})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(i,null,{default:t(()=>[e(I,{label:"Quadra"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"Lote"})]),_:1}),e(i,{cols:"5"},{default:t(()=>[e(Q,{label:"Logradouro"})]),_:1}),e(i,{cols:"1"},{default:t(()=>[e(I,{label:"N*"})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(i,null,{default:t(()=>[e(I,{label:"Bairro"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"CEP"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"Complemento"})]),_:1}),e(i,{cols:"3"},{default:t(()=>[e(Q,{label:"Selecione o tipo de imovel"})]),_:1}),e(i,{cols:"3"},{default:t(()=>[e(I,{label:"Inscrição Municipal"})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(i,{cols:"3"},{default:t(()=>[e(Q,{label:"Selecione a Situação"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"Valor Alienação"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"Valor Avaliação"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"Valor Mercado"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"%ITB"})]),_:1}),e(i,null,{default:t(()=>[e(I,{label:"Valor ITB"})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(i,null,{default:t(()=>[e(me,{style:{height:"465px"},headers:g,items:o(q)},{"item.descricao":t(({item:l})=>[m("h3",xt,ue(l.descricao),1)]),"item.actions":t(({item:l})=>[e(C,{style:{"margin-top":"-8px"},justify:"end"},{default:t(()=>[m("div",{style:{cursor:"pointer"},class:"mr-2",onClick:Z=>s.redirectToFicha(l),title:"Visualizar Ficha"},a[7]||(a[7]=[m("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1)]),8,kt),m("div",{style:{cursor:"pointer"},class:"mr-2",onClick:Z=>u(l.id),title:"Alterar Papel"},a[8]||(a[8]=[m("img",{style:{width:"30px",height:"30px"},src:ke,alt:"Editar"},null,-1)]),8,$t),m("div",{style:{cursor:"pointer"},class:"mr-2",onClick:Z=>r(l),title:"Deletar Pessoa"},[l.excluido?(x(),K("img",ht)):(x(),K("img",wt))],8,Vt)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(ge,{modelValue:o(O),"onUpdate:modelValue":a[6]||(a[6]=l=>le(O)?O.value=l:null),"max-width":"600px"},{default:t(()=>[e(ie,null,{default:t(()=>[e(Se,{style:{color:"green"}},{default:t(()=>a[9]||(a[9]=[z("Atualizar Bem")])),_:1}),e(Be,null,{default:t(()=>[e(i,{class:"mt-1",cols:"12"},{default:t(()=>[e(fe,{label:"Descrição",modelValue:o(w).descricao,"onUpdate:modelValue":a[1]||(a[1]=l=>o(w).descricao=l)},null,8,["modelValue"])]),_:1}),e(C,null,{default:t(()=>[e(i,{class:"mt-6 ml-3",cols:"8"},{default:t(()=>[e(Q,{label:"Selecione o Tipo",items:o(U).tiposBens,modelValue:o(w).tipo_id,"onUpdate:modelValue":a[2]||(a[2]=l=>o(w).tipo_id=l),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(i,{class:"ml-5",cols:"3"},{default:t(()=>[a[10]||(a[10]=m("label",null,"Valor",-1)),e(A,{modelValue:o(w).valor_mercado,"onUpdate:modelValue":a[3]||(a[3]=l=>o(w).valor_mercado=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Oe,null,{default:t(()=>[e(Pe),e(W,{color:"green",text:"",onClick:a[4]||(a[4]=l=>O.value=!1)},{default:t(()=>a[11]||(a[11]=[z("Cancelar")])),_:1}),e(W,{color:"green",text:"",onClick:a[5]||(a[5]=l=>h(o(w).id))},{default:t(()=>a[12]||(a[12]=[z("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(C,null,{default:t(()=>[e(f,{onClick:y},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>a[13]||(a[13]=[z("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Pt={key:0,class:"loading-overlay"},Tt="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",Et={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(G,{emit:p}){const _=G;Fe("DocumentEditorContainer",[He,Xe]);const b=ae(),{$toast:T}=oe(),B=ee(),k=te(),v=p;Ee(`${b.public.docEditor}`);const M=`${b.public.managemant}/upload`,V=d(null),q=d(!1),w=async()=>{const y=await V.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),s=new FileReader;s.onload=()=>{const a=s.result;v("doc",a)},s.readAsText(y)},O=async()=>{q.value=!0;try{const y=await V.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),s=new FormData;s.append("file",y,"anexo.docx"),s.append("cartorio_token",L("user-data").value.cartorio_token),s.append("token",_.ato_token),s.append("tipo","ato_minuta");const{data:a,status:A}=await P(M,{method:"POST",body:s},"$071xxdqs20");if(A.value==="success"){T.success("Documento enviado!");const l=V.value.ej2Instances.documentEditor.pageCount;w(),v("page",l)}else T.error("Erro ao enviar documento para o sistema.")}catch(r){T.error("Erro ao salvar documento."),console.error(r)}finally{q.value=!1}},g=async()=>{u(!0);try{await U(),u(!0);const{data:r,status:y}=await P(substituirModelo,{method:"POST",body:{ato_token:_.ato_token}},"$0ktpWliD4l");r.value&&h(r.value)}catch(r){console.error("Erro ao gerar a minuta:",r),T.error("Ocorreu um erro ao gerar a minuta.")}finally{u(!1)}},U=async()=>{try{const{data:r}=await P(baixarDocumento,{method:"POST",body:{bucket:"qvgjz",path:"provider/modeloAto.sfdt"}},"$jXVvQjEE6u"),y=await fetchBlobFromMinIO(r.value);if(y){const s=new FileReader;s.onload=()=>{const a=s.result;V.value.ej2Instances.documentEditor.open(a),v("doc",a)},s.readAsText(y)}}catch(r){console.error("Erro ao carregar o modelo de minuta:",r),T.error("Falha ao carregar o modelo de minuta.")}},h=r=>{const y=V.value.ej2Instances.documentEditor,s=a=>{for(const[A,f]of Object.entries(a))if(/^<<.+>>$/.test(A))try{y.search.findAll(A),y.search.searchResults.length>0&&y.search.searchResults.replaceAll(f)}catch(l){console.error(`Erro ao substituir o marcador ${A}:`,l)}else if(A==="partes"&&Array.isArray(f)&&f.length>0)for(const l of f)typeof l=="object"&&s(l)};s(r)},u=r=>{q.value=r},E=()=>{const r=k.query.origem||"criar",y=k.query.id;r==="atualizar"?B.push(`/os/atualizar/${y}`):B.push("/os/criar-registro")};return(r,y)=>{const s=se;return x(),K(Te,null,[e(o(Ae),{height:"900px",ref_key:"documentEditorContainer",ref:V,serviceUrl:Tt,enableToolbar:!0,enableWordExport:!0},null,512),o(q)?(x(),K("div",Pt,[e(We,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):J("",!0),e(C,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(s,{class:"mr-4"},{default:t(()=>[e(W,{size:"large",onClick:E,color:"red"},{default:t(()=>y[0]||(y[0]=[z("Voltar")])),_:1})]),_:1}),e(W,{size:"large",color:"green",onClick:O,disabled:o(q)},{default:t(()=>y[1]||(y[1]=[z("Salvar")])),_:1},8,["disabled"]),e(W,{class:"ml-4",size:"large",color:"blue",onClick:g},{default:t(()=>y[2]||(y[2]=[z("Gerar Minuta")])),_:1})]),_:1})],64)}}},At={class:"d-flex align-center justify-center"},St=["innerHTML"],Bt={__name:"Livro",props:{ato_token:{type:String,required:!0},pages:{type:Number,required:!0},document:{type:String,required:!0}},setup(G){const p=G,_=ae();Ee(`${_.public.docEditor}`);const{$toast:b}=oe(),T=ee(),B=te(),k=`${_.public.managemant}/lavrarAto`,v=d("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),M=d(!1),V=d(null),q=d(null),w=d(null),O=async()=>{try{const{data:u,status:E}=await P(k,{method:"POST",body:{ato_token:p.ato_token,qtd_paginas:p.pages}},"$ZKnVBNYxp9");E.value==="success"?(V.value=u.value,q.value=u.value[0].selo,b.success("Ato lavrado com sucesso!")):b.error("Falha ao lavrar o ato.")}catch{b.error("Erro ao conectar com o servidor.")}},g=()=>{M.value=!1,O()},U=function(){w.value.ej2Instances.documentEditor.open(p.document)},h=()=>{const u=B.query.origem||"criar",E=B.query.id;u==="atualizar"?T.push(`/os/atualizar/${E}`):T.push("/os/criar-registro")};return(u,E)=>{const r=tt;return x(),K(Te,null,[e(C,null,{default:t(()=>[e(i,null,{default:t(()=>[(x(),R(o(Ae),{restrictEditing:!0,enableToolbar:!1,created:p.document?U:null,ref_key:"documentEditorContainer",ref:w,height:"850px",width:"850px",key:p.document},null,8,["created"]))]),_:1}),e(i,null,{default:t(()=>[m("div",At,[m("div",null,[m("img",{onClick:E[0]||(E[0]=y=>M.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:et}),o(V)?(x(),R(ie,{key:0,class:"mr-16"},{default:t(()=>[e(C,{"no-gutters":""},{default:t(()=>[e(i,null,{default:t(()=>[e(Ve,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[z(" Livro: "+ue(o(V)[0].livro_numero),1)]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(Ve,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[z(" Folhas : "+ue(o(V)[0].pagina_inicial)+" Á "+ue(o(V)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),m("div",{innerHTML:o(q)},null,8,St)]),_:1})):J("",!0)])])]),_:1})]),_:1}),e(W,{color:"red",size:"large",onClick:h},{default:t(()=>E[2]||(E[2]=[z("Voltar")])),_:1}),e(r,{show:o(M),condMessage:o(v),onClose:E[1]||(E[1]=y=>M.value=!1),onConfirm:g},null,8,["show","condMessage"])],64)}}},Ot=["onClick"],zt={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},qt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Dt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(G){let p,_;const b=G,T=ee(),B=te(),k=ae(),{$toast:v}=oe(),M=`${k.public.managemant}/listarEscrevente`,V=`${k.public.managemant}/getAtosTiposByToken`,q=`${k.public.managemant}/createAtosObservacao`,w=`${k.public.managemant}/updateAtosObservacao`,O=d(L("user-data").value.cartorio_token),g=d([]),U=d([]),h=[{title:"Data",align:"start",key:"data"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],u=re({observacao:null}),E={observacao:{required:he.withMessage("O campo é obrigatorio",we)}},r=Ce(E,u);[p,_]=X(()=>P(`${V}/${b.ato_token}`,{method:"GET"},"$aJM1TL1buW")),p=await p,_();async function y(){if(await r.value.$validate()){const{data:f,error:l,status:Z}=await P(q,{method:"POST",body:{ato_id:b.ato_id,observacao:u.observacao,user_id:L("user-data").value.usuario_id}},"$dMg99jeUNP");Z.value==="success"&&(g.value.push({data:st(f.value.created,"dd/mm/yyyy hh:mm"),observacao:f.value.observacao,id:f.value.id,escrevente:L("user-data").value.nome}),v.success("Observação registrada com sucesso"))}else v.error("Preencha os campos obrigatorios.")}async function s(f){f.excluido=!f.excluido;try{await P(`${w}/${f.id}`,{method:"PUT",body:JSON.stringify({excluido:f.excluido})},"$B6PdRx8Gp4")}catch(l){console.error("Erro ao excluir observacao:",l)}}const{data:a}=([p,_]=X(()=>P(M,{method:"POST",body:{cartorio_token:O}},"$xFHPGua26S")),p=await p,_(),p);U.value=a.value[0].func_json_escreventes;const A=()=>{const f=B.query.origem||"criar",l=B.query.id;f==="atualizar"?T.push(`/os/atualizar/${l}`):T.push("/os/criar-registro")};return(f,l)=>{const Z=se;return x(),R(ne,null,{default:t(()=>[e(C,{class:"mt-5"},{default:t(()=>[e(I,{label:"Observação",modelValue:o(u).observacao,"onUpdate:modelValue":l[0]||(l[0]=$=>o(u).observacao=$),required:"","error-messages":o(r).observacao.$errors.map($=>$.$message),onBlur:o(r).observacao.$touch,onInput:o(r).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),m("div",null,[m("img",{class:"btn-pointer ml-2",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:y})])]),_:1}),e(C,null,{default:t(()=>[e(i,null,{default:t(()=>[e(me,{style:{height:"465px"},headers:h,items:o(g)},{"item.actions":t(({item:$})=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:n=>s($),title:"Deletar Observação"},[$.excluido?(x(),K("img",zt)):(x(),K("img",qt))],8,Ot)]),_:1},8,["items"])]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(Z,{onClick:A},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>l[1]||(l[1]=[z("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Mt=["onClick"],Ut=["onClick"],It={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},Rt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Nt={__name:"Anexos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(G){const p=G,_=ae(),{$toast:b}=oe(),T=ee(),B=te(),k=`${_.public.biometria}/run-scanner`,v=`${_.public.managemant}/atos_anexos`,M=`${_.public.managemant}/atos_anexos`,V=d(!1),q=d([]),w=re({descricao:""}),O=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}];async function g(){try{await U(),await h()}catch(s){console.error("Erro ao executar scanner ou listar arquivos:",s)}}async function U(){try{const{data:s}=await P(k,{method:"GET"},"$WazoKp68Tw")}catch(s){b.error("Erro ao acionar o scanner:",s)}}async function h(){try{const{data:s,status:a}=await P("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:p.ato_token,cartorio_token:L("user-data").value.cartorio_token}},"$03Wxiia3aI")}catch(s){console.error("Erro ao enviar o arquivo:",s)}}const u=async()=>{V.value=!0},E=async()=>{const{data:s,error:a,status:A}=await P(v,{method:"POST",body:{ato_id:p.ato_id,descricao:w.descricao,user_id:L("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$D2PdkmlmwW");A.value==="success"&&(b.success("Anexo registrado com sucesso!"),q.value.push(s.value))};async function r(s){s.excluido=!s.excluido;try{await P(`${M}/${s.id}`,{method:"PUT",body:JSON.stringify({excluido:s.excluido})},"$WyW0hasRPI")}catch(a){console.error("Erro ao excluir pessoa:",a)}}const y=()=>{const s=B.query.origem||"criar",a=B.query.id;s==="atualizar"?T.push(`/os/atualizar/${a}`):T.push("/os/criar-registro")};return(s,a)=>{const A=se;return x(),R(ne,null,{default:t(()=>[e(C,null,{default:t(()=>[e(i,{cols:"5"},{default:t(()=>[e(I,{modelValue:o(w).descricao,"onUpdate:modelValue":a[0]||(a[0]=f=>o(w).descricao=f),label:"Descrição"},null,8,["modelValue"])]),_:1}),m("div",{onClick:g,title:"Escanear"},a[3]||(a[3]=[m("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:ot,alt:"Escanear"},null,-1)])),m("div",{onClick:E,title:"Criar"},a[4]||(a[4]=[m("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ce,alt:"Criar"},null,-1)]))]),_:1}),e(me,{headers:O,items:o(q),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:f})=>[e(C,null,{default:t(()=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:l=>u(f),title:"Visualizar Anexo"},a[5]||(a[5]=[m("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1)]),8,Mt),m("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:l=>r(f),title:"Deletar Pessoa"},[f.excluido?(x(),K("img",It)):(x(),K("img",Rt))],8,Ut)]),_:2},1024)]),_:1},8,["items"]),e(ge,{modelValue:o(V),"onUpdate:modelValue":a[2]||(a[2]=f=>le(V)?V.value=f:null),width:"600"},{default:t(()=>[e(ie,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(W,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:a[1]||(a[1]=f=>V.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(A,{onClick:y},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>a[6]||(a[6]=[z("Voltar")])),_:1})]),_:1})]),_:1})}}},co={__name:"procuracao",props:{ato_token:{type:String,required:!0}},setup(G){const p=G,_=d(null),b=d(null),T=d(null),B=d(null),k=d(null),v=d(!1),M=d(p.ato_token),V=({id:O,token:g})=>{_.value=O,b.value=g,v.value=!0},q=O=>{T.value=O},w=O=>{B.value=O};return(O,g)=>{const U=lt,h=mt,u=bt,E=Ct,r=Et,y=Bt,s=Dt,a=Nt;return x(),R(ie,{width:"1300"},{default:t(()=>[e(Je,{modelValue:o(k),"onUpdate:modelValue":g[0]||(g[0]=A=>le(k)?k.value=A:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(Y,{value:"dados"},{default:t(()=>g[2]||(g[2]=[z("Dados")])),_:1}),o(v)?(x(),R(Y,{key:0,value:"partes"},{default:t(()=>g[3]||(g[3]=[z("Partes")])),_:1})):J("",!0),o(v)?(x(),R(Y,{key:1,value:"bens"},{default:t(()=>g[4]||(g[4]=[z("Bens")])),_:1})):J("",!0),o(v)?(x(),R(Y,{key:2,value:"imoveis"},{default:t(()=>g[5]||(g[5]=[z("Imoveis")])),_:1})):J("",!0),o(v)?(x(),R(Y,{key:3,value:"minuta"},{default:t(()=>g[6]||(g[6]=[z("Minuta")])),_:1})):J("",!0),o(v)?(x(),R(Y,{key:4,value:"livro"},{default:t(()=>g[7]||(g[7]=[z("Livro")])),_:1})):J("",!0),o(v)?(x(),R(Y,{key:5,value:"observacao"},{default:t(()=>g[8]||(g[8]=[z("Observações")])),_:1})):J("",!0),o(v)?(x(),R(Y,{key:6,value:"anexo"},{default:t(()=>g[9]||(g[9]=[z("Anexos")])),_:1})):J("",!0)]),_:1},8,["modelValue"]),e(Ze,{modelValue:o(k),"onUpdate:modelValue":g[1]||(g[1]=A=>le(k)?k.value=A:null)},{default:t(()=>[e(H,{value:"dados"},{default:t(()=>[e(U,{onSaved:V,ato_token:o(M)},null,8,["ato_token"])]),_:1}),o(v)?(x(),R(H,{key:0,value:"partes"},{default:t(()=>[e(h,{ato_token:o(M),ato_id:o(_)},null,8,["ato_token","ato_id"])]),_:1})):J("",!0),o(v)?(x(),R(H,{key:1,value:"bens"},{default:t(()=>[e(u,{ato_token:o(b),ato_id:o(_)},null,8,["ato_token","ato_id"])]),_:1})):J("",!0),o(v)?(x(),R(H,{key:2,value:"imoveis"},{default:t(()=>[e(E,{ato_token:o(b),ato_id:o(_)},null,8,["ato_token","ato_id"])]),_:1})):J("",!0),o(v)?(x(),R(H,{key:3,value:"minuta"},{default:t(()=>[e(r,{onPage:q,onDoc:w,ato_token:o(b)},null,8,["ato_token"])]),_:1})):J("",!0),o(v)?(x(),R(H,{key:4,value:"livro"},{default:t(()=>[e(y,{pages:o(T),ato_token:o(b),document:o(B)},null,8,["pages","ato_token","document"])]),_:1})):J("",!0),o(v)?(x(),R(H,{key:5,value:"observacao"},{default:t(()=>[e(s,{ato_id:o(_)},null,8,["ato_id"])]),_:1})):J("",!0),o(v)?(x(),R(H,{key:6,value:"anexo"},{default:t(()=>[e(a,{ato_token:o(b),ato_id:o(_)},null,8,["ato_token","ato_id"])]),_:1})):J("",!0)]),_:1},8,["modelValue"])]),_:1})}}};export{co as default};
