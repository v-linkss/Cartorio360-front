import{_ as me}from"./CIOi651B.js";import{e as re,f as ce,g as pe,h as _e,i as fe,j as ve}from"./CVL8dfsG.js";import{_ as Ve}from"./CTE_f7JK.js";import{_ as be,r as p,C as Ce,u as Ie,J as ke,e as P,f as j,g as ye,h as ge,j as c,w as t,l as xe,o as m,b as a,a as $,t as W,i as o,c as G,N as Ue,A as O,d as _,k as b,V as r,m as y,v as L}from"./CGoc4MUN.js";import{$ as g,f as Ae}from"./ir26NcmK.js";import{f as q,a as De}from"./B0IxRygJ.js";import{V as S}from"./RINLxuLe.js";import{V as f}from"./EG0WhhH5.js";import{V as U}from"./I4sDCnD7.js";import{a as Re,V as C,b as Pe,c as I}from"./N3Exy2IB.js";import{V as u}from"./CRckTsZp.js";import{V as $e}from"./Ditxwh7n.js";import{V as Se}from"./C4PeRKZ3.js";import"./B67cC4VB.js";import"./aRLbyjLW.js";import"./Bb91ERKm.js";import"./BVz1G1IN.js";import"./CDLBF8HO.js";import"./DJvq3mCv.js";import"./BCQztBG6.js";import"./mLT-EQGs.js";import"./DzxUUUAF.js";import"./C9Kx3LrE.js";import"./s6YzGfIy.js";import"./CExG2k25.js";import"./DE4GfarV.js";import"./BGEDhNel.js";import"./DQDEuudW.js";import"./CXGaT9Kk.js";const Fe={style:{color:"#525050",padding:"10px 0px 0px 30px"}},Ne={style:{color:"#525050",padding:"25px 0px 0px 20px"}},Ee={style:{"background-color":"#f5f2f2",padding:"20px 0px 20px 20px"}},Te={key:0,class:"d-flex justify-center"},we={key:1},Be={__name:"[id]",emits:["saved"],setup(Je,{emit:Me}){const v=p(null),H=Ce(),{$toast:F}=Ie(),K=ke(),{id:x}=K.params,V=xe(),Q=`${V.public.auth}/service/gerencia/updatePessoa`,X=`${V.public.auth}/service/gerencia/listarEstadoCivil`,Y=`${V.public.auth}/service/gerencia/listarCapacidadeCivil`,Z=`${V.public.auth}/service/gerencia/listarCidades`,h=`${V.public.auth}/service/gerencia/getPessoaById`,ee=`${V.public.auth}/service/gerencia/listarSexo`,N=p([]),E=p([]),T=p([]),w=p([]),A=p(!0),B=p(null),J=p(null),M={nome:null,nome_pai:null,nome_mae:null,profissao:null,fone_celular:null,data_nascimento:null,doc_identificacao:null,cpf_pai:null,cpf_mae:null,tipo_pessoa:"FISICA",tabvalores_estadocivil_id:null,tabvalores_capacidadecivil_id:null,cidade_nascimento_id:null,tabvalores_sexo_id:null,cartorio_id:P("user-data").value.cartorio_id,user_id:P("user-data").value.usuario_id},ae=[{label:"FÍSICA",value:"FISICA"},{label:"JURÍDICA",value:"JURIDICA"},{label:"ESTRANGEIRA",value:"ESTRANGEIRA"}],l=j({...M}),z=j({...M});function oe(i){if(i)return i.replace(/[.\-]/g,"");i=null}async function le(){try{const[i,e,n,d,D]=await Promise.all([g(X),g(Y),g(Z),g(`${h}/${x}`),g(ee)]),R=P("pessoa_token");R.value=d.token,N.value=i,E.value=e,T.value=n,w.value=D,(d.data_nascimento||d.created)&&(d.data_nascimento=d.data_nascimento?q(d.data_nascimento,"dd/mm/yyyy"):null,d.created=d.created?q(d.created,"dd/mm/yyyy"):null),J.value=d.created,B.value=d.link_ficha,Object.assign(z,d),Object.assign(l,d)}catch(i){console.error("Erro ao carregar os dados da pessoa:",i)}finally{A.value=!1}}ye(()=>{x?le():A.value=!1});function te(i){const e={};for(const n in i)switch(n){case"doc_identificacao":case"cpf_pai":case"cpf_mae":e[n]=oe(i[n]);break;case"data_nascimento":e[n]=De(i[n]);break;case"fone_celular":e[n]=i[n]?i[n].replace(/[^0-9]/g,""):null;break;default:e[n]=i[n]===""?null:i[n];break}return e}async function se(){const i=te(l),e={};for(const d in i)i[d]!==z[d]&&(e[d]=i[d]);const{status:n}=await Ae(`${Q}/${x}`,{method:"PUT",body:e});n.value==="success"?(F.success("Pessoa atualizada com sucesso!"),H.push("/pessoas/lista")):F.error("Erro ao atualizar pessoa.")}return(i,e)=>{const n=me,d=re,D=Ve,R=ce,ie=pe,de=_e,ne=fe,ue=ve,k=ge("mask");return m(),c(S,null,{default:t(()=>[a(Se,{width:"1300"},{default:t(()=>[a(f,{style:{"background-color":"#f5f2f2"}},{default:t(()=>[$("h1",Fe,W(o(x)?"Atualização de Pessoas":"Cadastramento de Pessoas"),1),$("h3",Ne," Cadastrado em "+W(o(J)),1)]),_:1}),$("div",Ee,[a(U,{modelValue:o(l).tipo_pessoa,"onUpdate:modelValue":e[0]||(e[0]=s=>o(l).tipo_pessoa=s),style:{width:"200px"},items:ae,"item-title":"label","item-value":"value",label:"Tipo de pessoa","bg-color":"#F6F6F6",disabled:""},null,8,["modelValue"])]),o(A)?(m(),G("div",Te,[a(Ue,{indeterminate:"",class:"loading-spinner",size:"64"})])):(m(),G("div",we,[a(Re,{modelValue:o(v),"onUpdate:modelValue":e[1]||(e[1]=s=>O(v)?v.value=s:null),"bg-color":"#f5f2f2"},{default:t(()=>[a(C,{value:"dados"},{default:t(()=>e[18]||(e[18]=[_("Dados")])),_:1}),o(l).tipo_pessoa==="FISICA"?(m(),c(C,{key:0,value:"documento"},{default:t(()=>e[19]||(e[19]=[_("Documentos")])),_:1})):b("",!0),o(l).tipo_pessoa==="JURIDICA"?(m(),c(C,{key:1,value:"representante"},{default:t(()=>e[20]||(e[20]=[_("Representantes")])),_:1})):b("",!0),o(l).tipo_pessoa==="JURIDICA"||o(l).tipo_pessoa==="FISICA"?(m(),c(C,{key:2,value:"endereco"},{default:t(()=>e[21]||(e[21]=[_("Endereços")])),_:1})):b("",!0),o(l).tipo_pessoa==="FISICA"?(m(),c(C,{key:3,value:"biometria"},{default:t(()=>e[22]||(e[22]=[_("Biometria")])),_:1})):b("",!0),o(l).tipo_pessoa==="JURIDICA"||o(l).tipo_pessoa==="FISICA"?(m(),c(C,{key:4,value:"restricao"},{default:t(()=>e[23]||(e[23]=[_("Restrições")])),_:1})):b("",!0)]),_:1},8,["modelValue"]),a(Pe,{modelValue:o(v),"onUpdate:modelValue":e[17]||(e[17]=s=>O(v)?v.value=s:null)},{default:t(()=>[a(I,{value:"dados"},{default:t(()=>[o(l).tipo_pessoa==="FISICA"?(m(),c(S,{key:0},{default:t(()=>[a(f,null,{default:t(()=>[a(u,{cols:"12",md:"6"},{default:t(()=>[a(r,{modelValue:o(l).nome,"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).nome=s),label:"Nome"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[y(a(r,{modelValue:o(l).doc_identificacao,"onUpdate:modelValue":e[3]||(e[3]=s=>o(l).doc_identificacao=s),label:"CPF"},null,8,["modelValue"]),[[k,"###.###.###-##"]])]),_:1}),a(u,{md:"2"},{default:t(()=>[a($e,{label:"Sexo",modelValue:o(l).tabvalores_sexo_id,"onUpdate:modelValue":e[4]||(e[4]=s=>o(l).tabvalores_sexo_id=s),items:o(w),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(f,null,{default:t(()=>[a(u,{cols:"12",md:"4"},{default:t(()=>[a(U,{modelValue:o(l).tabvalores_estadocivil_id,"onUpdate:modelValue":e[5]||(e[5]=s=>o(l).tabvalores_estadocivil_id=s),items:o(N),"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(r,{modelValue:o(l).profissao,"onUpdate:modelValue":e[6]||(e[6]=s=>o(l).profissao=s),label:"Profissão"},null,8,["modelValue"])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(r,{modelValue:o(l).local_trabalho,"onUpdate:modelValue":e[7]||(e[7]=s=>o(l).local_trabalho=s),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),a(f,null,{default:t(()=>[a(u,{cols:"12",md:"2"},{default:t(()=>[y(a(r,{modelValue:o(l).data_nascimento,"onUpdate:modelValue":e[8]||(e[8]=s=>o(l).data_nascimento=s),label:"Data de nascimento",placeholder:"dd/mm/yyyy"},null,8,["modelValue"]),[[k,"##/##/####"]])]),_:1}),a(u,{cols:"12",md:"2"},{default:t(()=>[y(a(r,{modelValue:o(l).fone_celular,"onUpdate:modelValue":e[9]||(e[9]=s=>o(l).fone_celular=s),label:"Celular",placeholder:"'(99) 99999-9999'"},null,8,["modelValue"]),[[k,"(##) #####-####"]])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(U,{modelValue:o(l).tabvalores_capacidadecivil_id,"onUpdate:modelValue":e[10]||(e[10]=s=>o(l).tabvalores_capacidadecivil_id=s),items:o(E),label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(U,{modelValue:o(l).cidade_nascimento_id,"onUpdate:modelValue":e[11]||(e[11]=s=>o(l).cidade_nascimento_id=s),items:o(T),label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(f,null,{default:t(()=>[a(u,{cols:"12",md:"4"},{default:t(()=>[y(a(r,{modelValue:o(l).cpf_pai,"onUpdate:modelValue":e[12]||(e[12]=s=>o(l).cpf_pai=s),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[k,"###.###.###-##"]])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(r,{modelValue:o(l).nome_pai,"onUpdate:modelValue":e[13]||(e[13]=s=>o(l).nome_pai=s),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),a(f,null,{default:t(()=>[a(u,{cols:"12",md:"4"},{default:t(()=>[y(a(r,{modelValue:o(l).cpf_mae,"onUpdate:modelValue":e[14]||(e[14]=s=>o(l).cpf_mae=s),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[k,"###.###.###-##"]])]),_:1}),a(u,{cols:"12",md:"4"},{default:t(()=>[a(r,{modelValue:o(l).nome_mae,"onUpdate:modelValue":e[15]||(e[15]=s=>o(l).nome_mae=s),modelModifiers:{date:!0},label:"Nome da Mãe"},null,8,["modelValue"])]),_:1})]),_:1}),a(f,{class:"mb-3"},{default:t(()=>[a(n,{to:"/pessoas/lista"},{default:t(()=>[a(L,{size:"large",color:"red"},{default:t(()=>e[24]||(e[24]=[_("Voltar")])),_:1})]),_:1}),a(L,{onClick:e[16]||(e[16]=s=>se()),class:"ml-4",size:"large",color:"green"},{default:t(()=>e[25]||(e[25]=[_("Salvar")])),_:1})]),_:1})]),_:1})):o(l).tipo_pessoa==="JURIDICA"?(m(),c(d,{key:1})):o(l).tipo_pessoa==="ESTRANGEIRA"?(m(),c(D,{key:2})):b("",!0)]),_:1}),a(I,{value:"documento"},{default:t(()=>[a(R)]),_:1}),a(I,{value:"representante"},{default:t(()=>[a(ie)]),_:1}),a(I,{value:"endereco"},{default:t(()=>[a(de)]),_:1}),a(I,{value:"biometria"},{default:t(()=>[a(S,{class:"mt-5"},{default:t(()=>[a(ne,{"link-ficha":o(B)},null,8,["link-ficha"])]),_:1})]),_:1}),a(I,{value:"restricao"},{default:t(()=>[a(ue)]),_:1})]),_:1},8,["modelValue"])]))]),_:1})]),_:1})}}},fa=be(Be,[["__scopeId","data-v-ce16db38"]]);export{fa as default};
