import{_ as z}from"./_eiPsQKE.js";import{u as M,r as d,D as _,F as B,o as y,A as I,w as r,x as G,b as o,a as u,s as n,q as l,K,L as Z,c as U,J as H}from"./JRZVNENn.js";import{u as v}from"./CNLSntai.js";import{a as J,_ as W,b as Y,c as j}from"./CBYd86re.js";import{_ as Q}from"./DCsXQasW.js";import{_ as X}from"./DmmIIbRx.js";import{V as ee}from"./-p2TpwPa.js";import{V as f}from"./CBVSBrcK.js";import{V as s}from"./7MHqlTor.js";import{V as x}from"./OEwzB406.js";const te=u("h1",null,"Ordens de Serviço",-1),ae=u("hr",{class:"mt-5 mb-5"},null,-1),oe=["onClick"],le=u("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:X,alt:"Receber"},null,-1),ie=[le],re=["onClick","title"],se=["disabled","onClick"],ne={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:Y,alt:"Visualizar",title:"Reativar"},ue={key:1,src:j,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},xe={__name:"index",setup(de){const V=G(),A=`${V.public.managemant}/listarUsuarios`,h=`${V.public.managemant}/listarOrdensServico`,$=`${V.public.managemant}/tipoAtos`,E=M(),b=d(_("auth_token").value)||null,p=d(_("user-data").value.cartorio_token)||null,m=d([]),g=d([]),w=d([]),O=d(["PENDENTE","EM ANDAMENTO","CONCLUÍDA","LAVRADA"]),t=B({numero:null,data_inicio:k(),data_fim:k(),data_lavratura_inicio:null,data_lavratura_fim:null,protocolo:null,livro:null,folha:null,situacao:null,usuario_token:b.value,selo:null,ato_tipo_token:null,apresentante:null}),N=[{title:"Número",value:"numero"},{title:"Situação",value:"situacao"},{title:"CPF",value:"apresentante_cpf"},{title:"Apresentante",value:"apresentante_nome"},{title:"Usuario",value:"usuario_nome"},{title:"Data Recebimento",value:"dt_pagto"},{value:"actions"}];function k(){const i=new Date,a=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0"),e=String(i.getDate()).padStart(2,"0");return`${a}-${c}-${e}`}async function T(){const{data:i,error:a}=await v(A,{method:"POST",body:{cartorio_token:p.value}},"$865v1qFEsl");g.value=i.value}async function P(){try{const{data:i,error:a}=await v(h,{method:"POST",body:{cartorio_token:p.value,numero:t.numero,data_inicio:t.data_inicio,data_fim:t.data_fim,data_lavratura_inicio:t.data_lavratura_inicio,data_lavratura_fim:t.data_lavratura_fim,protocolo:t.protocolo,livro:t.livro,folha:t.folha,situacao:t.situacao,usuario_token:t.usuario_token,selo:t.selo,ato_tipo_token:t.ato_tipo_token,apresentante:t.apresentante}},"$GorUGsNsKS");i.value.length>0?m.value=i.value:m.value=[]}catch(i){console.error("Erro na requisição",i)}}async function R(){const{data:i,error:a}=await v($,{method:"POST",body:{cartorio_token:p.value,usuario_token:b.value}},"$wkWiNo8Od3");w.value=i.value}async function F(){const i=k(),{data:a,error:c}=await v(h,{method:"POST",body:{cartorio_token:p.value,usuario_token:b.value,data_fim:i,data_inicio:i}},"$zDH8ovqZZe");a.value.length>0?(m.value=a.value,console.log(a.value)):m.value=[]}T(),R(),F();async function L(i){console.log("excluido")}function C(i){const a=_("user-service"),c=m.value.find(e=>e.id===i);a.value=c.token,E.push({path:`/ordens-servicos/atualizar/${i}`})}const D=d(null),q=()=>{const i=_("user-service"),a=_("ordem-button");i.value=null,D.value=!0,a.value=D.value};return(i,a)=>{const c=z;return y(),I(ee,{class:"mt-5"},{default:r(()=>[o(f,{class:"mb-5"},{default:r(()=>[te,o(c,{to:"/ordens-servicos/criar-registro"},{default:r(()=>[u("img",{style:{width:"60px",height:"60px",cursor:"pointer","margin-left":"70px"},src:J,alt:"novo",onClick:q})]),_:1})]),_:1}),o(f,{style:{"margin-bottom":"-35px"}},{default:r(()=>[o(s,null,{default:r(()=>[o(n,{modelValue:l(t).numero,"onUpdate:modelValue":a[0]||(a[0]=e=>l(t).numero=e),label:"Número",style:{width:"110px"}},null,8,["modelValue"])]),_:1}),o(s,null,{default:r(()=>[o(n,{modelValue:l(t).data_inicio,"onUpdate:modelValue":a[1]||(a[1]=e=>l(t).data_inicio=e),type:"date",label:"Abertura de",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),o(s,null,{default:r(()=>[o(n,{modelValue:l(t).data_fim,"onUpdate:modelValue":a[2]||(a[2]=e=>l(t).data_fim=e),type:"date",label:"Abertura até",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),o(s,null,{default:r(()=>[o(n,{modelValue:l(t).data_lavratura_inicio,"onUpdate:modelValue":a[3]||(a[3]=e=>l(t).data_lavratura_inicio=e),type:"date",label:"Lavratura de",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),o(s,null,{default:r(()=>[o(n,{modelValue:l(t).data_lavratura_fim,"onUpdate:modelValue":a[4]||(a[4]=e=>l(t).data_lavratura_fim=e),type:"date",label:"Lavratura até",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),o(s,null,{default:r(()=>[o(n,{modelValue:l(t).protocolo,"onUpdate:modelValue":a[5]||(a[5]=e=>l(t).protocolo=e),label:"Protocolo",style:{width:"110px"}},null,8,["modelValue"])]),_:1}),o(s,{md:"1"},{default:r(()=>[o(n,{modelValue:l(t).livro,"onUpdate:modelValue":a[6]||(a[6]=e=>l(t).livro=e),label:"Livro",style:{width:"80px"}},null,8,["modelValue"])]),_:1}),o(s,{md:"1"},{default:r(()=>[o(n,{modelValue:l(t).folha,"onUpdate:modelValue":a[7]||(a[7]=e=>l(t).folha=e),label:"Folha",style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1}),o(f,null,{default:r(()=>[o(s,{md:"3"},{default:r(()=>[o(x,{modelValue:l(t).situacao,"onUpdate:modelValue":a[8]||(a[8]=e=>l(t).situacao=e),items:l(O),label:"Situação"},null,8,["modelValue","items"])]),_:1}),o(s,{md:"2"},{default:r(()=>[o(x,{items:l(g),modelValue:l(t).usuario_token,"onUpdate:modelValue":a[9]||(a[9]=e=>l(t).usuario_token=e),"item-title":"user_nome","item-value":"user_token",label:"Usuario"},null,8,["items","modelValue"])]),_:1}),o(s,{md:"1"},{default:r(()=>[o(n,{modelValue:l(t).selo,"onUpdate:modelValue":a[10]||(a[10]=e=>l(t).selo=e),label:"Selo"},null,8,["modelValue"])]),_:1}),o(s,{md:"3"},{default:r(()=>[o(x,{modelValue:l(t).ato_tipo_token,"onUpdate:modelValue":a[11]||(a[11]=e=>l(t).ato_tipo_token=e),items:l(w),"item-title":"descricao","item-value":"token",label:"Serviço"},null,8,["modelValue","items"])]),_:1}),o(s,{md:"2"},{default:r(()=>[o(n,{modelValue:l(t).apresentante,"onUpdate:modelValue":a[12]||(a[12]=e=>l(t).apresentante=e),label:"Apresentante"},null,8,["modelValue"])]),_:1}),o(s,null,{default:r(()=>[u("div",null,[u("img",{onClick:P,style:{width:"40px",height:"40px",cursor:"pointer"},src:Q,alt:"Pesquisar"})])]),_:1})]),_:1}),ae,o(H,{headers:N,items:l(m),"item-key":"id"},{"item.actions":r(({item:e})=>[o(f,{style:{display:"flex",gap:"10px","margin-top":"-5px"}},{default:r(()=>[u("div",{onClick:S=>C(e.id),title:"Receber"},ie,8,oe),u("div",{class:Z({disabled:!e.btn_editar}),onClick:S=>e.btn_editar?C(e.id):null,title:e.btn_editar?"Editar":"Desabilitado"},[u("img",{style:K({cursor:e.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:W,alt:"Editar"},null,4)],10,re),u("div",{disabled:!e.btn_cancelar,onClick:S=>e.btn_cancelar?L(e):null,title:"Excluir"},[e.excluido?(y(),U("img",ne)):(y(),U("img",ue))],8,se)]),_:2},1024)]),_:1},8,["items"])]),_:1})}}};export{xe as default};
