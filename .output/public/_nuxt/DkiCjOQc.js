import{_ as ge,a as xe,b as be,c as $e,d as ke,e as we,f as Ce}from"./BObpWxjw.js";import{_ as Ae}from"./LGbU9aAT.js";import{_ as se}from"./CDnxmqAx.js";import{_ as ie,a as re,b as ne}from"./BP1uhy__.js";import{_ as ue}from"./-TwvA6j7.js";import{_ as Y}from"./CZGftj2R.js";import{C as de,H as Z,u as he,r as d,m as X,D as Te,I as j,o as g,G as M,w as o,b as t,v as a,a as r,t as ee,c as G,x as q,d as y,J as Pe,A as W,s as te,p as ze,V as ae,K as E,F as Be,y as Ue}from"./DNoBv0Tt.js";import{u as N}from"./scyPXQ_q.js";import{V as w}from"./B5_Y4ycl.js";import{V as le}from"./Cf-u5kzx.js";import{V as C}from"./BrFq2SMG.js";import{V as K}from"./CgIyLs0i.js";import{V as ce}from"./Bloujpk2.js";import{V as De}from"./B2hYO6PL.js";import{V as me,a as Ie,b as Oe,c as Se}from"./BjSmWpBR.js";import{V as pe}from"./CBBz2STD.js";import{_ as Me,a as qe}from"./Dl93rS9c.js";import{f as F}from"./CYcdmsjH.js";import{V as Re,a as z,b as Ee,c as B}from"./e_IEPa01.js";import"./DgfIMnAY.js";import"./9amnWiSU.js";import"./CUvqw8uc.js";import"./pWR4Ade3.js";import"./mI1rUVB0.js";import"./B0hh3HmH.js";import"./CZ_Zr3tY.js";import"./CdP3NN9a.js";import"./Bfc-x8ai.js";import"./B0U7WkaJ.js";const Le={style:{width:"800px","font-weight":"500"}},Ne=["onClick"],Fe=["onClick"],je=["onClick"],Ge={key:0,style:{width:"30px",height:"30px"},src:re,alt:"Reativar",title:"Reativar"},Je={key:1,src:ne,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},He={__name:"Bens",async setup(oe){let u,V;const A=de(),x=Z(),p=te(),{$toast:b}=he(),_=`${p.public.managemant}/atos_bens`,$=`${p.public.managemant}/atos_bens`,h=`${p.public.managemant}/listarBens`,U=`${p.public.managemant}/listarTipoBens`,D=d(X("user-data").value.cartorio_token),I=d(X("user-data").value.usuario_id).value,v=d([]),m=d([]),f=d(!1),T=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"vlr_alienacao"},{align:"end",value:"actions"}],n=Te({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),L=async()=>{if(!n.vlr_alienacao&&!n.descricao){b.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:l,status:e}=await N(`${_}`,{method:"POST",body:{descricao:n.descricao,tipo_id:n.tipo_id,valor_mercado:"0.00",vlr_alienacao:n.vlr_alienacao.replace(/,/g,""),user_id:I,ato_id:Number.parseInt(x.query.ato_id),token:x.query.ato_token_edit}},"$aGIwRtPn6M");e.value==="success"&&(b.success("Bem registrado com sucesso!"),v.value.push(l.value),Object.assign(n,{vlr_alienacao:null,descricao:null,tipo_id:null}))},R=async l=>{const{status:e}=await N(`${$}/${l}`,{method:"PUT",body:{descricao:m.value.descricao,tipo_id:m.value.tipo_id,vlr_alienacao:m.value.vlr_alienacao.replace(/,/g,"")}},"$4hUMyAQlzU");e.value==="success"&&(b.success("Bem Atualizado com sucesso!"),f.value=!1)},J=l=>{const e=v.value.find(k=>k.id===l);e&&(m.value=e,f.value=!0)},{data:c}=([u,V]=j(()=>N(`${U}`,{method:"POST",body:{cartorio_token:D.value,imoveis:!1}},"$da802I2H8c")),u=await u,V(),u);n.tiposBens=c.value;const{data:s}=([u,V]=j(()=>N(`${h}`,{method:"POST",body:{ato_token:x.query.ato_token_edit}},"$iXfJJrO35d")),u=await u,V(),u);v.value=s.value&&Object.keys(s.value).length===0?[]:s.value;async function O(l){l.excluido=!l.excluido;try{await N(`${$}/${l.id}`,{method:"PUT",body:JSON.stringify({excluido:l.excluido})},"$PGKHfsa7Pl")}catch(e){console.error("Erro ao excluir pessoa:",e)}}const S=()=>{const l=x.query.origem||"criar",e=x.query.id;l==="atualizar"?A.push(`/os/atualizar/${e}`):A.push("/os/criar-registro")};return(l,e)=>{const k=Ae,Q=se;return g(),M(pe,null,{default:o(()=>[t(w,{class:"mt-5",cols:"12"},{default:o(()=>[t(le,{label:"Descrição",modelValue:a(n).descricao,"onUpdate:modelValue":e[0]||(e[0]=i=>a(n).descricao=i)},null,8,["modelValue"])]),_:1}),t(C,{class:"ml-1 mb-3"},{default:o(()=>[t(w,{class:"mt-6",cols:"8"},{default:o(()=>[t(K,{label:"Selecione o Tipo",items:a(n).tiposBens,modelValue:a(n).tipo_id,"onUpdate:modelValue":e[1]||(e[1]=i=>a(n).tipo_id=i),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(w,{class:"ml-5",cols:"3"},{default:o(()=>[e[9]||(e[9]=r("label",null,"Valor",-1)),t(k,{modelValue:a(n).vlr_alienacao,"onUpdate:modelValue":e[2]||(e[2]=i=>a(n).vlr_alienacao=i)},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-7 ml-4",src:ie,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:L})])]),_:1}),t(C,null,{default:o(()=>[t(w,null,{default:o(()=>[t(ce,{style:{height:"465px"},headers:T,items:a(v)},{"item.descricao":o(({item:i})=>[r("h3",Le,ee(i.descricao),1)]),"item.actions":o(({item:i})=>[t(C,{style:{"margin-top":"-8px"},justify:"end"},{default:o(()=>[r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:H=>l.redirectToFicha(i),title:"Visualizar Ficha"},e[10]||(e[10]=[r("img",{style:{width:"30px",height:"30px"},src:ue,alt:"Visualizar"},null,-1)]),8,Ne),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:H=>J(i.id),title:"Alterar Papel"},e[11]||(e[11]=[r("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Editar"},null,-1)]),8,Fe),r("div",{style:{cursor:"pointer"},class:"mr-2",onClick:H=>O(i),title:"Deletar Pessoa"},[i.excluido?(g(),G("img",Ge)):(g(),G("img",Je))],8,je)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),t(De,{modelValue:a(f),"onUpdate:modelValue":e[8]||(e[8]=i=>q(f)?f.value=i:null),"max-width":"600px"},{default:o(()=>[t(me,null,{default:o(()=>[t(Ie,{style:{color:"green"}},{default:o(()=>e[12]||(e[12]=[y("Atualizar Bem")])),_:1}),t(Oe,null,{default:o(()=>[t(w,{class:"mt-1",cols:"12"},{default:o(()=>[t(le,{label:"Descrição",modelValue:a(m).descricao,"onUpdate:modelValue":e[3]||(e[3]=i=>a(m).descricao=i)},null,8,["modelValue"])]),_:1}),t(C,null,{default:o(()=>[t(w,{class:"mt-6 ml-3",cols:"8"},{default:o(()=>[t(K,{label:"Selecione o Tipo",items:a(n).tiposBens,modelValue:a(m).tipo_id,"onUpdate:modelValue":e[4]||(e[4]=i=>a(m).tipo_id=i),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),t(w,{class:"ml-5",cols:"3"},{default:o(()=>[e[13]||(e[13]=r("label",null,"Valor",-1)),t(k,{modelValue:a(m).vlr_alienacao,"onUpdate:modelValue":e[5]||(e[5]=i=>a(m).vlr_alienacao=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(Se,null,{default:o(()=>[t(Pe),t(W,{color:"green",text:"",onClick:e[6]||(e[6]=i=>f.value=!1)},{default:o(()=>e[14]||(e[14]=[y("Cancelar")])),_:1}),t(W,{color:"green",text:"",onClick:e[7]||(e[7]=i=>R(a(m).id))},{default:o(()=>e[15]||(e[15]=[y("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(C,null,{default:o(()=>[t(Q,{onClick:S},{default:o(()=>[t(W,{size:"large",color:"red"},{default:o(()=>e[16]||(e[16]=[y("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},We={style:{width:"200px"}},Ke={style:{width:"300px"}},Qe={style:{width:"800px","font-weight":"500"}},Xe=["onClick"],Ye=["onClick"],Ze=["onClick"],et={key:0,style:{width:"30px",height:"30px"},src:re,alt:"Visualizar",title:"Reativar"},tt={key:1,src:ne,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ot={__name:"Imoveis",async setup(oe){let u,V;const A=te(),x=`${A.public.auth}/service/gerencia/atos_imoveis`,p=`${A.public.auth}/service/gerencia/atos_bens`,b=de(),_=Z(),$=d(""),h=d(""),U=d(!1),D=d(!1),I=d(null),v=[{title:"Matrícula",value:"registro_matricula"},{title:"Descrição",value:"descricao"},{value:"actions"}],{data:m,status:f}=([u,V]=j(()=>F(x,{method:"POST",body:{ato_token:_.query.ato_token_edit}})),u=await u,V(),u),T=ze(()=>{if(Object.keys(m.value).length!==0)return m.value.filter(c=>{const s=c.matricula?c.matricula.toLowerCase():"",O=c.descricao?c.descricao.toLowerCase():"",S=s.includes(h.value.toLowerCase()),l=O.includes($.value.toLowerCase());return S&&l})});async function n(c){c.excluido=!c.excluido;try{await F(`${p}/${c.id}`,{method:"PUT",body:{excluido:c.excluido}})}catch(s){console.error("Erro ao excluir pessoa:",s)}}function L(c){I.value=c,D.value=!0}const R=async()=>{await F(x,{method:"POST",body:{ato_token:_.query.ato_token_edit}})},J=()=>{const c=_.query.origem||"criar",s=_.query.id;c==="atualizar"?b.push(`/os/atualizar/${s}`):b.push("/os/criar-registro")};return(c,s)=>{const O=se,S=Me,l=qe;return a(f)==="success"?(g(),M(pe,{key:0,class:"mt-5"},{default:o(()=>[r("img",{onClick:s[0]||(s[0]=e=>U.value=!0),style:{cursor:"pointer"},src:ie,alt:"Cadastro"}),t(C,{style:{gap:"3rem"}},{default:o(()=>[r("div",We,[t(ae,{class:"mt-7 mb-4",modelValue:a(h),"onUpdate:modelValue":s[1]||(s[1]=e=>q(h)?h.value=e:null),label:"Matrícula","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),r("div",Ke,[t(ae,{class:"mt-7 mb-4",modelValue:a($),"onUpdate:modelValue":s[2]||(s[2]=e=>q($)?$.value=e:null),label:"Descrição","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])])]),_:1}),t(ce,{density:"compact",headers:v,items:a(T),"item-key":"id"},{"item.descricao":o(({item:e})=>[r("h3",Qe,ee(e.descricao),1)]),"item.actions":o(({item:e})=>[t(C,{style:{display:"flex",gap:"10px","justify-content":"flex-end"}},{default:o(()=>[r("div",{style:{cursor:"pointer"},onClick:k=>c.redirectToView(e.id),title:"Visualizar"},s[5]||(s[5]=[r("img",{style:{width:"30px",height:"30px"},src:ue,alt:"Visualizar"},null,-1)]),8,Xe),r("div",{style:{cursor:"pointer"},onClick:k=>L(e.id),title:"Atualizar"},s[6]||(s[6]=[r("img",{style:{width:"30px",height:"30px"},src:Y,alt:"Atualizar"},null,-1)]),8,Ye),r("div",{style:{cursor:"pointer"},onClick:k=>n(e),title:"Deletar"},[e.excluido?(g(),G("img",et)):(g(),G("img",tt))],8,Ze)]),_:2},1024)]),_:1},8,["items"]),t(O,{onClick:J},{default:o(()=>[t(W,{size:"large",color:"red"},{default:o(()=>s[7]||(s[7]=[y("Voltar")])),_:1})]),_:1}),t(S,{onRefresh:R,show:a(U),onClose:s[3]||(s[3]=e=>U.value=!1)},null,8,["show"]),t(l,{onRefresh:R,imovel_id:a(I),show:a(D),onClose:s[4]||(s[4]=e=>D.value=!1)},null,8,["imovel_id","show"])]),_:1})):E("",!0)}}},at={class:"mb-10"},lt={style:{color:"red","margin-left":"30px"}},It={__name:"[id]",async setup(oe){let u,V;const A=d(null),x=d(null),p=d(null),b=te(),_=Z(),$=`${b.public.auth}/service/gerencia/listarSituacoes`,h=`${b.public.auth}/service/gerencia/getAtos`,U=d(X("user-data").value.cartorio_token),D=_.query.id?{ato_token:_.query.tipo_ato_token}:{cartorio_token:U},I=d([]),v=d([]),m=d("PROCURAÇÕES"),f=d(!1),T=d(_.query.usa_imoveis==="true"),n=d(_.query.tipo_ato||"");async function L(){try{const{data:l}=await F(`${h}/${_.query.ato_id}`,{method:"GET"});v.value=l.value}catch(l){console.log(l)}}[u,V]=j(()=>L()),await u,V();const{data:R,status:J}=([u,V]=j(()=>F($,{method:"POST",body:D})),u=await u,V(),u);I.value=R.value;const c=l=>{A.value=l},s=l=>{x.value=l};function O(){v.dt_lavratura||(f.value=!0)}function S(l){n.value=l}return(l,e)=>{const k=xe,Q=be,i=He,H=ot,_e=$e,ve=ke,fe=we,ye=Ce,Ve=ge;return g(),G(Be,null,[r("div",at,[t(C,{class:"mb-5 mt-5"},{default:o(()=>[e[5]||(e[5]=r("h1",null,"Ordem de Serviço nº",-1)),r("h1",lt,ee(a(_).query.numero_os),1)]),_:1}),t(C,null,{default:o(()=>[t(w,{md:"6"},{default:o(()=>[t(K,{class:"mr-5",modelValue:a(m),"onUpdate:modelValue":e[0]||(e[0]=P=>q(m)?m.value=P:null),disabled:""},null,8,["modelValue"])]),_:1}),t(w,{md:"5"},{default:o(()=>[t(K,{modelValue:a(n),"onUpdate:modelValue":e[1]||(e[1]=P=>q(n)?n.value=P:null),label:"Serviço e Tipo de Ato Selecionado",disabled:""},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"mt-2",style:Ue({cursor:a(v).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:Y,alt:"Editar",onClick:O},null,4)])]),_:1})]),t(me,{width:"1300"},{default:o(()=>[t(Re,{modelValue:a(p),"onUpdate:modelValue":e[2]||(e[2]=P=>q(p)?p.value=P:null),"bg-color":"#f5f2f2"},{default:o(()=>[t(z,{value:"dados"},{default:o(()=>e[6]||(e[6]=[y("Dados")])),_:1}),t(z,{value:"partes"},{default:o(()=>e[7]||(e[7]=[y("Partes")])),_:1}),a(T)?(g(),M(z,{key:0,value:"bens"},{default:o(()=>e[8]||(e[8]=[y("Bens")])),_:1})):E("",!0),a(T)?(g(),M(z,{key:1,value:"imoveis"},{default:o(()=>e[9]||(e[9]=[y("Imoveis")])),_:1})):E("",!0),t(z,{value:"minuta"},{default:o(()=>e[10]||(e[10]=[y("Minuta")])),_:1}),t(z,{value:"livro"},{default:o(()=>e[11]||(e[11]=[y("Livro")])),_:1}),t(z,{value:"observacao"},{default:o(()=>e[12]||(e[12]=[y("Observações")])),_:1}),t(z,{value:"anexo"},{default:o(()=>e[13]||(e[13]=[y("Anexos")])),_:1})]),_:1},8,["modelValue"]),t(Ee,{modelValue:a(p),"onUpdate:modelValue":e[3]||(e[3]=P=>q(p)?p.value=P:null)},{default:o(()=>[t(B,{value:"dados"},{default:o(()=>[t(k,{item_dados:a(v),item_situacoes:a(I)},null,8,["item_dados","item_situacoes"])]),_:1}),t(B,{value:"partes"},{default:o(()=>[t(Q)]),_:1}),a(T)?(g(),M(B,{key:0,value:"bens"},{default:o(()=>[t(i)]),_:1})):E("",!0),a(T)?(g(),M(B,{key:1,value:"imoveis"},{default:o(()=>[t(H)]),_:1})):E("",!0),t(B,{value:"minuta"},{default:o(()=>[t(_e,{onPage:c,onDoc:s})]),_:1}),t(B,{value:"livro"},{default:o(()=>[t(ve,{pages:a(A),document:a(x)},null,8,["pages","document"])]),_:1}),t(B,{value:"observacao"},{default:o(()=>[t(fe)]),_:1}),t(B,{value:"anexo"},{default:o(()=>[t(ye)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(f)?(g(),M(Ve,{key:0,show:a(f),servicos:a(v).servicos||[],tiposAtos:a(v).tiposAtos||[],onClose:e[4]||(e[4]=P=>f.value=!1),onUpdateAto:S},null,8,["show","servicos","tiposAtos"])):E("",!0)],64)}}};export{It as default};
