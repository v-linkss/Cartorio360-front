import{a as C}from"./DG2CSjQj.js";import{r as p,h as x,o as B,v as T,w as e,b as o,d as r,x as h,y as b,C as $,z as R}from"./Drk7szYA.js";import{u as _}from"./OkMMWUFB.js";import{a as F,b as O,d as P,V as j}from"./BHGoQVC7.js";const D={__name:"FichaCard",props:{show:Boolean,item:Object},emits:["close","confirmar"],setup(g,{emit:k}){const i=g,u=R(),w=`${u.public.managemant}/getLinkTipo`,V=`${u.public.managemant}/download`,t=p(i.show),l=p(),d=k;x(()=>i.show,async a=>{t.value=a,await y()});const v=()=>{d("confirmar"),m()},y=async()=>{var f;if(!i.item.id)return;const{data:a}=await _(w,{method:"POST",body:{tipo:"ficha",id:i.item.id}},"$4omB3S9Tg3");if(!((f=a.value)!=null&&f.link))return;const{data:n}=await _(V,{method:"POST",body:{bucket:"qvgjz",path:a.value.link}},"$yanMHqBuqW"),c=a.value.link,s=n.value;/\.(tr7|tiff)$/i.test(c)?(l.value=s,console.log("rasdf")):fotoRender.value=`data:image/jpeg;base64,${s}`},m=()=>{t.value=!1,l.value=null,d("close")};return(a,n)=>{const c=C;return B(),T(j,{persistent:"",modelValue:h(t),"onUpdate:modelValue":n[0]||(n[0]=s=>$(t)?t.value=s:null),"max-width":"700"},{default:e(()=>[o(F,null,{default:e(()=>[o(O,{class:"text-h5"},{default:e(()=>[r("Ficha de Firma")]),_:1}),o(c,{"tiff-url":h(l)},null,8,["tiff-url"]),o(P,null,{default:e(()=>[o(b,{style:{"background-color":"#429946",color:"white"},onClick:v},{default:e(()=>[r("Reconhecer")]),_:1}),o(b,{style:{"background-color":"red",color:"white"},onClick:m},{default:e(()=>[r("Voltar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};export{D as _};
