import{V as _e,c as Te}from"./C9tOubko.js";import{V as ne}from"./XNimg4P9.js";import{a as xe,V as te}from"./Dti4q3sj.js";import{V as ve}from"./BXJRHPRv.js";import{H as fe,u as be,r as u,m as oe,E as le,I as se,g as pe,n as Ie,s as a,o as y,c as L,b as e,O as Pe,C as A,w as l,V as O,a as T,z as R,d as B,A as ge,t as Se,v as ie,J as Y}from"./xl25qiRG.js";import{_ as Ve}from"./BCkASCAZ.js";import{_ as ye}from"./Gnuvr7sq.js";import{c as $e,r as ke,u as ze}from"./1V3_fNay.js";import{u as S}from"./CcPBPL8f.js";import{V as E}from"./DkbN-eQS.js";import{V as _}from"./CnTdhFYg.js";import{V as Ee}from"./txtY-sTP.js";import{V as H}from"./BoGpu07Z.js";import{b as Be}from"./sh_CsHtC.js";import{_ as Me}from"./BVz1G1IN.js";import{_ as qe}from"./CrWJisGq.js";import{_ as Ne}from"./pWXklnL3.js";import{_ as Oe,a as Ae}from"./DJvq3mCv.js";import{V as je}from"./DGqk-aAY.js";const Le={key:0,class:"d-flex justify-center"},we={__name:"Dados",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0},isUpdate:{type:Boolean},imovel_id:{type:Number}},emits:["saved","close-modal","refresh-list"],async setup(N,{emit:j}){let r,c;const p=N,k=j,w=fe(),d=ge(),{$toast:x}=be(),{id:g}=w.params,V=`${d.public.managemant}/atos_bens`,M=`${d.public.managemant}/atos_bens`,z=`${d.public.managemant}/atos_bens`,b=`${d.public.managemant}/registro_imoveis`,h=`${d.public.managemant}/natureza_imoveis`,D=`${d.public.managemant}/tipo_logradouros`,$=`${d.public.managemant}/situacao_imoveis`,v=`${d.public.managemant}/listarCidades`,q=`${d.public.managemant}/listarTipoBens`,I=u(oe("user-data").value.cartorio_token),F=u(oe("user-data").value.usuario_id).value,J=u([]),Q=u([]),re=u([]),W=u([]),X=u([]),P=u([]),Z=u(!0),i=le({tabvalores_tipo_regimovel_id:null,registro_cartorio:null,registro_matricula:null,matricula_letra:null,tabvalores_nat_imovel_id:null,cib:null,end_cidade_id:null,end_quadra:null,end_lote:null,tabvalores_tipologradouro_id:null,tipo_id:null,descricao:null,inscricao_estadual:null,tabvalores_situacao_imoveis_id:null,vlr_avaliacao:null,vlr_mercado:null,valor_mercado:"0.00",aliq_itbi:null,vlr_itbi:null,user_id:F,ato_id:Number(w.query.ato_id)||Number(p.ato_id)}),G=le({...i}),m={descricao:{required:$e.withMessage("O campo é obrigatório",ke)},tipo_id:{required:$e.withMessage("O campo é obrigatório",ke)}},K=ze(m,i),de=async()=>{var s,ee,U,ce;if(!await K.value.$validate()){x.error("Preencha todos os campos obrigatórios!");return}const o={...i,vlr_avaliacao:(s=i.vlr_avaliacao)==null?void 0:s.replace(/,/g,""),vlr_mercado:(ee=i.vlr_mercado)==null?void 0:ee.replace(/,/g,""),aliq_itbi:(U=i.aliq_itbi)==null?void 0:U.replace(/,/g,""),vlr_itbi:(ce=i.vlr_itbi)==null?void 0:ce.replace(/,/g,"")},{data:n,status:f}=await S(`${V}`,{method:"POST",body:o},"$0Mdv6RF9cH");f.value==="success"&&(x.success("Imovel criado com sucesso!"),k("saved",{id:n.value.id,token:n.value.token,ato_id:n.value.ato_id}))},{data:ue}=([r,c]=se(()=>S(`${q}`,{method:"POST",body:{cartorio_token:I.value,imoveis:!0}},"$H1S2cTYpdB")),r=await r,c(),r);if(P.value=ue.value,p.isUpdate===!0){const{data:t}=([r,c]=se(()=>S(`${M}/${p.imovel_id}`,{method:"GET"},"$jHrIlABk8l")),r=await r,c(),r);t.value&&Object.keys(i).forEach(o=>{t.value[o]!==void 0&&(i[o]=t.value[o])}),Object.assign(G,i)}async function ae(){try{const[t,o,n,f,s]=await Promise.all([$fetch(h),$fetch(b),$fetch($),$fetch(D),$fetch(v)]);Q.value=t,J.value=o,X.value=n,re.value=f,W.value=s}catch(t){console.error("Erro ao carregar os dados de imoveis pessoa:",t)}finally{Z.value=!1}}const me=async t=>{const o={};if(Object.keys(i).forEach(f=>{i[f]!==G[f]&&(o[f]=i[f])}),["vlr_avaliacao","vlr_mercado","aliq_itbi","vlr_itbi"].forEach(f=>{var s;o[f]&&(o[f]=(s=o[f])==null?void 0:s.toString().replace(/,/g,""))}),Object.keys(o).length===0)return;const{status:n}=await S(`${z}/${t}`,{method:"PUT",body:o},"$BZjXR26AL9");n.value==="success"&&(x.success("Imovel Atualizado com sucesso!"),k("close-modal"))},C=()=>{k("close-modal"),k("refresh-list")};return pe([()=>i.vlr_avaliacao?i.vlr_avaliacao.replace(/,/g,""):"0",()=>i.aliq_itbi?i.aliq_itbi.replace(/,/g,""):"0"],([t,o])=>{i.vlr_itbi=(Number(t)*Number(o)/100).toFixed(2)}),Ie(()=>{g||p.ato_id?ae():Z.value=!1}),(t,o)=>{const n=Ve,f=ye;return a(Z)?(y(),L("div",Le,[e(Pe,{indeterminate:"",class:"loading-spinner",size:"64"})])):(y(),A(ne,{key:1},{default:l(()=>[e(E,null,{default:l(()=>[e(_,{class:"mt-2",cols:"12"},{default:l(()=>[e(Ee,{label:"Descrição",modelValue:a(i).descricao,"onUpdate:modelValue":o[0]||(o[0]=s=>a(i).descricao=s),"error-messages":a(K).descricao.$errors.map(s=>s.$message)},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(E,null,{default:l(()=>[e(_,{cols:"3"},{default:l(()=>[e(H,{label:"Tipo de Registro",modelValue:a(i).tabvalores_tipo_regimovel_id,"onUpdate:modelValue":o[1]||(o[1]=s=>a(i).tabvalores_tipo_regimovel_id=s),items:a(J),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"2"},{default:l(()=>[e(O,{label:"Cartório",modelValue:a(i).registro_cartorio,"onUpdate:modelValue":o[2]||(o[2]=s=>a(i).registro_cartorio=s)},null,8,["modelValue"])]),_:1}),e(_,{cols:"2"},{default:l(()=>[e(O,{label:"Matricula",modelValue:a(i).registro_matricula,"onUpdate:modelValue":o[3]||(o[3]=s=>a(i).registro_matricula=s)},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(O,{label:"Letra",modelValue:a(i).matricula_letra,"onUpdate:modelValue":o[4]||(o[4]=s=>a(i).matricula_letra=s)},null,8,["modelValue"])]),_:1}),e(_,{cols:"4"},{default:l(()=>[e(H,{label:"Natureza",modelValue:a(i).tabvalores_nat_imovel_id,"onUpdate:modelValue":o[5]||(o[5]=s=>a(i).tabvalores_nat_imovel_id=s),items:a(Q),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(E,null,{default:l(()=>[e(_,{cols:"2"},{default:l(()=>[e(O,{label:"CIB",modelValue:a(i).cib,"onUpdate:modelValue":o[6]||(o[6]=s=>a(i).cib=s)},null,8,["modelValue"])]),_:1}),e(_,{cols:"3"},{default:l(()=>[e(H,{modelValue:a(i).tipo_id,"onUpdate:modelValue":o[7]||(o[7]=s=>a(i).tipo_id=s),items:a(P),label:"Tipo de imovel","item-title":"descricao","item-value":"id","error-messages":a(K).tipo_id.$errors.map(s=>s.$message)},null,8,["modelValue","items","error-messages"])]),_:1}),e(_,{cols:"3"},{default:l(()=>[e(O,{label:"Inscrição Municipal",modelValue:a(i).inscricao_estadual,"onUpdate:modelValue":o[8]||(o[8]=s=>a(i).inscricao_estadual=s)},null,8,["modelValue"])]),_:1}),e(_,{cols:"4"},{default:l(()=>[e(H,{label:"Situação",items:a(X),"item-title":"descricao","item-value":"id",modelValue:a(i).tabvalores_situacao_imoveis_id,"onUpdate:modelValue":o[9]||(o[9]=s=>a(i).tabvalores_situacao_imoveis_id=s)},null,8,["items","modelValue"])]),_:1})]),_:1}),e(E,null,{default:l(()=>[e(_,{cols:"2"},{default:l(()=>[o[15]||(o[15]=T("label",null,"Valor Avaliação",-1)),e(n,{label:"Valor Avaliação",modelValue:a(i).vlr_avaliacao,"onUpdate:modelValue":o[10]||(o[10]=s=>a(i).vlr_avaliacao=s)},null,8,["modelValue"])]),_:1}),e(_,{cols:"2"},{default:l(()=>[o[16]||(o[16]=T("label",null,"Valor Mercado",-1)),e(n,{label:"Valor Mercado",modelValue:a(i).vlr_mercado,"onUpdate:modelValue":o[11]||(o[11]=s=>a(i).vlr_mercado=s)},null,8,["modelValue"])]),_:1}),e(_,{cols:"1"},{default:l(()=>[o[17]||(o[17]=T("label",null,"%ITB",-1)),e(n,{label:"%ITB",modelValue:a(i).aliq_itbi,"onUpdate:modelValue":o[12]||(o[12]=s=>a(i).aliq_itbi=s)},null,8,["modelValue"])]),_:1}),e(_,{cols:"2"},{default:l(()=>[o[18]||(o[18]=T("label",null,"Valor ITB",-1)),e(n,{label:"Valor ITB",modelValue:a(i).vlr_itbi,"onUpdate:modelValue":o[13]||(o[13]=s=>a(i).vlr_itbi=s)},null,8,["modelValue"])]),_:1})]),_:1}),e(E,{class:"mt-10"},{default:l(()=>[e(f,{onClick:C},{default:l(()=>[e(R,{size:"large",color:"red"},{default:l(()=>o[19]||(o[19]=[B("Voltar")])),_:1})]),_:1}),N.isUpdate?(y(),A(R,{key:0,class:"ml-5",size:"large",color:"green",onClick:o[14]||(o[14]=s=>me(p.imovel_id))},{default:l(()=>o[20]||(o[20]=[B("Atualizar")])),_:1})):(y(),A(R,{key:1,class:"ml-5",size:"large",color:"green",onClick:de},{default:l(()=>o[21]||(o[21]=[B("Salvar")])),_:1}))]),_:1})]),_:1}))}}},Re={key:0,class:"d-flex justify-center"},Ce={__name:"Enderecos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0},isUpdate:{type:Boolean},imovel_id:{type:Number}},emits:["saved","close-modal","refresh-list"],async setup(N,{emit:j}){let r,c;const p=N,k=j,w=fe(),d=ge(),{$toast:x}=be(),{id:g}=w.params,V=`${d.public.managemant}/atos_bens`,M=`${d.public.managemant}/atos_bens`,z=`${d.public.managemant}/registro_imoveis`,b=`${d.public.managemant}/natureza_imoveis`,h=`${d.public.managemant}/tipo_logradouros`,D=`${d.public.managemant}/situacao_imoveis`,$=`${d.public.auth}/service/gerencia/cep`,v=`${d.public.managemant}/listarCidades`,q=`${d.public.managemant}/listarTipoBens`,I=u(oe("user-data").value.cartorio_token),F=u(oe("user-data").value.usuario_id).value,Q=oe("auth_token").value,re=u([]),W=u([]),X=u([]),P=u([]),Z=u([]),i=u([]),G=u(!0),m=le({end_cidade_id:null,end_quadra:null,end_lote:null,tabvalores_tipologradouro_id:null,end_logradouro:null,end_logradouro_numero:null,end_bairro:null,end_cep:null,end_complemento:null,user_id:F,ato_id:Number(w.query.ato_id)||Number(p.ato_id)}),K=le({...m}),{data:de}=([r,c]=se(()=>S(`${q}`,{method:"POST",body:{cartorio_token:I.value,imoveis:!0}},"$W62VZQp5Tx")),r=await r,c(),r);if(i.value=de.value,p.isUpdate===!0){const{data:C}=([r,c]=se(()=>S(`${V}/${p.imovel_id}`,{method:"GET"},"$uGMUgsxHFk")),r=await r,c(),r);C.value&&Object.keys(m).forEach(t=>{C.value[t]!==void 0&&(m[t]=C.value[t])}),Object.assign(K,m)}async function ue(){try{const[C,t,o,n,f]=await Promise.all([$fetch(b),$fetch(z),$fetch(D),$fetch(h),$fetch(v)]);W.value=C,re.value=t,Z.value=o,X.value=n,P.value=f}catch(C){console.error("Erro ao carregar os dados de imoveis pessoa:",C)}finally{G.value=!1}}const ae=async C=>{const t={};if(Object.keys(m).forEach(n=>{m[n]!==K[n]&&(t[n]=m[n])}),Object.keys(t).length===0)return;const{status:o}=await S(`${M}/${C}`,{method:"PUT",body:t},"$JWP9Pf1MfJ");o.value==="success"&&x.success("Imovel Atualizado com sucesso!")},me=()=>{k("close-modal"),k("refresh-list")};return pe(()=>m.end_cep,async C=>{if(C&&C.length===8)try{const{data:t,error:o}=await S(`${$}/${C}`,{headers:{Authorization:Q}},"$b99zbpjYFS");if(o.value){console.error("Erro ao buscar CEP:",o.value),x.error("Erro ao buscar CEP no servidor.");return}if(t.value.logradouro&&t.value.bairro&&t.value.localidade&&t.value.uf){m.end_logradouro=t.value.logradouro,m.end_bairro=t.value.bairro,m.end_complemento=t.value.complemento;let n=`${t.value.localidade}/${t.value.uf}`.toUpperCase();const f=P.value.find(s=>s.descricao===n);f?m.end_cidade_id=f.id:x.error("Cidade não encontrada na lista!")}else x.error("CEP não retornou dados válidos!")}catch(t){console.error("Erro inesperado:",t),x.error("Erro inesperado. Verifique sua conexão.")}}),Ie(()=>{g||p.ato_id?ue():G.value=!1}),(C,t)=>{const o=ye;return a(G)?(y(),L("div",Re,[e(Pe,{indeterminate:"",class:"loading-spinner",size:"64"})])):(y(),A(ne,{key:1,style:{height:"500px"},class:"mt-2"},{default:l(()=>[e(E,null,{default:l(()=>[e(_,{cols:"5"},{default:l(()=>[e(H,{label:"Cidade",modelValue:a(m).end_cidade_id,"onUpdate:modelValue":t[0]||(t[0]=n=>a(m).end_cidade_id=n),items:a(P),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"2"},{default:l(()=>[e(O,{label:"Quadra",modelValue:a(m).end_quadra,"onUpdate:modelValue":t[1]||(t[1]=n=>a(m).end_quadra=n)},null,8,["modelValue"])]),_:1}),e(_,{cols:"2"},{default:l(()=>[e(O,{label:"Lote",modelValue:a(m).end_lote,"onUpdate:modelValue":t[2]||(t[2]=n=>a(m).end_lote=n)},null,8,["modelValue"])]),_:1}),e(_,{cols:"3"},{default:l(()=>[e(H,{label:"Tipo de Logradouro",modelValue:a(m).tabvalores_tipologradouro_id,"onUpdate:modelValue":t[3]||(t[3]=n=>a(m).tabvalores_tipologradouro_id=n),items:a(X),"item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(E,null,{default:l(()=>[e(_,{cols:"5"},{default:l(()=>[e(O,{label:"Logradouro",modelValue:a(m).end_logradouro,"onUpdate:modelValue":t[4]||(t[4]=n=>a(m).end_logradouro=n)},null,8,["modelValue"])]),_:1}),e(_,{cols:"1"},{default:l(()=>[e(O,{label:"N*",modelValue:a(m).end_logradouro_numero,"onUpdate:modelValue":t[5]||(t[5]=n=>a(m).end_logradouro_numero=n)},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(O,{label:"Bairro",modelValue:a(m).end_bairro,"onUpdate:modelValue":t[6]||(t[6]=n=>a(m).end_bairro=n)},null,8,["modelValue"])]),_:1}),e(_,{cols:"2"},{default:l(()=>[e(O,{label:"CEP",modelValue:a(m).end_cep,"onUpdate:modelValue":t[7]||(t[7]=n=>a(m).end_cep=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(E,null,{default:l(()=>[e(_,{cols:"5"},{default:l(()=>[e(O,{label:"Complemento",modelValue:a(m).end_complemento,"onUpdate:modelValue":t[8]||(t[8]=n=>a(m).end_complemento=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(E,{class:"mt-10 justify-start"},{default:l(()=>[e(o,{onClick:me},{default:l(()=>[e(R,{size:"large",color:"red"},{default:l(()=>t[11]||(t[11]=[B("Voltar")])),_:1})]),_:1}),N.isUpdate?(y(),A(R,{key:0,class:"ml-5",size:"large",color:"green",onClick:t[9]||(t[9]=n=>ae(p.imovel_id))},{default:l(()=>t[12]||(t[12]=[B("Atualizar")])),_:1})):(y(),A(R,{key:1,class:"ml-5",size:"large",color:"green",onClick:t[10]||(t[10]=n=>ae(p.imovel_id))},{default:l(()=>t[13]||(t[13]=[B("Salvar")])),_:1}))]),_:1})]),_:1}))}}},he={class:"ml-4"},De={__name:"Partes",props:{show:Boolean,ato_token:String,ato_id:Number,partes_imovel:Object},emits:["close","update-imovel"],setup(N,{emit:j}){const r=N,c=u(r.show),p=fe(),k=ge(),{$toast:w}=be(),d=`${k.public.managemant}/bens_pessoa`,x=`${k.public.managemant}/listarPapeis`,g=u([]),V=le({percentual:null,tipo_parte_id:null}),M=u({}),z=j;pe(()=>r.show,async $=>{c.value=$,$&&(await h(),V.tipo_parte_id=r.partes_imovel.partes_tipos.descricao||null,V.percentual=r.partes_imovel.percentual.replace(/,/g,"")||null,M.value={tipo_parte_id:V.tipo_parte_id,percentual:V.percentual.replace(/,/g,"")})});const b=()=>{c.value=!1,z("close")},h=async()=>{const{data:$}=await S(x,{method:"POST",body:{tipo_ato_token:p.query.tipo_ato_token}},"$IjSu4kwy4b");g.value=$.value},D=async()=>{const $={};Object.keys(V).forEach(q=>{let I=V[q];q==="tipo_parte_id"&&I&&(I=I.id),I!==M.value[q]&&($[q]=I)}),$.percentual&&($.percentual=$.percentual.toString().replace(/,/g,""));const{status:v}=await S(`${d}/${r.partes_imovel.id}`,{method:"PUT",body:$},"$QkvGl1R6ZY");v.value==="success"&&(w.success("Parte Atualizada com Sucesso!"),z("update-imovel",$),b())};return($,v)=>{const q=Ve;return y(),A(ve,{persistent:"",modelValue:a(c),"onUpdate:modelValue":v[2]||(v[2]=I=>ie(c)?c.value=I:null),"max-width":"800"},{default:l(()=>[e(_e,null,{default:l(()=>[e(ne,null,{default:l(()=>[e(E,{class:"mt-1 mb-3",style:{"justify-content":"space-between"}},{default:l(()=>[T("h1",he," Altere o papel para: "+Se(r.partes_imovel.pessoa.nome),1)]),_:1}),v[4]||(v[4]=T("hr",{class:"mb-5"},null,-1)),e(E,null,{default:l(()=>[e(_,{cols:"8"},{default:l(()=>[e(H,{class:"mt-6",label:"Selecione o Papel",modelValue:a(V).tipo_parte_id,"onUpdate:modelValue":v[0]||(v[0]=I=>a(V).tipo_parte_id=I),items:a(g),"item-title":"descricao","item-value":"descricao","return-object":""},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"2"},{default:l(()=>[v[3]||(v[3]=T("label",null,"%",-1)),e(q,{modelValue:a(V).percentual,"onUpdate:modelValue":v[1]||(v[1]=I=>a(V).percentual=I)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Te,null,{default:l(()=>[e(R,{style:{"background-color":"red",color:"white"},onClick:b},{default:l(()=>v[5]||(v[5]=[B("Voltar")])),_:1}),e(R,{style:{"background-color":"green",color:"white"},onClick:D},{default:l(()=>v[6]||(v[6]=[B("Salvar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Fe=["onClick"],He=["onClick"],Ge=["onClick"],Ye={key:0,style:{width:"30px",height:"30px"},src:Oe,alt:"Visualizar",title:"Reativar"},Je={key:1,src:Ae,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Ue={__name:"Partes",props:{ato_token:{type:String},ato_token_selected:{type:String},ato_id:{type:Number},isUpdate:{type:Boolean},imovel_id:{type:Number}},emits:["saved","close-modal","refresh-list"],async setup(N,{emit:j}){let r,c;const p=N,k=j,w=fe(),d=ge(),{$toast:x}=be(),g=`${d.public.managemant}/partes_atos`,V=`${d.public.managemant}/listarPapeis`,M=`${d.public.managemant}/getLinkTipo`,z=`${d.public.managemant}/bens_pessoa`,b=`${d.public.managemant}/bens_pessoa`,h=`${d.public.managemant}/bens_pessoa`,D=`${d.public.managemant}/download`,$=u(null),v=u([]),q=u([]),I=u([]),F=u(!1),J=u(!1),Q=u(null),re=u(w.query.tipo_ato_token),W=u(null),X=[{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"%",align:"start",key:"percentual"},{value:"actions"}],P=le({papeis:null,percentual:null}),{data:Z}=([r,c]=se(()=>S(V,{method:"POST"},"$X6FDd5A6WK")),r=await r,c(),r);I.value=Z.value;const i=async()=>{const{data:t}=await S(`${b}/${p.imovel_id}`,{method:"GET"},"$Dyv7lSgcqT"),n=(f=>f.map(s=>({...s,pessoa:{...s.pessoa,documento:s.pessoa.doc_identificacao},papel:{...s.partes_tipos}})))(t.value);q.value=n};i();const G=async()=>{await i()},{data:m,status:K}=([r,c]=se(()=>S(g,{method:"POST",body:{ato_token:p.ato_token||w.query.ato_token_edit}},"$Ir36YwSBFY")),r=await r,c(),r);v.value=m.value&&Object.keys(m.value).length===0?[]:m.value;const de=async()=>{const t={pessoa:{nome:P.pessoa.pessoa_nome},papel:I.value.find(f=>f.id===P.papeis),percentual:P.percentual},{data:o,status:n}=await S(z,{method:"POST",body:{bem_id:p.imovel_id,ato_id:Number(w.query.ato_id),pessoa_id:P.pessoa.pessoa_id,tipo_parte_id:P.papeis,user_id:oe("user-data").value.usuario_id,percentual:P.percentual.replace(/,/g,"")}},"$z4QOGPyvCc");n.value==="success"&&(t.id=o.value.id,x.success("Pessoa Registrada com Sucesso!"),q.value.push(t))},ue=async t=>{var ee;if(F.value=!0,W.value=null,!t.pessoa.id)return;const{data:o}=await S(M,{method:"POST",body:{tipo:"ficha",id:t.pessoa.id}},"$XYnqHmowsR");if(!((ee=o.value)!=null&&ee.link))return;const{data:n}=await S(D,{method:"POST",body:{bucket:oe("user-data").value.cartorio_token,path:o.value.link}},"$63DgHOk5hC"),f=o.value.link,s=n.value;/\.(tr7|tiff)$/i.test(f)?W.value=s:fotoRender.value=`data:image/jpeg;base64,${s}`},ae=t=>{J.value=!0,$.value=t,Q.value=t.id};async function me(t){t.excluido=!t.excluido;try{await S(`${h}/${t.id}`,{method:"PUT",body:JSON.stringify({excluido:t.excluido})},"$3fKfAn4Pra")}catch(o){console.error("Erro ao excluir pessoa:",o)}}const C=()=>{k("close-modal"),k("refresh-list")};return(t,o)=>{const n=Ve,f=De,s=Be,ee=ye;return y(),A(ne,{style:{height:"500px"}},{default:l(()=>[e(E,null,{default:l(()=>[e(_,{class:"mt-6",cols:"4"},{default:l(()=>[e(H,{label:"Selecione a Pessoa",modelValue:a(P).pessoa,"onUpdate:modelValue":o[0]||(o[0]=U=>a(P).pessoa=U),items:a(v),"item-title":"pessoa_nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(_,{class:"mt-6",cols:"3"},{default:l(()=>[e(H,{label:"Papel",modelValue:a(P).papeis,"onUpdate:modelValue":o[1]||(o[1]=U=>a(P).papeis=U),items:a(I),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),e(_,{cols:"1"},{default:l(()=>[o[6]||(o[6]=T("label",null,"%",-1)),e(n,{modelValue:a(P).percentual,"onUpdate:modelValue":o[2]||(o[2]=U=>a(P).percentual=U)},null,8,["modelValue"])]),_:1}),T("div",null,[T("img",{class:"mt-7",src:Me,style:{width:"40px",cursor:"pointer"},title:"Criar Imovel",onClick:de})])]),_:1}),e(E,null,{default:l(()=>[e(_,null,{default:l(()=>[e(je,{style:{height:"350px"},headers:X,items:a(q)},{"item.actions":l(({item:U})=>[e(E,null,{default:l(()=>[T("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ce=>ue(U),title:"Visualizar Ficha"},o[7]||(o[7]=[T("img",{style:{width:"30px",height:"30px"},src:qe,alt:"Visualizar"},null,-1)]),8,Fe),T("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ce=>ae(U),class:"mr-2",title:"Alterar Papel"},o[8]||(o[8]=[T("img",{style:{width:"30px",height:"30px"},src:Ne,alt:"Visualizar"},null,-1)]),8,He),T("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ce=>me(U),title:"Deletar Pessoa"},[U.excluido?(y(),L("img",Ye)):(y(),L("img",Je))],8,Ge)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(f,{partes_imovel:a($),ato_token:a(re),ato_id:a(Q),show:a(J),onClose:o[3]||(o[3]=U=>J.value=!1),onUpdateImovel:G},null,8,["partes_imovel","ato_token","ato_id","show"]),e(ve,{modelValue:a(F),"onUpdate:modelValue":o[5]||(o[5]=U=>ie(F)?F.value=U:null),width:"600"},{default:l(()=>[e(_e,{"max-width":"600",title:"Ficha"},{default:l(()=>[e(s,{"tiff-url":a(W)},null,8,["tiff-url"]),e(R,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:o[4]||(o[4]=U=>F.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(E,{class:"mt-5"},{default:l(()=>[e(ee,{onClick:C},{default:l(()=>[e(R,{size:"large",color:"red"},{default:l(()=>o[9]||(o[9]=[B("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Qe={key:0},We={key:1},Xe={key:2},$o={__name:"Cadastro",props:{show:Boolean,imovel_id:Number,ato_token:String,ato_id:Number,ato_token_selected:String},emits:["close","refresh"],setup(N,{emit:j}){const r=N,c=u("dados"),p=u(r.show),k=u(null),w=u(null),d=u(!1),x=j;pe(()=>r.show,z=>{p.value=z});const g=z=>{d.value=!0,w.value=z.ato_id,k.value=z.id},V=()=>{p.value=!1,d.value=!1,x("close")},M=()=>{x("refresh")};return(z,b)=>{const h=we,D=Ce,$=Ue;return y(),A(ve,{persistent:"",modelValue:a(p),"onUpdate:modelValue":b[1]||(b[1]=v=>ie(p)?p.value=v:null),"max-width":"1000"},{default:l(()=>[e(_e,{style:{height:"650px"}},{default:l(()=>[e(ne,null,{default:l(()=>[b[5]||(b[5]=T("h1",{style:{"background-color":"#f5f2f2",color:"#525050",padding:"10px 0px 0px 20px"}}," Cadastro de imoveis ",-1)),e(xe,{modelValue:a(c),"onUpdate:modelValue":b[0]||(b[0]=v=>ie(c)?c.value=v:null),"bg-color":"#f5f2f2"},{default:l(()=>[e(te,{value:"dados"},{default:l(()=>b[2]||(b[2]=[B("Dados")])),_:1}),a(d)?(y(),A(te,{key:0,value:"enderecos"},{default:l(()=>b[3]||(b[3]=[B("Endereco")])),_:1})):Y("",!0),a(d)?(y(),A(te,{key:1,value:"partes"},{default:l(()=>b[4]||(b[4]=[B("Partes")])),_:1})):Y("",!0)]),_:1},8,["modelValue"]),a(c)==="dados"?(y(),L("div",Qe,[e(h,{onRefreshList:M,ato_id:r.ato_id,onSaved:g,onCloseModal:V},null,8,["ato_id"])])):Y("",!0),a(c)==="enderecos"&&a(d)?(y(),L("div",We,[e(D,{onRefreshList:M,isUpdate:!0,ato_id:a(w),ato_token:r.ato_token,imovel_id:a(k),onCloseModal:V},null,8,["ato_id","ato_token","imovel_id"])])):Y("",!0),a(c)==="partes"&&a(d)?(y(),L("div",Xe,[e($,{onRefreshList:M,imovel_id:a(k),ato_token:r.ato_token,ato_id:r.ato_id,ato_token_selected:r.ato_token_selected,onCloseModal:V},null,8,["imovel_id","ato_token","ato_id","ato_token_selected"])])):Y("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ze={key:0},Ke={key:1},eo={key:2},ko={__name:"Atualizar",props:{show:Boolean,imovel_id:Number,ato_token_selected:String},emits:["close","refresh"],setup(N,{emit:j}){const r=N,c=u("dados"),p=u(r.show),k=j;pe(()=>r.show,x=>{p.value=x});const w=()=>{p.value=!1,k("close")},d=()=>{k("refresh")};return(x,g)=>{const V=we,M=Ce,z=Ue;return y(),A(ve,{persistent:"",modelValue:a(p),"onUpdate:modelValue":g[1]||(g[1]=b=>ie(p)?p.value=b:null),"max-width":"1000"},{default:l(()=>[e(_e,{style:{height:"650px"}},{default:l(()=>[e(ne,null,{default:l(()=>[g[5]||(g[5]=T("h1",{style:{"background-color":"#f5f2f2",color:"#525050",padding:"10px 0px 0px 20px"}}," Atualizar imovel ",-1)),e(xe,{modelValue:a(c),"onUpdate:modelValue":g[0]||(g[0]=b=>ie(c)?c.value=b:null),"bg-color":"#f5f2f2"},{default:l(()=>[e(te,{value:"dados"},{default:l(()=>g[2]||(g[2]=[B("Dados")])),_:1}),e(te,{value:"enderecos"},{default:l(()=>g[3]||(g[3]=[B("Endereço")])),_:1}),e(te,{value:"partes"},{default:l(()=>g[4]||(g[4]=[B("Partes")])),_:1})]),_:1},8,["modelValue"]),a(c)==="dados"?(y(),L("div",Ze,[e(V,{onRefreshList:d,isUpdate:!0,imovel_id:r.imovel_id,onCloseModal:w},null,8,["imovel_id"])])):Y("",!0),a(c)==="enderecos"?(y(),L("div",Ke,[e(M,{onRefreshList:d,isUpdate:!0,imovel_id:r.imovel_id,onCloseModal:w},null,8,["imovel_id"])])):Y("",!0),a(c)==="partes"?(y(),L("div",eo,[e(z,{imovel_id:r.imovel_id,ato_token_selected:r.ato_token_selected,onCloseModal:w},null,8,["imovel_id","ato_token_selected"])])):Y("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};export{$o as _,ko as a};
