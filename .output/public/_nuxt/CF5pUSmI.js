import{_ as C}from"./OOs83lsT.js";import{f as F,r,D as U,J as D,u as M,A as S,l as E,S as G,n as P,o as I,h as K,w as t,b as o,s as f,i as l,V as h,d as k,k as j}from"./B3EelPHV.js";import{f as d}from"./DyoTPVrD.js";import{u as L}from"./D7IU7t0O.js";import{V as q}from"./DTEmeao6.js";import{V as m}from"./g8XmvRxv.js";import{V as w}from"./yyLvvjPC.js";import{V as J}from"./Cm4LXFXN.js";const ae={__name:"SeparacaoDivorcio",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(R){const c=R,u=j(),s=F({dt_casamento:null,tabvalores_regimecasamento_id:null,qtd_filhos_maiores:null,qtd_filhos_menores:null,responsavel_menores_id:null}),v=r([]),_=U(),g=D(),{$toast:A}=M(),T=`${u.public.auth}/service/gerencia/getAtos/${c.ato_id}`,$=`${u.public.auth}/service/gerencia/regime_casamento`,b=`${u.public.auth}/service/gerencia/getAtosPessoaById/${c.ato_id}`,B=`${u.public.managemant}/updateAtos`;r(""),r(""),r(!1),r(!1),r(null);const p=r([]),x=S(()=>{var a;return((a=p.value)==null?void 0:a.map(e=>{var i;return{id:e.pessoa.id,nome:((i=e.pessoa)==null?void 0:i.nome)||"Sem nome"}}))||[]});E(async()=>{const[a,e,i]=await Promise.all([d(T,{method:"GET"}),d($,{method:"GET"}),d(b,{method:"GET"})]);a.data.value&&Object.assign(s,a.data.value[0]||a.data.value),e.data.value&&(v.value=e.data.value),i.data.value&&(p.value=i.data.value)});const V=async()=>{try{const{data:a}=await d(b,{method:"GET"});p.value=a.value||[]}catch{}};G(async()=>{await P(),await V()});const z=()=>{const a=g.query.origem||"criar",e=g.query.id;switch(a){case"atualizar":case"vizualizar":_.push(`/os/atualizar/${e}`);break;case"atualizar-lista":case"vizualizar-lista":_.push("/atos/lista");break;default:_.push("/os/criar-registro");break}};async function N(){const{data:a,error:e,status:i}=await L(`${B}/${Number.parseInt(c.ato_id)}`,{method:"PUT",body:{dt_casamento:s.dt_casamento,tabvalores_regimecasamento_id:s.tabvalores_regimecasamento_id,qtd_filhos_maiores:s.qtd_filhos_maiores,qtd_filhos_menores:s.qtd_filhos_menores,responsavel_menores_id:s.responsavel_menores_id}},"$2MFTkguIXN");i.value==="success"&&A.success("Divórcio salvo com sucesso")}const y=a=>{const e=["Backspace","Tab","ArrowLeft","ArrowRight","Delete"];!/[0-9]/.test(a.key)&&!e.includes(a.key)&&a.preventDefault()};return(a,e)=>{const i=C;return I(),K(J,{class:"mt-5"},{default:t(()=>[o(q,{dense:""},{default:t(()=>[o(m,{cols:"12",sm:"4",md:"3"},{default:t(()=>[o(f,{modelValue:l(s).dt_casamento,"onUpdate:modelValue":e[0]||(e[0]=n=>l(s).dt_casamento=n),type:"date",label:"Data Casamento"},null,8,["modelValue"])]),_:1}),o(m,{cols:"12",sm:"6",md:"4"},{default:t(()=>[o(w,{label:"Regime Bens",modelValue:l(s).tabvalores_regimecasamento_id,"onUpdate:modelValue":e[1]||(e[1]=n=>l(s).tabvalores_regimecasamento_id=n),items:l(v),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),o(m,{cols:"12",sm:"6",md:"3"},{default:t(()=>[o(f,{label:"Filhos Maiores",modelValue:l(s).qtd_filhos_maiores,"onUpdate:modelValue":e[2]||(e[2]=n=>l(s).qtd_filhos_maiores=n),modelModifiers:{number:!0},type:"number",min:"0",onKeydown:y},null,8,["modelValue"])]),_:1}),o(m,{cols:"12",sm:"6",md:"3"},{default:t(()=>[o(f,{label:"Filhos Menores",modelValue:l(s).qtd_filhos_menores,"onUpdate:modelValue":e[3]||(e[3]=n=>l(s).qtd_filhos_menores=n),type:"number",min:"0",onKeydown:y},null,8,["modelValue"])]),_:1}),o(m,{cols:"12",sm:"6",md:"4"},{default:t(()=>[o(w,{onFocus:V,label:"Responsável",modelValue:l(s).responsavel_menores_id,"onUpdate:modelValue":e[4]||(e[4]=n=>l(s).responsavel_menores_id=n),items:l(x),"item-title":"nome","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),o(q,{class:"mt-5",justify:"start",align:"center"},{default:t(()=>[o(m,{cols:"auto"},{default:t(()=>[o(i,{onClick:z},{default:t(()=>[o(h,{size:"large",color:"red"},{default:t(()=>e[5]||(e[5]=[k("Voltar")])),_:1})]),_:1})]),_:1}),o(m,{cols:"auto"},{default:t(()=>[o(h,{class:"ml-2",onClick:N,size:"large",color:"green"},{default:t(()=>e[6]||(e[6]=[k("Salvar")])),_:1})]),_:1})]),_:1})]),_:1})}}};export{ae as _};
