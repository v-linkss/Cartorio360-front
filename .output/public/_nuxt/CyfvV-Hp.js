import{r as i,D as U,G as N,h as O,H as P,o as L,A as j,w as l,b as a,bS as E,d as H,q as t,K as J,v as k,a as v,x as M}from"./B1ceMl_k.js";import{a as V}from"./CR_l0CRY.js";import{c as W,r as Y,u as z}from"./DkxEwzKo.js";import{V as F,a as G}from"./s6FWyneT.js";import{V as K}from"./DWJtBTZv.js";import{V as Q}from"./DM0BJOFo.js";import{V as X}from"./CqeXpXIv.js";import{V as Z}from"./VnN2aYpq.js";const ee=""+new URL("selo.D9mIBRmY.png",import.meta.url).href,se=v("h1",{class:"ml-4"},"Reimpressão de Selos",-1),te=v("hr",{class:"mb-5"},null,-1),de={__name:"Selos",props:{show:Boolean,ato_token:String},emits:["close"],async setup(g,{emit:S}){let c,b;const m=g,n=i(m.show),f=M(),$=i(U("user-data").value.cartorio_token).value,y=`${f.public.managemant}/listarSelos`,C=`${f.public.managemant}/reimprimirSelo`,R=`${f.public.managemant}/listarEscrevente`,_=i([]),u=i([]),d=N({escrevente:null}),B=S,T={escrevente:{required:W.withMessage("O campo é obrigatorio",Y)}},p=z(T,d),x=[{title:"Numero",value:"numero"},{title:"Referencia",value:"referencia"},{value:"actions"}];O(()=>m.show,o=>{n.value=o,o&&q()});const w=()=>{n.value=!1,B("close")},h=i([]),{data:I}=([c,b]=P(()=>V(R,{method:"POST",body:{cartorio_token:$}},"$V2ulT7DYvP")),c=await c,b(),c);h.value=I.value[0].func_json_escreventes;const D=async()=>{if(await p.value.$validate()){const o=u.value.map(r=>({selo_token:r})),e={escrevente_token:d.escrevente,ato_token:m.ato_token,selos:o},{data:s,error:oe,status:A}=await V(`${C}`,{method:"POST",body:e},"$45J51uHTfa");if(A.value==="success"){const r=window.open("","_blank");r.document.open(),r.document.write(s.value[0].etiqueta),r.document.close(),w()}}},q=async()=>{const{data:o,error:e}=await V(`${y}`,{method:"POST",body:{ato_token:m.ato_token}},"$rLWIRtrfDz");o.value.selos===null?_.value=[]:_.value=o.value.selos};return(o,e)=>(L(),j(Z,{persistent:"",modelValue:t(n),"onUpdate:modelValue":e[2]||(e[2]=s=>k(n)?n.value=s:null),"max-width":"500"},{default:l(()=>[a(F,null,{default:l(()=>[a(K,null,{default:l(()=>[a(Q,{class:"mt-1 mb-3",style:{"justify-content":"space-between"}},{default:l(()=>[se,a(E,{class:"mt-4 mr-4",style:{color:"red"},onClick:w},{default:l(()=>[H("mdi-close")]),_:1})]),_:1}),te,a(X,{class:"mb-5",label:"Tabelião/escrivão",modelValue:t(d).escrevente,"onUpdate:modelValue":e[0]||(e[0]=s=>t(d).escrevente=s),items:t(h),"item-title":"nome","item-value":"token",required:"","error-messages":t(p).escrevente.$errors.map(s=>s.$message),onBlur:t(p).escrevente.$touch,onInput:t(p).escrevente.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"]),a(J,{headers:x,items:t(_),"item-value":"token","show-select":"",modelValue:t(u),"onUpdate:modelValue":e[1]||(e[1]=s=>k(u)?u.value=s:null)},null,8,["items","modelValue"])]),_:1}),a(G,null,{default:l(()=>[v("div",null,[v("img",{src:ee,style:{cursor:"pointer"},onClick:D})])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},pe=""+new URL("salvar.b7udBb7s.png",import.meta.url).href;export{pe as _,de as a,ee as b};
