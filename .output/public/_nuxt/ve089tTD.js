import{_ as E}from"./eWdL-p5y.js";import{u as F,n as R,q as L,r as d,s as y,v as O,x as W,y as j,o as T,z as G,w as e,b as a,A as s,V as w,B as x,d as n,C as H,c as X,F as Y,a as J,D as A}from"./kel_KTqI.js";import{u as K,a as C}from"./Ctxw8aW4.js";import{c as Q,r as Z,u as aa}from"./DIe62Qzf.js";import{V}from"./BBtjS20Y.js";import{V as $}from"./CvrAmHDj.js";import{V as ea}from"./qVX3ECkv.js";import{V as ta}from"./rIIY4oBm.js";import{V as oa}from"./CKvifnFf.js";import{V as sa,a as m,b as la,c as ua}from"./7r58xJcw.js";const ra={__name:"Dados",emits:["saved"],async setup(h,{emit:i}){let g,c;const f=F(),r=R(),v=H(),{$toast:k}=L(),B=`${v.public.managemant}/listarSituacoes`,D=`${v.public.managemant}/updateAtos`,S=`${v.public.managemant}/getAtos`,M=d(y("user-data").value.cartorio_token),b=r.query.id?{ato_token:"xkyaA"}:{cartorio_token:M};d(y("user-service").value.id).value||d(y("user-service").value).value;const q=d([]),l=O({dt_abertura:N(),status:null,mne:null}),z={status:{required:Q.withMessage("O campo é obrigatorio",Z)}},p=aa(z,l);async function U(){try{const{data:t,status:o}=await C(`${S}/${r.query.id}`,{method:"GET"},"$EIT5jtTUdX");console.log(t.value)}catch(t){console.log(t)}}[g,c]=W(()=>U()),await g,c();async function I(){if(await p.value.$validate()){const{data:t,error:o,status:_}=await C(D,{method:"PUT",body:{status:l.status,mne:l.mne}},"$H480glrstE");_.value==="success"&&k.success("Situação Atualizada com sucesso")}else k.error("Preencha os campos obrigatorios.")}function N(){const t=new Date,o=t.getFullYear(),_=String(t.getMonth()+1).padStart(2,"0"),u=String(t.getDate()).padStart(2,"0");return`${o}-${_}-${u}`}console.log(b),j(async()=>{if(b){const{data:t,status:o}=await K(B,{method:"POST",body:b},"$dikmmrBcdM");console.log(t.value)}});const P=()=>{const t=r.query.origem||"criar",o=r.query.id;t==="atualizar"?f.push(`/os/atualizar/${o}`):f.push("/os/criar-registro")};return(t,o)=>{const _=E;return T(),G(ta,null,{default:e(()=>[a(V,{class:"mt-5"},{default:e(()=>[a($,{cols:"3"},{default:e(()=>[a(ea,{label:"Situação",modelValue:s(l).status,"onUpdate:modelValue":o[0]||(o[0]=u=>s(l).status=u),items:s(q),"item-title":"descricao","item-value":"descricao",required:"","error-messages":s(p).status.$errors.map(u=>u.$message),onBlur:s(p).status.$touch,onInput:s(p).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),a(V,null,{default:e(()=>[a($,{cols:"5"},{default:e(()=>[a(w,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:s(l).mne,"onUpdate:modelValue":o[1]||(o[1]=u=>s(l).mne=u)},null,8,["modelValue"])]),_:1})]),_:1}),a(V,null,{default:e(()=>[a($,{cols:"2"},{default:e(()=>[a(w,{modelValue:s(l).dt_abertura,"onUpdate:modelValue":o[2]||(o[2]=u=>s(l).dt_abertura=u),type:"date",label:"Data Lavratura",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),a(V,{class:"mb-3"},{default:e(()=>[a(_,{onClick:P},{default:e(()=>[a(x,{size:"large",color:"red"},{default:e(()=>[n("Voltar")]),_:1})]),_:1}),a(x,{class:"ml-10",onClick:I,size:"large",color:"green"},{default:e(()=>[n("Salvar")]),_:1})]),_:1})]),_:1})}}},na=J("h1",{class:"mb-2"},"Procuração",-1),ba={__name:"[id]",setup(h){d(null),d(null),d(null);const i=d(null);return(g,c)=>{const f=ra;return T(),X(Y,null,[na,a(oa,{width:"1300"},{default:e(()=>[a(sa,{modelValue:s(i),"onUpdate:modelValue":c[0]||(c[0]=r=>A(i)?i.value=r:null),"bg-color":"#f5f2f2"},{default:e(()=>[a(m,{value:"dados"},{default:e(()=>[n("Dados")]),_:1}),a(m,{value:"partes"},{default:e(()=>[n("Partes")]),_:1}),a(m,{value:"minuta"},{default:e(()=>[n("Minuta")]),_:1}),a(m,{value:"livro"},{default:e(()=>[n("Livro")]),_:1}),a(m,{value:"observacao"},{default:e(()=>[n("Observações")]),_:1}),a(m,{value:"anexo"},{default:e(()=>[n("Anexos")]),_:1})]),_:1},8,["modelValue"]),a(la,{modelValue:s(i),"onUpdate:modelValue":c[1]||(c[1]=r=>A(i)?i.value=r:null)},{default:e(()=>[a(ua,{value:"dados"},{default:e(()=>[a(f)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{ba as default};
