import{_ as H,a as Q}from"./DTAtJCiu.js";import{_ as Y,L as Z,u as ee,r as i,I as ae,x as y,w as t,z as oe,o as b,b as a,a as R,V as U,v as n,J as E,E as f,R as te,d as u,N as C,y as h,m as P}from"./ClgI5CFv.js";import{f as B}from"./--VAkm2k.js";import{u as se}from"./C4C4UYqp.js";import{u as le}from"./BvUXTTpT.js";import{V as ne}from"./DPlq2kWD.js";import{V as re}from"./Ke991Ams.js";import{V as D}from"./_m3LTbWR.js";import{V as I}from"./Ckr2Axys.js";import{V as x,a as ie,b as ue,c as de}from"./BmLxRMIW.js";import{V as me}from"./Cg9QRbJd.js";import"./DBU9fBky.js";import"./UCjzXdkH.js";import"./D0aul8na.js";const ce={__name:"index",setup(pe){const A=Z(),{$toast:S}=ee(),v=i({senha:"",email:""}),w=i(!1),c=i(!1),N=i(!1),$=i(!1),O=i(!1),g=i(!1),p=i(!1),V=i(""),_=()=>{N.value=!1,$.value=!1,g.value=!1,O.value=!1,c.value=!1},T=oe(),K=`${T.public.auth}/service/gerencia/listarMenu`,M=T.public.auth,J=T.public.managemant;i("");const L=async()=>{const{data:s,status:e,error:l}=await B(`${M}/login`,{method:"POST",body:{senha:v.value.senha,email:v.value.email}});return{data:s==null?void 0:s.value,status:e==null?void 0:e.value,error:l==null?void 0:l.value}},z=s=>{const e=P("user-data");e.value=JSON.stringify({nome:s.nome,usuario_id:s.id,cartorio_id:s.cartorios[0].cartorio_id,cartorio_nome:s.cartorios[0].cartorio_descricao,cartorio_token:s.cartorios[0].cartorio_token});const l=P("auth_token");l.value=s.token},F=s=>{var o,r,d;const e=(d=(r=(o=s==null?void 0:s.data)==null?void 0:o[0])==null?void 0:r.func_autentica_acesso_v1)==null?void 0:d[0],l=e==null?void 0:e.status_mensagem;if(!e){g.value=!0;return}switch(l){case"Esse email não está cadastrado no Durabil.":$.value=!0;break;case"Senha inválida.":N.value=!0;break;case"Seu cadastro está desativado. Entre em contato com o administrador da conta.":O.value=!0;break;default:g.value=!0;break}},j=async()=>{var o,r,d,k;const{data:s,status:e,error:l}=await L();if(e==="success"){const m=(k=(d=(r=(o=s==null?void 0:s[0])==null?void 0:o.func_autentica_acesso_v1)==null?void 0:r[0])==null?void 0:d.registro)==null?void 0:k[0];if(se().cartorioInfos=m,z(m),m.cartorios.length>1){A.push({path:"/login/tipo-perfil"});return}S.success("Login realizado com sucesso!");const{data:W,status:X}=await B(K,{method:"POST",body:{usuario_id:m.id,perfil_descricao:m.cartorios[0].perfil_descricao}});if(X.value==="success"){const G=P("menu-navbar");G.value=W.value,A.push({path:"/"})}}else e==="error"&&(l==null?void 0:l.statusCode)===500?g.value=!0:F(l)},q=async()=>{var o,r,d,k,m;const{data:s,status:e,error:l}=await le(`${J}/recupera_senha`,{method:"POST",body:{email:V.value,acao:"gerar"}},"$iX10IJN3fa");e.value==="success"?(S.success(s.value.status_mensagem||"Código enviado"),recoveryEmailCookie.value=V.value,p.value=!1,p.value=!1):S.error(((d=(r=(o=l.value)==null?void 0:o.data)==null?void 0:r.menssage)==null?void 0:d.details)||((m=(k=l.value)==null?void 0:k.data)==null?void 0:m.status_mensagem))};return(s,e)=>{const l=ae("center");return b(),y(ne,{style:{"background-color":"#0a063b"}},{default:t(()=>[a(me,{cols:"5",class:"d-flex align-center justify-center"},{default:t(()=>[a(re,{style:{"max-width":"650px"}},{default:t(()=>[a(l,null,{default:t(()=>[a(D,{style:{"margin-bottom":"30px"},width:400,height:330,src:H})]),_:1}),e[15]||(e[15]=R("div",{class:"text"},"Login",-1)),a(U,{autofocus:"",autocomplete:"email",type:"email",modelValue:n(v).email,"onUpdate:modelValue":e[0]||(e[0]=o=>n(v).email=o),"persistent-hint":"",class:"input mb-5",style:{"background-color":"aliceblue"},"hide-details":"",density:"compact",placeholder:"Email","prepend-inner-icon":"mdi-email-outline",variant:"outlined"},null,8,["modelValue"]),a(U,{modelValue:n(v).senha,"onUpdate:modelValue":e[1]||(e[1]=o=>n(v).senha=o),class:"input","append-inner-icon":n(w)?"mdi-eye-off":"mdi-eye",type:n(w)?"text":"password",density:"compact",style:{"background-color":"aliceblue"},"hide-details":"",placeholder:"Senha","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":e[2]||(e[2]=o=>w.value=!n(w))},null,8,["modelValue","append-inner-icon","type"]),a(I,{modelValue:n(c),"onUpdate:modelValue":e[4]||(e[4]=o=>E(c)?c.value=o:null),"max-width":"400",persistent:""},{activator:t(({props:o})=>[a(f,te({rounded:"",class:"mb-10 mt-4 ml-1"},o,{color:"primary",onClick:j,modelValue:n(c),"onUpdate:modelValue":e[3]||(e[3]=r=>E(c)?c.value=r:null),block:""}),{default:t(()=>e[10]||(e[10]=[u(" Acessar ")])),_:2},1040,["modelValue"])]),default:t(()=>[n(N)?(b(),y(x,{key:0,text:"Senha inválida."},{actions:t(()=>[a(C),a(f,{onClick:_,style:{"background-color":"#429946",color:"white"}},{default:t(()=>e[11]||(e[11]=[u(" OK ")])),_:1})]),_:1})):h("",!0),n($)?(b(),y(x,{key:1,text:"Esse email não está cadastrado."},{actions:t(()=>[a(C),a(f,{onClick:_,style:{"background-color":"#429946",color:"white"}},{default:t(()=>e[12]||(e[12]=[u(" OK ")])),_:1})]),_:1})):h("",!0),n(g)?(b(),y(x,{key:2,text:"Erro no sistema, fora do ar."},{actions:t(()=>[a(C),a(f,{onClick:_,style:{"background-color":"#429946",color:"white"}},{default:t(()=>e[13]||(e[13]=[u(" OK ")])),_:1})]),_:1})):h("",!0),n(O)?(b(),y(x,{key:3,text:"Seu cadastro está desativado. Entre em contato com o administrador da conta."},{actions:t(()=>[a(C),a(f,{onClick:_,style:{"background-color":"#429946",color:"white"}},{default:t(()=>e[14]||(e[14]=[u(" OK ")])),_:1})]),_:1})):h("",!0)]),_:1},8,["modelValue"]),R("div",null,[R("a",{class:"text-decoration-none",rel:"noopener noreferrer",style:{color:"white","margin-left":"10px",cursor:"pointer"},onClick:e[5]||(e[5]=o=>p.value=!0)}," Esqueceu a senha? ")])]),_:1})]),_:1}),a(D,{src:Q,cover:""}),a(I,{modelValue:n(p),"onUpdate:modelValue":e[9]||(e[9]=o=>E(p)?p.value=o:null),"max-width":"500"},{default:t(()=>[a(x,null,{default:t(()=>[a(ie,null,{default:t(()=>e[16]||(e[16]=[u("Recuperar senha")])),_:1}),a(ue,null,{default:t(()=>[a(U,{modelValue:n(V),"onUpdate:modelValue":e[6]||(e[6]=o=>E(V)?V.value=o:null),type:"email",label:"Digite seu email","prepend-inner-icon":"mdi-email-outline"},null,8,["modelValue"])]),_:1}),e[19]||(e[19]=u("' ")),a(de,null,{default:t(()=>[a(C),a(f,{class:"bg-green text-white",onClick:e[7]||(e[7]=o=>q())},{default:t(()=>e[17]||(e[17]=[u(" Enviar ")])),_:1}),a(f,{class:"bg-red text-white",onClick:e[8]||(e[8]=o=>p.value=!1)},{default:t(()=>e[18]||(e[18]=[u(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},Ne=Y(ce,[["__scopeId","data-v-c4ecfabe"]]);export{Ne as default};
