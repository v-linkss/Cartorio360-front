import{_ as te}from"./B1YR8Srb.js";import{n as H,q as Q,u as X,r,A as M,s as se,B as Y,o as g,v as B,w as t,b as e,x as o,V as Z,y as W,d as D,z as ee,a as m,C as de,c as G,D as oe,E as Be,F as Ie,J as pe,K as he,t as ue,I as F}from"./B4qBQJ0R.js";import{u as P}from"./CRpnKbp9.js";import{c as ye,r as xe,u as ke}from"./DCG_1Neu.js";import{V as z}from"./Depwsngq.js";import{V as U}from"./Cl88KlW1.js";import{V as ce}from"./D8rY_2MO.js";import{V as re}from"./DdAUVMNN.js";import{_ as Me}from"./Bs0gycdH.js";import{_ as Ue,a as Ne,b as je,T as Fe,W as Le,r as be,D as $e,c as We,d as Ge,e as Ke}from"./B33ViDRQ.js";import{_ as me}from"./CXYL-dx9.js";import{_ as ae,a as _e}from"./HBU26js5.js";import{_ as ve,a as Je}from"./u3cg_e8Q.js";import{V as Ve,a as ne}from"./CK8E0jME.js";import{_ as Ye}from"./DfjuBLsA.js";import{V as Ze,a as K,b as He,c as J}from"./CeUZxCd_.js";import"./CI4RR3KJ.js";const Qe={__name:"Dados",props:{ato_token:{type:String,required:!0}},emits:["saved"],async setup(N,{emit:_}){let i,u;const k=N,$=_,d=H(),c=Q(),O=ee(),{$toast:b}=X(),I=`${O.public.managemant}/listarSituacoes`,A=`${O.public.managemant}/createAtos`,y=`${O.public.managemant}/getAtosTiposByToken`,h=r(M("user-data").value.cartorio_token),C=r(M("user-service").value.id).value||r(M("user-service").value).value,v=r([]),n=se({dt_abertura:null,status:null,mne:null}),R={status:{required:ye.withMessage("O campo é obrigatorio",xe)}},V=ke(R,n),{data:w}=([i,u]=Y(()=>P(`${y}/${k.ato_token}`,{method:"GET"},"$9ZmTYsLk0K")),i=await i,u(),i);async function a(){if(await V.value.$validate()){const{data:l,error:f,status:L}=await P(A,{method:"POST",body:{ato_tipo_id:w.value.id,cartorio_id:M("user-data").value.cartorio_id,ordemserv_id:C,status:n.status,dt_abertura:n.dt_abertura,mne:n.mne,user_id:M("user-data").value.usuario_id,user_alteracao_id:M("user-data").value.usuario_id}},"$hyq5YcBEjF");L.value==="success"&&(console.log(l.value),b.success("Situação registrada com sucesso"),$("saved",{id:l.value.id,token:l.value.token}))}else b.error("Preencha os campos obrigatorios.")}const{data:x}=([i,u]=Y(()=>P(I,{method:"POST",body:{cartorio_token:h.value}},"$S3qwbpImEh")),i=await i,u(),i);v.value=x.value;const j=()=>{const l=c.query.origem||"criar",f=c.query.id;l==="atualizar"?d.push(`/os/atualizar/${f}`):d.push("/os/criar-registro")};return(l,f)=>{const L=te;return g(),B(re,null,{default:t(()=>[e(z,{class:"mt-5"},{default:t(()=>[e(U,{cols:"3"},{default:t(()=>[e(ce,{label:"Situação",modelValue:o(n).status,"onUpdate:modelValue":f[0]||(f[0]=T=>o(n).status=T),items:o(v),"item-title":"descricao","item-value":"descricao",required:"","error-messages":o(V).status.$errors.map(T=>T.$message),onBlur:o(V).status.$touch,onInput:o(V).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(U,{cols:"5"},{default:t(()=>[e(Z,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:o(n).mne,"onUpdate:modelValue":f[1]||(f[1]=T=>o(n).mne=T)},null,8,["modelValue"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(U,{cols:"2"},{default:t(()=>[e(Z,{modelValue:o(n).dt_abertura,"onUpdate:modelValue":f[2]||(f[2]=T=>o(n).dt_abertura=T),type:"date",label:"Data Lavratura",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(z,{class:"mb-3"},{default:t(()=>[e(L,{onClick:j},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>[D("Voltar")]),_:1})]),_:1}),e(W,{class:"ml-10",onClick:a,size:"large",color:"green"},{default:t(()=>[D("Salvar")]),_:1})]),_:1})]),_:1})}}},Xe=["onClick"],et=m("img",{style:{width:"30px",height:"30px"},src:me,alt:"Visualizar"},null,-1),tt=[et],ot=["onClick"],at=m("img",{style:{width:"30px",height:"30px"},src:Je,alt:"Visualizar"},null,-1),st=[at],rt=["onClick"],nt={key:0,style:{width:"30px",height:"30px"},src:ve,alt:"Visualizar",title:"Reativar"},lt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},it=["onClick"],ut=m("img",{style:{width:"30px",height:"30px"},src:je,alt:"Visualizar"},null,-1),ct=[ut],dt={__name:"Partes",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(N){let _,i;const u=N,k=H(),$=Q(),d=ee(),{$toast:c}=X(),O=`${d.public.managemant}/pesquisarPessoas`,b=`${d.public.managemant}/listarPapeis`,I=`${d.public.managemant}/getLinkTipo`,A=`${d.public.managemant}/createAtosPessoa`,y=`${d.public.managemant}/getAtosPessoaById`,h=`${d.public.managemant}/updateAtosPessoa`,C=r(M("user-data").value.cartorio_token),v=r([]),n=r([]),R=r([]),V=r(!1),w=r(!1),a=r(!1),x=r(!1),j=r(null),l=r(null),f=r(null),L=r(null);r(null);const T=r(null),fe=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],S=se({papeis:null,nome:null,pessoa:null,documento:null}),{data:we}=([_,i]=Y(()=>P(b,{method:"POST",body:{tipo_ato_token:u.ato_token}},"$fFKndZhA4W")),_=await _,i(),_);R.value=we.value;async function Pe(){try{const{data:p,error:s}=await P(O,{method:"POST",body:{cartorio_token:C.value,documento:S.documento,nome:S.nome}},"$o3ZL1rvYrY");p.value.length>0?(v.value=p.value,S.pessoa=v.value[0]):v.value=[]}catch(p){console.error("Erro na requisição",p)}}const Ce=()=>{k.push({query:"criar-pessoa-procuracao",path:"/pessoas/cadastros"})},Te=p=>{n.value=n.value.map(s=>s.id===f.value?{...s,papel:{...s.papel,descricao:p}}:s)},Ee=p=>{const s=n.value.find(q=>q.pessoa.id===L.value);s.representante.nome=p},Ae=async()=>{const p={pessoa:S.pessoa,papel:R.value.find(q=>q.id===S.papeis),representante:{nome:null}},s=await P(`${y}/${u.ato_id}`,{method:"GET"},"$kXSxUa4grs");for(const q of s.data.value)if(q.pessoa_id===S.pessoa.id&&q.ato_id===u.ato_id&&q.tipo_parte_id===S.papeis){c.error("Pessoa Já Registrada Com Esse Papel!");return}try{const{data:q,error:ge,status:le}=await P(A,{method:"POST",body:{ato_id:u.ato_id,pessoa_id:S.pessoa.id,tipo_parte_id:S.papeis,user_id:M("user-data").value.usuario_id}},"$So3qnQu7ek");le.value==="success"?(p.id=q.value.id,c.success("Pessoa Registrada com Sucesso!"),n.value.push(p)):c.error("Erro ao registrar a pessoa!")}catch{c.error("Erro no servidor. Tente novamente.")}},Se=async p=>{a.value=!0,T.value=null;const{data:s}=await P(`${I}`,{method:"POST",body:{id:p.pessoa.id,tipo:"ficha"}},"$Q3kbIwtd9t");s.value&&s.value.link?T.value=`data:image/jpeg;base64,${s.value.link}`:T.value=null},qe=p=>{const s=n.value.filter(q=>q.pessoa.id!==p.pessoa.id).map(q=>({id:q.pessoa.id,nome:q.pessoa.nome}));f.value=p.id,j.value=s,V.value=!0,l.value=p.pessoa.nome,L.value=p.pessoa.id},ze=p=>{f.value=p.id,x.value=!0,l.value=p.pessoa.nome};async function Oe(p){p.excluido=!p.excluido;try{await P(`${h}/${f.value}`,{method:"PUT",body:JSON.stringify({excluido:p.excluido})},"$9xStKwGd7o")}catch(s){console.error("Erro ao excluir pessoa:",s)}}const De=()=>{const p=$.query.origem||"criar",s=$.query.id;p==="atualizar"?k.push(`/os/atualizar/${s}`):k.push("/os/criar-registro")};return(p,s)=>{const q=Me,ge=Ue,le=Ne,Re=te;return g(),B(re,null,{default:t(()=>[e(z,{class:"mt-5"},{default:t(()=>[e(U,{cols:"3"},{default:t(()=>[e(Z,{label:"Documento",modelValue:o(S).documento,"onUpdate:modelValue":s[0]||(s[0]=E=>o(S).documento=E)},null,8,["modelValue"])]),_:1}),e(U,{cols:"4"},{default:t(()=>[e(Z,{label:"Pessoa",modelValue:o(S).nome,"onUpdate:modelValue":s[1]||(s[1]=E=>o(S).nome=E)},null,8,["modelValue"])]),_:1}),m("div",null,[m("img",{class:"mt-3",src:me,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Pe})]),m("div",null,[m("img",{class:"mt-3 ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Ce})])]),_:1}),e(z,null,{default:t(()=>[e(U,{cols:"4"},{default:t(()=>[e(ce,{label:"Selecione a Pessoa",modelValue:o(S).pessoa,"onUpdate:modelValue":s[2]||(s[2]=E=>o(S).pessoa=E),items:o(v),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(U,{cols:"3"},{default:t(()=>[e(ce,{label:"Papel",modelValue:o(S).papeis,"onUpdate:modelValue":s[3]||(s[3]=E=>o(S).papeis=E),items:o(R),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),m("div",null,[m("img",{class:"mt-3",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Ae})])]),_:1}),e(z,null,{default:t(()=>[e(U,null,{default:t(()=>[e(de,{style:{height:"465px"},headers:fe,items:o(n)},{"item.actions":t(({item:E})=>[e(z,null,{default:t(()=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ie=>Se(E),title:"Visualizar Ficha"},tt,8,Xe),m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ie=>ze(E),class:"mr-2",title:"Alterar Papel"},st,8,ot),m("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ie=>Oe(E),title:"Deletar Pessoa"},[E.excluido?(g(),G("img",nt)):(g(),G("img",lt))],8,rt),m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ie=>qe(E),title:"Selecionar Representante"},ct,8,it)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(q,{show:o(w),onClose:s[4]||(s[4]=E=>w.value=!1)},null,8,["show"]),e(ge,{representante_nome:o(l),representantes:o(j),ato_id:o(f),show:o(V),onClose:s[5]||(s[5]=E=>V.value=!1),onUpdateRepresentante:Ee},null,8,["representante_nome","representantes","ato_id","show"]),e(le,{representante_nome:o(l),ato_token:u.ato_token,ato_id:o(f),show:o(x),onClose:s[6]||(s[6]=E=>x.value=!1),onUpdatePapel:Te},null,8,["representante_nome","ato_token","ato_id","show"]),e(Ve,{modelValue:o(a),"onUpdate:modelValue":s[8]||(s[8]=E=>oe(a)?a.value=E:null),width:"600"},{default:t(()=>[e(ne,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(Be,{src:o(T)},null,8,["src"]),e(W,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:s[7]||(s[7]=E=>a.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(z,null,{default:t(()=>[e(Re,{onClick:De},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>[D("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},pt="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",mt={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(N,{emit:_}){const i=N;Ie("DocumentEditorContainer",[Fe,Le]);const u=ee(),{$toast:k}=X(),$=H(),d=Q(),c=_;be(`${u.public.docEditor}`);const O=`${u.public.managemant}/upload`,b=r(null),I=async()=>{const C=await b.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),v=new FileReader;v.onload=()=>{const n=v.result;console.log(n),c("doc",n)},v.readAsText(C)},A=async()=>{const C=await b.value.ej2Instances.documentEditor.saveAsBlob("Docx"),v=new FormData;v.append("file",C,"anexo.docx"),v.append("cartorio_token",M("user-data").value.cartorio_token),v.append("token",i.ato_token),v.append("tipo","ato_minuta");const{data:n,status:R}=await P(O,{method:"POST",body:v},"$071xxdqs20");if(R.value==="success"){k.success("Documento enviado!");const w=b.value.ej2Instances.documentEditor.pageCount;I(),c("page",w)}else k.error("Erro ao enviar documento para o sistema.")},y=()=>{const h=d.query.origem||"criar",C=d.query.id;h==="atualizar"?$.push(`/os/atualizar/${C}`):$.push("/os/criar-registro")};return(h,C)=>{const v=te;return g(),G(pe,null,[e(o($e),{height:"900px",ref_key:"documentEditorContainer",ref:b,serviceUrl:pt,enableToolbar:!0,enableWordExport:!0},null,512),e(z,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(W,{size:"large",color:"green",onClick:A},{default:t(()=>[D("Salvar")]),_:1}),e(v,{class:"ml-4"},{default:t(()=>[e(W,{size:"large",onClick:y,color:"red"},{default:t(()=>[D("Voltar")]),_:1})]),_:1})]),_:1})],64)}}},_t={class:"d-flex align-center justify-center"},vt=["innerHTML"],ft={__name:"Livro",props:{ato_token:{type:String,required:!0},pages:{type:Number,required:!0},document:{type:String,required:!0}},async setup(N){let _,i;const u=N,k=ee();be(`${k.public.docEditor}`);const{$toast:$}=X(),d=H(),c=Q(),O=`${k.public.managemant}/download`,b=`${k.public.managemant}/lavrarAto`,I=r("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),A=r(!1),y=r(null),h=r(null),C=r(null);[_,i]=Y(()=>P(O,{method:"POST",body:{bucket:"qvgjz",path:"fKumj/ato_minuta-2024-12-13T14:57:36.974Z"}},"$ZKnVBNYxp9")),_=await _,i();const v=async()=>{try{const{data:w,status:a}=await P(b,{method:"POST",body:{ato_token:u.ato_token,qtd_paginas:u.pages}},"$XouuxOFIWh");a.value==="success"?(y.value=w.value,h.value=w.value[0].selo,$.success("Ato lavrado com sucesso!")):$.error("Falha ao lavrar o ato.")}catch{$.error("Erro ao conectar com o servidor.")}},n=()=>{A.value=!1,v()},R=function(){console.log(u.document),C.value.ej2Instances.documentEditor.open(u.document)},V=()=>{const w=c.query.origem||"criar",a=c.query.id;w==="atualizar"?d.push(`/os/atualizar/${a}`):d.push("/os/criar-registro")};return(w,a)=>{const x=Ge;return g(),G(pe,null,[e(z,null,{default:t(()=>[e(U,null,{default:t(()=>[e(o($e),{restrictEditing:!0,enableToolbar:!1,created:u.document?R:null,ref_key:"documentEditorContainer",ref:C,height:"850px",width:"850px"},null,8,["created"])]),_:1}),e(U,null,{default:t(()=>[m("div",_t,[m("div",null,[m("img",{onClick:a[0]||(a[0]=j=>A.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:We}),o(y)?(g(),B(ne,{key:0,class:"ml-8 mt-5"},{default:t(()=>[e(z,{"no-gutters":""},{default:t(()=>[e(U,null,{default:t(()=>[e(he,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[D(" Livro: "+ue(o(y)[0].livro_numero),1)]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(he,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[D(" Folhas : "+ue(o(y)[0].pagina_inicial)+" Á "+ue(o(y)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),m("div",{innerHTML:o(h)},null,8,vt)]),_:1})):F("",!0)])])]),_:1})]),_:1}),e(W,{color:"red",size:"large",onClick:V},{default:t(()=>[D("Voltar")]),_:1}),e(x,{show:o(A),condMessage:o(I),onClose:a[1]||(a[1]=j=>A.value=!1),onConfirm:n},null,8,["show","condMessage"])],64)}}},gt=["onClick"],ht={key:0,style:{width:"30px",height:"30px"},src:ve,alt:"Visualizar",title:"Reativar"},yt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},xt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(N){let _,i;const u=N,k=H(),$=Q(),d=ee(),{$toast:c}=X(),O=`${d.public.managemant}/listarEscrevente`,b=`${d.public.managemant}/getAtosTiposByToken`,I=`${d.public.managemant}/createAtosObservacao`,A=`${d.public.managemant}/updateAtosObservacao`,y=r(M("user-data").value.cartorio_token),h=r([]),C=r([]),v=[{title:"Data",align:"start",key:"data"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],n=se({observacao:null}),R={observacao:{required:ye.withMessage("O campo é obrigatorio",xe)}},V=ke(R,n);[_,i]=Y(()=>P(`${b}/${u.ato_token}`,{method:"GET"},"$aJM1TL1buW")),_=await _,i();async function w(){if(await V.value.$validate()){const{data:l,error:f,status:L}=await P(I,{method:"POST",body:{ato_id:u.ato_id,observacao:n.observacao,user_id:M("user-data").value.usuario_id}},"$dMg99jeUNP");L.value==="success"&&(h.value.push({data:Ye(l.value.created,"dd/mm/yyyy hh:mm"),observacao:l.value.observacao,id:l.value.id,escrevente:M("user-data").value.nome}),c.success("Observação registrada com sucesso"))}else c.error("Preencha os campos obrigatorios.")}async function a(l){l.excluido=!l.excluido;try{await P(`${A}/${l.id}`,{method:"PUT",body:JSON.stringify({excluido:l.excluido})},"$B6PdRx8Gp4")}catch(f){console.error("Erro ao excluir observacao:",f)}}const{data:x}=([_,i]=Y(()=>P(O,{method:"POST",body:{cartorio_token:y}},"$xFHPGua26S")),_=await _,i(),_);C.value=x.value[0].func_json_escreventes;const j=()=>{const l=$.query.origem||"criar",f=$.query.id;l==="atualizar"?k.push(`/os/atualizar/${f}`):k.push("/os/criar-registro")};return(l,f)=>{const L=te;return g(),B(re,null,{default:t(()=>[e(z,{class:"mt-5"},{default:t(()=>[e(Z,{label:"Observação",modelValue:o(n).observacao,"onUpdate:modelValue":f[0]||(f[0]=T=>o(n).observacao=T),required:"","error-messages":o(V).observacao.$errors.map(T=>T.$message),onBlur:o(V).observacao.$touch,onInput:o(V).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),m("div",null,[m("img",{class:"btn-pointer ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:w})])]),_:1}),e(z,null,{default:t(()=>[e(U,null,{default:t(()=>[e(de,{style:{height:"465px"},headers:v,items:o(h)},{"item.actions":t(({item:T})=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:fe=>a(T),title:"Deletar Observação"},[T.excluido?(g(),G("img",ht)):(g(),G("img",yt))],8,gt)]),_:1},8,["items"])]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(L,{onClick:j},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>[D("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},kt=m("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Ke,alt:"Escanear"},null,-1),bt=[kt],$t=m("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ae,alt:"Criar"},null,-1),Vt=[$t],wt=["onClick"],Pt=m("img",{style:{width:"30px",height:"30px"},src:me,alt:"Visualizar"},null,-1),Ct=[Pt],Tt=["onClick"],Et={key:0,style:{width:"30px",height:"30px"},src:ve,alt:"Visualizar",title:"Reativar"},At={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},St={__name:"Anexos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(N){const _=N,i=ee(),{$toast:u}=X(),k=H(),$=Q(),d=`${i.public.biometria}/run-scanner`,c=`${i.public.managemant}/atos_anexos`,O=`${i.public.managemant}/atos_anexos`,b=r(!1),I=r([]),A=se({descricao:""}),y=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}];async function h(){try{await C(),await v()}catch(a){console.error("Erro ao executar scanner ou listar arquivos:",a)}}async function C(){try{const{data:a}=await P(d,{method:"GET"},"$WazoKp68Tw")}catch(a){u.error("Erro ao acionar o scanner:",a)}}async function v(){try{const{data:a,status:x}=await P("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:_.ato_token,cartorio_token:M("user-data").value.cartorio_token}},"$03Wxiia3aI")}catch(a){console.error("Erro ao enviar o arquivo:",a)}}const n=async()=>{b.value=!0},R=async()=>{const{data:a,error:x,status:j}=await P(c,{method:"POST",body:{ato_id:_.ato_id,descricao:A.descricao,user_id:M("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$D2PdkmlmwW");j.value==="success"&&(u.success("Anexo registrado com sucesso!"),I.value.push(a.value))};async function V(a){a.excluido=!a.excluido;try{await P(`${O}/${a.id}`,{method:"PUT",body:JSON.stringify({excluido:a.excluido})},"$WyW0hasRPI")}catch(x){console.error("Erro ao excluir pessoa:",x)}}const w=()=>{const a=$.query.origem||"criar",x=$.query.id;a==="atualizar"?k.push(`/os/atualizar/${x}`):k.push("/os/criar-registro")};return(a,x)=>{const j=te;return g(),B(re,null,{default:t(()=>[e(z,null,{default:t(()=>[e(U,{cols:"5"},{default:t(()=>[e(Z,{modelValue:o(A).descricao,"onUpdate:modelValue":x[0]||(x[0]=l=>o(A).descricao=l),label:"Descrição"},null,8,["modelValue"])]),_:1}),m("div",{onClick:h,title:"Escanear"},bt),m("div",{onClick:R,title:"Criar"},Vt)]),_:1}),e(de,{headers:y,items:o(I),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:l})=>[e(z,null,{default:t(()=>[m("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:f=>n(l),title:"Visualizar Anexo"},Ct,8,wt),m("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:f=>V(l),title:"Deletar Pessoa"},[l.excluido?(g(),G("img",Et)):(g(),G("img",At))],8,Tt)]),_:2},1024)]),_:1},8,["items"]),e(Ve,{modelValue:o(b),"onUpdate:modelValue":x[2]||(x[2]=l=>oe(b)?b.value=l:null),width:"600"},{default:t(()=>[e(ne,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(W,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:x[1]||(x[1]=l=>b.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(j,{onClick:w},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>[D("Voltar")]),_:1})]),_:1})]),_:1})}}},qt=m("h1",{class:"mb-2"},"Procuração",-1),Zt={__name:"procuracao",props:{ato_token:{type:String,required:!0}},setup(N){const _=N,i=r(null),u=r(null),k=r(null),$=r(null),d=r(null),c=r(!1),O=r(_.ato_token),b=({id:y,token:h})=>{i.value=y,u.value=h,c.value=!0},I=y=>{k.value=y},A=y=>{$.value=y};return(y,h)=>{const C=Qe,v=dt,n=mt,R=ft,V=xt,w=St;return g(),G(pe,null,[qt,e(ne,{width:"1300"},{default:t(()=>[e(Ze,{modelValue:o(d),"onUpdate:modelValue":h[0]||(h[0]=a=>oe(d)?d.value=a:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(K,{value:"dados"},{default:t(()=>[D("Dados")]),_:1}),o(c)?(g(),B(K,{key:0,value:"partes"},{default:t(()=>[D("Partes")]),_:1})):F("",!0),o(c)?(g(),B(K,{key:1,value:"minuta"},{default:t(()=>[D("Minuta")]),_:1})):F("",!0),o(c)?(g(),B(K,{key:2,value:"livro"},{default:t(()=>[D("Livro")]),_:1})):F("",!0),o(c)?(g(),B(K,{key:3,value:"observacao"},{default:t(()=>[D("Observações")]),_:1})):F("",!0),o(c)?(g(),B(K,{key:4,value:"anexo"},{default:t(()=>[D("Anexos")]),_:1})):F("",!0)]),_:1},8,["modelValue"]),e(He,{modelValue:o(d),"onUpdate:modelValue":h[1]||(h[1]=a=>oe(d)?d.value=a:null)},{default:t(()=>[e(J,{value:"dados"},{default:t(()=>[e(C,{onSaved:b,ato_token:o(O)},null,8,["ato_token"])]),_:1}),o(c)?(g(),B(J,{key:0,value:"partes"},{default:t(()=>[e(v,{ato_token:o(O),ato_id:o(i)},null,8,["ato_token","ato_id"])]),_:1})):F("",!0),o(c)?(g(),B(J,{key:1,value:"minuta"},{default:t(()=>[e(n,{onPage:I,onDoc:A,ato_token:o(u)},null,8,["ato_token"])]),_:1})):F("",!0),o(c)?(g(),B(J,{key:2,value:"livro"},{default:t(()=>[e(R,{pages:o(k),ato_token:o(u),document:o($)},null,8,["pages","ato_token","document"])]),_:1})):F("",!0),o(c)?(g(),B(J,{key:3,value:"observacao"},{default:t(()=>[e(V,{ato_id:o(i)},null,8,["ato_id"])]),_:1})):F("",!0),o(c)?(g(),B(J,{key:4,value:"anexo"},{default:t(()=>[e(w,{ato_token:o(u),ato_id:o(i)},null,8,["ato_token","ato_id"])]),_:1})):F("",!0)]),_:1},8,["modelValue"])]),_:1})],64)}}};export{Zt as default};
