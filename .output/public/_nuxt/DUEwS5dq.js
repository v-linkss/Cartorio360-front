import{e as N,d as O}from"./tcqFOEtm.js";import{_ as P,p as b,r as c,g as D,o as v,q as h,w as o,b as t,d as f,v as a,F as w,c1 as M,a as H,x as y,c as L,I as U,H as x,s as A}from"./DPaCLPvG.js";import{u as C}from"./BvHLOSO-.js";import{a as E,b as W,d as Z,V as G}from"./bRQRkASC.js";import{V as J}from"./BQuOByvl.js";import{V as K}from"./BrXKV_CG.js";import{V as $}from"./4bvBQG9m.js";const Q={class:"d-flex justify-center align-center"},X=["src"],Y={__name:"FichaCard",props:{show:Boolean,item:Object},emits:["close","confirmar"],setup(B,{emit:F}){const m=B,V=A(),T=`${V.public.managemant}/getLinkTipo`,R=`${V.public.managemant}/download`,z=b(()=>!!r.value),S=b(()=>!!d.value),i=c(m.show),r=c(null),d=c(null),l=c(1),u=c(0),_=F;D(()=>m.show,async s=>{i.value=s,r.value=null,await q()});const j=()=>{_("confirmar"),g()},q=async()=>{var k;if(!m.item.id)return;const{data:s}=await C(T,{method:"POST",body:{tipo:"ficha",id:m.item.id}},"$4omB3S9Tg3");if(!((k=s.value)!=null&&k.link))return;const{data:e}=await C(R,{method:"POST",body:{bucket:"qvgjz",path:s.value.link}},"$yanMHqBuqW"),p=s.value.link,n=e.value;/\.(tr7|tiff)$/i.test(p)?r.value=n:d.value=n},g=()=>{i.value=!1,r.value=null,d.value=null,l.value=_("close")},I=()=>{u.value+=90,u.value>=360&&(u.value=0)};return(s,e)=>{const p=O;return v(),h(G,{persistent:"",modelValue:a(i),"onUpdate:modelValue":e[1]||(e[1]=n=>w(i)?i.value=n:null),"max-width":"650"},{default:o(()=>[t(E,null,{default:o(()=>[t(W,{class:"text-h5"},{default:o(()=>e[2]||(e[2]=[f("Ficha de Firma")])),_:1}),t(J,null,{default:o(()=>[t(K,null,{default:o(()=>[t($,{cols:"10"},{default:o(()=>[t(N,{modelValue:a(l),"onUpdate:modelValue":e[0]||(e[0]=n=>w(l)?l.value=n:null),min:"1",max:"2",step:"0.1",label:"Zoom",class:"mt-3"},null,8,["modelValue"])]),_:1}),t($,{cols:"2"},{default:o(()=>[t(M,{class:"ml-6",size:"50px",onClick:I},{default:o(()=>e[3]||(e[3]=[f("mdi-rotate-right")])),_:1})]),_:1})]),_:1})]),_:1}),H("div",Q,[a(z)?(v(),h(p,{key:0,"tiff-url":a(r),"is-modal":!0,"zoom-level":a(l),style:y({transform:`scale(${a(l)}) rotate(${a(u)}deg)`})},null,8,["tiff-url","zoom-level","style"])):a(S)?(v(),L("img",{key:1,src:a(d),style:y({width:"100%",height:"100%",objectFit:"cover",transform:`scale(${a(l)}) rotate(${a(u)}deg)`})},null,12,X)):U("",!0)]),t(Z,null,{default:o(()=>[t(x,{style:{"background-color":"#429946",color:"white"},onClick:j},{default:o(()=>e[4]||(e[4]=[f("Reconhecer")])),_:1}),t(x,{style:{"background-color":"red",color:"white"},onClick:g},{default:o(()=>e[5]||(e[5]=[f("Voltar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},ie=P(Y,[["__scopeId","data-v-70d8af57"]]);export{ie as _};
