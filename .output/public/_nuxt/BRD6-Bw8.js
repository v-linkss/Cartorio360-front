import{r as v,H as U,u as R,D as T,g as z,o as V,G as k,w as t,b as o,a as y,V as p,v as r,A as L,d as $,x as M,s as A,m as q,p as j,O as F,c as D}from"./aJ_WZ4nw.js";import{u as b}from"./DNmU4d7j.js";import{V as G,c as K}from"./CKpJHb8H.js";import{V as B}from"./CQHGIWG3.js";import{V as I}from"./ZaYfHWMo.js";import{V as f}from"./C8QNugQU.js";import{V as H}from"./D8Dk3Cjd.js";import{_ as J,a as W}from"./DJvq3mCv.js";import{V as X}from"./DZ-vbJmc.js";import"./C7t2x4ux.js";import"./CtoEF5MP.js";import"./DnN6bryi.js";import"./BU2dSOsY.js";const Y={__name:"ImportaSelos",props:{show:Boolean,ato_token:String,ato_id:Number,representante_nome:String},emits:["close","update-papel"],setup(h,{emit:w}){const d=h,i=v(d.show),_=U(),m=A();R(),`${m.public.managemant}`;const e=`${m.public.managemant}/listarPapeis`,C=`${m.public.ws}/fornecer_selos_por_lote`,x=`${m.public.managemant}/fornecer_selos`,S=v([]),l=T({nuLote:null}),a=w;z(()=>d.show,async u=>{i.value=u,u&&await s()});const c=()=>{i.value=!1,a("close")},s=async()=>{const{data:u}=await b(e,{method:"POST",body:{tipo_ato_token:_.query.tipo_ato_token||d.ato_token}},"$Z1bKGPif1c");S.value=u.value},P=async()=>{const{data:u,error:n,status:g}=await b(C,{method:"POST",body:{user:"41140940406",pass:"RP6DEN",statusSelo:"D",nuLote:l.nuLote}},"$Kr3yBtlYBF");if(g.value==="success"){const E=u.value.selos,{data:N,error:ae,status:O}=await b(x,{method:"POST",body:{tipo_id:1,cartorio_id:q("user-data").value.cartorio_id,selos:E,user_id:q("user-data").value.usuario_id}},"$KXgVImuygC");O.value==="success"&&(console.log(N.value),c())}};return(u,n)=>(V(),k(H,{persistent:"",modelValue:r(i),"onUpdate:modelValue":n[1]||(n[1]=g=>M(i)?i.value=g:null),"max-width":"800"},{default:t(()=>[o(G,null,{default:t(()=>[o(B,null,{default:t(()=>[o(I,{class:"mt-1 mb-3",style:{"justify-content":"space-between"}},{default:t(()=>[o(f,null,{default:t(()=>n[2]||(n[2]=[y("h1",{class:"ml-4"}," Importar selos do lote ",-1),y("p",{class:"ml-4 mt-3"}," Informe o codigo do lote para realizar a importação ",-1)])),_:1})]),_:1}),n[3]||(n[3]=y("hr",{class:"mb-5"},null,-1)),o(p,{label:"Lote",modelValue:r(l).nuLote,"onUpdate:modelValue":n[0]||(n[0]=g=>r(l).nuLote=g),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),o(K,null,{default:t(()=>[o(L,{style:{"background-color":"red",color:"white"},onClick:c},{default:t(()=>n[4]||(n[4]=[$("Voltar")])),_:1}),o(L,{style:{"background-color":"green",color:"white"},onClick:P},{default:t(()=>n[5]||(n[5]=[$("Importar")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Z={class:"d-flex flex-column"},Q=["onClick"],ee={key:0,style:{width:"30px",height:"30px"},src:J,alt:"Visualizar",title:"Reativar"},oe={key:1,src:W,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ge={__name:"index",setup(h){const w=A(),d=v([]),i=v(!1),_=v(!1),m=`${w.public.managemant}/selos`,e=T({dt_compra:"",numero:"",lote_compra:"",sequencia:"",sigla:""}),C=[{title:"Data de compra",value:"dt_compra"},{title:"Selo",value:"numero"},{title:"Valor de compra",value:"lote_compra"},{title:"Sequência",value:"sequencia"},{title:"Sigla",value:"sigla"},{value:"actions"}],x=async()=>{_.value=!0;try{const{data:l,error:a,status:c}=await b(m,{method:"GET"},"$g9WNETx7rH");c.value==="success"?d.value=Array.isArray(l.value)?l.value:[]:console.error(a)}catch(l){console.error("Erro ao buscar selos:",l)}finally{_.value=!1}},S=j(()=>d.value.filter(l=>(!e.dt_compra||l.dt_compra.toLowerCase().includes(e.dt_compra.toLowerCase()))&&(!e.numero||l.numero.toLowerCase().includes(e.numero.toLowerCase()))&&(!e.lote_compra||l.lote_compra.toLowerCase().includes(e.lote_compra.toLowerCase()))&&(!e.sequencia||l.sequencia.toLowerCase().includes(e.sequencia.toLowerCase()))&&(!e.sigla||l.sigla.toLowerCase().includes(e.sigla.toLowerCase()))));return x(),(l,a)=>{const c=Y;return r(_)?(V(),k(F,{key:0,class:"d-flex justify-center align-center",indeterminate:"",size:"64",style:{position:"absolute",top:"40%",left:"50%"}})):(V(),k(B,{key:1,class:"mt-5"},{default:t(()=>[y("div",Z,[o(L,{class:"mb-10 mt-auto align-self-end",color:"green",size:"large",onClick:a[0]||(a[0]=s=>i.value=!0)},{default:t(()=>a[7]||(a[7]=[$(" Importar Selos TJ ")])),_:1})]),o(I,{class:"mb-4",style:{gap:"4.5rem"}},{default:t(()=>[o(f,{cols:"12",md:"2"},{default:t(()=>[o(p,{modelValue:r(e).dt_compra,"onUpdate:modelValue":a[1]||(a[1]=s=>r(e).dt_compra=s),label:"Data de Compra","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),o(f,{cols:"12",md:"2"},{default:t(()=>[o(p,{modelValue:r(e).numero,"onUpdate:modelValue":a[2]||(a[2]=s=>r(e).numero=s),label:"Selo","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),o(f,{cols:"12",md:"2"},{default:t(()=>[o(p,{modelValue:r(e).lote_compra,"onUpdate:modelValue":a[3]||(a[3]=s=>r(e).lote_compra=s),label:"Valor de Compra","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),o(f,{cols:"12",md:"1"},{default:t(()=>[o(p,{modelValue:r(e).sequencia,"onUpdate:modelValue":a[4]||(a[4]=s=>r(e).sequencia=s),label:"Sequência","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),o(f,{cols:"12",md:"1"},{default:t(()=>[o(p,{modelValue:r(e).sigla,"onUpdate:modelValue":a[5]||(a[5]=s=>r(e).sigla=s),label:"Sigla","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),o(X,{density:"compact",headers:C,items:r(S),"item-key":"selo"},{"item.actions":t(({item:s})=>[y("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:P=>l.deleteObservacao(s),title:"Deletar Observação"},[s.excluido?(V(),D("img",ee)):(V(),D("img",oe))],8,Q)]),_:1},8,["items"]),o(c,{show:r(i),onClose:a[6]||(a[6]=s=>i.value=!1)},null,8,["show"])]),_:1}))}}};export{ge as default};
