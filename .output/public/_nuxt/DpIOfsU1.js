import{_ as a}from"./4de_rhUN.js";import{V as e,a as l,b as o,c as d,_ as s,d as t,e as i,f as m}from"./Bh9-2M3-.js";import{_ as u,r as c,u as n,n as r,E as p,D as _,F as f,G as V,o as b,A as v,w as C,x as g,H as U,a as $,t as j,q as y,b as P,d as h,v as x,Q as I,c as F,C as k,s as w,I as M,p as N,e as A}from"./Cqiv77yc.js";import{a as D,u as E}from"./D0-0VRaN.js";import{_ as q}from"./ToPptOUL.js";import{u as z,_ as B}from"./CnBBmU9u.js";import{a as S}from"./oKXwpsuu.js";import{V as T}from"./DGrEsPnk.js";import{V as G}from"./sftuTnbG.js";import{V as H}from"./B5iMDmra.js";import{V as L}from"./03NkGgWs.js";import"./Dt3m51Lf.js";import"./CBYd86re.js";const O={style:{"background-color":"#c8fcca",color:"#429946",padding:"10px 0px 0px 20px"}},Q={style:{"background-color":"#c8fcca",padding:"20px 0px 20px 20px"}},R={key:1},J=(a=>(N("data-v-b1b4e75d"),a=a(),A(),a))((()=>$("img",{class:"btn-pointer",src:q,alt:"Sair"},null,-1))),K=u({__name:"[id]",emits:["saved"],async setup(u,{emit:N}){let A,q;const K=c(null),W=n(),{$toast:X}=r(),Y=p(),{id:Z}=Y.params,aa=g(),ea=`${aa.public.managemant}/updatePessoa`,la=`${aa.public.managemant}/listarEstadoCivil`,oa=`${aa.public.managemant}/listarCapacidadeCivil`,da=`${aa.public.managemant}/listarCidades`,sa=`${aa.public.managemant}/getPessoaById`,ta={nome:"",nome_pai:"",nome_mae:"",profissao:"",data_nascimento:"",doc_identificacao:"",cpf_pai:"",cpf_mae:"",tipo_pessoa:"FISICA",tabvalores_estadocivil_id:"",tabvalores_capacidadecivil_id:"",cidade_natural_id:"",cartorio_id:_("user-data").value.cartorio_id,user_id:_("user-data").value.usuario_id},ia=f({...ta});function ma(a){if(a)return a.replace(/[.\-]/g,"");a=null}const{data:ua,status:ca,pending:na,error:ra}=([A,q]=V((async()=>D("cliente-dados",(async()=>{const[a,e,l,o]=await Promise.all([$fetch(la),$fetch(oa),$fetch(da),$fetch(`${sa}/${Z}`)]);return Object.assign(ia,o),{estadoCivilItems:a,capacidadeCivilItems:e,cidadeNascimentoItems:l}})))),A=await A,q(),A);async function pa(){const a=function(a){const e={};for(const l in a)""===a[l]?e[l]=null:e[l]="doc_identificacao"===l||"cpf_pai"===l||"cpf_mae"===l?ma(a[l]):a[l];return e}(ia);await E(`${ea}/${Z}`,{method:"PUT",body:a},"$NdF8Uiv290"),X.success("Pessoa atualizada com sucesso!"),W.push("/pessoas/registros")}return z(ia),(u,c)=>{const n=a,r=s,p=t,_=i,f=m,V=U("mask");return b(),v(S,{width:"1300"},{default:C((()=>[$("h1",O,j(y(Z)?"Atualização de Pessoas":"Cadastramento de Pessoas"),1),$("div",Q,[P(T,{modelValue:ia.tipo_pessoa,"onUpdate:modelValue":c[0]||(c[0]=a=>ia.tipo_pessoa=a),style:{width:"200px"},items:u.pessoa_tipo,label:"Tipo de pessoa","bg-color":"#F6F6F6",disabled:""},null,8,["modelValue","items"])]),P(l,{modelValue:y(K),"onUpdate:modelValue":c[1]||(c[1]=a=>x(K)?K.value=a:null),"bg-color":"#C8FCCA"},{default:C((()=>[P(e,{value:"dados"},{default:C((()=>[h("Dados")])),_:1}),P(e,{value:"documento"},{default:C((()=>[h("Documentos")])),_:1}),P(e,{value:"endereco"},{default:C((()=>[h("Endereços")])),_:1}),P(e,{value:"biometria"},{default:C((()=>[h("Biometria")])),_:1}),P(e,{value:"restricao"},{default:C((()=>[h("Restrições")])),_:1})])),_:1},8,["modelValue"]),P(d,{modelValue:y(K),"onUpdate:modelValue":c[15]||(c[15]=a=>x(K)?K.value=a:null)},{default:C((()=>[P(o,{value:"dados"},{default:C((()=>[y(na)?(b(),v(I,{key:0,class:"loading-spinner",indeterminate:"",size:"64"})):y(ra)?(b(),F("div",R,j(y(ra).message),1)):k("",!0),y(na)?k("",!0):(b(),v(G,{key:2,class:"mt-5"},{default:C((()=>[P(H,null,{default:C((()=>[P(L,{cols:"12",md:"8"},{default:C((()=>[P(w,{modelValue:ia.nome,"onUpdate:modelValue":c[2]||(c[2]=a=>ia.nome=a),label:"Nome"},null,8,["modelValue"])])),_:1}),P(L,{cols:"12",md:"4"},{default:C((()=>[M(P(w,{modelValue:ia.doc_identificacao,"onUpdate:modelValue":c[3]||(c[3]=a=>ia.doc_identificacao=a),label:"CPF",required:""},null,8,["modelValue"]),[[V,"###.###.###-##"]])])),_:1})])),_:1}),P(H,null,{default:C((()=>[P(L,{cols:"12",md:"4"},{default:C((()=>[P(T,{modelValue:ia.tabvalores_estadocivil_id,"onUpdate:modelValue":c[4]||(c[4]=a=>ia.tabvalores_estadocivil_id=a),items:y(ua).estadoCivilItems,"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])])),_:1}),P(L,{cols:"12",md:"4"},{default:C((()=>[P(w,{modelValue:ia.profissao,"onUpdate:modelValue":c[5]||(c[5]=a=>ia.profissao=a),label:"Profissão"},null,8,["modelValue"])])),_:1}),P(L,{cols:"12",md:"4"},{default:C((()=>[P(w,{modelValue:ia.local_trabalho,"onUpdate:modelValue":c[6]||(c[6]=a=>ia.local_trabalho=a),label:"Local de trabalho"},null,8,["modelValue"])])),_:1})])),_:1}),P(H,null,{default:C((()=>[P(L,{cols:"12",md:"4"},{default:C((()=>[P(w,{modelValue:ia.data_nascimento,"onUpdate:modelValue":c[7]||(c[7]=a=>ia.data_nascimento=a),type:"date","prepend-icon":"",label:"Data de nascimento"},null,8,["modelValue"])])),_:1}),P(L,{cols:"12",md:"4"},{default:C((()=>[P(T,{modelValue:ia.tabvalores_capacidadecivil_id,"onUpdate:modelValue":c[8]||(c[8]=a=>ia.tabvalores_capacidadecivil_id=a),items:y(ua).capacidadeCivilItems,label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])])),_:1}),P(L,{cols:"12",md:"4"},{default:C((()=>[P(T,{modelValue:ia.cidade_natural_id,"onUpdate:modelValue":c[9]||(c[9]=a=>ia.cidade_natural_id=a),items:y(ua).cidadeNascimentoItems,label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])])),_:1})])),_:1}),P(H,null,{default:C((()=>[P(L,{cols:"12",md:"4"},{default:C((()=>[M(P(w,{modelValue:ia.cpf_pai,"onUpdate:modelValue":c[10]||(c[10]=a=>ia.cpf_pai=a),modelModifiers:{date:!0},label:"CPF do Pai"},null,8,["modelValue"]),[[V,"###.###.###-##"]])])),_:1}),P(L,{cols:"12",md:"4"},{default:C((()=>[P(w,{modelValue:ia.nome_pai,"onUpdate:modelValue":c[11]||(c[11]=a=>ia.nome_pai=a),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])])),_:1})])),_:1}),P(H,null,{default:C((()=>[P(L,{cols:"12",md:"4"},{default:C((()=>[M(P(w,{modelValue:ia.cpf_mae,"onUpdate:modelValue":c[12]||(c[12]=a=>ia.cpf_mae=a),modelModifiers:{date:!0},label:"CPF da Mãe"},null,8,["modelValue"]),[[V,"###.###.###-##"]])])),_:1}),P(L,{cols:"12",md:"4"},{default:C((()=>[P(w,{modelValue:ia.nome_mae,"onUpdate:modelValue":c[13]||(c[13]=a=>ia.nome_mae=a),modelModifiers:{date:!0},label:"Nome da Mãe"},null,8,["modelValue"])])),_:1})])),_:1}),P(H,null,{default:C((()=>[P(n,{to:"/pessoas/registros"},{default:C((()=>[J])),_:1}),$("img",{class:"btn-pointer",src:B,onClick:c[14]||(c[14]=a=>pa())})])),_:1})])),_:1}))])),_:1}),P(o,{value:"documento"},{default:C((()=>[P(r)])),_:1}),P(o,{value:"endereco"},{default:C((()=>[P(p)])),_:1}),P(o,{value:"biometria"},{default:C((()=>[P(G,{class:"mt-5"},{default:C((()=>[P(_)])),_:1})])),_:1}),P(o,{value:"restricao"},{default:C((()=>[P(f)])),_:1})])),_:1},8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-b1b4e75d"]]);export{K as default};
