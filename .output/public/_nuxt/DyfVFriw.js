import{_ as M}from"./BZbDmwhG.js";import{r as v,u as x,n as O,q as z,o as P,c as R,b as e,w as t,F as T,s as W,V as H,v as L,x as p,y as h,z as b,A as q,B as K,d as X,a as l,C as Y}from"./mojXBOLn.js";import{u as Z}from"./CyECj4U3.js";import{_ as G,V as J,a as Q}from"./DNz7WqVn.js";import{V as f,_ as D}from"./D2reQQng.js";import{_ as ee}from"./37abXc2X.js";import{_ as te}from"./L4ZI-Rra.js";import{V as d}from"./Cawe7E8A.js";import{V as ae}from"./Dso8kxDh.js";import{V as oe}from"./IXGbn4ON.js";import{V as C}from"./DUqVQbic.js";const se=l("img",{src:Q},null,-1),le=l("img",{style:{cursor:"pointer"},src:D,alt:"Excluir"},null,-1),ie=[le],ne=l("img",{style:{cursor:"pointer"},src:ee,alt:"Salvar"},null,-1),re=[ne],ce=l("img",{class:"btn-pointer",src:te,alt:"Excluir"},null,-1),de=l("img",{class:"mt-15",src:D,alt:"Sair"},null,-1),De={__name:"about",setup(ue){const n=v(null),_=v([]),u=v(""),m=v(!1),r=v(1),E=x("auth_token").value,I=x("user-data").value.nome,N=W().public.minioUploadFaceIdUrl,{$toast:V}=O(),w=async()=>{const a=await navigator.mediaDevices.enumerateDevices();_.value=a.filter(o=>o.kind==="videoinput").map(o=>({deviceId:o.deviceId,label:o.label||`Camera ${_.value.length+1}`}))},S=async()=>{m.value=!0;try{await navigator.mediaDevices.getUserMedia({video:!0}),await w()}catch(a){console.error("Erro ao acessar dispositivos de mídia:",a)}},y=()=>{m.value=!1;const a=n.value.srcObject;a&&a.getTracks().forEach(i=>i.stop())},U=async()=>{if(u.value){const a=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:u.value}}});n.value.srcObject=a}},B=async()=>{const a=document.createElement("canvas"),o=a.getContext("2d"),i=n.value.videoWidth,s=n.value.videoHeight,c=i*r.value,k=s*r.value,j=(i-c)/2,F=(s-k)/2;a.width=i,a.height=s,o.drawImage(n.value,j,F,c,k),a.toBlob(async $=>{const g=new FormData;g.append("file",$,`${I}.jpg`),g.append("pessoa_token",E);const{status:A}=await Z(N,{method:"POST",body:g},"$c6wy8KmN8o");A.value==="success"?(V.success("Imagem enviada!"),y()):V.error("Erro ao enviar imagem para o sistema.")},"image/jpeg")};return z(async()=>{try{await navigator.mediaDevices.getUserMedia({video:!0}),await w()}catch(a){console.error("Erro ao acessar dispositivos de mídia:",a)}}),(a,o)=>{const i=M;return P(),R(T,null,[e(f,{class:"d-flex align-items-center justify-space-between"},{default:t(()=>[e(d,{cols:"auto"},{default:t(()=>[e(H,{src:G,width:500,class:"mr-4"})]),_:1}),e(L),e(d,{cols:"auto"},{default:t(()=>[e(ae,{"max-width":"700",modelValue:p(m),"onUpdate:modelValue":o[2]||(o[2]=s=>h(m)?m.value=s:null)},{activator:t(({props:s})=>[e(b,q(s,{variant:"outlined",style:{width:"300px",height:"300px"},onClick:S}),{default:t(()=>[se]),_:2},1040)]),default:t(({isActive:s})=>[e(oe,{title:"Biometria"},{default:t(()=>[e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(K,{items:p(_),modelValue:p(u),"onUpdate:modelValue":o[0]||(o[0]=c=>h(u)?u.value=c:null),"item-title":"label","item-value":"deviceId",label:"Selecionar Webcam"},null,8,["items","modelValue"])]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(d,null,{default:t(()=>[e(b,{onClick:U},{default:t(()=>[X("Exibir")]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(C,{style:{overflow:"hidden"}},{default:t(()=>[e(d,null,{default:t(()=>[l("video",{class:"ml-3",ref_key:"video",ref:n,width:"640",height:"480",autoplay:"",style:Y({transform:`scale(${p(r)})`,transformOrigin:"center center"})},null,4)]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(J,{modelValue:p(r),"onUpdate:modelValue":o[1]||(o[1]=c=>h(r)?r.value=c:null),min:1,max:3,step:"0.1",label:"Zoom"},null,8,["modelValue"])]),_:1}),e(f,{class:"mt-10 justify-space-around"},{default:t(()=>[l("div",{onClick:y},ie),l("div",{onClick:B},re)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[ce]),_:1})]),_:1}),e(i,{to:"home"},{default:t(()=>[de]),_:1})],64)}}};export{De as default};
