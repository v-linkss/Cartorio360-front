import{_ as pe,a as ve,b as fe,c as be,d as ge,e as Ve}from"./CJJNi5hi.js";import{_ as ye}from"./Df6DVINn.js";import{n as Ae,r,L as ke,P as K,u as $e,x as ze,I as qe,o as k,p as T,w as o,b as e,C as O,q as a,E as W,A as x,V as G,d,v as Y,m as we,G as L,c as j,F as Pe,a as D,t as Te,s as R}from"./CNgMOleP.js";import{f as P}from"./CfmmzxrF.js";import{u as xe}from"./DECIjsaj.js";import{V as B}from"./7l_mb_88.js";import{V as b}from"./BsV7LNdI.js";import{V as U}from"./DYegQF_t.js";import{V as H}from"./BArmsOLP.js";import{_ as Ce,a as De,b as Re}from"./DtFn2JjC.js";import{_ as Be}from"./CWnY4uN7.js";import{_ as Ue}from"./BZXePxHU.js";import{V as Me}from"./BP9yIB0r.js";import{a as Se,V as p,d as Ee,e as v}from"./Wnzcmwgb.js";import"./DJPGFKoI.js";import"./CddAVvPI.js";import"./hzT9vgSO.js";import"./DR2Aol6T.js";import"./B0IxRygJ.js";import"./B6LYaPdi.js";import"./DhbwIa7q.js";import"./CgJ9sGpv.js";import"./DqihZnR-.js";import"./CWyLzn37.js";import"./BtKROlnJ.js";import"./D54PqpCp.js";import"./BVz1G1IN.js";import"./DJvq3mCv.js";import"./hR8wdNB7.js";import"./Cr-0jp2q.js";import"./TDtrdbi3.js";import"./UlntslQW.js";import"./B0391hns.js";import"./_HIY8ljI.js";import"./DMhJ78nM.js";import"./DVYOp2Qo.js";import"./B0yJfbgt.js";import"./DByY-dFt.js";import"./-zgYk4Vu.js";import"./C9Um-eek.js";import"./CYd0WXZh.js";import"./DxD34BE2.js";import"./XsE_Ph0F.js";const Ie={__name:"SeparacaoDivorcio",setup(J){const c=Y(),i=Ae({dt_casamento:null,tabvalores_regimecasamento_id:null,qtd_filhos_maiores:null,qtd_filhos_menores:null,responsavel_menores_id:null}),$=r([]),z=ke(),n=K(),A=r(n.query.origem==="vizualizar"),{$toast:g}=$e(),M=`${c.public.auth}/service/gerencia/getAtos/${n.query.ato_id}`,S=`${c.public.auth}/service/gerencia/regime_casamento`,C=`${c.public.auth}/service/gerencia/getAtosPessoaById/${n.query.ato_id}`,E=`${c.public.managemant}/updateAtos`;ze(async()=>{const[l,s,_]=await Promise.all([P(M,{method:"GET"}),P(S,{method:"GET"}),P(C,{method:"GET"})]);l.data.value&&Object.assign(i,l.data.value[0]||l.data.value),s.data.value&&($.value=s.data.value),_.data.value&&(q.value=_.data.value)});const I=async()=>{try{const{data:l}=await P(C,{method:"GET"});q.value=l.value||[]}catch{}},q=r([]),f=qe(()=>{var l;return((l=q.value)==null?void 0:l.map(s=>{var _;return{id:s.id,nome:((_=s.pessoa)==null?void 0:_.nome)||"Sem nome"}}))||[]}),w=()=>{const l=n.query.origem||"criar",s=n.query.id;switch(l){case"atualizar":case"vizualizar":z.push(`/os/atualizar/${s}`);break;case"atualizar-lista":case"vizualizar-lista":z.push("/atos/lista");break;default:z.push("/os/criar-registro");break}};async function h(){const{data:l,error:s,status:_}=await xe(`${E}/${n.query.ato_id}`,{method:"PUT",body:{dt_casamento:i.dt_casamento,tabvalores_regimecasamento_id:i.tabvalores_regimecasamento_id,qtd_filhos_maiores:i.qtd_filhos_maiores,qtd_filhos_menores:i.qtd_filhos_menores,responsavel_menores_id:i.responsavel_menores_id}},"$sJMejO9HYY");_.value==="success"&&g.success("Divórcio salvo com sucesso")}const V=l=>{const s=["Backspace","Tab","ArrowLeft","ArrowRight","Delete"];!/[0-9]/.test(l.key)&&!s.includes(l.key)&&l.preventDefault()};return(l,s)=>{const _=ye;return k(),T(H,{class:"mt-5"},{default:o(()=>[e(B,{dense:""},{default:o(()=>[e(b,{cols:"12",sm:"4",md:"3"},{default:o(()=>[e(O,{modelValue:a(i).dt_casamento,"onUpdate:modelValue":s[0]||(s[0]=u=>a(i).dt_casamento=u),type:"date",label:"Data Casamento",readonly:a(A)},null,8,["modelValue","readonly"])]),_:1}),e(b,{cols:"12",sm:"6",md:"4"},{default:o(()=>[a($).length?(k(),T(U,{key:0,label:"Regime Bens",modelValue:a(i).tabvalores_regimecasamento_id,"onUpdate:modelValue":s[1]||(s[1]=u=>a(i).tabvalores_regimecasamento_id=u),items:a($),"item-title":"descricao","item-value":"id",readonly:a(A),style:W({cursor:a(A)?"not-allowed":""}),required:""},null,8,["modelValue","items","readonly","style"])):x("",!0)]),_:1}),e(b,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(O,{label:"Filhos Maiores",modelValue:a(i).qtd_filhos_maiores,"onUpdate:modelValue":s[2]||(s[2]=u=>a(i).qtd_filhos_maiores=u),modelModifiers:{number:!0},type:"number",min:"0",onKeydown:V},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(O,{label:"Filhos Menores",modelValue:a(i).qtd_filhos_menores,"onUpdate:modelValue":s[3]||(s[3]=u=>a(i).qtd_filhos_menores=u),modelModifiers:{number:!0},type:"number",min:"0",onKeydown:V},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"4"},{default:o(()=>[a(f).length?(k(),T(U,{key:0,onFocus:I,label:"Responsável",modelValue:a(i).responsavel_menores_id,"onUpdate:modelValue":s[4]||(s[4]=u=>a(i).responsavel_menores_id=u),items:a(f),"item-title":"nome","item-value":"id",required:""},null,8,["modelValue","items"])):x("",!0)]),_:1})]),_:1}),e(B,{class:"mt-5",justify:"start",align:"center"},{default:o(()=>[e(b,{cols:"auto"},{default:o(()=>[e(_,{onClick:w},{default:o(()=>[e(G,{size:"large",color:"red"},{default:o(()=>s[5]||(s[5]=[d("Voltar")])),_:1})]),_:1})]),_:1}),e(b,{cols:"auto"},{default:o(()=>[a(A)?x("",!0):(k(),T(G,{key:0,class:"ml-2",onClick:h,size:"large",color:"green"},{default:o(()=>s[6]||(s[6]=[d("Salvar")])),_:1}))]),_:1})]),_:1})]),_:1})}}},he={class:"mb-10"},Fe={style:{color:"red","margin-left":"30px"}},Ne={key:0},Bo={__name:"[id]",async setup(J){let c,i;const $=r(null),z=r(null),n=r(null),A=Y(),g=K(),M=r(g.query.origem==="vizualizar"),S=`${A.public.auth}/service/gerencia/listarSituacoes`,C=`${A.public.auth}/service/gerencia/getAtos`,E=r(we("user-data").value.cartorio_token),I=g.query.id?{ato_token:g.query.tipo_ato_token}:{cartorio_token:E},q=r([]),f=r([]),w=r(!1),h=g.query.tipo_ato||"",V=r(null),l=r(null),[s,_]=h.split(" - "),u=r(0);V.value=s||"",l.value=_||"";async function Q(){try{const{data:m}=await P(`${C}/${g.query.ato_id}`,{method:"GET"});f.value=m.value}catch(m){console.error(m)}}[c,i]=L(()=>Q()),await c,i();const{data:X,status:Oe}=([c,i]=L(()=>P(S,{method:"POST",body:I})),c=await c,i(),c);q.value=X.value;const Z=m=>{$.value=m},ee=m=>{z.value=m};function oe(){f.dt_lavratura||(w.value=!0)}function ae(m){m==="divorcio"&&u.value++}function te(){u.value++}function se({descricao:m,usaImoveisParams:t}){const[F,N]=m.split(" - ");V.value=F||"",l.value=N||""}return(m,t)=>{const F=pe,N=ve,le=Ie,ie=Ce,re=De,ne=fe,ue=be,me=ge,de=Ve,ce=Re,_e=Be;return k(),j(Pe,null,[e(H,null,{default:o(()=>[D("div",he,[e(B,{class:"mb-5 mt-5"},{default:o(()=>[t[5]||(t[5]=D("h1",null,"Ordem de Serviço nº",-1)),D("h1",Fe,Te(a(g).query.numero_os),1)]),_:1}),e(B,null,{default:o(()=>[e(b,{md:"6"},{default:o(()=>[e(U,{label:"Serviço",class:"mr-5",modelValue:a(V),"onUpdate:modelValue":t[0]||(t[0]=y=>R(V)?V.value=y:null),disabled:""},null,8,["modelValue"])]),_:1}),e(b,{md:"5"},{default:o(()=>[e(U,{modelValue:a(l),"onUpdate:modelValue":t[1]||(t[1]=y=>R(l)?l.value=y:null),label:"Tipo de Ato",disabled:""},null,8,["modelValue"])]),_:1}),a(M)?x("",!0):(k(),j("div",Ne,[D("img",{class:"mt-2",style:W({cursor:a(f).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:Ue,alt:"Editar",onClick:oe},null,4)]))]),_:1})]),e(Me,{width:"1300"},{default:o(()=>[e(Se,{modelValue:a(n),"onUpdate:modelValue":t[2]||(t[2]=y=>R(n)?n.value=y:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(p,{value:"dados"},{default:o(()=>t[6]||(t[6]=[d("Dados")])),_:1}),e(p,{value:"partes"},{default:o(()=>t[7]||(t[7]=[d("Partes")])),_:1}),e(p,{value:"bens"},{default:o(()=>t[8]||(t[8]=[d("Bens")])),_:1}),e(p,{value:"imoveis"},{default:o(()=>t[9]||(t[9]=[d("Imoveis")])),_:1}),e(p,{onClick:te,value:"divorcio"},{default:o(()=>t[10]||(t[10]=[d("Matrimônio")])),_:1}),e(p,{value:"minuta"},{default:o(()=>t[11]||(t[11]=[d("Minuta")])),_:1}),e(p,{value:"livro"},{default:o(()=>t[12]||(t[12]=[d("Livro")])),_:1}),e(p,{value:"observacao"},{default:o(()=>t[13]||(t[13]=[d("Observações")])),_:1}),e(p,{value:"anexo"},{default:o(()=>t[14]||(t[14]=[d("Anexos")])),_:1}),e(p,{value:"outros"},{default:o(()=>t[15]||(t[15]=[d("Outros")])),_:1})]),_:1},8,["modelValue"]),e(Ee,{modelValue:a(n),"onUpdate:modelValue":[t[3]||(t[3]=y=>R(n)?n.value=y:null),ae]},{default:o(()=>[e(v,{value:"dados"},{default:o(()=>[e(F,{item_dados:a(f),item_situacoes:a(q)},null,8,["item_dados","item_situacoes"])]),_:1}),e(v,{value:"partes"},{default:o(()=>[e(N)]),_:1}),e(v,{value:"divorcio"},{default:o(()=>[e(le,{"tab-event":a(u)},null,8,["tab-event"])]),_:1}),e(v,{value:"bens"},{default:o(()=>[e(ie)]),_:1}),e(v,{value:"imoveis"},{default:o(()=>[e(re)]),_:1}),e(v,{value:"minuta"},{default:o(()=>[e(ne,{onPage:Z,onDoc:ee})]),_:1}),e(v,{value:"livro"},{default:o(()=>[e(ue,{pages:a($),document:a(z)},null,8,["pages","document"])]),_:1}),e(v,{value:"observacao"},{default:o(()=>[e(me)]),_:1}),e(v,{value:"anexo"},{default:o(()=>[e(de)]),_:1}),e(v,{value:"outros"},{default:o(()=>[e(ce)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(w)?(k(),T(_e,{key:0,show:a(w),servicos:a(f).servicos||[],tiposAtos:a(f).tiposAtos||[],onClose:t[4]||(t[4]=y=>w.value=!1),onUpdateAto:se},null,8,["show","servicos","tiposAtos"])):x("",!0)],64)}}};export{Bo as default};
