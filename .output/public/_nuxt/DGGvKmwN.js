import{_ as ee}from"./BwUEpsib.js";import{n as Y,q as H,u as Z,r,A as j,s as se,B as oe,o as f,v as T,w as t,b as e,x as o,V as X,y as L,d as O,z as Q,a as l,c as W,C as ne,t as te,D as Be,F as Ie,G as F,H as he,I as ge}from"./BEd1cr51.js";import{u as P}from"./D8N2zCOm.js";import{c as ye,r as xe,u as ke}from"./Br_1pbYC.js";import{V as A}from"./CrN9gLBw.js";import{V as R}from"./ZcDPUhnn.js";import{V as le}from"./DpAvue5S.js";import{V as re}from"./RSWOkkjW.js";import{_ as Ue,a as J,V as je,c as K,b as Ne}from"./CXyoh3fX.js";import{_ as Fe,a as Le,b as We,T as Ge,W as Je,r as be,D as $e,c as Ke,d as Ye,e as He}from"./jE4ZQ_pJ.js";import{_ as ie}from"./Cbd4pulh.js";import{_ as ae,V as ue,a as ce,b as de,c as Ve}from"./BaWtNHOH.js";import{V as we,a as pe}from"./C-liFcwM.js";import{V as Ze}from"./qGN1dptX.js";import{_ as Qe}from"./BcpUXzGy.js";import{V as Xe}from"./CzQbT91S.js";import{_ as et}from"./DfjuBLsA.js";import"./DUNWT362.js";import"./D4y7GR1l.js";import"./CV43BUDh.js";import"./C2ikpqBy.js";const tt={__name:"Dados",props:{ato_token:{type:String,required:!0}},emits:["saved"],async setup(N,{emit:_}){let c,v;const w=N,C=_,g=Y(),d=H(),$=Q(),{$toast:y}=Z(),E=`${$.public.managemant}/listarSituacoes`,D=`${$.public.managemant}/createAtos`,b=`${$.public.managemant}/getAtosTiposByToken`,h=r(j("user-data").value.cartorio_token),U=r(j("user-service").value.id).value||r(j("user-service").value).value,S=r([]),a=se({dt_abertura:null,status:"EM EDIÇÃO",mne:null}),V={status:{required:ye.withMessage("O campo é obrigatorio",xe)}},n=ke(V,a),{data:x}=([c,v]=oe(()=>P(`${b}/${w.ato_token}`,{method:"GET"},"$9ZmTYsLk0K")),c=await c,v(),c);async function s(){if(await n.value.$validate()){const{data:u,error:p,status:G}=await P(D,{method:"POST",body:{ato_tipo_id:x.value.id,cartorio_id:j("user-data").value.cartorio_id,ordemserv_id:U,status:a.status,dt_abertura:a.dt_abertura,mne:a.mne,user_id:j("user-data").value.usuario_id,user_alteracao_id:j("user-data").value.usuario_id}},"$hyq5YcBEjF");G.value==="success"&&(y.success("Ato registrado com sucesso!"),C("saved",{id:u.value.id,token:u.value.token}))}else y.error("Preencha os campos obrigatorios.")}const{data:m}=([c,v]=oe(()=>P(E,{method:"POST",body:{cartorio_token:h.value}},"$S3qwbpImEh")),c=await c,v(),c);S.value=m.value;const M=()=>{const u=d.query.origem||"criar",p=d.query.id;u==="atualizar"?g.push(`/os/atualizar/${p}`):g.push("/os/criar-registro")};return(u,p)=>{const G=ee;return f(),T(re,null,{default:t(()=>[e(A,{class:"mt-5"},{default:t(()=>[e(R,{cols:"3"},{default:t(()=>[e(le,{label:"Situação",modelValue:o(a).status,"onUpdate:modelValue":p[0]||(p[0]=q=>o(a).status=q),items:o(S),"item-title":"descricao","item-value":"descricao",required:"","error-messages":o(n).status.$errors.map(q=>q.$message),onBlur:o(n).status.$touch,onInput:o(n).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(R,{cols:"5"},{default:t(()=>[e(X,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:o(a).mne,"onUpdate:modelValue":p[1]||(p[1]=q=>o(a).mne=q)},null,8,["modelValue"])]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(R,{cols:"2"},{default:t(()=>[e(X,{modelValue:o(a).dt_abertura,"onUpdate:modelValue":p[2]||(p[2]=q=>o(a).dt_abertura=q),type:"date",label:"Data Lavratura",disabled:"",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(A,{class:"mb-3"},{default:t(()=>[e(G,{onClick:M},{default:t(()=>[e(L,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1}),e(L,{class:"ml-10",onClick:s,size:"large",color:"green"},{default:t(()=>[O("Salvar")]),_:1})]),_:1})]),_:1})}}},ot=["onClick"],at=l("img",{style:{width:"30px",height:"30px"},src:ie,alt:"Visualizar"},null,-1),st=[at],rt=["onClick"],nt=l("img",{style:{width:"30px",height:"30px"},src:Ve,alt:"Visualizar"},null,-1),lt=[nt],it=["onClick"],ut={key:0,style:{width:"30px",height:"30px"},src:ce,alt:"Visualizar",title:"Reativar"},ct={key:1,src:de,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},dt=["onClick"],pt=l("img",{style:{width:"30px",height:"30px"},src:We,alt:"Visualizar"},null,-1),mt=[pt],_t={__name:"Partes",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(N){let _,c;const v=N,w=Y(),C=H(),g=Q(),{$toast:d}=Z(),$=`${g.public.managemant}/pesquisarPessoas`,y=`${g.public.managemant}/listarPapeis`,E=`${g.public.managemant}/getLinkTipo`,D=`${g.public.managemant}/createAtosPessoa`,b=`${g.public.managemant}/getAtosPessoaById`,h=`${g.public.managemant}/updateAtosPessoa`,U=r(j("user-data").value.cartorio_token),S=r([]),a=r([]),V=r([]),n=r(!1),x=r(!1),s=r(!1),m=r(!1),M=r(null),u=r(null),p=r(null),G=r(null);r(null);const q=r(null),ve=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],B=se({papeis:null,nome:null,pessoa:null,documento:null}),{data:Pe}=([_,c]=oe(()=>P(y,{method:"POST",body:{tipo_ato_token:v.ato_token}},"$fFKndZhA4W")),_=await _,c(),_);V.value=Pe.value;async function Ce(){try{const{data:k,error:i}=await P($,{method:"POST",body:{cartorio_token:U.value,documento:B.documento,nome:B.nome}},"$o3ZL1rvYrY");k.value.length>0?(S.value=k.value,B.pessoa=S.value[0]):S.value=[]}catch(k){console.error("Erro na requisição",k)}}const Ee=()=>{x.value=!0},Ae=k=>{a.value=a.value.map(i=>i.id===p.value?{...i,papel:{...i.papel,descricao:k}}:i)},Te=k=>{const i=a.value.find(I=>I.pessoa.id===G.value);i.representante.nome=k},Se=async()=>{const k={pessoa:B.pessoa,papel:V.value.find(I=>I.id===B.papeis),representante:{nome:null}},i=await P(`${b}/${v.ato_id}`,{method:"GET"},"$kXSxUa4grs");for(const I of i.data.value)if(I.pessoa_id===B.pessoa.id&&I.ato_id===v.ato_id&&I.tipo_parte_id===B.papeis){d.error("Pessoa Já Registrada Com Esse Papel!");return}try{const{data:I,error:fe,status:me}=await P(D,{method:"POST",body:{ato_id:v.ato_id,pessoa_id:B.pessoa.id,tipo_parte_id:B.papeis,user_id:j("user-data").value.usuario_id}},"$So3qnQu7ek");me.value==="success"?(k.id=I.value.id,d.success("Pessoa Registrada com Sucesso!"),a.value.push(k)):d.error("Erro ao registrar a pessoa!")}catch{d.error("Erro no servidor. Tente novamente.")}},qe=async k=>{s.value=!0,q.value=null;const{data:i}=await P(`${E}`,{method:"POST",body:{id:k.pessoa.id,tipo:"ficha"}},"$Q3kbIwtd9t");i.value&&i.value.link?q.value=`data:image/jpeg;base64,${i.value.link}`:q.value=null},ze=k=>{const i=a.value.filter(I=>I.pessoa.id!==k.pessoa.id).map(I=>({id:I.pessoa.id,nome:I.pessoa.nome}));p.value=k.id,M.value=i,n.value=!0,u.value=k.pessoa.nome,G.value=k.pessoa.id},Oe=k=>{p.value=k.id,m.value=!0,u.value=k.pessoa.nome};async function De(k){k.excluido=!k.excluido;try{await P(`${h}/${p.value}`,{method:"PUT",body:JSON.stringify({excluido:k.excluido})},"$9xStKwGd7o")}catch(i){console.error("Erro ao excluir pessoa:",i)}}const Me=()=>{const k=C.query.origem||"criar",i=C.query.id;k==="atualizar"?w.push(`/os/atualizar/${i}`):w.push("/os/criar-registro")};return(k,i)=>{const I=Ue,fe=Fe,me=Le,Re=ee;return f(),T(re,null,{default:t(()=>[e(A,{class:"mt-5"},{default:t(()=>[e(R,{cols:"3"},{default:t(()=>[e(X,{label:"Documento",modelValue:o(B).documento,"onUpdate:modelValue":i[0]||(i[0]=z=>o(B).documento=z)},null,8,["modelValue"])]),_:1}),e(R,{cols:"4"},{default:t(()=>[e(X,{label:"Pessoa",modelValue:o(B).nome,"onUpdate:modelValue":i[1]||(i[1]=z=>o(B).nome=z)},null,8,["modelValue"])]),_:1}),l("div",null,[l("img",{class:"mt-3",src:ie,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Ce})]),l("div",null,[l("img",{class:"mt-3 ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Ee})])]),_:1}),e(A,null,{default:t(()=>[e(R,{cols:"4"},{default:t(()=>[e(le,{label:"Selecione a Pessoa",modelValue:o(B).pessoa,"onUpdate:modelValue":i[2]||(i[2]=z=>o(B).pessoa=z),items:o(S),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(R,{cols:"3"},{default:t(()=>[e(le,{label:"Papel",modelValue:o(B).papeis,"onUpdate:modelValue":i[3]||(i[3]=z=>o(B).papeis=z),items:o(V),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),l("div",null,[l("img",{class:"mt-3",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Se})])]),_:1}),e(A,null,{default:t(()=>[e(R,null,{default:t(()=>[e(ue,{style:{height:"465px"},headers:ve,items:o(a)},{"item.actions":t(({item:z})=>[e(A,null,{default:t(()=>[l("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:_e=>qe(z),title:"Visualizar Ficha"},st,8,ot),l("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:_e=>Oe(z),class:"mr-2",title:"Alterar Papel"},lt,8,rt),l("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:_e=>De(z),title:"Deletar Pessoa"},[z.excluido?(f(),W("img",ut)):(f(),W("img",ct))],8,it),l("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:_e=>ze(z),title:"Selecionar Representante"},mt,8,dt)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(I,{show:o(x),onClose:i[4]||(i[4]=z=>x.value=!1)},null,8,["show"]),e(fe,{representante_nome:o(u),representantes:o(M),ato_id:o(p),show:o(n),onClose:i[5]||(i[5]=z=>n.value=!1),onUpdateRepresentante:Te},null,8,["representante_nome","representantes","ato_id","show"]),e(me,{representante_nome:o(u),ato_token:v.ato_token,ato_id:o(p),show:o(m),onClose:i[6]||(i[6]=z=>m.value=!1),onUpdatePapel:Ae},null,8,["representante_nome","ato_token","ato_id","show"]),e(we,{modelValue:o(s),"onUpdate:modelValue":i[8]||(i[8]=z=>ne(s)?s.value=z:null),width:"600"},{default:t(()=>[e(pe,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(Ze,{src:o(q)},null,8,["src"]),e(L,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:i[7]||(i[7]=z=>s.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(A,null,{default:t(()=>[e(Re,{onClick:Me},{default:t(()=>[e(L,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},vt=l("label",null,"Valor",-1),ft={class:"text-end"},gt={class:"text-end"},ht=["onClick"],yt=l("img",{style:{width:"30px",height:"30px"},src:ie,alt:"Visualizar"},null,-1),xt=[yt],kt=["onClick"],bt=l("img",{style:{width:"30px",height:"30px"},src:Ve,alt:"Editar"},null,-1),$t=[bt],Vt=["onClick"],wt={key:0,style:{width:"30px",height:"30px"},src:ce,alt:"Reativar",title:"Reativar"},Pt={key:1,src:de,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},Ct={__name:"Bens",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(N){const _=Y(),c=H(),v=Q();Z();const w=`${v.public.managemant}/updateAtosPessoa`;r(j("user-data").value.cartorio_token);const C=r([]),g=r(null),d=[{title:"Descrição",align:"start",key:"pessoa.descricao"},{title:"Valor",align:"end",key:"pessoa.valor"},{align:"end",value:"actions"}],$=se({papeis:null,nome:null,pessoa:null,documento:null}),y=async()=>{};async function E(b){b.excluido=!b.excluido;try{await P(`${w}/${g.value}`,{method:"PUT",body:JSON.stringify({excluido:b.excluido})},"$TVfAAEMyym")}catch(h){console.error("Erro ao excluir pessoa:",h)}}const D=()=>{const b=c.query.origem||"criar",h=c.query.id;b==="atualizar"?_.push(`/os/atualizar/${h}`):_.push("/os/criar-registro")};return(b,h)=>{const U=Qe,S=ee;return f(),T(re,null,{default:t(()=>[e(R,{class:"mt-5",cols:"12"},{default:t(()=>[e(Xe,{label:"Descrição",modelValue:o($).documento,"onUpdate:modelValue":h[0]||(h[0]=a=>o($).documento=a)},null,8,["modelValue"])]),_:1}),e(A,{class:"ml-1 mb-3"},{default:t(()=>[e(R,{class:"mt-6",cols:"8"},{default:t(()=>[e(le,{label:"Selecione o Tipo",modelValue:o($).pessoa,"onUpdate:modelValue":h[1]||(h[1]=a=>o($).pessoa=a),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue"])]),_:1}),e(R,{class:"ml-5",cols:"3"},{default:t(()=>[vt,e(U,{modelValue:o($).valor,"onUpdate:modelValue":h[2]||(h[2]=a=>o($).valor=a)},null,8,["modelValue"])]),_:1}),l("div",null,[l("img",{class:"mt-7",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:y})])]),_:1}),e(A,null,{default:t(()=>[e(R,null,{default:t(()=>[e(ue,{style:{height:"465px"},headers:d,items:o(C)},{item:t(({item:a})=>[l("tr",null,[l("td",null,te(a.pessoa.descricao),1),l("td",ft,te(a.pessoa.valor),1),l("td",gt,[e(A,{justify:"end"},{default:t(()=>[l("div",{style:{cursor:"pointer"},class:"mr-2",onClick:V=>b.redirectToFicha(a),title:"Visualizar Ficha"},xt,8,ht),l("div",{style:{cursor:"pointer"},class:"mr-2",onClick:V=>b.redirectToPapel(a),title:"Alterar Papel"},$t,8,kt),l("div",{style:{cursor:"pointer"},class:"mr-2",onClick:V=>E(a),title:"Deletar Pessoa"},[a.excluido?(f(),W("img",wt)):(f(),W("img",Pt))],8,Vt)]),_:2},1024)])])]),_:1},8,["items"])]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(S,{onClick:D},{default:t(()=>[e(L,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Et={key:0,class:"loading-overlay"},At="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",Tt={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(N,{emit:_}){const c=N;Be("DocumentEditorContainer",[Ge,Je]);const v=Q(),{$toast:w}=Z(),C=Y(),g=H(),d=_;be(`${v.public.docEditor}`);const $=`${v.public.managemant}/upload`,y=r(null),E=r(!1),D=async()=>{const x=await y.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),s=new FileReader;s.onload=()=>{const m=s.result;d("doc",m)},s.readAsText(x)},b=async()=>{E.value=!0;try{const x=await y.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),s=new FormData;s.append("file",x,"anexo.docx"),s.append("cartorio_token",j("user-data").value.cartorio_token),s.append("token",c.ato_token),s.append("tipo","ato_minuta");const{data:m,status:M}=await P($,{method:"POST",body:s},"$071xxdqs20");if(M.value==="success"){w.success("Documento enviado!");const p=y.value.ej2Instances.documentEditor.pageCount;D(),d("page",p)}else w.error("Erro ao enviar documento para o sistema.")}catch(n){w.error("Erro ao salvar documento."),console.error(n)}finally{E.value=!1}},h=async()=>{a(!0);try{await U(),a(!0);const{data:n,status:x}=await P(substituirModelo,{method:"POST",body:{ato_token:c.ato_token}},"$0ktpWliD4l");n.value&&S(n.value)}catch(n){console.error("Erro ao gerar a minuta:",n),w.error("Ocorreu um erro ao gerar a minuta.")}finally{a(!1)}},U=async()=>{try{const{data:n}=await P(baixarDocumento,{method:"POST",body:{bucket:"qvgjz",path:"provider/modeloAto.sfdt"}},"$jXVvQjEE6u"),x=await fetchBlobFromMinIO(n.value);if(x){const s=new FileReader;s.onload=()=>{const m=s.result;y.value.ej2Instances.documentEditor.open(m),d("doc",m)},s.readAsText(x)}}catch(n){console.error("Erro ao carregar o modelo de minuta:",n),w.error("Falha ao carregar o modelo de minuta.")}},S=n=>{const x=y.value.ej2Instances.documentEditor,s=m=>{for(const[M,u]of Object.entries(m))if(/^<<.+>>$/.test(M))try{x.search.findAll(M),x.search.searchResults.length>0&&x.search.searchResults.replaceAll(u)}catch(p){console.error(`Erro ao substituir o marcador ${M}:`,p)}else if(M==="partes"&&Array.isArray(u)&&u.length>0)for(const p of u)typeof p=="object"&&s(p)};s(n)},a=n=>{E.value=n},V=()=>{const n=g.query.origem||"criar",x=g.query.id;n==="atualizar"?C.push(`/os/atualizar/${x}`):C.push("/os/criar-registro")};return(n,x)=>{const s=ee;return f(),W(he,null,[e(o($e),{height:"900px",ref_key:"documentEditorContainer",ref:y,serviceUrl:At,enableToolbar:!0,enableWordExport:!0},null,512),o(E)?(f(),W("div",Et,[e(Ie,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):F("",!0),e(A,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(s,{class:"mr-4"},{default:t(()=>[e(L,{size:"large",onClick:V,color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1}),e(L,{size:"large",color:"green",onClick:b,disabled:o(E)},{default:t(()=>[O("Salvar")]),_:1},8,["disabled"]),e(L,{class:"ml-4",size:"large",color:"blue",onClick:h},{default:t(()=>[O("Gerar Minuta")]),_:1})]),_:1})],64)}}},St={class:"d-flex align-center justify-center"},qt=["innerHTML"],zt={__name:"Livro",props:{ato_token:{type:String,required:!0},pages:{type:Number,required:!0},document:{type:String,required:!0}},setup(N){const _=N,c=Q();be(`${c.public.docEditor}`);const{$toast:v}=Z(),w=Y(),C=H(),g=`${c.public.managemant}/lavrarAto`,d=r("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),$=r(!1),y=r(null),E=r(null),D=r(null),b=async()=>{try{const{data:a,status:V}=await P(g,{method:"POST",body:{ato_token:_.ato_token,qtd_paginas:_.pages}},"$ZKnVBNYxp9");V.value==="success"?(y.value=a.value,E.value=a.value[0].selo,v.success("Ato lavrado com sucesso!")):v.error("Falha ao lavrar o ato.")}catch{v.error("Erro ao conectar com o servidor.")}},h=()=>{$.value=!1,b()},U=function(){D.value.ej2Instances.documentEditor.open(_.document)},S=()=>{const a=C.query.origem||"criar",V=C.query.id;a==="atualizar"?w.push(`/os/atualizar/${V}`):w.push("/os/criar-registro")};return(a,V)=>{const n=Ye;return f(),W(he,null,[e(A,null,{default:t(()=>[e(R,null,{default:t(()=>[(f(),T(o($e),{restrictEditing:!0,enableToolbar:!1,created:_.document?U:null,ref_key:"documentEditorContainer",ref:D,height:"850px",width:"850px",key:_.document},null,8,["created"]))]),_:1}),e(R,null,{default:t(()=>[l("div",St,[l("div",null,[l("img",{onClick:V[0]||(V[0]=x=>$.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:Ke}),o(y)?(f(),T(pe,{key:0,class:"mr-16"},{default:t(()=>[e(A,{"no-gutters":""},{default:t(()=>[e(R,null,{default:t(()=>[e(ge,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[O(" Livro: "+te(o(y)[0].livro_numero),1)]),_:1})]),_:1}),e(R,null,{default:t(()=>[e(ge,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[O(" Folhas : "+te(o(y)[0].pagina_inicial)+" Á "+te(o(y)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),l("div",{innerHTML:o(E)},null,8,qt)]),_:1})):F("",!0)])])]),_:1})]),_:1}),e(L,{color:"red",size:"large",onClick:S},{default:t(()=>[O("Voltar")]),_:1}),e(n,{show:o($),condMessage:o(d),onClose:V[1]||(V[1]=x=>$.value=!1),onConfirm:h},null,8,["show","condMessage"])],64)}}},Ot=["onClick"],Dt={key:0,style:{width:"30px",height:"30px"},src:ce,alt:"Visualizar",title:"Reativar"},Mt={key:1,src:de,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Rt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(N){let _,c;const v=N,w=Y(),C=H(),g=Q(),{$toast:d}=Z(),$=`${g.public.managemant}/listarEscrevente`,y=`${g.public.managemant}/getAtosTiposByToken`,E=`${g.public.managemant}/createAtosObservacao`,D=`${g.public.managemant}/updateAtosObservacao`,b=r(j("user-data").value.cartorio_token),h=r([]),U=r([]),S=[{title:"Data",align:"start",key:"data"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],a=se({observacao:null}),V={observacao:{required:ye.withMessage("O campo é obrigatorio",xe)}},n=ke(V,a);[_,c]=oe(()=>P(`${y}/${v.ato_token}`,{method:"GET"},"$aJM1TL1buW")),_=await _,c();async function x(){if(await n.value.$validate()){const{data:u,error:p,status:G}=await P(E,{method:"POST",body:{ato_id:v.ato_id,observacao:a.observacao,user_id:j("user-data").value.usuario_id}},"$dMg99jeUNP");G.value==="success"&&(h.value.push({data:et(u.value.created,"dd/mm/yyyy hh:mm"),observacao:u.value.observacao,id:u.value.id,escrevente:j("user-data").value.nome}),d.success("Observação registrada com sucesso"))}else d.error("Preencha os campos obrigatorios.")}async function s(u){u.excluido=!u.excluido;try{await P(`${D}/${u.id}`,{method:"PUT",body:JSON.stringify({excluido:u.excluido})},"$B6PdRx8Gp4")}catch(p){console.error("Erro ao excluir observacao:",p)}}const{data:m}=([_,c]=oe(()=>P($,{method:"POST",body:{cartorio_token:b}},"$xFHPGua26S")),_=await _,c(),_);U.value=m.value[0].func_json_escreventes;const M=()=>{const u=C.query.origem||"criar",p=C.query.id;u==="atualizar"?w.push(`/os/atualizar/${p}`):w.push("/os/criar-registro")};return(u,p)=>{const G=ee;return f(),T(re,null,{default:t(()=>[e(A,{class:"mt-5"},{default:t(()=>[e(X,{label:"Observação",modelValue:o(a).observacao,"onUpdate:modelValue":p[0]||(p[0]=q=>o(a).observacao=q),required:"","error-messages":o(n).observacao.$errors.map(q=>q.$message),onBlur:o(n).observacao.$touch,onInput:o(n).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),l("div",null,[l("img",{class:"btn-pointer ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:x})])]),_:1}),e(A,null,{default:t(()=>[e(R,null,{default:t(()=>[e(ue,{style:{height:"465px"},headers:S,items:o(h)},{"item.actions":t(({item:q})=>[l("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ve=>s(q),title:"Deletar Observação"},[q.excluido?(f(),W("img",Dt)):(f(),W("img",Mt))],8,Ot)]),_:1},8,["items"])]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(G,{onClick:M},{default:t(()=>[e(L,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Bt=l("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:He,alt:"Escanear"},null,-1),It=[Bt],Ut=l("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ae,alt:"Criar"},null,-1),jt=[Ut],Nt=["onClick"],Ft=l("img",{style:{width:"30px",height:"30px"},src:ie,alt:"Visualizar"},null,-1),Lt=[Ft],Wt=["onClick"],Gt={key:0,style:{width:"30px",height:"30px"},src:ce,alt:"Visualizar",title:"Reativar"},Jt={key:1,src:de,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Kt={__name:"Anexos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(N){const _=N,c=Q(),{$toast:v}=Z(),w=Y(),C=H(),g=`${c.public.biometria}/run-scanner`,d=`${c.public.managemant}/atos_anexos`,$=`${c.public.managemant}/atos_anexos`,y=r(!1),E=r([]),D=se({descricao:""}),b=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}];async function h(){try{await U(),await S()}catch(s){console.error("Erro ao executar scanner ou listar arquivos:",s)}}async function U(){try{const{data:s}=await P(g,{method:"GET"},"$WazoKp68Tw")}catch(s){v.error("Erro ao acionar o scanner:",s)}}async function S(){try{const{data:s,status:m}=await P("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:_.ato_token,cartorio_token:j("user-data").value.cartorio_token}},"$03Wxiia3aI")}catch(s){console.error("Erro ao enviar o arquivo:",s)}}const a=async()=>{y.value=!0},V=async()=>{const{data:s,error:m,status:M}=await P(d,{method:"POST",body:{ato_id:_.ato_id,descricao:D.descricao,user_id:j("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$D2PdkmlmwW");M.value==="success"&&(v.success("Anexo registrado com sucesso!"),E.value.push(s.value))};async function n(s){s.excluido=!s.excluido;try{await P(`${$}/${s.id}`,{method:"PUT",body:JSON.stringify({excluido:s.excluido})},"$WyW0hasRPI")}catch(m){console.error("Erro ao excluir pessoa:",m)}}const x=()=>{const s=C.query.origem||"criar",m=C.query.id;s==="atualizar"?w.push(`/os/atualizar/${m}`):w.push("/os/criar-registro")};return(s,m)=>{const M=ee;return f(),T(re,null,{default:t(()=>[e(A,null,{default:t(()=>[e(R,{cols:"5"},{default:t(()=>[e(X,{modelValue:o(D).descricao,"onUpdate:modelValue":m[0]||(m[0]=u=>o(D).descricao=u),label:"Descrição"},null,8,["modelValue"])]),_:1}),l("div",{onClick:h,title:"Escanear"},It),l("div",{onClick:V,title:"Criar"},jt)]),_:1}),e(ue,{headers:b,items:o(E),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:u})=>[e(A,null,{default:t(()=>[l("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:p=>a(u),title:"Visualizar Anexo"},Lt,8,Nt),l("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:p=>n(u),title:"Deletar Pessoa"},[u.excluido?(f(),W("img",Gt)):(f(),W("img",Jt))],8,Wt)]),_:2},1024)]),_:1},8,["items"]),e(we,{modelValue:o(y),"onUpdate:modelValue":m[2]||(m[2]=u=>ne(y)?y.value=u:null),width:"600"},{default:t(()=>[e(pe,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(L,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:m[1]||(m[1]=u=>y.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(M,{onClick:x},{default:t(()=>[e(L,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})}}},go={__name:"procuracao",props:{ato_token:{type:String,required:!0}},setup(N){const _=N,c=r(null),v=r(null),w=r(null),C=r(null),g=r(null),d=r(!1),$=r(_.ato_token),y=({id:b,token:h})=>{c.value=b,v.value=h,d.value=!0},E=b=>{w.value=b},D=b=>{C.value=b};return(b,h)=>{const U=tt,S=_t,a=Ct,V=Tt,n=zt,x=Rt,s=Kt;return f(),T(pe,{width:"1300"},{default:t(()=>[e(je,{modelValue:o(g),"onUpdate:modelValue":h[0]||(h[0]=m=>ne(g)?g.value=m:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(J,{value:"dados"},{default:t(()=>[O("Dados")]),_:1}),o(d)?(f(),T(J,{key:0,value:"partes"},{default:t(()=>[O("Partes")]),_:1})):F("",!0),o(d)?(f(),T(J,{key:1,value:"bens"},{default:t(()=>[O("Bens")]),_:1})):F("",!0),o(d)?(f(),T(J,{key:2,value:"minuta"},{default:t(()=>[O("Minuta")]),_:1})):F("",!0),o(d)?(f(),T(J,{key:3,value:"livro"},{default:t(()=>[O("Livro")]),_:1})):F("",!0),o(d)?(f(),T(J,{key:4,value:"observacao"},{default:t(()=>[O("Observações")]),_:1})):F("",!0),o(d)?(f(),T(J,{key:5,value:"anexo"},{default:t(()=>[O("Anexos")]),_:1})):F("",!0)]),_:1},8,["modelValue"]),e(Ne,{modelValue:o(g),"onUpdate:modelValue":h[1]||(h[1]=m=>ne(g)?g.value=m:null)},{default:t(()=>[e(K,{value:"dados"},{default:t(()=>[e(U,{onSaved:y,ato_token:o($)},null,8,["ato_token"])]),_:1}),o(d)?(f(),T(K,{key:0,value:"partes"},{default:t(()=>[e(S,{ato_token:o($),ato_id:o(c)},null,8,["ato_token","ato_id"])]),_:1})):F("",!0),o(d)?(f(),T(K,{key:1,value:"bens"},{default:t(()=>[e(a,{ato_token:o(v),ato_id:o(c)},null,8,["ato_token","ato_id"])]),_:1})):F("",!0),o(d)?(f(),T(K,{key:2,value:"minuta"},{default:t(()=>[e(V,{onPage:E,onDoc:D,ato_token:o(v)},null,8,["ato_token"])]),_:1})):F("",!0),o(d)?(f(),T(K,{key:3,value:"livro"},{default:t(()=>[e(n,{pages:o(w),ato_token:o(v),document:o(C)},null,8,["pages","ato_token","document"])]),_:1})):F("",!0),o(d)?(f(),T(K,{key:4,value:"observacao"},{default:t(()=>[e(x,{ato_id:o(c)},null,8,["ato_id"])]),_:1})):F("",!0),o(d)?(f(),T(K,{key:5,value:"anexo"},{default:t(()=>[e(s,{ato_token:o(v),ato_id:o(c)},null,8,["ato_token","ato_id"])]),_:1})):F("",!0)]),_:1},8,["modelValue"])]),_:1})}}};export{go as default};
