import{_ as N}from"./DbFvZTU7.js";import{_ as L}from"./Dgs1jmOc.js";import{_ as P,s as R,F,r,E as d,H as U,I as X,o as j,n as H,z as J,w as u,b as o,a as $,u as t,x as K,A as h,d as x}from"./CFcBe-yA.js";import{u as f}from"./CDwlmSQU.js";import{c as Q,r as W,u as D}from"./DqTKjiDo.js";import{V as G}from"./vK6uN0iN.js";import{V as Y}from"./Cx_6yMhL.js";import{V as Z}from"./DwUsCwiJ.js";import{V as ee}from"./BPEHqanc.js";import"./Bf4Xil6f.js";const te={style:{width:"600px","margin-top":"10px"}},ae={style:{width:"180px","margin-top":"20px"}},oe={__name:"autenticacao",props:{ato_token:{type:String,required:!0}},async setup(y){let l,k;const A=y,g=R(),V=F(),_=J(),C=`${_.public.managemant}/listarEscrevente`,p=r(d("user-data").value.cartorio_token).value,B=r(d("user-service").value.token).value||r(d("user-service").value).value,M=d("auth_token").value,z=`${_.public.managemant}/atoAutentica`,I=`${_.public.managemant}/etiquetaAutentica`,v=r(!1),w=r(""),s=U({escrevente:null,quantidade:1}),b=r([]),{data:O}=([l,k]=X(()=>f(C,{method:"POST",body:{cartorio_token:p}},"$nXL9eJBhI7")),l=await l,k(),l);b.value=O.value[0].func_json_escreventes;const S={escrevente:{required:Q.withMessage("O campo é obrigatorio",W)}},m=D(S,s),T=async()=>{if(await m.value.$validate()){const{data:a,status:e,error:i}=await f(z,{method:"POST",body:{usuario_token:M,cartorio_token:p,quantidade:Number(s.quantidade),ordemserv_token:B,ato_tipo_token:A.ato_token}},"$dpfLzAlO85");e.value==="success"&&a.value.status==="OK"?E(a.value.token):(v.value=!0,w.value=a.value.status_mensagem||i.value.data.details)}},E=async a=>{const{data:e,status:i}=await f(I,{method:"POST",body:{escrevente_token:s.escrevente,cartorio_token:p,ato_token:a}},"$fPnSl9XMLA");if(i.value==="success"){q();const c=window.open("","_blank");c.document.open(),c.document.write(e.value.etiqueta),c.document.close()}},q=()=>{const a=V.query.origem||"criar",e=V.query.id;a==="atualizar"?g.push(`/os/atualizar/${e}`):g.push("/os/criar-registro")};return(a,e)=>{const i=N,c=L;return j(),H(ee,{class:"mt-10",title:"Autenticação"},{default:u(()=>[o(Z,null,{default:u(()=>[$("div",te,[o(G,{label:"Tabelião/escrivão",modelValue:t(s).escrevente,"onUpdate:modelValue":e[0]||(e[0]=n=>t(s).escrevente=n),items:t(b),"item-title":"nome","item-value":"token",required:"","error-messages":t(m).escrevente.$errors.map(n=>n.$message),onBlur:t(m).escrevente.$touch,onInput:t(m).escrevente.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),$("div",ae,[o(K,{type:"number",label:"Quantidade",modelValue:t(s).quantidade,"onUpdate:modelValue":e[1]||(e[1]=n=>t(s).quantidade=n)},null,8,["modelValue"])]),o(Y,{class:"mb-3 mt-2"},{default:u(()=>[o(i,{onClick:q},{default:u(()=>[o(h,{class:"ml-4",size:"large",color:"red"},{default:u(()=>[x("Voltar")]),_:1})]),_:1}),o(h,{class:"ml-4",size:"large",color:"green",onClick:T},{default:u(()=>[x("Salvar")]),_:1})]),_:1})]),_:1}),o(c,{show:t(v),errorMessage:t(w),onClose:e[2]||(e[2]=n=>v.value=!1)},null,8,["show","errorMessage"])]),_:1})}}},pe=P(oe,[["__scopeId","data-v-700c88f7"]]);export{pe as default};
