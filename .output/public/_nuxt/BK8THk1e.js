import{_ as z}from"./B26EIqVp.js";import{u as K,E as L,r as u,D as f,F as G,G as M,o as Q,c as W,b as a,w as s,O as I,a as r,x as J,q as n,s as V,J as S,v as X}from"./B4R4xszC.js";import{u as h}from"./BO9KJqfJ.js";import{_ as H}from"./DCsXQasW.js";import{_ as Y}from"./iq-OhJk-.js";import{_ as Z}from"./ToPptOUL.js";import{V as ee,_ as oe}from"./BcwThovZ.js";import{V as k}from"./Ck4hAWg2.js";import{V as i}from"./CU80Sh9z.js";const te=r("h1",null,"Reconhecimento por Semelhança",-1),ae=["onClick"],ne=r("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:Y,alt:"Remover"},null,-1),se=[ne],le=r("img",{class:"btn-pointer mt-10 mb-5",src:Z,alt:"Sair",style:{cursor:"pointer"}},null,-1),he={__name:"semelhanca",async setup(re){let m,g;const b=K(),q=L(),d=J(),C=`${d.public.managemant}/listarEscrevente`,R=`${d.public.managemant}/pesquisarPessoas`,T=`${d.public.managemant}/atoReconhecimento`,E=`${d.public.managemant}/etiquetaReconhecimento`,_=u(f("user-data").value.cartorio_token),x=u(f("user-service").value.token).value||u(f("user-service").value).value,F=f("auth_token").value,y=u([]),p=u([]),c=u([]),$=[{title:"Documento",align:"start",key:"documento"},{title:"Pessoa",align:"start",key:"nome"},{value:"actions"}],l=G({quantidade:1,escrevente:null,nome:null,documento:null}),w=u([]),{data:O}=([m,g]=M(()=>h(C,{method:"POST",body:{cartorio_token:_}},"$iEFsIjdWdW")),m=await m,g(),m);w.value=O.value[0].func_json_escreventes;async function A(){try{const{data:t,error:e}=await h(R,{method:"POST",body:{cartorio_token:_.value,documento:l.documento,nome:l.nome}},"$uzKb8LPV3v");t.value.length>0?y.value=t.value:y.value=[]}catch(t){console.error("Erro na requisição",t)}}function D(t){t.length>0?c.value=t.map(e=>{const[v,o,P]=e.split("-");return{nome:v,documento:o==="null"?null:o,pessoa_token:P}}):console.log("Nenhum item selecionado")}function U(t){c.value=c.value.filter(e=>e.token!==t.token)}async function j(){const t=c.value.map(e=>({pessoa_token:e.pessoa_token}));try{const{data:e,error:v}=await h(T,{method:"POST",body:{pessoas:[t],cartorio_token:_.value,ordemserv_token:x,quantidade:l.quantidade,usuario_token:F,ato_tipo_token:"yXA3K"}},"$MulQmK1LAp");await B()}catch(e){console.error("Erro na requisição",e)}}async function B(){try{const{data:t,error:e}=await h(E,{method:"POST",body:{ato_token:[selectedTokens],cartorio_token:_.value,escrevente_token:x}},"$fMGlIlw995")}catch(t){console.error("Erro na requisição",t)}}const N=()=>{const t=q.query.origem||"criar",e=q.query.id;t==="atualizar"?b.push(`/ordens-servicos/atualizar/${e}`):b.push("/ordens-servicos/criar-registro")};return(t,e)=>{const v=z;return Q(),W(I,null,[te,a(k,{class:"mt-5"},{default:s(()=>[a(i,{cols:"5"},{default:s(()=>[a(ee,{label:"Tabelião/escrevente",modelValue:n(l).escrevente,"onUpdate:modelValue":e[0]||(e[0]=o=>n(l).escrevente=o),items:n(w),"item-title":"nome","item-value":"token"},null,8,["modelValue","items"])]),_:1}),a(i,{cols:"2"},{default:s(()=>[a(V,{label:"Quantidade",type:"number",modelValue:n(l).quantidade,"onUpdate:modelValue":e[1]||(e[1]=o=>n(l).quantidade=o)},null,8,["modelValue"])]),_:1})]),_:1}),a(k,null,{default:s(()=>[a(i,{cols:"3"},{default:s(()=>[a(V,{label:"Documento",modelValue:n(l).documento,"onUpdate:modelValue":e[2]||(e[2]=o=>n(l).documento=o)},null,8,["modelValue"])]),_:1}),a(i,{cols:"4"},{default:s(()=>[a(V,{label:"Pessoa",modelValue:n(l).nome,"onUpdate:modelValue":e[3]||(e[3]=o=>n(l).nome=o)},null,8,["modelValue"])]),_:1}),r("div",null,[r("img",{class:"btn-pointer mt-3",src:H,style:{width:"40px",cursor:"pointer"},onClick:A})])]),_:1}),a(k,null,{default:s(()=>[a(i,{class:"mr-10"},{default:s(()=>[a(S,{style:{height:"465px"},headers:$,items:n(y),"show-select":"",modelValue:n(p),"onUpdate:modelValue":e[4]||(e[4]=o=>X(p)?p.value=o:null),"item-value":o=>`${o.nome}-${o.documento}-${o.token}`,onchange:D(n(p))},null,8,["items","modelValue","item-value","onchange"])]),_:1}),a(i,null,{default:s(()=>[a(S,{headers:$,items:n(c),style:{height:"465px"},"item-key":"id"},{"item.actions":s(({item:o})=>[r("div",{style:{display:"flex","justify-content":"flex-end"},onClick:P=>U(o),title:"Remover"},se,8,ae)]),_:1},8,["items"])]),_:1})]),_:1}),a(k,null,{default:s(()=>[a(v,{onClick:N},{default:s(()=>[le]),_:1}),r("div",null,[r("img",{class:"mt-10 mb-5",onClick:j,style:{cursor:"pointer"},src:oe})])]),_:1})],64)}}};export{he as default};
