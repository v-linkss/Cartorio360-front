import{_ as D}from"./CvnOZqeM.js";import{_ as O,T as E,u as U,W as z,x as L,o as p,c as k,y as l,s as P,t as T,z as x,w as s,F as R,X as W,Y as X,b as a,V as r,Z as $,a as M,p as Y,e as Z}from"./CR0PDRij.js";import{u as j}from"./CF3WpnRY.js";import{V as n,_ as G}from"./yuH6W706.js";import{V as C,_ as H}from"./BpQYpQWa.js";import{c as _,r as f,a as I,u as J}from"./DQQ0Aibs.js";import{V as K}from"./CNzG7Z-h.js";import{V as d}from"./qa8BxYSO.js";const Q=u=>(Y("data-v-73eaeb4d"),u=u(),Z(),u),ee={key:1},ae=Q(()=>M("img",{class:"btn-pointer",src:G,alt:"Sair"},null,-1)),oe={__name:"[id]",emits:["saved"],async setup(u,{emit:N}){let c,y;const q=N,{$toast:w}=E(),S={nome:"",nome_pai:"",nome_mae:"",profissao:"",local_trabalho:"",data_nascimento:"",doc_identificacao:"",cpf_pai:"",cpf_mae:"",local_trabalho:"",tipo_pessoa:"FISICA",tabvalores_estadocivil_id:"",tabvalores_capacidadecivil_id:"",cidade_natural_id:"",cartorio_id:U("user-data").value.cartorio_id,user_id:U("user-data").value.usuario_id},o=z({...S});function V(m){return m.replace(/[.\-]/g,"")}const{data:v,status:te,pending:B,error:h}=([c,y]=L(async()=>j("cliente-dados",async()=>{const[m,t,b]=await Promise.all([$fetch("http://45.55.192.246:3746/listarEstadoCivil"),$fetch("http://45.55.192.246:3746/listarCapacidadeCivil"),$fetch("http://45.55.192.246:3746/listarCidades")]);return{estadoCivilItems:m,capacidadeCivilItems:t,cidadeNascimentoItems:b}})),c=await c,y(),c),F={nome:{required:_.withMessage("O campo é obrigatorio",f)},nome_mae:{required:_.withMessage("O campo é obrigatorio",f)},doc_identificacao:{required:_.withMessage("O campo é obrigatorio",f),cpf:I},cpf_mae:{required:_.withMessage("O campo é obrigatorio",f),cpf:I},cpf_pai:{cpf:I}},i=J(F,o);async function A(){if(await i.value.$validate()){const m={...o,doc_identificacao:V(o.doc_identificacao),cpf_pai:V(o.cpf_pai),cpf_mae:V(o.cpf_mae)};await $fetch("http://45.55.192.246:3746/createPessoa",{method:"POST",body:m}),w.success("Pessoa cadastrada com sucesso!"),q("saved"),console.log(m)}else w.error("Erro ao cadastrar pessoa")}return(m,t)=>{const b=D,g=W("mask");return p(),k(R,null,[l(B)?(p(),P(X,{key:0,class:"loading-spinner",indeterminate:"",size:"64"})):l(h)?(p(),k("div",ee,T(l(h).message),1)):x("",!0),l(B)?x("",!0):(p(),P(K,{key:2,class:"mt-5"},{default:s(()=>[a(n,null,{default:s(()=>[a(d,{cols:"12",md:"8"},{default:s(()=>[a(r,{modelValue:o.nome,"onUpdate:modelValue":t[0]||(t[0]=e=>o.nome=e),"error-messages":l(i).nome.$errors.map(e=>e.$message),label:"Nome",required:"",onBlur:l(i).nome.$touch,onInput:l(i).nome.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[$(a(r,{modelValue:o.doc_identificacao,"onUpdate:modelValue":t[1]||(t[1]=e=>o.doc_identificacao=e),"error-messages":l(i).doc_identificacao.$errors.map(e=>e.$message),label:"CPF",required:"",onBlur:l(i).doc_identificacao.$touch,onInput:l(i).doc_identificacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),[[g,"###.###.###-##"]])]),_:1})]),_:1}),a(n,null,{default:s(()=>[a(d,{cols:"12",md:"4"},{default:s(()=>[a(C,{modelValue:o.tabvalores_estadocivil_id,"onUpdate:modelValue":t[2]||(t[2]=e=>o.tabvalores_estadocivil_id=e),items:l(v).estadoCivilItems,"item-title":"descricao","item-value":"id",label:"Estado Civil"},null,8,["modelValue","items"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(r,{modelValue:o.profissao,"onUpdate:modelValue":t[3]||(t[3]=e=>o.profissao=e),label:"Profissão"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(r,{modelValue:o.local_trabalho,"onUpdate:modelValue":t[4]||(t[4]=e=>o.local_trabalho=e),label:"Local de trabalho"},null,8,["modelValue"])]),_:1})]),_:1}),a(n,null,{default:s(()=>[a(d,{cols:"12",md:"4"},{default:s(()=>[a(r,{modelValue:o.data_nascimento,"onUpdate:modelValue":t[5]||(t[5]=e=>o.data_nascimento=e),type:"date","prepend-icon":"",label:"Data de nascimento"},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(C,{modelValue:o.tabvalores_capacidadecivil_id,"onUpdate:modelValue":t[6]||(t[6]=e=>o.tabvalores_capacidadecivil_id=e),items:l(v).capacidadeCivilItems,label:"Capacidade Civil","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(C,{modelValue:o.cidade_natural_id,"onUpdate:modelValue":t[7]||(t[7]=e=>o.cidade_natural_id=e),items:l(v).cidadeNascimentoItems,label:"Cidade de nascimento","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),a(n,null,{default:s(()=>[a(d,{cols:"12",md:"4"},{default:s(()=>[$(a(r,{modelValue:o.cpf_pai,"onUpdate:modelValue":t[8]||(t[8]=e=>o.cpf_pai=e),modelModifiers:{date:!0},"error-messages":l(i).cpf_pai.$errors.map(e=>e.$message),label:"CPF do Pai",onBlur:l(i).cpf_pai.$touch,onInput:l(i).cpf_pai.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),[[g,"###.###.###-##"]])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(r,{modelValue:o.nome_pai,"onUpdate:modelValue":t[9]||(t[9]=e=>o.nome_pai=e),modelModifiers:{date:!0},label:"Nome do Pai"},null,8,["modelValue"])]),_:1})]),_:1}),a(n,null,{default:s(()=>[a(d,{cols:"12",md:"4"},{default:s(()=>[$(a(r,{modelValue:o.cpf_mae,"onUpdate:modelValue":t[10]||(t[10]=e=>o.cpf_mae=e),modelModifiers:{date:!0},"error-messages":l(i).cpf_mae.$errors.map(e=>e.$message),label:"CPF da Mãe",required:"",onBlur:l(i).cpf_mae.$touch,onInput:l(i).cpf_mae.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),[[g,"###.###.###-##"]])]),_:1}),a(d,{cols:"12",md:"4"},{default:s(()=>[a(r,{modelValue:o.nome_mae,"onUpdate:modelValue":t[11]||(t[11]=e=>o.nome_mae=e),modelModifiers:{date:!0},"error-messages":l(i).nome_mae.$errors.map(e=>e.$message),label:"Nome da Mãe",required:"",onBlur:l(i).nome_mae.$touch,onInput:l(i).nome_mae.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])]),_:1})]),_:1}),a(n,null,{default:s(()=>[a(b,{to:"/home"},{default:s(()=>[ae]),_:1}),M("img",{class:"btn-pointer",src:H,onClick:A})]),_:1})]),_:1}))],64)}}},ce=O(oe,[["__scopeId","data-v-73eaeb4d"]]);export{ce as default};
