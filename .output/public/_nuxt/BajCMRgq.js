import{_ as J}from"./BT3sNj45.js";import{_ as W,a as ee}from"./qAtG4sex.js";import{_ as te}from"./C2Juiv9A.js";import{_ as oe}from"./BVz1G1IN.js";import{_ as ae,a as se,b as re}from"./BMS07yy5.js";import{c as I,r as B,u as ne}from"./BkJZRBqp.js";import{u as le,G as ie,B as ue,r as u,m as g,C as de,H as T,Q as pe,E as b,w as n,s as me,o as c,b as r,a as l,t as ce,v as o,R as _e,V as R,x as fe,y as ve,c as U,z as ge,d as ke}from"./DLFNPi_I.js";import{u as w}from"./DOTqtJns.js";import{V as Ve}from"./CL0WRCeX.js";import{V as k}from"./xUlKcTfz.js";import{V}from"./DLEJazeN.js";import{V as he}from"./BmyF1_5B.js";import{V as ye}from"./z6qNG8zy.js";import"./CwO9VsyT.js";import"./D4oPAEaM.js";import"./BW32ypVB.js";import"./BThp29o4.js";import"./KwXMyUwN.js";const $e={style:{color:"red","margin-left":"30px"}},xe=["onClick"],be=["onClick","title"],Re=["disabled","onClick"],we={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:se,alt:"Visualizar",title:"Reativar"},Ce={key:1,src:re,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},Qe={__name:"[id]",async setup(Oe){let i,_;const{$toast:C}=le(),z=ie(),{id:p}=z.params,h=ue(),y=me(),S=`${y.public.managemant}/updateOrdensServico`,N=`${y.public.managemant}/getOrdensServicoById`,P=`${y.public.managemant}/listarAtos`,q=u(g("user-data").value.cartorio_id),D=u(g("user-data").value.usuario_id),F=u(g("user-service").value.token).value||null,G=u(g("user-data").value.cartorio_token).value,$=u([]),x=u(!1),O=u(null),m=u(null),s=de({nacionalidade:"brasileiro",apresentante_nome:null,apresentante_cpf:null,documento:null}),L=[{title:"ID",value:"id"},{title:"Protocolo",value:"protocolo"},{title:"Usuario",value:"usuario_nome"},{title:"Situação",value:"situacao"},{title:"Valor",value:"valor"},{title:"Tipo",value:"tipo"},{value:"actions"}],M=[{title:"BRASILEIRO",value:!1},{title:"ESTRANGEIRO",value:!0}],H={apresentante_nome:{required:I.withMessage("O campo é obrigatorio",B)},apresentante_cpf:{required:I.withMessage("O campo é obrigatorio",B)}},d=ne(H,s);function K(a){if(a)return a.replace(/[.\-]/g,"");a=null}const Q=a=>{O.value=a,x.value=!0},X=a=>{a.tipo==="PROCURAÇÃO GERAL"?h.push({path:`/fontes/atos/atos-sem-bem/atualizar/${a.id}`,query:{origem:"atualizar",id:p,ato_id:a.id,tipo_ato_token:a.tipo_token,ato_token_edit:a.token,numero_os:m.value}}):a.tipo==="INVENTÁRIO E PARTILHA"&&h.push({path:`/fontes/atos/atos-com-bem/atualizar/${a.id}`,query:{origem:"atualizar",id:p,ato_id:a.id,tipo_ato_token:a.tipo_token,ato_token_edit:a.token,numero_os:m.value}})};async function Y(){const a={apresentante_cpf:K(s.apresentante_cpf),apresentante_nome:s.apresentante_nome,user_id:D.value,cartorio_id:q.value},{error:t,status:v}=await w(`${S}/${p}`,{method:"PUT",body:a},"$Fud06ay483");v.value==="error"&&t.value.statusCode===500?C.error("Erro ao cadastrar ordem,erro no sistema."):(C.success("Ordem Atualizada com sucesso!"),h.push({path:"/os/lista"}))}const{data:f}=([i,_]=T(()=>w(`${N}/${p}`,{method:"GET"},"$wPUkUpDvPf")),i=await i,_(),i);m.value=f.value.numero,s.nacionalidade=f.value.estrangeiro,s.apresentante_cpf=f.value.apresentante_cpf,s.apresentante_nome=f.value.apresentante_nome;const{data:E}=([i,_]=T(()=>w(P,{method:"POST",body:{cartorio_token:G,ordemserv_token:F}},"$YXZ55K3IUf")),i=await i,_(),i);return E.value.length>0?$.value=E.value:$.value=[],(a,t)=>{const v=J,Z=ee,j=pe("mask");return c(),b(Ve,{class:"mt-5"},{default:n(()=>[r(k,{class:"mb-5"},{default:n(()=>[t[6]||(t[6]=l("h1",null,"Ordem de Serviço nº",-1)),l("h1",$e,ce(o(m)),1)]),_:1}),r(k,null,{default:n(()=>[r(V,{md:"3"},{default:n(()=>[r(he,{label:"Nacionalidade",items:M,modelValue:o(s).nacionalidade,"onUpdate:modelValue":t[0]||(t[0]=e=>o(s).nacionalidade=e)},null,8,["modelValue"])]),_:1}),r(V,{md:"2"},{default:n(()=>[o(s).nacionalidade==="brasileiro"?_e((c(),b(R,{key:0,autofocus:"",modelValue:o(s).apresentante_cpf,"onUpdate:modelValue":t[1]||(t[1]=e=>o(s).apresentante_cpf=e),label:"CPF",required:"","error-messages":o(d).apresentante_cpf.$errors.map(e=>e.$message),onBlur:o(d).apresentante_cpf.$touch,onInput:o(d).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur","onInput"])),[[j,"###.###.###-##"]]):(c(),b(R,{key:1,autofocus:"",modelValue:o(s).apresentante_cpf,"onUpdate:modelValue":t[2]||(t[2]=e=>o(s).apresentante_cpf=e),label:"Documento",required:"","error-messages":o(d).apresentante_cpf.$errors.map(e=>e.$message),onBlur:o(d).apresentante_cpf.$touch},null,8,["modelValue","error-messages","onBlur"]))]),_:1}),r(V,{md:"4"},{default:n(()=>[r(R,{modelValue:o(s).apresentante_nome,"onUpdate:modelValue":t[3]||(t[3]=e=>o(s).apresentante_nome=e),label:"Nome Apresentante",required:"","error-messages":o(d).apresentante_nome.$errors.map(e=>e.$message),onInput:o(d).apresentante_nome.$touch},null,8,["modelValue","error-messages","onInput"])]),_:1}),r(V,null,{default:n(()=>[l("div",null,[l("img",{style:{width:"40px",height:"40px",cursor:"pointer"},src:te,alt:"Salvar",onClick:t[4]||(t[4]=e=>Y())})])]),_:1})]),_:1}),r(k,{style:{display:"flex","margin-bottom":"10px",gap:"2rem"}},{default:n(()=>[t[9]||(t[9]=l("h1",{class:"ml-5"},"Atos",-1)),r(v,{to:{path:"/os/criar-ato",query:{origem:"atualizar",id:o(p),numeroOs:o(m)}}},{default:n(()=>t[7]||(t[7]=[l("img",{style:{width:"45px",height:"45px",cursor:"pointer"},src:oe,alt:"novo"},null,-1)])),_:1},8,["to"]),r(ye,{headers:L,items:o($),"item-key":"id"},{"item.actions":n(({item:e})=>[r(k,{style:{display:"flex",gap:"10px","margin-top":"-5px"}},{default:n(()=>[l("div",{onClick:A=>Q(e.token),title:"Reimprimir"},t[8]||(t[8]=[l("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:W,alt:"Reimprimir"},null,-1)]),8,xe),l("div",{class:ve({disabled:!e.btn_editar}),onClick:A=>e.btn_editar?X({id:e.id,tipo:e.tipo,token:e.token,tipo_token:e.tipo_token}):null,title:e.btn_editar?"Editar":"Desabilitado"},[l("img",{style:fe({cursor:e.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:ae,alt:"Editar"},null,4)],10,be),l("div",{disabled:!e.btn_cancelar,onClick:A=>e.btn_cancelar?a.deleteEndereco(e):null,title:"Excluir"},[e.excluido?(c(),U("img",we)):(c(),U("img",Ce))],8,Re)]),_:2},1024)]),_:1},8,["items"]),r(Z,{show:o(x),ato_token:o(O),onClose:t[5]||(t[5]=e=>x.value=!1)},null,8,["show","ato_token"])]),_:1}),r(v,{to:"/os/lista"},{default:n(()=>[r(ge,{size:"large",color:"red"},{default:n(()=>t[10]||(t[10]=[ke("Voltar")])),_:1})]),_:1})]),_:1})}}};export{Qe as default};
