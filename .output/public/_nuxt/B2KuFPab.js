import{_ as lo}from"./DBenXD62.js";import{_ as so,a as no}from"./Barkxg4c.js";import{_ as io}from"./BScbKmca.js";import{_ as ro}from"./DEE4wsj7.js";import{_ as M}from"./Vu017YYU.js";import{_ as uo}from"./DNuG4GZK.js";import{_ as mo,a as po}from"./DJvq3mCv.js";import{_ as _o,u as co,m as vo,r,n as S,p as fo,q as yo,s as Vo,v as ko,c as D,b as s,w as n,a as d,x as l,y as bo,z as go,F as Ao,A as xo,o as k,B as f,V as m,C as $o,D as ho}from"./CZ7-18UE.js";import{u as b}from"./43DIqOTu.js";import{f as g}from"./B0IxRygJ.js";import{f as wo}from"./ByfL4yvn.js";import{V as Co}from"./CnjcOA3J.js";import{V as So}from"./WQ6iG51X.js";import{V as U}from"./CTrdSjEh.js";import{V as u}from"./_ocnesnf.js";import{V as O}from"./BefhvARx.js";import"./DioM5gZU.js";import"./H9VDAlL2.js";import"./DxhvVoly.js";import"./CXEUGg8D.js";import"./BOxUVA13.js";import"./CEu-S5kl.js";import"./BVz1G1IN.js";import"./Rb54_Vem.js";import"./CxE8XxsP.js";import"./O1UeEB9v.js";const Do={style:{width:"175vh","margin-left":"100px","overflow-x":"auto"}},Uo={style:{display:"flex",gap:"4px","justify-content":"center"}},Oo=["onClick"],To=["onClick"],No=["onClick","title"],Eo=["disabled","onClick"],Po={key:0,style:{width:"30px",height:"30px",cursor:"pointer"},src:mo,alt:"Visualizar",title:"Reativar"},qo={key:1,src:po,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px",cursor:"pointer"},title:"Excluir"},zo={__name:"index",setup(Ro){const y=xo(),{$toast:B}=co(),L=`${y.public.managemant}/listarUsuarios`,j=`${y.public.managemant}/tipoAtos`,J=`${y.public.managemant}/updateAtos`,T=`${y.public.managemant}/pesquisaAtos`,N=vo(),A=r(S("auth_token").value)||null,x=r(S("user-data").value.cartorio_token)||null,$=r(!1),V=r([]),E=r([]),P=r([]),Y=r(["PENDENTE","EM ANDAMENTO","CONCLUÍDA","LAVRADA"]),q=r(!1),z=r(!1);r(null);const H=r(null),R=r(null),Q=r({}),h=r(!1),I=r(null),a=fo({numero:null,data_inicio:w(),data_fim:w(),data_lavratura_inicio:null,data_lavratura_fim:null,protocolo:null,livro:null,folha:null,situacao:null,usuario_token:A.value,selo:null,ato_tipo_token:null,apresentante_cpf:null,apresentante_nome:null,valor:null}),W=[{title:"ID",value:"id"},{title:"Data Abertura",value:"dt_abertura"},{title:"Data lavratura",value:"dt_lavratura"},{title:"N° OS",value:"numero_os"},{title:"Protocolo",value:"protocolo"},{title:"Apresentante",value:"apresentante_nome"},{title:"CPF",value:"apresentante_cpf"},{title:"Tipo Serviço",value:"ato_servico"},{title:"Usuario",value:"usuario_nome"},{title:"Situação",value:"situacao"},{title:"Livro",value:"livro_numero"},{title:"Folha",value:"folha"},{title:"Valor",value:"valor"},{title:"Ações",value:"actions"}];function w(){const t=new Date,o=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0");return`${String(t.getDate()).padStart(2,"0")}-${i}-${o}`}function _(t){if(!t)return null;const[o,i,p]=t.split("/");return`${p}-${i}-${o}`}async function F(){const t=w(),o=sessionStorage.getItem("pesquisaAto"),i=JSON.parse(o),{data:p}=await b(T,{method:"POST",body:{cartorio_token:S("user-data").value.cartorio_token,usuario_token:i.usuario_token||A.value,data_fim:_(i==null?void 0:i.data_fim)||t,data_inicio:_(i==null?void 0:i.data_inicio)||t}},"$1U9Iv6Es1X");p.value.length>0&&(V.value=p.value.map(c=>({...c,dt_lavratura:g(c.dt_lavratura,"dd/mm/yyyy"),dt_abertura:g(c.dt_abertura,"dd/mm/yyyy")})))}async function X(){const{data:t}=await b(L,{method:"POST",body:{cartorio_token:x.value}},"$hvipqUJYtS");E.value=t.value}async function Z(){try{sessionStorage.setItem("pesquisaAto",JSON.stringify(a));const{data:t,error:o}=await b(T,{method:"POST",body:{cartorio_token:x.value,numero:a.numero||null,data_inicio:_(a.data_inicio)||null,data_fim:_(a.data_fim)||null,data_lavratura_inicio:_(a.data_lavratura_inicio)||null,data_lavratura_fim:_(a.data_lavratura_fim)||null,protocolo:a.protocolo||null,livro:a.livro||null,folha:a.folha||null,situacao:a.situacao||null,usuario_token:a.usuario_token,selo:a.selo||null,ato_tipo_token:a.ato_tipo_token,apresentante:a.apresentante_nome||null}},"$OjamgBH6nj");t.value.length>0?V.value=t.value.map(i=>({...i,dt_lavratura:i.data?g(i.dt_lavratura,"dd/mm/yyyy"):null,dt_abertura:i.dt_abertura?g(i.dt_abertura,"dd/mm/yyyy"):null})):(V.value=[],B.error("Não existe ato Registrado!"))}catch(t){console.error("Erro na requisição",t)}}const G=t=>{N.push({path:`/fontes/atos/atos-com-bem/atualizar/${t.id}`,query:{origem:"vizualizar-lista",id:t.id,ato_id:t.id,tipo_ato_token:t.tipo_token,tipo_ato:t.ato_servico,ato_token_edit:t.token,numero_os:t.numero_os,usa_imoveis:!0}})};async function K(){const{data:t,error:o}=await b(j,{method:"POST",body:{cartorio_token:x.value,usuario_token:A.value}},"$QxIfw0Zxe4");P.value=t.value}const oo=t=>{I.value=t,h.value=!0};async function to(t){t.excluido=!t.excluido;try{await wo(`${J}/${t.id}`,{method:"PUT",body:{excluido:t.excluido}})}catch(o){console.error("Erro ao excluir pessoa:",o)}}const eo=t=>{(t.usa_imoveis||!t.usa_imoveis)&&N.push({path:`/fontes/atos/atos-com-bem/atualizar/${t.id}`,query:{origem:"atualizar-lista",id:t.id,ato_id:t.id,tipo_ato_token:t.tipo_token,tipo_ato:t.tipo,ato_token_edit:t.token,numero_os:t.numero_os,usa_imoveis:!0}})};return yo(()=>{Vo(async()=>{const t=sessionStorage.getItem("pesquisaAto");if(t){const o=JSON.parse(t);Object.assign(a,o)}await F()})}),X(),K(),(t,o)=>{const i=lo,p=so,c=io,ao=ro,v=ko("mask");return k(),D(Ao,null,[s(Co,{class:"mt-5"},{default:n(()=>[s(U,{class:"mb-5"},{default:n(()=>o[19]||(o[19]=[d("h1",null,"Atos",-1)])),_:1}),s(U,null,{default:n(()=>[s(u,{cols:"2"},{default:n(()=>[f(s(m,{modelValue:l(a).data_inicio,"onUpdate:modelValue":o[0]||(o[0]=e=>l(a).data_inicio=e),label:"Abertura de",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[v,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:n(()=>[f(s(m,{modelValue:l(a).data_fim,"onUpdate:modelValue":o[1]||(o[1]=e=>l(a).data_fim=e),label:"Abertura até",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[v,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:n(()=>[f(s(m,{modelValue:l(a).data_lavratura_inicio,"onUpdate:modelValue":o[2]||(o[2]=e=>l(a).data_lavratura_inicio=e),label:"Lavratura de",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[v,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:n(()=>[f(s(m,{modelValue:l(a).data_lavratura_fim,"onUpdate:modelValue":o[3]||(o[3]=e=>l(a).data_lavratura_fim=e),label:"Lavratura até",placeholder:"dd/mm/yyyy",dense:""},null,8,["modelValue"]),[[v,"##/##/####"]])]),_:1}),s(u,{cols:"2"},{default:n(()=>[f(s(m,{modelValue:l(a).apresentante_cpf,"onUpdate:modelValue":o[4]||(o[4]=e=>l(a).apresentante_cpf=e),label:"CPF",dense:""},null,8,["modelValue"]),[[v,"###.###.###-##"]])]),_:1}),s(u,{cols:"2"},{default:n(()=>[s(m,{modelValue:l(a).selo,"onUpdate:modelValue":o[5]||(o[5]=e=>l(a).selo=e),label:"Selo",dense:""},null,8,["modelValue"])]),_:1})]),_:1}),s(U,null,{default:n(()=>[s(u,{cols:"2"},{default:n(()=>[s(m,{modelValue:l(a).numero,"onUpdate:modelValue":o[6]||(o[6]=e=>l(a).numero=e),label:"N° OS"},null,8,["modelValue"])]),_:1}),s(u,{cols:"2"},{default:n(()=>[s(m,{modelValue:l(a).protocolo,"onUpdate:modelValue":o[7]||(o[7]=e=>l(a).protocolo=e),label:"Protocolo"},null,8,["modelValue"])]),_:1}),s(u,{cols:"3"},{default:n(()=>[s(m,{modelValue:l(a).apresentante,"onUpdate:modelValue":o[8]||(o[8]=e=>l(a).apresentante=e),label:"Apresentante",dense:""},null,8,["modelValue"])]),_:1}),s(u,{cols:"3"},{default:n(()=>[s(O,{modelValue:l(a).ato_tipo_token,"onUpdate:modelValue":o[9]||(o[9]=e=>l(a).ato_tipo_token=e),items:l(P),"item-title":"descricao","item-value":"token",label:"Tipo Serviço",dense:""},null,8,["modelValue","items"])]),_:1}),s(u,{cols:"2"},{default:n(()=>[s(O,{items:l(E),modelValue:l(a).usuario_token,"onUpdate:modelValue":o[10]||(o[10]=e=>l(a).usuario_token=e),"item-title":"user_nome","item-value":"user_token",label:"Usuário",dense:""},null,8,["items","modelValue"])]),_:1}),s(u,{cols:"3"},{default:n(()=>[s(O,{modelValue:l(a).situacao,"onUpdate:modelValue":o[11]||(o[11]=e=>l(a).situacao=e),items:l(Y),label:"Situação",dense:""},null,8,["modelValue","items"])]),_:1}),s(u,{cols:"1"},{default:n(()=>[s(m,{modelValue:l(a).livro,"onUpdate:modelValue":o[12]||(o[12]=e=>l(a).livro=e),label:"Livro",dense:""},null,8,["modelValue"])]),_:1}),s(u,{cols:"1"},{default:n(()=>[s(m,{modelValue:l(a).folha,"onUpdate:modelValue":o[13]||(o[13]=e=>l(a).folha=e),label:"Folha",dense:""},null,8,["modelValue"])]),_:1}),s(u,null,{default:n(()=>[d("div",null,[d("img",{onClick:Z,style:{width:"40px",height:"40px",cursor:"pointer"},src:M,alt:"Pesquisar"})])]),_:1})]),_:1})]),_:1}),d("div",Do,[o[22]||(o[22]=d("hr",{class:"mt-5 mb-5"},null,-1)),s(So,{headers:W,items:l(V),style:{"font-size":"12px"},"item-key":"id"},{"item.actions":n(({item:e})=>[d("div",Uo,[d("div",{onClick:C=>G(e),title:"Visualizar"},o[20]||(o[20]=[d("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:M,alt:"Visualizar"},null,-1)]),8,Oo),d("div",{onClick:C=>oo(e.token),title:"Reimprimir"},o[21]||(o[21]=[d("img",{style:{width:"30px",height:"30px",cursor:"pointer"},src:no,alt:"Reimprimir"},null,-1)]),8,To),d("div",{class:$o({disabled:!e.btn_editar}),onClick:C=>e.btn_editar?eo({id:e.id,tipo:e.tipo,token:e.token,tipo_token:e.tipo_token,usa_imoveis:e.usa_imoveis}):null,title:e.btn_editar?"Editar":"Desabilitado"},[d("img",{style:ho({cursor:e.btn_editar?"pointer":"default",width:"30px",height:"30px"}),src:uo,alt:"Editar"},null,4)],10,No),d("div",{disabled:!e.btn_cancelar,onClick:C=>e.btn_cancelar?to(e):null,title:"Excluir"},[e.excluido?(k(),D("img",Po)):(k(),D("img",qo))],8,Eo)])]),_:1},8,["items"])]),l($)?(k(),bo(i,{key:0,show:l($),servicos:t.dadosData.servicos||[],tiposAtos:t.dadosData.tiposAtos||[],onClose:o[14]||(o[14]=e=>$.value=!1),onUpdateAto:t.handleUpdateAto},null,8,["show","servicos","tiposAtos","onUpdateAto"])):go("",!0),s(p,{show:l(h),ato_token:l(I),onClose:o[15]||(o[15]=e=>h.value=!1)},null,8,["show","ato_token"]),s(c,{show:l(q),numero_os:l(R),ordem:l(Q),onClose:o[16]||(o[16]=e=>q.value=!1),onRefreshValue:o[17]||(o[17]=e=>F())},null,8,["show","numero_os","ordem"]),s(ao,{show:l(z),numero_os:l(R),ordemserv_token:l(H),onClose:o[18]||(o[18]=e=>z.value=!1)},null,8,["show","numero_os","ordemserv_token"])],64)}}},mt=_o(zo,[["__scopeId","data-v-6ef1717f"]]);export{mt as default};
