import{_ as ae}from"./5U5WrFi4.js";import{u as ee,n as te,q as W,r as n,s as le,o as I,v as oe,w as t,b as e,x as a,V as Q,y as B,d as O,z as X,A as L,B as K,a as u,C as _e,c as N,D as re,E as Ie,F as Me,G as Ue,H as Re,I as xe,J as ve,K as he,t as me}from"./ROS-x8Zp.js";import{u as x}from"./DSY8y1MM.js";import{V as D}from"./DiYZvNkl.js";import{V as M}from"./M4sTZm_F.js";import{V as pe}from"./C_S6r_8L.js";import{V as ie}from"./VSU0usK_.js";import{_ as Fe}from"./BEy0akw6.js";import{_ as Be,a as Ne,b as Le,T as Ge,W as He,r as $e,D as ke,c as Je,d as Ke,e as We}from"./L7oGc7KI.js";import{_ as fe}from"./d8YYmnXu.js";import{_ as ne,a as ge,b as ye,c as Xe}from"./CAvNGR-6.js";import{V as we,a as ce}from"./BCrwAZvD.js";import{_ as be}from"./DfjuBLsA.js";import{c as Ze,r as Ye,u as Qe}from"./d7piQVwc.js";import{V as et,a as Z,b as tt,c as Y}from"./DdN_yzws.js";import"./DzFlAUs1.js";import"./D6jOMXNY.js";const at={__name:"Dados",props:{item_dados:{type:Array,required:!0},item_situacoes:{type:Array,required:!0}},setup(G){const o=G,{$toast:y}=ee(),v=X(),p=te(),r=W(),h=`${v.public.managemant}/updateAtos`,z=n(o.item_situacoes),w=le({dt_abertura:o.item_dados[0].dt_abertura||null,status:o.item_dados[0].status||null,mne:o.item_dados[0].mne||null});async function E(){const{data:$,error:i,status:V}=await x(`${h}/${r.query.id}`,{method:"PUT",body:{status:w.status,mne:w.mne}},"$EIT5jtTUdX");V.value==="success"&&y.success("Situação Atualizada com sucesso")}const T=()=>{const $=r.query.origem||"criar",i=r.query.id;$==="atualizar"?p.push(`/os/atualizar/${i}`):p.push("/os/criar-registro")};return($,i)=>{const V=ae;return I(),oe(ie,null,{default:t(()=>[e(D,{class:"mt-5"},{default:t(()=>[e(M,{cols:"3"},{default:t(()=>[e(pe,{label:"Situação",modelValue:a(w).status,"onUpdate:modelValue":i[0]||(i[0]=k=>a(w).status=k),items:a(z),"item-title":"descricao","item-value":"descricao",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(M,{cols:"5"},{default:t(()=>[e(Q,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:a(w).mne,"onUpdate:modelValue":i[1]||(i[1]=k=>a(w).mne=k)},null,8,["modelValue"])]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(M,{cols:"2"},{default:t(()=>[e(Q,{modelValue:a(w).dt_abertura,"onUpdate:modelValue":i[2]||(i[2]=k=>a(w).dt_abertura=k),type:"date",label:"Data Lavratura",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(D,{class:"mb-3"},{default:t(()=>[e(V,{onClick:T},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1}),e(B,{class:"ml-10",onClick:E,size:"large",color:"green"},{default:t(()=>[O("Salvar")]),_:1})]),_:1})]),_:1})}}},ot=["onClick"],st=u("img",{style:{width:"30px",height:"30px"},src:fe,alt:"Visualizar"},null,-1),rt=[st],nt=["onClick"],lt=u("img",{style:{width:"30px",height:"30px"},src:Xe,alt:"Visualizar"},null,-1),it=[lt],ct=["onClick"],ut={key:0,style:{width:"30px",height:"30px"},src:ge,alt:"Visualizar",title:"Reativar"},dt={key:1,src:ye,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},mt=["onClick"],pt=u("img",{style:{width:"30px",height:"30px"},src:Le,alt:"Visualizar"},null,-1),_t=[pt],vt={__name:"Partes",async setup(G){let o,y;const v=te(),p=W(),r=X(),{$toast:h}=ee(),z=`${r.public.managemant}/pesquisarPessoas`,w=`${r.public.managemant}/listarPapeis`,E=`${r.public.managemant}/getLinkTipo`,T=`${r.public.managemant}/createAtosPessoa`,$=`${r.public.managemant}/updateAtosPessoa`,i=`${r.public.managemant}/getAtosPessoaById`,V=n(L("user-data").value.cartorio_token),k=n([]),C=n([]),b=n([]),d=n(!1),f=n(!1),c=n(!1),m=n(!1),S=n(null),j=n(null),s=n(null),g=n(null),U=n(null),P=n("xkyaA"),R=n(null),Ve=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],q=le({papeis:null,nome:null,pessoa:null,documento:null}),{data:Ce}=([o,y]=K(()=>x(w,{method:"POST",body:{tipo_ato_token:"xkyaA"}},"$acoiTIUp00")),o=await o,y(),o);b.value=Ce.value;const ue=async()=>{const{data:_}=await x(`${i}/${p.query.ato_id}`,{method:"GET"},"$ypnU9hCpVn"),F=(se=>se.map(H=>({...H,pessoa:{...H.pessoa,documento:H.pessoa.doc_identificacao},papel:{...H.partes_tipos}})))(_.value);C.value=F};ue();async function Pe(){try{const{data:_,error:l}=await x(z,{method:"POST",body:{cartorio_token:V.value,documento:q.documento,nome:q.nome}},"$pr30MyPXfY");_.value.length>0?(k.value=_.value,q.pessoa=k.value[0]):k.value=[]}catch(_){console.error("Erro na requisição",_)}}const Ae=()=>{f.value=!0},Ee=async()=>{await ue()},Te=async()=>{await ue()},qe=async()=>{const _={pessoa:q.pessoa,papel:b.value.find(J=>J.id===q.papeis),representante:{nome:null}},l=await x(`${i}/${p.query.ato_id}`,{method:"GET"},"$scHdIvxj2D");for(const J of l.data.value)if(J.pessoa_id===q.pessoa.id&&J.ato_id===Number(p.query.ato_id)&&J.tipo_parte_id===q.papeis){h.error("Pessoa Já Registrada Com Esse Papel!");return}const{data:F,error:se,status:H}=await x(T,{method:"POST",body:{ato_id:p.query.ato_id,pessoa_id:q.pessoa.id,tipo_parte_id:q.papeis,user_id:L("user-data").value.usuario_id}},"$18isAgOJxG");H.value==="success"&&(_.id=F.value.id,h.success("Pessoa Registrada com Sucesso!"),C.value.push(_))},ze=async _=>{c.value=!0,R.value=null;const{data:l}=await x(`${E}`,{method:"POST",body:{id:_.pessoa.id,tipo:"ficha"}},"$hmDzSF3F61");l.value&&l.value.link?R.value=`data:image/jpeg;base64,${l.value.link}`:R.value=null},Oe=_=>{const l=C.value.filter(F=>F.pessoa.id!==_.pessoa.id).map(F=>({id:F.pessoa.id,nome:F.pessoa.nome}));s.value=_.id,S.value=l,d.value=!0,j.value=_.pessoa.nome,U.value=_.pessoa.id},De=_=>{m.value=!0,g.value=_.id,j.value=_.pessoa.nome};async function Se(_){_.excluido=!_.excluido;try{await x(`${$}/${_.id}`,{method:"PUT",body:JSON.stringify({excluido:_.excluido})},"$l09I6nLRfk")}catch(l){console.error("Erro ao excluir pessoa:",l)}}const je=()=>{const _=p.query.origem||"criar",l=p.query.id;_==="atualizar"?v.push(`/os/atualizar/${l}`):v.push("/os/criar-registro")};return(_,l)=>{const F=Fe,se=Be,H=Ne,J=ae;return I(),oe(ie,null,{default:t(()=>[e(D,{class:"mt-5"},{default:t(()=>[e(M,{cols:"3"},{default:t(()=>[e(Q,{label:"Documento",modelValue:a(q).documento,"onUpdate:modelValue":l[0]||(l[0]=A=>a(q).documento=A)},null,8,["modelValue"])]),_:1}),e(M,{cols:"4"},{default:t(()=>[e(Q,{label:"Pessoa",modelValue:a(q).nome,"onUpdate:modelValue":l[1]||(l[1]=A=>a(q).nome=A)},null,8,["modelValue"])]),_:1}),u("div",null,[u("img",{class:"mt-3",src:fe,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Pe})]),u("div",null,[u("img",{class:"mt-3 ml-2",src:ne,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Ae})])]),_:1}),e(D,null,{default:t(()=>[e(M,{cols:"4"},{default:t(()=>[e(pe,{label:"Selecione a Pessoa",modelValue:a(q).pessoa,"onUpdate:modelValue":l[2]||(l[2]=A=>a(q).pessoa=A),items:a(k),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(M,{cols:"3"},{default:t(()=>[e(pe,{label:"Papel",modelValue:a(q).papeis,"onUpdate:modelValue":l[3]||(l[3]=A=>a(q).papeis=A),items:a(b),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),u("div",null,[u("img",{class:"mt-3",src:ne,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:qe})])]),_:1}),e(D,null,{default:t(()=>[e(M,null,{default:t(()=>[e(_e,{style:{height:"465px"},headers:Ve,items:a(C)},{"item.actions":t(({item:A})=>[e(D,null,{default:t(()=>[u("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:de=>ze(A),title:"Visualizar Ficha"},rt,8,ot),u("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:de=>De(A),class:"mr-2",title:"Alterar Papel"},it,8,nt),u("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:de=>Se(A),title:"Deletar Pessoa"},[A.excluido?(I(),N("img",ut)):(I(),N("img",dt))],8,ct),u("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:de=>Oe(A),title:"Selecionar Representante"},_t,8,mt)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(F,{show:a(f),onClose:l[4]||(l[4]=A=>f.value=!1)},null,8,["show"]),e(se,{representante_nome:a(j),representantes:a(S),ato_id:a(s),show:a(d),onClose:l[5]||(l[5]=A=>d.value=!1),onUpdateRepresentante:Te},null,8,["representante_nome","representantes","ato_id","show"]),e(H,{representante_nome:a(j),ato_token:a(P),ato_id:a(g),show:a(m),onClose:l[6]||(l[6]=A=>m.value=!1),onUpdatePapel:Ee},null,8,["representante_nome","ato_token","ato_id","show"]),e(we,{modelValue:a(c),"onUpdate:modelValue":l[8]||(l[8]=A=>re(c)?c.value=A:null),width:"600"},{default:t(()=>[e(ce,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(Ie,{src:a(R)},null,8,["src"]),e(B,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:l[7]||(l[7]=A=>c.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(D,null,{default:t(()=>[e(J,{onClick:je},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},ft={key:0,class:"loading-overlay"},gt={class:"mt-4 mb-4 justify-end fixed-buttons",style:{bottom:"0",left:"0",width:"100%","background-color":"#fff",padding:"16px","z-index":"1000"}},yt="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",ht={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(G,{emit:o}){Me("DocumentEditorContainer",[Ge,He]);const y=X(),{$toast:v}=ee(),p=te(),r=W(),h=o;$e(`${y.public.docEditor}`);const z=`${y.public.managemant}/download`,w=`${y.public.managemant}/upload`,E=n(null),T=n(!1),$=async b=>{try{const d=await fetch(b);if(!d.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await d.blob()}catch(d){return console.error(d),v.error("Erro ao carregar o documento inicial."),null}},i=async()=>{T.value=!0;try{const{data:b,status:d}=await x(z,{method:"POST",body:{bucket:"qvgjz",path:"ato/UbEKW/ato_minuta-2024-12-22T14:09:40.943Z.sfdt"}},"$5jxI4TvFse"),f=b.value,c=await $(f);if(c){const m=new FileReader;m.onload=()=>{const S=m.result;E.value.ej2Instances.documentEditor.open(S)},m.readAsText(c)}else v.error("Erro ao carregar o documento do MinIO.")}catch(b){console.error("Erro ao carregar o documento:",b),v.error("Erro ao carregar o documento.")}finally{T.value=!1}},V=async()=>{const d=await E.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),f=new FileReader;f.onload=()=>{const c=f.result,S=E.value.ej2Instances.documentEditor.pageCount;h("doc",c),h("page",S)},f.readAsText(d)},k=async()=>{T.value=!0;try{const d=await E.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),f=new FormData;f.append("file",d,"anexo.sfdt"),f.append("cartorio_token",L("user-data").value.cartorio_token),f.append("token",r.query.ato_token_edit),f.append("tipo","ato_minuta");const{data:c,status:m}=await x(w,{method:"POST",body:f},"$dvNFfvmIJC");if(m.value==="success"){v.success("Documento enviado!");const j=E.value.ej2Instances.documentEditor.pageCount;V(),h("page",j)}else v.error("Erro ao enviar documento para o sistema.")}catch(b){v.error("Erro ao salvar documento."),console.error(b)}finally{T.value=!1}},C=()=>{const b=r.query.origem||"criar",d=r.query.id;b==="atualizar"?p.push(`/os/atualizar/${d}`):p.push("/os/criar-registro")};return Ue(async()=>{await i(),V()}),(b,d)=>{const f=ae;return I(),N(ve,null,[e(a(ke),{height:"900px",ref_key:"documentEditorContainer",ref:E,serviceUrl:yt,enableToolbar:!0,enableWordExport:!0},null,512),a(T)?(I(),N("div",ft,[e(Re,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):xe("",!0),u("div",gt,[e(B,{size:"large",color:"green",onClick:k,disabled:a(T)},{default:t(()=>[O(" Salvar ")]),_:1},8,["disabled"]),e(f,{class:"ml-4"},{default:t(()=>[e(B,{size:"large",onClick:C,color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})])],64)}}},bt={class:"d-flex align-center justify-center"},xt=["innerHTML"],$t={__name:"Livro",props:{pages:{type:Number,required:!0},document:{type:String,required:!0}},async setup(G){let o,y;const v=G,p=X();$e(`${p.public.docEditor}`);const{$toast:r}=ee(),h=te(),z=W(),w=`${p.public.managemant}/download`,E=`${p.public.managemant}/lavrarAto`,T=n("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),$=n(!1),i=n(null),V=n(null),k=n(null);[o,y]=K(()=>x(w,{method:"POST",body:{bucket:"qvgjz",path:"ato/fKumj/ato_minuta-2024-12-13T14:57:36.974Z"}},"$FnEbAJEARP")),o=await o,y();const C=async()=>{try{const{data:c,status:m}=await x(E,{method:"POST",body:{ato_token:z.query.ato_token_edit,qtd_paginas:v.pages}},"$7ljqltMqa0");m.value==="success"?(i.value=c.value,V.value=c.value[0].selo,r.success("Ato lavrado com sucesso!")):r.error("Falha ao lavrar o ato.")}catch{r.error("Erro ao conectar com o servidor.")}},b=()=>{$.value=!1,C()},d=function(){k.value.ej2Instances.documentEditor.open(v.document)},f=()=>{const c=z.query.origem||"criar",m=z.query.id;c==="atualizar"?h.push(`/os/atualizar/${m}`):h.push("/os/criar-registro")};return(c,m)=>{const S=Ke;return I(),N(ve,null,[e(D,null,{default:t(()=>[e(M,null,{default:t(()=>[e(a(ke),{restrictEditing:!0,enableToolbar:!1,created:v.document?d:null,ref_key:"documentEditorContainer",ref:k,height:"850px",width:"850px"},null,8,["created"])]),_:1}),e(M,null,{default:t(()=>[u("div",bt,[u("div",null,[u("img",{onClick:m[0]||(m[0]=j=>$.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:Je}),a(i)?(I(),oe(ce,{key:0,class:"ml-8 mt-5"},{default:t(()=>[e(D,{"no-gutters":""},{default:t(()=>[e(M,null,{default:t(()=>[e(he,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[O(" Livro: "+me(a(i)[0].livro_numero),1)]),_:1})]),_:1}),e(M,null,{default:t(()=>[e(he,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[O(" Folhas : "+me(a(i)[0].pagina_inicial)+" Á "+me(a(i)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),u("div",{innerHTML:a(V)},null,8,xt)]),_:1})):xe("",!0)])])]),_:1})]),_:1}),e(B,{color:"red",size:"large",onClick:f},{default:t(()=>[O("Voltar")]),_:1}),e(S,{show:a($),condMessage:a(T),onClose:m[1]||(m[1]=j=>$.value=!1),onConfirm:b},null,8,["show","condMessage"])],64)}}},kt=["onClick"],wt={key:0,style:{width:"30px",height:"30px"},src:ge,alt:"Visualizar",title:"Reativar"},Vt={key:1,src:ye,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Ct={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(G){let o,y;const v=te(),p=W(),r=X(),{$toast:h}=ee(),z=`${r.public.managemant}/listarEscrevente`;`${r.public.managemant}`;const w=`${r.public.managemant}/createAtosObservacao`,E=`${r.public.managemant}/updateAtosObservacao`,T=`${r.public.managemant}/getAtosObservacaoById`,$=n(L("user-data").value.cartorio_token),i=n([]),V=n([]),k=[{title:"Data",align:"start",key:"created"},{title:"Escrevente",align:"start",key:"users.nome"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],C=le({observacao:""}),b={observacao:{required:Ze.withMessage("O campo é obrigatório",Ye)}},d=Qe(b,C),{data:f}=([o,y]=K(()=>x(`${T}/${p.query.ato_id}`,{method:"GET"},"$HyzoO40swN")),o=await o,y(),o);i.value=f.value.map(s=>({...s,created:be(s.created,"dd/mm/yyyy hh:mm")}));async function c(){if(C.observacao.trim()===""){h.error("O campo de observação está vazio.");return}if(await d.value.$validate()){const{data:s,error:g,status:U}=await x(w,{method:"POST",body:{ato_id:p.query.ato_id,observacao:C.observacao,user_id:L("user-data").value.usuario_id}},"$gnHMo4uCXD");U.value==="success"&&(i.value.push({created:be(s.value.created,"dd/mm/yyyy hh:mm"),observacao:s.value.observacao,id:s.value.id,escrevente:L("user-data").value.nome}),C.observacao="",h.success("Observação registrada com sucesso"))}else h.error("Preencha os campos obrigatórios.")}async function m(s){s.excluido=!s.excluido;try{await x(`${E}/${s.id}`,{method:"PUT",body:JSON.stringify({excluido:s.excluido})},"$sP9AKdd3Ky")}catch(g){console.error("Erro ao excluir observação:",g)}}const{data:S}=([o,y]=K(()=>x(z,{method:"POST",body:{cartorio_token:$}},"$HL9pndqGh0")),o=await o,y(),o);V.value=S.value[0].func_json_escreventes;const j=()=>{const s=p.query.origem||"criar",g=p.query.id;s==="atualizar"?v.push(`/os/atualizar/${g}`):v.push("/os/criar-registro")};return(s,g)=>{const U=ae;return I(),oe(ie,null,{default:t(()=>[e(D,{class:"mt-5"},{default:t(()=>[e(Q,{label:"Observação",modelValue:C.observacao,"onUpdate:modelValue":g[0]||(g[0]=P=>C.observacao=P),required:"","error-messages":a(d).observacao.$errors.length>0?a(d).observacao.$errors.map(P=>P.$message):[],onBlur:a(d).observacao.$touch,onInput:a(d).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),u("div",null,[u("img",{class:"btn-pointer ml-2",src:ne,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:c})])]),_:1}),e(D,null,{default:t(()=>[e(M,null,{default:t(()=>[e(_e,{style:{height:"465px"},headers:k,items:i.value},{"item.actions":t(({item:P})=>[u("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:R=>m(P),title:"Deletar Observação"},[P.excluido?(I(),N("img",wt)):(I(),N("img",Vt))],8,kt)]),_:1},8,["items"])]),_:1})]),_:1}),e(D,null,{default:t(()=>[e(U,{onClick:j},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Pt=u("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:We,alt:"Escanear"},null,-1),At=[Pt],Et=u("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ne,alt:"Criar"},null,-1),Tt=[Et],qt=["onClick"],zt=u("img",{style:{width:"30px",height:"30px"},src:fe,alt:"Visualizar"},null,-1),Ot=[zt],Dt=["onClick"],St={key:0,style:{width:"30px",height:"30px"},src:ge,alt:"Visualizar",title:"Reativar"},jt={key:1,src:ye,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},It={__name:"Anexos",async setup(G){let o,y;const v=X(),{$toast:p}=ee(),r=te(),h=W(),z=`${v.public.biometria}/run-scanner`,w=`${v.public.managemant}/atos_anexos`,E=`${v.public.managemant}/atos_anexos`,T=`${v.public.managemant}/atos_anexos`,$=n(!1),i=n([]),V=le({descricao:""}),k=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}],{data:C}=([o,y]=K(()=>x(`${T}/${h.query.ato_id}`,{method:"GET"},"$AOZpbz65MA")),o=await o,y(),o);i.value=C.value;async function b(){try{await d(),await f()}catch(s){console.error("Erro ao executar scanner ou listar arquivos:",s)}}async function d(){try{const{data:s}=await x(z,{method:"GET"},"$KttjFhHivJ")}catch(s){p.error("Erro ao acionar o scanner:",s)}}async function f(){try{const{data:s,status:g}=await x("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:h.query.ato_token_edit,cartorio_token:L("user-data").value.cartorio_token}},"$TqQrsgxUkd")}catch(s){console.error("Erro ao enviar o arquivo:",s)}}const c=async()=>{$.value=!0},m=async()=>{const{data:s,error:g,status:U}=await x(w,{method:"POST",body:{ato_id:h.query.ato_id,descricao:V.descricao,user_id:L("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$KDhIYzGKzM");U.value==="success"&&(p.success("Anexo registrado com sucesso!"),i.value.push(s.value))};async function S(s){s.excluido=!s.excluido;try{await x(`${E}/${s.id}`,{method:"PUT",body:JSON.stringify({excluido:s.excluido})},"$cdoFBGO0Ti")}catch(g){console.error("Erro ao excluir pessoa:",g)}}const j=()=>{const s=h.query.origem||"criar",g=h.query.id;s==="atualizar"?r.push(`/os/atualizar/${g}`):r.push("/os/criar-registro")};return(s,g)=>{const U=ae;return I(),oe(ie,null,{default:t(()=>[e(D,null,{default:t(()=>[e(M,{cols:"5"},{default:t(()=>[e(Q,{modelValue:a(V).descricao,"onUpdate:modelValue":g[0]||(g[0]=P=>a(V).descricao=P),label:"Descrição"},null,8,["modelValue"])]),_:1}),u("div",{onClick:b,title:"Escanear"},At),u("div",{onClick:m,title:"Criar"},Tt)]),_:1}),e(_e,{headers:k,items:a(i),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:P})=>[e(D,null,{default:t(()=>[u("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:R=>c(P),title:"Visualizar Anexo"},Ot,8,qt),u("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:R=>S(P),title:"Deletar Pessoa"},[P.excluido?(I(),N("img",St)):(I(),N("img",jt))],8,Dt)]),_:2},1024)]),_:1},8,["items"]),e(we,{modelValue:a($),"onUpdate:modelValue":g[2]||(g[2]=P=>re($)?$.value=P:null),width:"600"},{default:t(()=>[e(ce,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(B,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:g[1]||(g[1]=P=>$.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(U,{onClick:j},{default:t(()=>[e(B,{size:"large",color:"red"},{default:t(()=>[O("Voltar")]),_:1})]),_:1})]),_:1})}}},Mt=u("h1",{class:"mb-2"},"Procuração",-1),aa={__name:"[id]",async setup(G){let o,y;const v=n(null),p=n(null),r=n(null),h=X(),z=W(),w=`${h.public.managemant}/listarSituacoes`,E=`${h.public.managemant}/getAtos`,T=n(L("user-data").value.cartorio_token),$=z.query.id?{ato_token:"xkyaA"}:{cartorio_token:T},i=n([]),V=n([]);async function k(){try{const{data:c}=await x(`${E}/${z.query.ato_id}`,{method:"GET"},"$j0JpHHj7PB");V.value=c.value}catch(c){console.log(c)}}[o,y]=K(()=>k()),await o,y();const{data:C,status:b}=([o,y]=K(()=>x(w,{method:"POST",body:$},"$mGbp7gAEjS")),o=await o,y(),o);i.value=C.value;const d=c=>{v.value=c},f=c=>{p.value=c};return(c,m)=>{const S=at,j=vt,s=ht,g=$t,U=Ct,P=It;return I(),N(ve,null,[Mt,e(ce,{width:"1300"},{default:t(()=>[e(et,{modelValue:a(r),"onUpdate:modelValue":m[0]||(m[0]=R=>re(r)?r.value=R:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(Z,{value:"dados"},{default:t(()=>[O("Dados")]),_:1}),e(Z,{value:"partes"},{default:t(()=>[O("Partes")]),_:1}),e(Z,{value:"minuta"},{default:t(()=>[O("Minuta")]),_:1}),e(Z,{value:"livro"},{default:t(()=>[O("Livro")]),_:1}),e(Z,{value:"observacao"},{default:t(()=>[O("Observações")]),_:1}),e(Z,{value:"anexo"},{default:t(()=>[O("Anexos")]),_:1})]),_:1},8,["modelValue"]),e(tt,{modelValue:a(r),"onUpdate:modelValue":m[1]||(m[1]=R=>re(r)?r.value=R:null)},{default:t(()=>[e(Y,{value:"dados"},{default:t(()=>[e(S,{item_dados:a(V),item_situacoes:a(i)},null,8,["item_dados","item_situacoes"])]),_:1}),e(Y,{value:"partes"},{default:t(()=>[e(j)]),_:1}),e(Y,{value:"minuta"},{default:t(()=>[e(s,{onPage:d,onDoc:f})]),_:1}),e(Y,{value:"livro"},{default:t(()=>[e(g,{pages:a(v),document:a(p)},null,8,["pages","document"])]),_:1}),e(Y,{value:"observacao"},{default:t(()=>[e(U)]),_:1}),e(Y,{value:"anexo"},{default:t(()=>[e(P)]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}}};export{aa as default};
