import{_ as _e,a as pe,b as fe,c as ve,d as be,e as ge}from"./ZXD2N7oa.js";import{_ as Ve}from"./BpQRUBvM.js";import{f as ye,r,D as Ae,K,u as ke,l as $e,A as qe,o as q,h as R,w as o,b as e,s as O,i as s,p as B,V as G,d as m,k as W,e as we,y as L,c as j,F as ze,a as D,t as Pe,j as C,x as Te}from"./BrwhbYQi.js";import{f as $}from"./DVx2DPmk.js";import{u as xe}from"./IuvbHguH.js";import{V as U}from"./C6M7Bem9.js";import{V as v}from"./CWL2rgtg.js";import{V as M}from"./BLJtsLr8.js";import{V as Y}from"./B9i5lJKF.js";import{_ as De,a as Ce,b as Re}from"./DTCcFTIK.js";import{_ as Be}from"./CKIX9-Fk.js";import{_ as Ue}from"./DoGv8yAR.js";import{V as Me}from"./CpLFjrgS.js";import{a as Se,V as p,b as he,c as f}from"./CGK2VCHv.js";import"./D_GfUssZ.js";import"./5LqHomlf.js";import"./DVYHVnCG.js";import"./DrLYeZNO.js";import"./B0IxRygJ.js";import"./DcA5HqBA.js";import"./Do4c-Ff8.js";import"./B6UnwMTs.js";import"./B4MjSJum.js";import"./BfwXubpv.js";import"./BAyLXabW.js";import"./C7f7HQSI.js";import"./BVz1G1IN.js";import"./DJvq3mCv.js";import"./DI9woBM7.js";import"./DNjAtrH_.js";import"./S11UBdDO.js";import"./TDtrdbi3.js";import"./DneKAOwA.js";import"./Q6Nx30eU.js";import"./DzFgZs3p.js";import"./CzIkgpBL.js";import"./CEiYH19c.js";import"./C1OoBicw.js";import"./DNx3SKDu.js";import"./-zgYk4Vu.js";import"./WE9kZM2S.js";import"./Lteq4IHq.js";import"./ChfWJVaW.js";import"./DQl41OZn.js";const Ee={__name:"SeparacaoDivorcio",setup(H){const d=W(),i=ye({dt_casamento:null,tabvalores_regimecasamento_id:null,qtd_filhos_maiores:null,qtd_filhos_menores:null,responsavel_menores_id:null}),y=r([]),A=Ae(),n=K(),{$toast:P}=ke(),b=`${d.public.auth}/service/gerencia/getAtos/${n.query.ato_id}`,S=`${d.public.auth}/service/gerencia/regime_casamento`,T=`${d.public.auth}/service/gerencia/getAtosPessoaById/${n.query.ato_id}`,h=`${d.public.managemant}/updateAtos`;r(""),r(""),r(!1),r(!1),r(null),$e(async()=>{const[l,t,c]=await Promise.all([$(b,{method:"GET"}),$(S,{method:"GET"}),$(T,{method:"GET"})]);l.data.value&&Object.assign(i,l.data.value[0]||l.data.value),t.data.value&&(y.value=t.data.value),c.data.value&&(w.value=c.data.value)});const E=async()=>{try{const{data:l}=await $(T,{method:"GET"});w.value=l.value||[]}catch{}},w=r([]),z=qe(()=>{var l;return((l=w.value)==null?void 0:l.map(t=>{var c;return{id:t.id,nome:((c=t.pessoa)==null?void 0:c.nome)||"Sem nome"}}))||[]}),g=()=>{const l=n.query.origem||"criar",t=n.query.id;switch(l){case"atualizar":case"vizualizar":A.push(`/os/atualizar/${t}`);break;case"atualizar-lista":case"vizualizar-lista":A.push("/atos/lista");break;default:A.push("/os/criar-registro");break}};async function k(){const{data:l,error:t,status:c}=await xe(`${h}/${n.query.ato_id}`,{method:"PUT",body:{dt_casamento:i.dt_casamento,tabvalores_regimecasamento_id:i.tabvalores_regimecasamento_id,qtd_filhos_maiores:i.qtd_filhos_maiores,qtd_filhos_menores:i.qtd_filhos_menores,responsavel_menores_id:i.responsavel_menores_id}},"$sJMejO9HYY");c.value==="success"&&P.success("Divórcio salvo com sucesso")}const x=l=>{const t=["Backspace","Tab","ArrowLeft","ArrowRight","Delete"];!/[0-9]/.test(l.key)&&!t.includes(l.key)&&l.preventDefault()};return(l,t)=>{const c=Ve;return q(),R(Y,{class:"mt-5"},{default:o(()=>[e(U,{dense:""},{default:o(()=>[e(v,{cols:"12",sm:"4",md:"3"},{default:o(()=>[e(O,{modelValue:s(i).dt_casamento,"onUpdate:modelValue":t[0]||(t[0]=_=>s(i).dt_casamento=_),type:"date",label:"Data Casamento"},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",sm:"6",md:"4"},{default:o(()=>[s(y).length?(q(),R(M,{key:0,label:"Regime Bens",modelValue:s(i).tabvalores_regimecasamento_id,"onUpdate:modelValue":t[1]||(t[1]=_=>s(i).tabvalores_regimecasamento_id=_),items:s(y),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])):B("",!0)]),_:1}),e(v,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(O,{label:"Filhos Maiores",modelValue:s(i).qtd_filhos_maiores,"onUpdate:modelValue":t[2]||(t[2]=_=>s(i).qtd_filhos_maiores=_),modelModifiers:{number:!0},type:"number",min:"0",onKeydown:x},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",sm:"6",md:"3"},{default:o(()=>[e(O,{label:"Filhos Menores",modelValue:s(i).qtd_filhos_menores,"onUpdate:modelValue":t[3]||(t[3]=_=>s(i).qtd_filhos_menores=_),modelModifiers:{number:!0},type:"number",min:"0",onKeydown:x},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",sm:"6",md:"4"},{default:o(()=>[s(z).length?(q(),R(M,{key:0,onFocus:E,label:"Responsável",modelValue:s(i).responsavel_menores_id,"onUpdate:modelValue":t[4]||(t[4]=_=>s(i).responsavel_menores_id=_),items:s(z),"item-title":"nome","item-value":"id",required:""},null,8,["modelValue","items"])):B("",!0)]),_:1})]),_:1}),e(U,{class:"mt-5",justify:"start",align:"center"},{default:o(()=>[e(v,{cols:"auto"},{default:o(()=>[e(c,{onClick:g},{default:o(()=>[e(G,{size:"large",color:"red"},{default:o(()=>t[5]||(t[5]=[m("Voltar")])),_:1})]),_:1})]),_:1}),e(v,{cols:"auto"},{default:o(()=>[e(G,{class:"ml-2",onClick:k,size:"large",color:"green"},{default:o(()=>t[6]||(t[6]=[m("Salvar")])),_:1})]),_:1})]),_:1})]),_:1})}}},Fe={class:"mb-10"},Ie={style:{color:"red","margin-left":"30px"}},Ne={key:0},Uo={__name:"[id]",async setup(H){let d,i;const y=r(null),A=r(null),n=r(null),P=W(),b=K(),S=r(b.query.origem==="vizualizar"),T=`${P.public.auth}/service/gerencia/listarSituacoes`,h=`${P.public.auth}/service/gerencia/getAtos`,E=r(we("user-data").value.cartorio_token),w=b.query.id?{ato_token:b.query.tipo_ato_token}:{cartorio_token:E},z=r([]),g=r([]),k=r(!1),x=b.query.tipo_ato||"",l=r(null),t=r(null),[c,_]=x.split(" - "),F=r(0);l.value=c||"",t.value=_||"";async function J(){try{const{data:u}=await $(`${h}/${b.query.ato_id}`,{method:"GET"});g.value=u.value}catch(u){console.error(u)}}[d,i]=L(()=>J()),await d,i();const{data:Q,status:Oe}=([d,i]=L(()=>$(T,{method:"POST",body:w})),d=await d,i(),d);z.value=Q.value;const X=u=>{y.value=u},Z=u=>{A.value=u};function ee(){g.dt_lavratura||(k.value=!0)}function oe(u){u==="divorcio"&&F.value++}function ae(){F.value++}function te({descricao:u,usaImoveisParams:a}){const[I,N]=u.split(" - ");l.value=I||"",t.value=N||""}return(u,a)=>{const I=_e,N=pe,se=Ee,le=De,ie=Ce,re=fe,ne=ve,ue=be,me=ge,de=Re,ce=Be;return q(),j(ze,null,[e(Y,null,{default:o(()=>[D("div",Fe,[e(U,{class:"mb-5 mt-5"},{default:o(()=>[a[5]||(a[5]=D("h1",null,"Ordem de Serviço nº",-1)),D("h1",Ie,Pe(s(b).query.numero_os),1)]),_:1}),e(U,null,{default:o(()=>[e(v,{md:"6"},{default:o(()=>[e(M,{label:"Serviço",class:"mr-5",modelValue:s(l),"onUpdate:modelValue":a[0]||(a[0]=V=>C(l)?l.value=V:null),disabled:""},null,8,["modelValue"])]),_:1}),e(v,{md:"5"},{default:o(()=>[e(M,{modelValue:s(t),"onUpdate:modelValue":a[1]||(a[1]=V=>C(t)?t.value=V:null),label:"Tipo de Ato",disabled:""},null,8,["modelValue"])]),_:1}),s(S)?B("",!0):(q(),j("div",Ne,[D("img",{class:"mt-2",style:Te({cursor:s(g).dt_lavratura?"default":"pointer",width:"35px",height:"35px"}),src:Ue,alt:"Editar",onClick:ee},null,4)]))]),_:1})]),e(Me,{width:"1300"},{default:o(()=>[e(Se,{modelValue:s(n),"onUpdate:modelValue":a[2]||(a[2]=V=>C(n)?n.value=V:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(p,{value:"dados"},{default:o(()=>a[6]||(a[6]=[m("Dados")])),_:1}),e(p,{value:"partes"},{default:o(()=>a[7]||(a[7]=[m("Partes")])),_:1}),e(p,{value:"bens"},{default:o(()=>a[8]||(a[8]=[m("Bens")])),_:1}),e(p,{value:"imoveis"},{default:o(()=>a[9]||(a[9]=[m("Imoveis")])),_:1}),e(p,{onClick:ae,value:"divorcio"},{default:o(()=>a[10]||(a[10]=[m("Matrimônio")])),_:1}),e(p,{value:"minuta"},{default:o(()=>a[11]||(a[11]=[m("Minuta")])),_:1}),e(p,{value:"livro"},{default:o(()=>a[12]||(a[12]=[m("Livro")])),_:1}),e(p,{value:"observacao"},{default:o(()=>a[13]||(a[13]=[m("Observações")])),_:1}),e(p,{value:"anexo"},{default:o(()=>a[14]||(a[14]=[m("Anexos")])),_:1}),e(p,{value:"outros"},{default:o(()=>a[15]||(a[15]=[m("Outros")])),_:1})]),_:1},8,["modelValue"]),e(he,{modelValue:s(n),"onUpdate:modelValue":[a[3]||(a[3]=V=>C(n)?n.value=V:null),oe]},{default:o(()=>[e(f,{value:"dados"},{default:o(()=>[e(I,{item_dados:s(g),item_situacoes:s(z)},null,8,["item_dados","item_situacoes"])]),_:1}),e(f,{value:"partes"},{default:o(()=>[e(N)]),_:1}),e(f,{value:"divorcio"},{default:o(()=>[e(se,{"tab-event":s(F)},null,8,["tab-event"])]),_:1}),e(f,{value:"bens"},{default:o(()=>[e(le)]),_:1}),e(f,{value:"imoveis"},{default:o(()=>[e(ie)]),_:1}),e(f,{value:"minuta"},{default:o(()=>[e(re,{onPage:X,onDoc:Z})]),_:1}),e(f,{value:"livro"},{default:o(()=>[e(ne,{pages:s(y),document:s(A)},null,8,["pages","document"])]),_:1}),e(f,{value:"observacao"},{default:o(()=>[e(ue)]),_:1}),e(f,{value:"anexo"},{default:o(()=>[e(me)]),_:1}),e(f,{value:"outros"},{default:o(()=>[e(de)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(k)?(q(),R(ce,{key:0,show:s(k),servicos:s(g).servicos||[],tiposAtos:s(g).tiposAtos||[],onClose:a[4]||(a[4]=V=>k.value=!1),onUpdateAto:te},null,8,["show","servicos","tiposAtos"])):B("",!0)],64)}}};export{Uo as default};
