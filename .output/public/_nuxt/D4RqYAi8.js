import{_ as te}from"./NfGI4c2C.js";import{n as H,q as Z,u as Q,r,A as I,s as se,B as ee,o as y,v as O,w as o,b as e,x as t,V as Y,y as F,d as D,z as X,a as f,c as G,C as oe,D as Re,F as Ie,G as L,H as he,I as ge,t as ue}from"./BWp26XiA.js";import{u as P}from"./Dza4VQPZ.js";import{c as ye,r as xe,u as ke}from"./BZSWoGfM.js";import{V as M}from"./BXDwYriJ.js";import{V as B}from"./Cej0_fg3.js";import{V as ce}from"./CDtMEycU.js";import{V as re}from"./BjUUrmEq.js";import{_ as Be,a as J,V as Ue,c as K,b as Ne}from"./aOapf0X9.js";import{_ as je,a as Le,b as Fe,T as We,W as Ge,r as be,D as $e,c as Je,d as Ke,e as Ye}from"./Dlny-kOl.js";import{_ as de}from"./D6JuZ3ST.js";import{_ as ae,V as me,a as pe,b as _e,c as He}from"./DMDVqZtv.js";import{V as Ve,a as ne}from"./BIvjekgT.js";import{V as Ze}from"./CL1qbLii.js";import{_ as Qe}from"./DfjuBLsA.js";import"./CWtsZuXR.js";import"./DA2zxhso.js";import"./BctQa-7Q.js";import"./B5gqmf5E.js";const Xe={__name:"Dados",props:{ato_token:{type:String,required:!0}},emits:["saved"],async setup(U,{emit:m}){let c,p;const x=U,b=m,_=H(),d=Z(),$=X(),{$toast:g}=Q(),E=`${$.public.managemant}/listarSituacoes`,R=`${$.public.managemant}/createAtos`,A=`${$.public.managemant}/getAtosTiposByToken`,V=r(I("user-data").value.cartorio_token),N=r(I("user-service").value.id).value||r(I("user-service").value).value,S=r([]),a=se({dt_abertura:null,status:"EM EDIÇÃO",mne:null}),i={status:{required:ye.withMessage("O campo é obrigatorio",xe)}},l=ke(i,a),{data:T}=([c,p]=ee(()=>P(`${A}/${x.ato_token}`,{method:"GET"},"$9ZmTYsLk0K")),c=await c,p(),c);async function n(){if(await l.value.$validate()){const{data:u,error:h,status:W}=await P(R,{method:"POST",body:{ato_tipo_id:T.value.id,cartorio_id:I("user-data").value.cartorio_id,ordemserv_id:N,status:a.status,dt_abertura:a.dt_abertura,mne:a.mne,user_id:I("user-data").value.usuario_id,user_alteracao_id:I("user-data").value.usuario_id}},"$hyq5YcBEjF");W.value==="success"&&(g.success("Ato registrado com sucesso!"),b("saved",{id:u.value.id,token:u.value.token}))}else g.error("Preencha os campos obrigatorios.")}const{data:k}=([c,p]=ee(()=>P(E,{method:"POST",body:{cartorio_token:V.value}},"$S3qwbpImEh")),c=await c,p(),c);S.value=k.value;const j=()=>{const u=d.query.origem||"criar",h=d.query.id;u==="atualizar"?_.push(`/os/atualizar/${h}`):_.push("/os/criar-registro")};return(u,h)=>{const W=te;return y(),O(re,null,{default:o(()=>[e(M,{class:"mt-5"},{default:o(()=>[e(B,{cols:"3"},{default:o(()=>[e(ce,{label:"Situação",modelValue:t(a).status,"onUpdate:modelValue":h[0]||(h[0]=w=>t(a).status=w),items:t(S),"item-title":"descricao","item-value":"descricao",required:"","error-messages":t(l).status.$errors.map(w=>w.$message),onBlur:t(l).status.$touch,onInput:t(l).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),e(M,null,{default:o(()=>[e(B,{cols:"5"},{default:o(()=>[e(Y,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:t(a).mne,"onUpdate:modelValue":h[1]||(h[1]=w=>t(a).mne=w)},null,8,["modelValue"])]),_:1})]),_:1}),e(M,null,{default:o(()=>[e(B,{cols:"2"},{default:o(()=>[e(Y,{modelValue:t(a).dt_abertura,"onUpdate:modelValue":h[2]||(h[2]=w=>t(a).dt_abertura=w),type:"date",label:"Data Lavratura",disabled:"",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(M,{class:"mb-3"},{default:o(()=>[e(W,{onClick:j},{default:o(()=>[e(F,{size:"large",color:"red"},{default:o(()=>[D("Voltar")]),_:1})]),_:1}),e(F,{class:"ml-10",onClick:n,size:"large",color:"green"},{default:o(()=>[D("Salvar")]),_:1})]),_:1})]),_:1})}}},et=["onClick"],tt=f("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1),ot=[tt],at=["onClick"],st=f("img",{style:{width:"30px",height:"30px"},src:He,alt:"Visualizar"},null,-1),rt=[st],nt=["onClick"],lt={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},it={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},ut=["onClick"],ct=f("img",{style:{width:"30px",height:"30px"},src:Fe,alt:"Visualizar"},null,-1),dt=[ct],mt={__name:"Partes",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(U){let m,c;const p=U,x=H(),b=Z(),_=X(),{$toast:d}=Q(),$=`${_.public.managemant}/pesquisarPessoas`,g=`${_.public.managemant}/listarPapeis`,E=`${_.public.managemant}/getLinkTipo`,R=`${_.public.managemant}/createAtosPessoa`,A=`${_.public.managemant}/getAtosPessoaById`,V=`${_.public.managemant}/updateAtosPessoa`,N=r(I("user-data").value.cartorio_token),S=r([]),a=r([]),i=r([]),l=r(!1),T=r(!1),n=r(!1),k=r(!1),j=r(null),u=r(null),h=r(null),W=r(null);r(null);const w=r(null),ve=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],q=se({papeis:null,nome:null,pessoa:null,documento:null}),{data:we}=([m,c]=ee(()=>P(g,{method:"POST",body:{tipo_ato_token:p.ato_token}},"$fFKndZhA4W")),m=await m,c(),m);i.value=we.value;async function Ce(){try{const{data:v,error:s}=await P($,{method:"POST",body:{cartorio_token:N.value,documento:q.documento,nome:q.nome}},"$o3ZL1rvYrY");v.value.length>0?(S.value=v.value,q.pessoa=S.value[0]):S.value=[]}catch(v){console.error("Erro na requisição",v)}}const Pe=()=>{T.value=!0},Ee=v=>{a.value=a.value.map(s=>s.id===h.value?{...s,papel:{...s.papel,descricao:v}}:s)},Ae=v=>{const s=a.value.find(z=>z.pessoa.id===W.value);s.representante.nome=v},Te=async()=>{const v={pessoa:q.pessoa,papel:i.value.find(z=>z.id===q.papeis),representante:{nome:null}},s=await P(`${A}/${p.ato_id}`,{method:"GET"},"$kXSxUa4grs");for(const z of s.data.value)if(z.pessoa_id===q.pessoa.id&&z.ato_id===p.ato_id&&z.tipo_parte_id===q.papeis){d.error("Pessoa Já Registrada Com Esse Papel!");return}try{const{data:z,error:fe,status:le}=await P(R,{method:"POST",body:{ato_id:p.ato_id,pessoa_id:q.pessoa.id,tipo_parte_id:q.papeis,user_id:I("user-data").value.usuario_id}},"$So3qnQu7ek");le.value==="success"?(v.id=z.value.id,d.success("Pessoa Registrada com Sucesso!"),a.value.push(v)):d.error("Erro ao registrar a pessoa!")}catch{d.error("Erro no servidor. Tente novamente.")}},Se=async v=>{n.value=!0,w.value=null;const{data:s}=await P(`${E}`,{method:"POST",body:{id:v.pessoa.id,tipo:"ficha"}},"$Q3kbIwtd9t");s.value&&s.value.link?w.value=`data:image/jpeg;base64,${s.value.link}`:w.value=null},qe=v=>{const s=a.value.filter(z=>z.pessoa.id!==v.pessoa.id).map(z=>({id:z.pessoa.id,nome:z.pessoa.nome}));h.value=v.id,j.value=s,l.value=!0,u.value=v.pessoa.nome,W.value=v.pessoa.id},ze=v=>{h.value=v.id,k.value=!0,u.value=v.pessoa.nome};async function Oe(v){v.excluido=!v.excluido;try{await P(`${V}/${h.value}`,{method:"PUT",body:JSON.stringify({excluido:v.excluido})},"$9xStKwGd7o")}catch(s){console.error("Erro ao excluir pessoa:",s)}}const De=()=>{const v=b.query.origem||"criar",s=b.query.id;v==="atualizar"?x.push(`/os/atualizar/${s}`):x.push("/os/criar-registro")};return(v,s)=>{const z=Be,fe=je,le=Le,Me=te;return y(),O(re,null,{default:o(()=>[e(M,{class:"mt-5"},{default:o(()=>[e(B,{cols:"3"},{default:o(()=>[e(Y,{label:"Documento",modelValue:t(q).documento,"onUpdate:modelValue":s[0]||(s[0]=C=>t(q).documento=C)},null,8,["modelValue"])]),_:1}),e(B,{cols:"4"},{default:o(()=>[e(Y,{label:"Pessoa",modelValue:t(q).nome,"onUpdate:modelValue":s[1]||(s[1]=C=>t(q).nome=C)},null,8,["modelValue"])]),_:1}),f("div",null,[f("img",{class:"mt-3",src:de,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:Ce})]),f("div",null,[f("img",{class:"mt-3 ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:Pe})])]),_:1}),e(M,null,{default:o(()=>[e(B,{cols:"4"},{default:o(()=>[e(ce,{label:"Selecione a Pessoa",modelValue:t(q).pessoa,"onUpdate:modelValue":s[2]||(s[2]=C=>t(q).pessoa=C),items:t(S),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(B,{cols:"3"},{default:o(()=>[e(ce,{label:"Papel",modelValue:t(q).papeis,"onUpdate:modelValue":s[3]||(s[3]=C=>t(q).papeis=C),items:t(i),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),f("div",null,[f("img",{class:"mt-3",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Te})])]),_:1}),e(M,null,{default:o(()=>[e(B,null,{default:o(()=>[e(me,{style:{height:"465px"},headers:ve,items:t(a)},{"item.actions":o(({item:C})=>[e(M,null,{default:o(()=>[f("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ie=>Se(C),title:"Visualizar Ficha"},ot,8,et),f("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ie=>ze(C),class:"mr-2",title:"Alterar Papel"},rt,8,at),f("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ie=>Oe(C),title:"Deletar Pessoa"},[C.excluido?(y(),G("img",lt)):(y(),G("img",it))],8,nt),f("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ie=>qe(C),title:"Selecionar Representante"},dt,8,ut)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(z,{show:t(T),onClose:s[4]||(s[4]=C=>T.value=!1)},null,8,["show"]),e(fe,{representante_nome:t(u),representantes:t(j),ato_id:t(h),show:t(l),onClose:s[5]||(s[5]=C=>l.value=!1),onUpdateRepresentante:Ae},null,8,["representante_nome","representantes","ato_id","show"]),e(le,{representante_nome:t(u),ato_token:p.ato_token,ato_id:t(h),show:t(k),onClose:s[6]||(s[6]=C=>k.value=!1),onUpdatePapel:Ee},null,8,["representante_nome","ato_token","ato_id","show"]),e(Ve,{modelValue:t(n),"onUpdate:modelValue":s[8]||(s[8]=C=>oe(n)?n.value=C:null),width:"600"},{default:o(()=>[e(ne,{"max-width":"600",title:"Ficha"},{default:o(()=>[e(Ze,{src:t(w)},null,8,["src"]),e(F,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:s[7]||(s[7]=C=>n.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(M,null,{default:o(()=>[e(Me,{onClick:De},{default:o(()=>[e(F,{size:"large",color:"red"},{default:o(()=>[D("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},pt={key:0,class:"loading-overlay"},_t="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",vt={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(U,{emit:m}){const c=U;Re("DocumentEditorContainer",[We,Ge]);const p=X(),{$toast:x}=Q(),b=H(),_=Z(),d=m;be(`${p.public.docEditor}`);const $=`${p.public.managemant}/upload`,g=r(null),E=r(!1),R=async()=>{const i=await g.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),l=new FileReader;l.onload=()=>{const T=l.result;d("doc",T)},l.readAsText(i)},A=async()=>{E.value=!0;try{const i=await g.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),l=new FormData;l.append("file",i,"anexo.docx"),l.append("cartorio_token",I("user-data").value.cartorio_token),l.append("token",c.ato_token),l.append("tipo","ato_minuta");const{data:T,status:n}=await P($,{method:"POST",body:l},"$071xxdqs20");if(n.value==="success"){x.success("Documento enviado!");const j=g.value.ej2Instances.documentEditor.pageCount;R(),d("page",j)}else x.error("Erro ao enviar documento para o sistema.")}catch(a){x.error("Erro ao salvar documento."),console.error(a)}finally{E.value=!1}},V=async a=>{const i=g.value.ej2Instances.documentEditor;for(const[l,T]of Object.entries(a))try{i.search.findAll(l),i.search.searchResults.length>0&&i.search.searchResults.replaceAll(T)}catch(n){console.log(n)}x.success("Todos os marcadores foram substituídos com sucesso!")},N=async()=>{await V({"<<nome>>":"Cláudio","<<data>>":"07/01/2025"})},S=()=>{const a=_.query.origem||"criar",i=_.query.id;a==="atualizar"?b.push(`/os/atualizar/${i}`):b.push("/os/criar-registro")};return(a,i)=>{const l=te;return y(),G(he,null,[e(t($e),{height:"900px",ref_key:"documentEditorContainer",ref:g,serviceUrl:_t,enableToolbar:!0,enableWordExport:!0},null,512),t(E)?(y(),G("div",pt,[e(Ie,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):L("",!0),e(M,{class:"ml-4 mt-4 mb-4"},{default:o(()=>[e(l,{class:"mr-4"},{default:o(()=>[e(F,{size:"large",onClick:S,color:"red"},{default:o(()=>[D("Voltar")]),_:1})]),_:1}),e(F,{size:"large",color:"green",onClick:A,disabled:t(E)},{default:o(()=>[D("Salvar")]),_:1},8,["disabled"]),e(F,{class:"ml-4",size:"large",color:"blue",onClick:N},{default:o(()=>[D("Gerar Minuta")]),_:1})]),_:1})],64)}}},ft={class:"d-flex align-center justify-center"},gt=["innerHTML"],ht={__name:"Livro",props:{ato_token:{type:String,required:!0},pages:{type:Number,required:!0},document:{type:String,required:!0}},setup(U){const m=U,c=X();be(`${c.public.docEditor}`);const{$toast:p}=Q(),x=H(),b=Z(),_=`${c.public.managemant}/lavrarAto`,d=r("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),$=r(!1),g=r(null),E=r(null),R=r(null),A=async()=>{try{const{data:a,status:i}=await P(_,{method:"POST",body:{ato_token:m.ato_token,qtd_paginas:m.pages}},"$ZKnVBNYxp9");i.value==="success"?(g.value=a.value,E.value=a.value[0].selo,p.success("Ato lavrado com sucesso!")):p.error("Falha ao lavrar o ato.")}catch{p.error("Erro ao conectar com o servidor.")}},V=()=>{$.value=!1,A()},N=function(){R.value.ej2Instances.documentEditor.open(m.document)},S=()=>{const a=b.query.origem||"criar",i=b.query.id;a==="atualizar"?x.push(`/os/atualizar/${i}`):x.push("/os/criar-registro")};return(a,i)=>{const l=Ke;return y(),G(he,null,[e(M,null,{default:o(()=>[e(B,null,{default:o(()=>[(y(),O(t($e),{restrictEditing:!0,enableToolbar:!1,created:m.document?N:null,ref_key:"documentEditorContainer",ref:R,height:"850px",width:"850px",key:m.document},null,8,["created"]))]),_:1}),e(B,null,{default:o(()=>[f("div",ft,[f("div",null,[f("img",{onClick:i[0]||(i[0]=T=>$.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:Je}),t(g)?(y(),O(ne,{key:0,class:"mr-16"},{default:o(()=>[e(M,{"no-gutters":""},{default:o(()=>[e(B,null,{default:o(()=>[e(ge,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:o(()=>[D(" Livro: "+ue(t(g)[0].livro_numero),1)]),_:1})]),_:1}),e(B,null,{default:o(()=>[e(ge,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:o(()=>[D(" Folhas : "+ue(t(g)[0].pagina_inicial)+" Á "+ue(t(g)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),f("div",{innerHTML:t(E)},null,8,gt)]),_:1})):L("",!0)])])]),_:1})]),_:1}),e(F,{color:"red",size:"large",onClick:S},{default:o(()=>[D("Voltar")]),_:1}),e(l,{show:t($),condMessage:t(d),onClose:i[1]||(i[1]=T=>$.value=!1),onConfirm:V},null,8,["show","condMessage"])],64)}}},yt=["onClick"],xt={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},kt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},bt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(U){let m,c;const p=U,x=H(),b=Z(),_=X(),{$toast:d}=Q(),$=`${_.public.managemant}/listarEscrevente`,g=`${_.public.managemant}/getAtosTiposByToken`,E=`${_.public.managemant}/createAtosObservacao`,R=`${_.public.managemant}/updateAtosObservacao`,A=r(I("user-data").value.cartorio_token),V=r([]),N=r([]),S=[{title:"Data",align:"start",key:"data"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],a=se({observacao:null}),i={observacao:{required:ye.withMessage("O campo é obrigatorio",xe)}},l=ke(i,a);[m,c]=ee(()=>P(`${g}/${p.ato_token}`,{method:"GET"},"$aJM1TL1buW")),m=await m,c();async function T(){if(await l.value.$validate()){const{data:u,error:h,status:W}=await P(E,{method:"POST",body:{ato_id:p.ato_id,observacao:a.observacao,user_id:I("user-data").value.usuario_id}},"$dMg99jeUNP");W.value==="success"&&(V.value.push({data:Qe(u.value.created,"dd/mm/yyyy hh:mm"),observacao:u.value.observacao,id:u.value.id,escrevente:I("user-data").value.nome}),d.success("Observação registrada com sucesso"))}else d.error("Preencha os campos obrigatorios.")}async function n(u){u.excluido=!u.excluido;try{await P(`${R}/${u.id}`,{method:"PUT",body:JSON.stringify({excluido:u.excluido})},"$B6PdRx8Gp4")}catch(h){console.error("Erro ao excluir observacao:",h)}}const{data:k}=([m,c]=ee(()=>P($,{method:"POST",body:{cartorio_token:A}},"$xFHPGua26S")),m=await m,c(),m);N.value=k.value[0].func_json_escreventes;const j=()=>{const u=b.query.origem||"criar",h=b.query.id;u==="atualizar"?x.push(`/os/atualizar/${h}`):x.push("/os/criar-registro")};return(u,h)=>{const W=te;return y(),O(re,null,{default:o(()=>[e(M,{class:"mt-5"},{default:o(()=>[e(Y,{label:"Observação",modelValue:t(a).observacao,"onUpdate:modelValue":h[0]||(h[0]=w=>t(a).observacao=w),required:"","error-messages":t(l).observacao.$errors.map(w=>w.$message),onBlur:t(l).observacao.$touch,onInput:t(l).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),f("div",null,[f("img",{class:"btn-pointer ml-2",src:ae,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:T})])]),_:1}),e(M,null,{default:o(()=>[e(B,null,{default:o(()=>[e(me,{style:{height:"465px"},headers:S,items:t(V)},{"item.actions":o(({item:w})=>[f("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ve=>n(w),title:"Deletar Observação"},[w.excluido?(y(),G("img",xt)):(y(),G("img",kt))],8,yt)]),_:1},8,["items"])]),_:1})]),_:1}),e(M,null,{default:o(()=>[e(W,{onClick:j},{default:o(()=>[e(F,{size:"large",color:"red"},{default:o(()=>[D("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},$t=f("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Ye,alt:"Escanear"},null,-1),Vt=[$t],wt=f("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ae,alt:"Criar"},null,-1),Ct=[wt],Pt=["onClick"],Et=f("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1),At=[Et],Tt=["onClick"],St={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},qt={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},zt={__name:"Anexos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(U){const m=U,c=X(),{$toast:p}=Q(),x=H(),b=Z(),_=`${c.public.biometria}/run-scanner`,d=`${c.public.managemant}/atos_anexos`,$=`${c.public.managemant}/atos_anexos`,g=r(!1),E=r([]),R=se({descricao:""}),A=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}];async function V(){try{await N(),await S()}catch(n){console.error("Erro ao executar scanner ou listar arquivos:",n)}}async function N(){try{const{data:n}=await P(_,{method:"GET"},"$WazoKp68Tw")}catch(n){p.error("Erro ao acionar o scanner:",n)}}async function S(){try{const{data:n,status:k}=await P("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:m.ato_token,cartorio_token:I("user-data").value.cartorio_token}},"$03Wxiia3aI")}catch(n){console.error("Erro ao enviar o arquivo:",n)}}const a=async()=>{g.value=!0},i=async()=>{const{data:n,error:k,status:j}=await P(d,{method:"POST",body:{ato_id:m.ato_id,descricao:R.descricao,user_id:I("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$D2PdkmlmwW");j.value==="success"&&(p.success("Anexo registrado com sucesso!"),E.value.push(n.value))};async function l(n){n.excluido=!n.excluido;try{await P(`${$}/${n.id}`,{method:"PUT",body:JSON.stringify({excluido:n.excluido})},"$WyW0hasRPI")}catch(k){console.error("Erro ao excluir pessoa:",k)}}const T=()=>{const n=b.query.origem||"criar",k=b.query.id;n==="atualizar"?x.push(`/os/atualizar/${k}`):x.push("/os/criar-registro")};return(n,k)=>{const j=te;return y(),O(re,null,{default:o(()=>[e(M,null,{default:o(()=>[e(B,{cols:"5"},{default:o(()=>[e(Y,{modelValue:t(R).descricao,"onUpdate:modelValue":k[0]||(k[0]=u=>t(R).descricao=u),label:"Descrição"},null,8,["modelValue"])]),_:1}),f("div",{onClick:V,title:"Escanear"},Vt),f("div",{onClick:i,title:"Criar"},Ct)]),_:1}),e(me,{headers:A,items:t(E),style:{height:"465px","max-width":"600px"}},{"item.actions":o(({item:u})=>[e(M,null,{default:o(()=>[f("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:h=>a(u),title:"Visualizar Anexo"},At,8,Pt),f("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:h=>l(u),title:"Deletar Pessoa"},[u.excluido?(y(),G("img",St)):(y(),G("img",qt))],8,Tt)]),_:2},1024)]),_:1},8,["items"]),e(Ve,{modelValue:t(g),"onUpdate:modelValue":k[2]||(k[2]=u=>oe(g)?g.value=u:null),width:"600"},{default:o(()=>[e(ne,{"max-width":"600",title:"Anexo"},{default:o(()=>[e(F,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:k[1]||(k[1]=u=>g.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(j,{onClick:T},{default:o(()=>[e(F,{size:"large",color:"red"},{default:o(()=>[D("Voltar")]),_:1})]),_:1})]),_:1})}}},Xt={__name:"procuracao",props:{ato_token:{type:String,required:!0}},setup(U){const m=U,c=r(null),p=r(null),x=r(null),b=r(null),_=r(null),d=r(!1),$=r(m.ato_token),g=({id:A,token:V})=>{c.value=A,p.value=V,d.value=!0},E=A=>{x.value=A},R=A=>{b.value=A};return(A,V)=>{const N=Xe,S=mt,a=vt,i=ht,l=bt,T=zt;return y(),O(ne,{width:"1300"},{default:o(()=>[e(Ue,{modelValue:t(_),"onUpdate:modelValue":V[0]||(V[0]=n=>oe(_)?_.value=n:null),"bg-color":"#f5f2f2"},{default:o(()=>[e(J,{value:"dados"},{default:o(()=>[D("Dados")]),_:1}),t(d)?(y(),O(J,{key:0,value:"partes"},{default:o(()=>[D("Partes")]),_:1})):L("",!0),t(d)?(y(),O(J,{key:1,value:"minuta"},{default:o(()=>[D("Minuta")]),_:1})):L("",!0),t(d)?(y(),O(J,{key:2,value:"livro"},{default:o(()=>[D("Livro")]),_:1})):L("",!0),t(d)?(y(),O(J,{key:3,value:"observacao"},{default:o(()=>[D("Observações")]),_:1})):L("",!0),t(d)?(y(),O(J,{key:4,value:"anexo"},{default:o(()=>[D("Anexos")]),_:1})):L("",!0)]),_:1},8,["modelValue"]),e(Ne,{modelValue:t(_),"onUpdate:modelValue":V[1]||(V[1]=n=>oe(_)?_.value=n:null)},{default:o(()=>[e(K,{value:"dados"},{default:o(()=>[e(N,{onSaved:g,ato_token:t($)},null,8,["ato_token"])]),_:1}),t(d)?(y(),O(K,{key:0,value:"partes"},{default:o(()=>[e(S,{ato_token:t($),ato_id:t(c)},null,8,["ato_token","ato_id"])]),_:1})):L("",!0),t(d)?(y(),O(K,{key:1,value:"minuta"},{default:o(()=>[e(a,{onPage:E,onDoc:R,ato_token:t(p)},null,8,["ato_token"])]),_:1})):L("",!0),t(d)?(y(),O(K,{key:2,value:"livro"},{default:o(()=>[e(i,{pages:t(x),ato_token:t(p),document:t(b)},null,8,["pages","ato_token","document"])]),_:1})):L("",!0),t(d)?(y(),O(K,{key:3,value:"observacao"},{default:o(()=>[e(l,{ato_id:t(c)},null,8,["ato_id"])]),_:1})):L("",!0),t(d)?(y(),O(K,{key:4,value:"anexo"},{default:o(()=>[e(T,{ato_token:t(p),ato_id:t(c)},null,8,["ato_token","ato_id"])]),_:1})):L("",!0)]),_:1},8,["modelValue"])]),_:1})}}};export{Xt as default};
