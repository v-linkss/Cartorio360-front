import{_ as se}from"./Bd0rDcUK.js";import{n as ee,q as te,u as oe,r as u,A as L,s as re,B as X,o as g,v as R,w as t,b as e,x as o,V as I,y as W,d as B,z as ae,a as c,c as K,C as le,t as ue,D as Ve,E as Fe,G as We,H as J,I as we,J as ke}from"./DQRVO41G.js";import{u as C}from"./hl9e6ElK.js";import{c as Ce,r as Pe,u as Te}from"./CQi1iAsU.js";import{V as w}from"./BSOatCu6.js";import{V as n}from"./irHrylf1.js";import{V as Q}from"./BPgNIr06.js";import{V as ne}from"./-F8s9n81.js";import{_ as Ge,b as Y,V as Je,d as H,c as Ze}from"./BuU1SgSQ.js";import{_ as Ke,a as Qe,b as Ye,T as He,W as Xe,r as Ee,D as Ae,d as et,c as tt,e as ot}from"./C9aAts6f.js";import{_ as de}from"./5hEBgUG8.js";import{_ as ce,V as me,a as pe,b as _e,c as $e}from"./B5yhZz2A.js";import{V as ge,a as ie,b as Se,c as Be,d as Oe}from"./CvdiJAH5.js";import{V as at}from"./ZVqzvj_t.js";import{_ as ze}from"./CmB_JUnH.js";import{V as fe}from"./CTqIYRdm.js";import{_ as st}from"./DfjuBLsA.js";import"./C3fqABSo.js";import"./CfIfYbNe.js";import"./utOyBKz_.js";import"./ChkoANh_.js";const lt={__name:"Dados",props:{ato_token:{type:String,required:!0}},emits:["saved"],async setup(G,{emit:d}){let m,f;const P=G,A=d,y=ee(),p=te(),D=ae(),{$toast:b}=oe(),z=`${D.public.managemant}/listarSituacoes`,V=`${D.public.managemant}/createAtos`,S=`${D.public.managemant}/getAtosTiposByToken`,M=u(L("user-data").value.cartorio_token),U=u(L("user-service").value.id).value||u(L("user-service").value).value,k=u([]),i=re({dt_abertura:null,status:"EM EDIÇÃO",mne:null}),O={status:{required:Ce.withMessage("O campo é obrigatorio",Pe)}},s=Te(O,i),{data:$}=([m,f]=X(()=>C(`${S}/${P.ato_token}`,{method:"GET"},"$9ZmTYsLk0K")),m=await m,f(),m);async function a(){if(await s.value.$validate()){const{data:_,error:r,status:Z}=await C(V,{method:"POST",body:{ato_tipo_id:$.value.id,cartorio_id:L("user-data").value.cartorio_id,ordemserv_id:U,status:i.status,dt_abertura:i.dt_abertura,mne:i.mne,user_id:L("user-data").value.usuario_id,user_alteracao_id:L("user-data").value.usuario_id}},"$hyq5YcBEjF");Z.value==="success"&&(b.success("Ato registrado com sucesso!"),A("saved",{id:_.value.id,token:_.value.token}))}else b.error("Preencha os campos obrigatorios.")}const{data:l}=([m,f]=X(()=>C(z,{method:"POST",body:{cartorio_token:M.value}},"$S3qwbpImEh")),m=await m,f(),m);k.value=l.value;const T=()=>{const _=p.query.origem||"criar",r=p.query.id;_==="atualizar"?y.push(`/os/atualizar/${r}`):y.push("/os/criar-registro")};return(_,r)=>{const Z=se;return g(),R(ne,null,{default:t(()=>[e(w,{class:"mt-5"},{default:t(()=>[e(n,{cols:"3"},{default:t(()=>[e(Q,{label:"Situação",modelValue:o(i).status,"onUpdate:modelValue":r[0]||(r[0]=h=>o(i).status=h),items:o(k),"item-title":"descricao","item-value":"descricao",required:"","error-messages":o(s).status.$errors.map(h=>h.$message),onBlur:o(s).status.$touch,onInput:o(s).status.$touch},null,8,["modelValue","items","error-messages","onBlur","onInput"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(n,{cols:"5"},{default:t(()=>[e(I,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:o(i).mne,"onUpdate:modelValue":r[1]||(r[1]=h=>o(i).mne=h)},null,8,["modelValue"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(n,{cols:"2"},{default:t(()=>[e(I,{modelValue:o(i).dt_abertura,"onUpdate:modelValue":r[2]||(r[2]=h=>o(i).dt_abertura=h),type:"date",label:"Data Lavratura",disabled:"",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(w,{class:"mb-3"},{default:t(()=>[e(Z,{onClick:T},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>[B("Voltar")]),_:1})]),_:1}),e(W,{class:"ml-10",onClick:a,size:"large",color:"green"},{default:t(()=>[B("Salvar")]),_:1})]),_:1})]),_:1})}}},rt=["onClick"],nt=c("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1),it=[nt],ut=["onClick"],ct=c("img",{style:{width:"30px",height:"30px"},src:$e,alt:"Visualizar"},null,-1),dt=[ct],mt=["onClick"],pt={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},_t={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},vt=["onClick"],ft=c("img",{style:{width:"30px",height:"30px"},src:Ye,alt:"Visualizar"},null,-1),gt=[ft],yt={__name:"Partes",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(G){let d,m;const f=G,P=ee(),A=te(),y=ae(),{$toast:p}=oe(),D=`${y.public.managemant}/pesquisarPessoas`,b=`${y.public.managemant}/listarPapeis`,z=`${y.public.managemant}/getLinkTipo`,V=`${y.public.managemant}/createAtosPessoa`,S=`${y.public.managemant}/getAtosPessoaById`,M=`${y.public.managemant}/updateAtosPessoa`,U=u(L("user-data").value.cartorio_token),k=u([]),i=u([]),O=u([]),s=u(!1),$=u(!1),a=u(!1),l=u(!1),T=u(null),_=u(null),r=u(null),Z=u(null);u(null);const h=u(null),x=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],N=re({papeis:null,nome:null,pessoa:null,documento:null}),{data:ye}=([d,m]=X(()=>C(b,{method:"POST",body:{tipo_ato_token:f.ato_token}},"$fFKndZhA4W")),d=await d,m(),d);O.value=ye.value;async function q(){try{const{data:E,error:v}=await C(D,{method:"POST",body:{cartorio_token:U.value,documento:N.documento,nome:N.nome}},"$o3ZL1rvYrY");E.value.length>0?(k.value=E.value,N.pessoa=k.value[0]):k.value=[]}catch(E){console.error("Erro na requisição",E)}}const ve=()=>{$.value=!0},qe=E=>{i.value=i.value.map(v=>v.id===r.value?{...v,papel:{...v.papel,descricao:E}}:v)},De=E=>{const v=i.value.find(F=>F.pessoa.id===Z.value);v.representante.nome=E},Me=async()=>{const E={pessoa:N.pessoa,papel:O.value.find(F=>F.id===N.papeis),representante:{nome:null}},v=await C(`${S}/${f.ato_id}`,{method:"GET"},"$kXSxUa4grs");for(const F of v.data.value)if(F.pessoa_id===N.pessoa.id&&F.ato_id===f.ato_id&&F.tipo_parte_id===N.papeis){p.error("Pessoa Já Registrada Com Esse Papel!");return}try{const{data:F,error:xe,status:he}=await C(V,{method:"POST",body:{ato_id:f.ato_id,pessoa_id:N.pessoa.id,tipo_parte_id:N.papeis,user_id:L("user-data").value.usuario_id}},"$So3qnQu7ek");he.value==="success"?(E.id=F.value.id,p.success("Pessoa Registrada com Sucesso!"),i.value.push(E)):p.error("Erro ao registrar a pessoa!")}catch{p.error("Erro no servidor. Tente novamente.")}},Ue=async E=>{a.value=!0,h.value=null;const{data:v}=await C(`${z}`,{method:"POST",body:{id:E.pessoa.id,tipo:"ficha"}},"$Q3kbIwtd9t");v.value&&v.value.link?h.value=`data:image/jpeg;base64,${v.value.link}`:h.value=null},Ie=E=>{const v=i.value.filter(F=>F.pessoa.id!==E.pessoa.id).map(F=>({id:F.pessoa.id,nome:F.pessoa.nome}));r.value=E.id,T.value=v,s.value=!0,_.value=E.pessoa.nome,Z.value=E.pessoa.id},Re=E=>{r.value=E.id,l.value=!0,_.value=E.pessoa.nome};async function Ne(E){E.excluido=!E.excluido;try{await C(`${M}/${r.value}`,{method:"PUT",body:JSON.stringify({excluido:E.excluido})},"$9xStKwGd7o")}catch(v){console.error("Erro ao excluir pessoa:",v)}}const je=()=>{const E=A.query.origem||"criar",v=A.query.id;E==="atualizar"?P.push(`/os/atualizar/${v}`):P.push("/os/criar-registro")};return(E,v)=>{const F=Ge,xe=Ke,he=Qe,Le=se;return g(),R(ne,null,{default:t(()=>[e(w,{class:"mt-5"},{default:t(()=>[e(n,{cols:"3"},{default:t(()=>[e(I,{label:"Documento",modelValue:o(N).documento,"onUpdate:modelValue":v[0]||(v[0]=j=>o(N).documento=j)},null,8,["modelValue"])]),_:1}),e(n,{cols:"4"},{default:t(()=>[e(I,{label:"Pessoa",modelValue:o(N).nome,"onUpdate:modelValue":v[1]||(v[1]=j=>o(N).nome=j)},null,8,["modelValue"])]),_:1}),c("div",null,[c("img",{class:"mt-3",src:de,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:q})]),c("div",null,[c("img",{class:"mt-3 ml-2",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:ve})])]),_:1}),e(w,null,{default:t(()=>[e(n,{cols:"4"},{default:t(()=>[e(Q,{label:"Selecione a Pessoa",modelValue:o(N).pessoa,"onUpdate:modelValue":v[2]||(v[2]=j=>o(N).pessoa=j),items:o(k),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"3"},{default:t(()=>[e(Q,{label:"Papel",modelValue:o(N).papeis,"onUpdate:modelValue":v[3]||(v[3]=j=>o(N).papeis=j),items:o(O),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),c("div",null,[c("img",{class:"mt-3",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Me})])]),_:1}),e(w,null,{default:t(()=>[e(n,null,{default:t(()=>[e(me,{style:{height:"465px"},headers:x,items:o(i)},{"item.actions":t(({item:j})=>[e(w,null,{default:t(()=>[c("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:be=>Ue(j),title:"Visualizar Ficha"},it,8,rt),c("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:be=>Re(j),class:"mr-2",title:"Alterar Papel"},dt,8,ut),c("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:be=>Ne(j),title:"Deletar Pessoa"},[j.excluido?(g(),K("img",pt)):(g(),K("img",_t))],8,mt),c("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:be=>Ie(j),title:"Selecionar Representante"},gt,8,vt)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(F,{show:o($),onClose:v[4]||(v[4]=j=>$.value=!1)},null,8,["show"]),e(xe,{representante_nome:o(_),representantes:o(T),ato_id:o(r),show:o(s),onClose:v[5]||(v[5]=j=>s.value=!1),onUpdateRepresentante:De},null,8,["representante_nome","representantes","ato_id","show"]),e(he,{representante_nome:o(_),ato_token:f.ato_token,ato_id:o(r),show:o(l),onClose:v[6]||(v[6]=j=>l.value=!1),onUpdatePapel:qe},null,8,["representante_nome","ato_token","ato_id","show"]),e(ge,{modelValue:o(a),"onUpdate:modelValue":v[8]||(v[8]=j=>le(a)?a.value=j:null),width:"600"},{default:t(()=>[e(ie,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(at,{src:o(h)},null,8,["src"]),e(W,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:v[7]||(v[7]=j=>a.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(w,null,{default:t(()=>[e(Le,{onClick:je},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>[B("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},ht=c("label",null,"Valor",-1),bt={style:{width:"800px","font-weight":"500"}},$t=["onClick"],xt=c("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1),kt=[xt],Vt=["onClick"],wt=c("img",{style:{width:"30px",height:"30px"},src:$e,alt:"Editar"},null,-1),Ct=[wt],Pt=["onClick"],Tt={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Reativar",title:"Reativar"},Et={key:1,src:_e,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},At=c("label",null,"Valor",-1),St={__name:"Bens",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(G){let d,m;const f=G,P=ee(),A=te(),y=ae(),{$toast:p}=oe(),D=`${y.public.managemant}/atos_bens`,b=`${y.public.managemant}/atos_bens`,z=`${y.public.managemant}/atos_bens`,V=`${y.public.managemant}/listarTipoBens`,S=u(L("user-data").value.cartorio_token),M=u(L("user-data").value.usuario_id).value,U=u([]),k=u([]),i=u(!1),O=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"valor_mercado"},{align:"end",value:"actions"}],s=re({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),$=async()=>{if(!s.vlr_alienacao&&!s.descricao){p.error("Os campos Descrição e Valor são Obrigatorios!");return}const{data:h,status:x}=await C(`${D}`,{method:"POST",body:{descricao:s.descricao,tipo_id:s.tipo_id,valor_mercado:s.vlr_alienacao,user_id:M,ato_id:Number.parseInt(f.ato_id),token:f.ato_token}},"$TVfAAEMyym");x.value==="success"&&(p.success("Bem registrado com sucesso!"),U.value.push(h.value),Object.assign(s,{vlr_alienacao:null,descricao:null,tipo_id:null}))},a=async h=>{const{status:x}=await C(`${b}/${h}`,{method:"PUT",body:{descricao:k.value.descricao,tipo_id:k.value.tipo_id,valor_mercado:k.value.valor_mercado}},"$TRbOfiOtJ9");x.value==="success"&&(p.success("Bem Atualizado com sucesso!"),i.value=!1)},l=h=>{const x=U.value.find(N=>N.id===h);x&&(k.value=x,i.value=!0)},{data:T}=([d,m]=X(()=>C(`${V}`,{method:"POST",body:{cartorio_token:S.value,imoveis:!1}},"$rrOfkMLqML")),d=await d,m(),d);s.tiposBens=T.value;const{data:_}=([d,m]=X(()=>C(`${z}/${f.ato_id}`,{method:"GET"},"$qhjPuJWFwD")),d=await d,m(),d);U.value=_.value;async function r(h){h.excluido=!h.excluido;try{await C(`${b}/${h.id}`,{method:"PUT",body:JSON.stringify({excluido:h.excluido})},"$1s7uo0EeAe")}catch(x){console.error("Erro ao excluir pessoa:",x)}}const Z=()=>{const h=A.query.origem||"criar",x=A.query.id;h==="atualizar"?P.push(`/os/atualizar/${x}`):P.push("/os/criar-registro")};return(h,x)=>{const N=ze,ye=se;return g(),R(ne,null,{default:t(()=>[e(n,{class:"mt-5",cols:"12"},{default:t(()=>[e(fe,{label:"Descrição",modelValue:o(s).descricao,"onUpdate:modelValue":x[0]||(x[0]=q=>o(s).descricao=q)},null,8,["modelValue"])]),_:1}),e(w,{class:"ml-1 mb-3"},{default:t(()=>[e(n,{class:"mt-6",cols:"8"},{default:t(()=>[e(Q,{label:"Selecione o Tipo",items:o(s).tiposBens,modelValue:o(s).tipo_id,"onUpdate:modelValue":x[1]||(x[1]=q=>o(s).tipo_id=q),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(n,{class:"ml-5",cols:"3"},{default:t(()=>[ht,e(N,{modelValue:o(s).vlr_alienacao,"onUpdate:modelValue":x[2]||(x[2]=q=>o(s).vlr_alienacao=q)},null,8,["modelValue"])]),_:1}),c("div",null,[c("img",{class:"mt-7 ml-4",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:$})])]),_:1}),e(w,null,{default:t(()=>[e(n,null,{default:t(()=>[e(me,{style:{height:"465px"},headers:O,items:o(U)},{"item.descricao":t(({item:q})=>[c("h3",bt,ue(q.descricao),1)]),"item.actions":t(({item:q})=>[e(w,{style:{"margin-top":"-8px"},justify:"end"},{default:t(()=>[c("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ve=>h.redirectToFicha(q),title:"Visualizar Ficha"},kt,8,$t),c("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ve=>l(q.id),title:"Alterar Papel"},Ct,8,Vt),c("div",{style:{cursor:"pointer"},class:"mr-2",onClick:ve=>r(q),title:"Deletar Pessoa"},[q.excluido?(g(),K("img",Tt)):(g(),K("img",Et))],8,Pt)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(ge,{modelValue:o(i),"onUpdate:modelValue":x[8]||(x[8]=q=>le(i)?i.value=q:null),"max-width":"600px"},{default:t(()=>[e(ie,null,{default:t(()=>[e(Se,{style:{color:"green"}},{default:t(()=>[B("Atualizar Bem")]),_:1}),e(Be,null,{default:t(()=>[e(n,{class:"mt-1",cols:"12"},{default:t(()=>[e(fe,{label:"Descrição",modelValue:o(k).descricao,"onUpdate:modelValue":x[3]||(x[3]=q=>o(k).descricao=q)},null,8,["modelValue"])]),_:1}),e(w,null,{default:t(()=>[e(n,{class:"mt-6 ml-3",cols:"8"},{default:t(()=>[e(Q,{label:"Selecione o Tipo",items:o(s).tiposBens,modelValue:o(k).tipo_id,"onUpdate:modelValue":x[4]||(x[4]=q=>o(k).tipo_id=q),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(n,{class:"ml-5",cols:"3"},{default:t(()=>[At,e(N,{modelValue:o(k).valor_mercado,"onUpdate:modelValue":x[5]||(x[5]=q=>o(k).valor_mercado=q)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Oe,null,{default:t(()=>[e(Ve),e(W,{color:"green",text:"",onClick:x[6]||(x[6]=q=>i.value=!1)},{default:t(()=>[B("Cancelar")]),_:1}),e(W,{color:"green",text:"",onClick:x[7]||(x[7]=q=>a(o(k).id))},{default:t(()=>[B("Salvar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(w,null,{default:t(()=>[e(ye,{onClick:Z},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>[B("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Bt={style:{width:"800px","font-weight":"500"}},Ot=["onClick"],zt=c("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1),qt=[zt],Dt=["onClick"],Mt=c("img",{style:{width:"30px",height:"30px"},src:$e,alt:"Editar"},null,-1),Ut=[Mt],It=["onClick"],Rt={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Reativar",title:"Reativar"},Nt={key:1,src:_e,alt:"Excluir",style:{width:"30px",height:"30px"},title:"Excluir"},jt=c("label",null,"Valor",-1),Lt={__name:"Imoveis",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},async setup(G){let d,m;const f=ee(),P=te(),A=ae(),{$toast:y}=oe();`${A.public.managemant}`;const p=`${A.public.managemant}/atos_bens`;`${A.public.managemant}`;const D=`${A.public.managemant}/listarTipoBens`,b=u(L("user-data").value.cartorio_token);u(L("user-data").value.usuario_id).value;const z=u([]),V=u([]),S=u(!1),M=[{title:"Descrição",align:"start",key:"descricao"},{title:"Valor",align:"end",key:"valor_mercado"},{align:"end",value:"actions"}],U=re({vlr_alienacao:null,descricao:null,tipo_id:null,tiposBens:[]}),k=async a=>{const{status:l}=await C(`${p}/${a}`,{method:"PUT",body:{descricao:V.value.descricao,tipo_id:V.value.tipo_id,valor_mercado:V.value.valor_mercado}},"$5vOsfPutkW");l.value==="success"&&(y.success("Bem Atualizado com sucesso!"),S.value=!1)},i=a=>{const l=z.value.find(T=>T.id===a);l&&(V.value=l,S.value=!0)},{data:O}=([d,m]=X(()=>C(`${D}`,{method:"POST",body:{cartorio_token:b.value,imoveis:!1}},"$RZpQXdI40b")),d=await d,m(),d);U.tiposBens=O.value;async function s(a){a.excluido=!a.excluido;try{await C(`${p}/${a.id}`,{method:"PUT",body:JSON.stringify({excluido:a.excluido})},"$2X0Zo2w1OO")}catch(l){console.error("Erro ao excluir pessoa:",l)}}const $=()=>{const a=P.query.origem||"criar",l=P.query.id;a==="atualizar"?f.push(`/os/atualizar/${l}`):f.push("/os/criar-registro")};return(a,l)=>{const T=ze,_=se;return g(),R(ne,null,{default:t(()=>[e(n,{class:"mt-5",cols:"12"},{default:t(()=>[e(fe,{label:"Descrição",modelValue:o(U).descricao,"onUpdate:modelValue":l[0]||(l[0]=r=>o(U).descricao=r)},null,8,["modelValue"])]),_:1}),e(w,null,{default:t(()=>[e(n,{cols:"3"},{default:t(()=>[e(Q,{label:"Selecione o Tipo de Registro"})]),_:1}),e(n,{cols:"2"},{default:t(()=>[e(I,{label:"Cartório"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"Matricula"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"Letra"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"Natureza"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"CIB"})]),_:1}),e(n,{cols:"3"},{default:t(()=>[e(Q,{label:"Selecione a Cidade"})]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(n,null,{default:t(()=>[e(I,{label:"Quadra"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"Lote"})]),_:1}),e(n,{cols:"5"},{default:t(()=>[e(Q,{label:"Logradouro"})]),_:1}),e(n,{cols:"1"},{default:t(()=>[e(I,{label:"N*"})]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(n,null,{default:t(()=>[e(I,{label:"Bairro"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"CEP"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"Complemento"})]),_:1}),e(n,{cols:"3"},{default:t(()=>[e(Q,{label:"Selecione o tipo de imovel"})]),_:1}),e(n,{cols:"3"},{default:t(()=>[e(I,{label:"Inscrição Municipal"})]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(n,{cols:"3"},{default:t(()=>[e(Q,{label:"Selecione a Situação"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"Valor Alienação"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"Valor Avaliação"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"Valor Mercado"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"%ITB"})]),_:1}),e(n,null,{default:t(()=>[e(I,{label:"Valor ITB"})]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(n,null,{default:t(()=>[e(me,{style:{height:"465px"},headers:M,items:o(z)},{"item.descricao":t(({item:r})=>[c("h3",Bt,ue(r.descricao),1)]),"item.actions":t(({item:r})=>[e(w,{style:{"margin-top":"-8px"},justify:"end"},{default:t(()=>[c("div",{style:{cursor:"pointer"},class:"mr-2",onClick:Z=>a.redirectToFicha(r),title:"Visualizar Ficha"},qt,8,Ot),c("div",{style:{cursor:"pointer"},class:"mr-2",onClick:Z=>i(r.id),title:"Alterar Papel"},Ut,8,Dt),c("div",{style:{cursor:"pointer"},class:"mr-2",onClick:Z=>s(r),title:"Deletar Pessoa"},[r.excluido?(g(),K("img",Rt)):(g(),K("img",Nt))],8,It)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(ge,{modelValue:o(S),"onUpdate:modelValue":l[6]||(l[6]=r=>le(S)?S.value=r:null),"max-width":"600px"},{default:t(()=>[e(ie,null,{default:t(()=>[e(Se,{style:{color:"green"}},{default:t(()=>[B("Atualizar Bem")]),_:1}),e(Be,null,{default:t(()=>[e(n,{class:"mt-1",cols:"12"},{default:t(()=>[e(fe,{label:"Descrição",modelValue:o(V).descricao,"onUpdate:modelValue":l[1]||(l[1]=r=>o(V).descricao=r)},null,8,["modelValue"])]),_:1}),e(w,null,{default:t(()=>[e(n,{class:"mt-6 ml-3",cols:"8"},{default:t(()=>[e(Q,{label:"Selecione o Tipo",items:o(U).tiposBens,modelValue:o(V).tipo_id,"onUpdate:modelValue":l[2]||(l[2]=r=>o(V).tipo_id=r),"item-title":"descricao","item-value":"id"},null,8,["items","modelValue"])]),_:1}),e(n,{class:"ml-5",cols:"3"},{default:t(()=>[jt,e(T,{modelValue:o(V).valor_mercado,"onUpdate:modelValue":l[3]||(l[3]=r=>o(V).valor_mercado=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Oe,null,{default:t(()=>[e(Ve),e(W,{color:"green",text:"",onClick:l[4]||(l[4]=r=>S.value=!1)},{default:t(()=>[B("Cancelar")]),_:1}),e(W,{color:"green",text:"",onClick:l[5]||(l[5]=r=>k(o(V).id))},{default:t(()=>[B("Salvar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(w,null,{default:t(()=>[e(_,{onClick:$},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>[B("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},Ft={key:0,class:"loading-overlay"},Wt="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",Gt={__name:"Minuta",props:{ato_token:{type:String,required:!0}},emits:["page","doc"],setup(G,{emit:d}){const m=G;Fe("DocumentEditorContainer",[He,Xe]);const f=ae(),{$toast:P}=oe(),A=ee(),y=te(),p=d;Ee(`${f.public.docEditor}`);const D=`${f.public.managemant}/upload`,b=u(null),z=u(!1),V=async()=>{const $=await b.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),a=new FileReader;a.onload=()=>{const l=a.result;p("doc",l)},a.readAsText($)},S=async()=>{z.value=!0;try{const $=await b.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),a=new FormData;a.append("file",$,"anexo.docx"),a.append("cartorio_token",L("user-data").value.cartorio_token),a.append("token",m.ato_token),a.append("tipo","ato_minuta");const{data:l,status:T}=await C(D,{method:"POST",body:a},"$071xxdqs20");if(T.value==="success"){P.success("Documento enviado!");const r=b.value.ej2Instances.documentEditor.pageCount;V(),p("page",r)}else P.error("Erro ao enviar documento para o sistema.")}catch(s){P.error("Erro ao salvar documento."),console.error(s)}finally{z.value=!1}},M=async()=>{i(!0);try{await U(),i(!0);const{data:s,status:$}=await C(substituirModelo,{method:"POST",body:{ato_token:m.ato_token}},"$0ktpWliD4l");s.value&&k(s.value)}catch(s){console.error("Erro ao gerar a minuta:",s),P.error("Ocorreu um erro ao gerar a minuta.")}finally{i(!1)}},U=async()=>{try{const{data:s}=await C(baixarDocumento,{method:"POST",body:{bucket:"qvgjz",path:"provider/modeloAto.sfdt"}},"$jXVvQjEE6u"),$=await fetchBlobFromMinIO(s.value);if($){const a=new FileReader;a.onload=()=>{const l=a.result;b.value.ej2Instances.documentEditor.open(l),p("doc",l)},a.readAsText($)}}catch(s){console.error("Erro ao carregar o modelo de minuta:",s),P.error("Falha ao carregar o modelo de minuta.")}},k=s=>{const $=b.value.ej2Instances.documentEditor,a=l=>{for(const[T,_]of Object.entries(l))if(/^<<.+>>$/.test(T))try{$.search.findAll(T),$.search.searchResults.length>0&&$.search.searchResults.replaceAll(_)}catch(r){console.error(`Erro ao substituir o marcador ${T}:`,r)}else if(T==="partes"&&Array.isArray(_)&&_.length>0)for(const r of _)typeof r=="object"&&a(r)};a(s)},i=s=>{z.value=s},O=()=>{const s=y.query.origem||"criar",$=y.query.id;s==="atualizar"?A.push(`/os/atualizar/${$}`):A.push("/os/criar-registro")};return(s,$)=>{const a=se;return g(),K(we,null,[e(o(Ae),{height:"900px",ref_key:"documentEditorContainer",ref:b,serviceUrl:Wt,enableToolbar:!0,enableWordExport:!0},null,512),o(z)?(g(),K("div",Ft,[e(We,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):J("",!0),e(w,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(a,{class:"mr-4"},{default:t(()=>[e(W,{size:"large",onClick:O,color:"red"},{default:t(()=>[B("Voltar")]),_:1})]),_:1}),e(W,{size:"large",color:"green",onClick:S,disabled:o(z)},{default:t(()=>[B("Salvar")]),_:1},8,["disabled"]),e(W,{class:"ml-4",size:"large",color:"blue",onClick:M},{default:t(()=>[B("Gerar Minuta")]),_:1})]),_:1})],64)}}},Jt={class:"d-flex align-center justify-center"},Zt=["innerHTML"],Kt={__name:"Livro",props:{ato_token:{type:String,required:!0},pages:{type:Number,required:!0},document:{type:String,required:!0}},setup(G){const d=G,m=ae();Ee(`${m.public.docEditor}`);const{$toast:f}=oe(),P=ee(),A=te(),y=`${m.public.managemant}/lavrarAto`,p=u("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),D=u(!1),b=u(null),z=u(null),V=u(null),S=async()=>{try{const{data:i,status:O}=await C(y,{method:"POST",body:{ato_token:d.ato_token,qtd_paginas:d.pages}},"$ZKnVBNYxp9");O.value==="success"?(b.value=i.value,z.value=i.value[0].selo,f.success("Ato lavrado com sucesso!")):f.error("Falha ao lavrar o ato.")}catch{f.error("Erro ao conectar com o servidor.")}},M=()=>{D.value=!1,S()},U=function(){V.value.ej2Instances.documentEditor.open(d.document)},k=()=>{const i=A.query.origem||"criar",O=A.query.id;i==="atualizar"?P.push(`/os/atualizar/${O}`):P.push("/os/criar-registro")};return(i,O)=>{const s=tt;return g(),K(we,null,[e(w,null,{default:t(()=>[e(n,null,{default:t(()=>[(g(),R(o(Ae),{restrictEditing:!0,enableToolbar:!1,created:d.document?U:null,ref_key:"documentEditorContainer",ref:V,height:"850px",width:"850px",key:d.document},null,8,["created"]))]),_:1}),e(n,null,{default:t(()=>[c("div",Jt,[c("div",null,[c("img",{onClick:O[0]||(O[0]=$=>D.value=!0),class:"ml-15",style:{height:"40px",width:"40px",cursor:"pointer","margin-top":"350px"},src:et}),o(b)?(g(),R(ie,{key:0,class:"mr-16"},{default:t(()=>[e(w,{"no-gutters":""},{default:t(()=>[e(n,null,{default:t(()=>[e(ke,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[B(" Livro: "+ue(o(b)[0].livro_numero),1)]),_:1})]),_:1}),e(n,null,{default:t(()=>[e(ke,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[B(" Folhas : "+ue(o(b)[0].pagina_inicial)+" Á "+ue(o(b)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),c("div",{innerHTML:o(z)},null,8,Zt)]),_:1})):J("",!0)])])]),_:1})]),_:1}),e(W,{color:"red",size:"large",onClick:k},{default:t(()=>[B("Voltar")]),_:1}),e(s,{show:o(D),condMessage:o(p),onClose:O[1]||(O[1]=$=>D.value=!1),onConfirm:M},null,8,["show","condMessage"])],64)}}},Qt=["onClick"],Yt={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},Ht={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Xt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(G){let d,m;const f=G,P=ee(),A=te(),y=ae(),{$toast:p}=oe(),D=`${y.public.managemant}/listarEscrevente`,b=`${y.public.managemant}/getAtosTiposByToken`,z=`${y.public.managemant}/createAtosObservacao`,V=`${y.public.managemant}/updateAtosObservacao`,S=u(L("user-data").value.cartorio_token),M=u([]),U=u([]),k=[{title:"Data",align:"start",key:"data"},{title:"Escrevente",align:"start",key:"escrevente"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],i=re({observacao:null}),O={observacao:{required:Ce.withMessage("O campo é obrigatorio",Pe)}},s=Te(O,i);[d,m]=X(()=>C(`${b}/${f.ato_token}`,{method:"GET"},"$aJM1TL1buW")),d=await d,m();async function $(){if(await s.value.$validate()){const{data:_,error:r,status:Z}=await C(z,{method:"POST",body:{ato_id:f.ato_id,observacao:i.observacao,user_id:L("user-data").value.usuario_id}},"$dMg99jeUNP");Z.value==="success"&&(M.value.push({data:st(_.value.created,"dd/mm/yyyy hh:mm"),observacao:_.value.observacao,id:_.value.id,escrevente:L("user-data").value.nome}),p.success("Observação registrada com sucesso"))}else p.error("Preencha os campos obrigatorios.")}async function a(_){_.excluido=!_.excluido;try{await C(`${V}/${_.id}`,{method:"PUT",body:JSON.stringify({excluido:_.excluido})},"$B6PdRx8Gp4")}catch(r){console.error("Erro ao excluir observacao:",r)}}const{data:l}=([d,m]=X(()=>C(D,{method:"POST",body:{cartorio_token:S}},"$xFHPGua26S")),d=await d,m(),d);U.value=l.value[0].func_json_escreventes;const T=()=>{const _=A.query.origem||"criar",r=A.query.id;_==="atualizar"?P.push(`/os/atualizar/${r}`):P.push("/os/criar-registro")};return(_,r)=>{const Z=se;return g(),R(ne,null,{default:t(()=>[e(w,{class:"mt-5"},{default:t(()=>[e(I,{label:"Observação",modelValue:o(i).observacao,"onUpdate:modelValue":r[0]||(r[0]=h=>o(i).observacao=h),required:"","error-messages":o(s).observacao.$errors.map(h=>h.$message),onBlur:o(s).observacao.$touch,onInput:o(s).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),c("div",null,[c("img",{class:"btn-pointer ml-2",src:ce,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:$})])]),_:1}),e(w,null,{default:t(()=>[e(n,null,{default:t(()=>[e(me,{style:{height:"465px"},headers:k,items:o(M)},{"item.actions":t(({item:h})=>[c("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:x=>a(h),title:"Deletar Observação"},[h.excluido?(g(),K("img",Yt)):(g(),K("img",Ht))],8,Qt)]),_:1},8,["items"])]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(Z,{onClick:T},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>[B("Voltar")]),_:1})]),_:1})]),_:1})]),_:1})}}},eo=c("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:ot,alt:"Escanear"},null,-1),to=[eo],oo=c("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:ce,alt:"Criar"},null,-1),ao=[oo],so=["onClick"],lo=c("img",{style:{width:"30px",height:"30px"},src:de,alt:"Visualizar"},null,-1),ro=[lo],no=["onClick"],io={key:0,style:{width:"30px",height:"30px"},src:pe,alt:"Visualizar",title:"Reativar"},uo={key:1,src:_e,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},co={__name:"Anexos",props:{ato_token:{type:String,required:!0},ato_id:{type:Number,required:!0}},setup(G){const d=G,m=ae(),{$toast:f}=oe(),P=ee(),A=te(),y=`${m.public.biometria}/run-scanner`,p=`${m.public.managemant}/atos_anexos`,D=`${m.public.managemant}/atos_anexos`,b=u(!1),z=u([]),V=re({descricao:""}),S=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}];async function M(){try{await U(),await k()}catch(a){console.error("Erro ao executar scanner ou listar arquivos:",a)}}async function U(){try{const{data:a}=await C(y,{method:"GET"},"$WazoKp68Tw")}catch(a){f.error("Erro ao acionar o scanner:",a)}}async function k(){try{const{data:a,status:l}=await C("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:d.ato_token,cartorio_token:L("user-data").value.cartorio_token}},"$03Wxiia3aI")}catch(a){console.error("Erro ao enviar o arquivo:",a)}}const i=async()=>{b.value=!0},O=async()=>{const{data:a,error:l,status:T}=await C(p,{method:"POST",body:{ato_id:d.ato_id,descricao:V.descricao,user_id:L("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$D2PdkmlmwW");T.value==="success"&&(f.success("Anexo registrado com sucesso!"),z.value.push(a.value))};async function s(a){a.excluido=!a.excluido;try{await C(`${D}/${a.id}`,{method:"PUT",body:JSON.stringify({excluido:a.excluido})},"$WyW0hasRPI")}catch(l){console.error("Erro ao excluir pessoa:",l)}}const $=()=>{const a=A.query.origem||"criar",l=A.query.id;a==="atualizar"?P.push(`/os/atualizar/${l}`):P.push("/os/criar-registro")};return(a,l)=>{const T=se;return g(),R(ne,null,{default:t(()=>[e(w,null,{default:t(()=>[e(n,{cols:"5"},{default:t(()=>[e(I,{modelValue:o(V).descricao,"onUpdate:modelValue":l[0]||(l[0]=_=>o(V).descricao=_),label:"Descrição"},null,8,["modelValue"])]),_:1}),c("div",{onClick:M,title:"Escanear"},to),c("div",{onClick:O,title:"Criar"},ao)]),_:1}),e(me,{headers:S,items:o(z),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:_})=>[e(w,null,{default:t(()=>[c("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:r=>i(_),title:"Visualizar Anexo"},ro,8,so),c("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:r=>s(_),title:"Deletar Pessoa"},[_.excluido?(g(),K("img",io)):(g(),K("img",uo))],8,no)]),_:2},1024)]),_:1},8,["items"]),e(ge,{modelValue:o(b),"onUpdate:modelValue":l[2]||(l[2]=_=>le(b)?b.value=_:null),width:"600"},{default:t(()=>[e(ie,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(W,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:l[1]||(l[1]=_=>b.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(T,{onClick:$},{default:t(()=>[e(W,{size:"large",color:"red"},{default:t(()=>[B("Voltar")]),_:1})]),_:1})]),_:1})}}},Oo={__name:"procuracao",props:{ato_token:{type:String,required:!0}},setup(G){const d=G,m=u(null),f=u(null),P=u(null),A=u(null),y=u(null),p=u(!1),D=u(d.ato_token),b=({id:S,token:M})=>{m.value=S,f.value=M,p.value=!0},z=S=>{P.value=S},V=S=>{A.value=S};return(S,M)=>{const U=lt,k=yt,i=St,O=Lt,s=Gt,$=Kt,a=Xt,l=co;return g(),R(ie,{width:"1300"},{default:t(()=>[e(Je,{modelValue:o(y),"onUpdate:modelValue":M[0]||(M[0]=T=>le(y)?y.value=T:null),"bg-color":"#f5f2f2"},{default:t(()=>[e(Y,{value:"dados"},{default:t(()=>[B("Dados")]),_:1}),o(p)?(g(),R(Y,{key:0,value:"partes"},{default:t(()=>[B("Partes")]),_:1})):J("",!0),o(p)?(g(),R(Y,{key:1,value:"bens"},{default:t(()=>[B("Bens")]),_:1})):J("",!0),o(p)?(g(),R(Y,{key:2,value:"imoveis"},{default:t(()=>[B("Imoveis")]),_:1})):J("",!0),o(p)?(g(),R(Y,{key:3,value:"minuta"},{default:t(()=>[B("Minuta")]),_:1})):J("",!0),o(p)?(g(),R(Y,{key:4,value:"livro"},{default:t(()=>[B("Livro")]),_:1})):J("",!0),o(p)?(g(),R(Y,{key:5,value:"observacao"},{default:t(()=>[B("Observações")]),_:1})):J("",!0),o(p)?(g(),R(Y,{key:6,value:"anexo"},{default:t(()=>[B("Anexos")]),_:1})):J("",!0)]),_:1},8,["modelValue"]),e(Ze,{modelValue:o(y),"onUpdate:modelValue":M[1]||(M[1]=T=>le(y)?y.value=T:null)},{default:t(()=>[e(H,{value:"dados"},{default:t(()=>[e(U,{onSaved:b,ato_token:o(D)},null,8,["ato_token"])]),_:1}),o(p)?(g(),R(H,{key:0,value:"partes"},{default:t(()=>[e(k,{ato_token:o(D),ato_id:o(m)},null,8,["ato_token","ato_id"])]),_:1})):J("",!0),o(p)?(g(),R(H,{key:1,value:"bens"},{default:t(()=>[e(i,{ato_token:o(f),ato_id:o(m)},null,8,["ato_token","ato_id"])]),_:1})):J("",!0),o(p)?(g(),R(H,{key:2,value:"imoveis"},{default:t(()=>[e(O,{ato_token:o(f),ato_id:o(m)},null,8,["ato_token","ato_id"])]),_:1})):J("",!0),o(p)?(g(),R(H,{key:3,value:"minuta"},{default:t(()=>[e(s,{onPage:z,onDoc:V,ato_token:o(f)},null,8,["ato_token"])]),_:1})):J("",!0),o(p)?(g(),R(H,{key:4,value:"livro"},{default:t(()=>[e($,{pages:o(P),ato_token:o(f),document:o(A)},null,8,["pages","ato_token","document"])]),_:1})):J("",!0),o(p)?(g(),R(H,{key:5,value:"observacao"},{default:t(()=>[e(a,{ato_id:o(m)},null,8,["ato_id"])]),_:1})):J("",!0),o(p)?(g(),R(H,{key:6,value:"anexo"},{default:t(()=>[e(l,{ato_token:o(f),ato_id:o(m)},null,8,["ato_token","ato_id"])]),_:1})):J("",!0)]),_:1},8,["modelValue"])]),_:1})}}};export{Oo as default};
