import{r as O,H as W,C as j,u as G,D as H,m as b,I as J,L as Q,G as k,w as d,s as K,o as q,a as X,b as l,d as p,v as a,x as A,V as r,M as Y,A as c,J as Z}from"./aJ_WZ4nw.js";import{u as h,V as s}from"./ZaYfHWMo.js";import{_ as ee,f as le}from"./CVilXGDu.js";import{V as ae}from"./CKpJHb8H.js";import{a as x,V as oe,c as B,b as te}from"./C_ikt7qB.js";import{V as w}from"./CQHGIWG3.js";import{V as u}from"./C8QNugQU.js";import{V as f}from"./Y2xNy7f6.js";import"./C7t2x4ux.js";import"./CtoEF5MP.js";import"./BU2dSOsY.js";import"./DnN6bryi.js";const Ie={__name:"[id]",emits:["saved","close-modal"],async setup(de,{emit:ue}){let v,z;const m=O("dados"),I=W().params.id,U=j(),n=K(),{$toast:g}=G(),T=`${n.public.auth}/service/gerencia/listar_situacao_matriculas`,D=`${n.public.auth}/service/gerencia/natureza_imoveis`,L=`${n.public.auth}/service/gerencia/tipo_logradouros`,M=`${n.public.auth}/service/gerencia/listarCidades`,N=`${n.public.auth}/service/gerencia/livro`,E=`${n.public.auth}/service/gerencia/matriculas`,t=H({numero:null,protocolo:null,livro:null,folhas:null,data:null,descricao:null,cnm:null,livro_id:null,observacao:null,inscricao_municipal:null,situacao_id:null,tabvalores_natureza_id:null,tabvalores_tipologradouro_id:null,end_logradouro:null,end_logradouro_numero:null,end_bairro:null,end_cidade_id:null,end_cep:null,end_complemento:null,end_quadra:null,end_lote:null,pagina_inicial:null,pagina_final:null,user_alteracao_id:b("user-data").value.usuario_id}),{data:V,status:ie,pending:P,error:ne}=([v,z]=J(()=>h("cliente-dados",R)),v=await v,z(),v);async function R(){const i=b("auth_token");try{const[e,$,o,S,F,_]=await Promise.all([$fetch(`${T}`,{method:"POST",body:{cartorio_token:b("user-data").value.cartorio_token},headers:{Authorization:`Bearer ${i.value}`}}),$fetch(`${D}`,{headers:{Authorization:`Bearer ${i.value}`}}),$fetch(`${L}`,{headers:{Authorization:`Bearer ${i.value}`}}),$fetch(`${M}`,{headers:{Authorization:`Bearer ${i.value}`}}),$fetch(`${N}`,{headers:{Authorization:`Bearer ${i.value}`}}),$fetch(`${E}/${I}`,{headers:{Authorization:`Bearer ${i.value}`}})]);return _.data&&(_.data=ee(_.data,"dd/mm/yyyy")),Object.assign(t,_),{situacaoItens:e,naturezaImoveisItens:$,tipoLogradouroItens:o,cidadesItens:S,livroItens:F}}catch(e){return console.error("Erro ao carregar dados:",e),{situacaoItens:[],naturezaImoveisItens:[],tipoLogradouroItens:[],cidadesItens:[],livroItens:[]}}}async function y(){try{const i=b("auth_token");t.data&&(t.data=le(t.data)),(await $fetch(`${n.public.auth}/service/gerencia/matriculas/${I}`,{method:"PUT",body:t,headers:{Authorization:`Bearer ${i.value}`}})).statusCode===500?g.error("Erro ao cadastrar Matricula."):(g.success("Matrícula atualizada com sucesso!"),U.push("/matriculas/lista"))}catch(i){console.log("Erro ao Atualizar:",i),g.error("Erro ao Atualizar. Tente novamente.")}}function C(){U.push("/matriculas/lista")}return(i,e)=>{const $=Q("mask");return q(),k(ae,{width:"1300"},{default:d(()=>[e[31]||(e[31]=X("h1",{style:{"background-color":"#f5f2f2",color:"#525050",padding:"5px 0px 0px 20px"}}," Atualização de Matriculas ",-1)),l(oe,{modelValue:a(m),"onUpdate:modelValue":e[0]||(e[0]=o=>A(m)?m.value=o:null),"bg-color":"#f5f2f2"},{default:d(()=>[l(x,{value:"dados"},{default:d(()=>e[25]||(e[25]=[p("Dados")])),_:1}),l(x,{value:"enderecos"},{default:d(()=>e[26]||(e[26]=[p("Endereço")])),_:1})]),_:1},8,["modelValue"]),l(te,{modelValue:a(m),"onUpdate:modelValue":e[24]||(e[24]=o=>A(m)?m.value=o:null)},{default:d(()=>[l(B,{value:"dados"},{default:d(()=>[a(P)?Z("",!0):(q(),k(w,{key:0},{default:d(()=>[l(s,null,{default:d(()=>[l(u,{md:"6"},{default:d(()=>[l(r,{modelValue:a(t).numero,"onUpdate:modelValue":e[1]||(e[1]=o=>a(t).numero=o),label:"Matrícula",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).protocolo,"onUpdate:modelValue":e[2]||(e[2]=o=>a(t).protocolo=o),label:"Protocolo",required:"",disabled:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(f,{modelValue:a(t).livro_id,"onUpdate:modelValue":e[3]||(e[3]=o=>a(t).livro_id=o),items:a(V).livroItens.data,label:"Livro","item-title":"descricao","item-value":"id",disabled:""},null,8,["modelValue","items"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).pagina_inicial,"onUpdate:modelValue":e[4]||(e[4]=o=>a(t).pagina_inicial=o),modelModifiers:{number:!0},label:"Folha inicial",type:"number",required:"",min:"0",disabled:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).pagina_final,"onUpdate:modelValue":e[5]||(e[5]=o=>a(t).pagina_final=o),modelModifiers:{number:!0},label:"Folha Final",type:"number",min:"0",disabled:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:d(()=>[Y(l(r,{modelValue:a(t).data,"onUpdate:modelValue":e[6]||(e[6]=o=>a(t).data=o),placeholder:"dd/mm/yyyy",label:"Data"},null,8,["modelValue"]),[[$,"##/##/####"]])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(f,{modelValue:a(t).situacao_id,"onUpdate:modelValue":e[7]||(e[7]=o=>a(t).situacao_id=o),items:a(V).situacaoItens,label:"Situação","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).descricao,"onUpdate:modelValue":e[8]||(e[8]=o=>a(t).descricao=o),label:"Descrição",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).cnm,"onUpdate:modelValue":e[9]||(e[9]=o=>a(t).cnm=o),label:"CNM",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).observacao,"onUpdate:modelValue":e[10]||(e[10]=o=>a(t).observacao=o),label:"Observação",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{class:"mb-3"},{default:d(()=>[l(c,{onClick:C,size:"large",color:"red"},{default:d(()=>e[27]||(e[27]=[p("Voltar")])),_:1}),l(c,{onClick:e[11]||(e[11]=o=>y()),class:"ml-4",size:"large",color:"green"},{default:d(()=>e[28]||(e[28]=[p("Salvar")])),_:1})]),_:1})]),_:1}))]),_:1}),l(B,{value:"enderecos"},{default:d(()=>[l(w,null,{default:d(()=>[l(s,null,{default:d(()=>[l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).inscricao_municipal,"onUpdate:modelValue":e[12]||(e[12]=o=>a(t).inscricao_municipal=o),label:"Inscrição Municipal",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(f,{modelValue:a(t).tabvalores_natureza_id,"onUpdate:modelValue":e[13]||(e[13]=o=>a(t).tabvalores_natureza_id=o),items:a(V).naturezaImoveisItens,label:"Natureza Imovel","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(f,{modelValue:a(t).tabvalores_tipologradouro_id,"onUpdate:modelValue":e[14]||(e[14]=o=>a(t).tabvalores_tipologradouro_id=o),items:a(V).tipoLogradouroItens,label:"Tipo de Logradouro","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),l(s,null,{default:d(()=>[l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).end_logradouro,"onUpdate:modelValue":e[15]||(e[15]=o=>a(t).end_logradouro=o),label:"Endereço",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).end_logradouro_numero,"onUpdate:modelValue":e[16]||(e[16]=o=>a(t).end_logradouro_numero=o),label:"Numero",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).end_bairro,"onUpdate:modelValue":e[17]||(e[17]=o=>a(t).end_bairro=o),label:"Bairro",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,null,{default:d(()=>[l(u,{md:"4"},{default:d(()=>[l(f,{modelValue:a(t).end_cidade_id,"onUpdate:modelValue":e[18]||(e[18]=o=>a(t).end_cidade_id=o),items:a(V).cidadesItens,label:"Cidade","item-title":"descricao","item-value":"id"},null,8,["modelValue","items"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).end_cep,"onUpdate:modelValue":e[19]||(e[19]=o=>a(t).end_cep=o),label:"CEP",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).end_complemento,"onUpdate:modelValue":e[20]||(e[20]=o=>a(t).end_complemento=o),label:"Complemento",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,null,{default:d(()=>[l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).end_quadra,"onUpdate:modelValue":e[21]||(e[21]=o=>a(t).end_quadra=o),label:"Quadra",required:""},null,8,["modelValue"])]),_:1}),l(u,{md:"4"},{default:d(()=>[l(r,{modelValue:a(t).end_lote,"onUpdate:modelValue":e[22]||(e[22]=o=>a(t).end_lote=o),label:"Lote",required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(s,{class:"mb-3"},{default:d(()=>[l(c,{onClick:C,size:"large",color:"red"},{default:d(()=>e[29]||(e[29]=[p("Voltar")])),_:1}),l(c,{onClick:e[23]||(e[23]=o=>y()),class:"ml-4",size:"large",color:"green"},{default:d(()=>e[30]||(e[30]=[p("Salvar")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{Ie as default};
