import{_ as ce}from"./CoonJgjK.js";import{u as ae,C as se,H as re,r as c,D as ue,o as j,G as ne,w as t,b as e,v as o,V as te,A as I,d as J,s as K,m as B,I as ie,a as g,c as G,x as le,L as je,n as Ne,M as Ie,K as Ce,F as Ve,g as $e,N as xe,t as ye}from"./DY54ehnO.js";import{V as P,u as _}from"./THVQ871j.js";import{V as N}from"./PPz9g0JV.js";import{V as oe}from"./BNqD-WM_.js";import{V as de}from"./DvqkBjmY.js";import{_ as Je,a as Le}from"./DX74Ip2f.js";import{_ as Ue,a as Be,b as Ye,T as Ze,W as We,S as Qe,r as Se,D as Te,c as Xe,d as Ge}from"./CaCjnPme.js";import{_ as ge}from"./-1f5zArc.js";import{_ as me,a as _e,b as be}from"./BP1uhy__.js";import{_ as He}from"./0MPb7dCQ.js";import{V as Ae}from"./BSyF_vjp.js";import{V as ke,a as pe,d as Ke}from"./ClzTxQtv.js";import{_ as Ee}from"./BQswrt_R.js";import{c as et,r as tt,u as ot}from"./BoisAW-l.js";import{_ as we}from"./CdP3NN9a.js";const qt={__name:"Dados",props:{item_dados:{type:Array,required:!0},item_situacoes:{type:Array,required:!0}},setup(X){const y=X,{$toast:$}=ae(),A=K(),m=se(),i=re(),k=`${A.public.managemant}/updateAtos`,M=c(y.item_situacoes),S=ue({dt_abertura:y.item_dados[0].dt_abertura||null,status:y.item_dados[0].status||null,mne:y.item_dados[0].mne||null});async function z(){const{data:h,error:u,status:O}=await _(`${k}/${i.query.ato_id}`,{method:"PUT",body:{status:S.status,mne:S.mne,dt_abertura:S.dt_abertura}},"$EIT5jtTUdX");O.value==="success"&&$.success("Ato Atualizado com sucesso")}const q=()=>{const h=i.query.origem||"criar",u=i.query.id;h==="atualizar"?m.push(`/os/atualizar/${u}`):m.push("/os/criar-registro")};return(h,u)=>{const O=ce;return j(),ne(de,null,{default:t(()=>[e(P,{class:"mt-5"},{default:t(()=>[e(N,{cols:"3"},{default:t(()=>[e(oe,{label:"Situação",modelValue:o(S).status,"onUpdate:modelValue":u[0]||(u[0]=C=>o(S).status=C),items:o(M),"item-title":"descricao","item-value":"descricao",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(N,{cols:"5"},{default:t(()=>[e(te,{label:"MNE - Matrícula Notoria Eletrônica",modelValue:o(S).mne,"onUpdate:modelValue":u[1]||(u[1]=C=>o(S).mne=C)},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(N,{cols:"2"},{default:t(()=>[e(te,{modelValue:o(S).dt_abertura,"onUpdate:modelValue":u[2]||(u[2]=C=>o(S).dt_abertura=C),type:"date",label:"Data Lavratura",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(P,{class:"mb-3"},{default:t(()=>[e(O,{onClick:q},{default:t(()=>[e(I,{size:"large",color:"red"},{default:t(()=>u[3]||(u[3]=[J("Voltar")])),_:1})]),_:1}),e(I,{class:"ml-10",onClick:z,size:"large",color:"green"},{default:t(()=>u[4]||(u[4]=[J("Atualizar")])),_:1})]),_:1})]),_:1})}}},at=["onClick"],st=["onClick"],rt=["onClick"],nt={key:0,style:{width:"30px",height:"30px"},src:_e,alt:"Visualizar",title:"Reativar"},lt={key:1,src:be,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},it=["onClick"],Rt={__name:"Partes",async setup(X){let y,$;const A=se(),m=re(),i=K(),{$toast:k}=ae(),M=`${i.public.managemant}/pesquisarPessoas`,S=`${i.public.managemant}/listarPapeis`,z=`${i.public.managemant}/getLinkTipo`,q=`${i.public.managemant}/createAtosPessoa`,h=`${i.public.managemant}/updateAtosPessoa`,u=`${i.public.managemant}/getAtosPessoaById`,O=`${i.public.managemant}/download`,C=c(B("user-data").value.cartorio_token),V=c([]),w=c([]),v=c([]),T=c(!1),L=c(!1),R=c(!1),Y=c(!1),W=c(null),x=c(null),r=c(null),d=c(null),a=c(null),s=c(m.query.tipo_ato_token),n=c(null),p=[{title:"Documento",align:"start",key:"pessoa.documento"},{title:"Pessoa",align:"start",key:"pessoa.nome"},{title:"Papel",align:"start",key:"papel.descricao"},{title:"Representante",align:"start",key:"representante.nome"},{value:"actions"}],f=ue({papeis:null,nome:null,pessoa:null,documento:null}),{data:E}=([y,$]=ie(()=>_(S,{method:"POST",body:{tipo_ato_token:m.query.tipo_ato_token}},"$acoiTIUp00")),y=await y,$(),y);v.value=E.value;const F=async()=>{const{data:b}=await _(`${u}/${m.query.ato_id}`,{method:"GET"},"$ypnU9hCpVn"),U=(H=>H.map(Z=>({...Z,pessoa:{...Z.pessoa,documento:Z.pessoa.doc_identificacao},papel:{...Z.partes_tipos}})))(b.value);w.value=U};F();async function ee(){try{const{data:b,error:l}=await _(M,{method:"POST",body:{cartorio_token:C.value,documento:f.documento,nome:f.nome}},"$pr30MyPXfY");b.value.length>0?(V.value=b.value,f.pessoa=V.value[0]):V.value=[]}catch(b){console.error("Erro na requisição",b)}}const fe=()=>{L.value=!0},he=async()=>{await F()},De=async()=>{await F()},Me=async()=>{const b={pessoa:f.pessoa,papel:v.value.find(Q=>Q.id===f.papeis),representante:{nome:null}},l=await _(`${u}/${m.query.ato_id}`,{method:"GET"},"$scHdIvxj2D");for(const Q of l.data.value)if(Q.pessoa_id===f.pessoa.id&&Q.ato_id===Number(m.query.ato_id)&&Q.tipo_parte_id===f.papeis){k.error("Pessoa Já Registrada Com Esse Papel!");return}const{data:U,error:H,status:Z}=await _(q,{method:"POST",body:{ato_id:Number(m.query.ato_id),pessoa_id:f.pessoa.id,tipo_parte_id:f.papeis,user_id:B("user-data").value.usuario_id}},"$18isAgOJxG");Z.value==="success"?(b.id=U.value.id,k.success("Pessoa Registrada com Sucesso!"),w.value.push(b)):k.error(H.value.message)},Pe=async b=>{var Q;if(R.value=!0,n.value=null,!b.pessoa.id)return;const{data:l}=await _(z,{method:"POST",body:{tipo:"ficha",id:b.pessoa.id}},"$hmDzSF3F61");if(!((Q=l.value)!=null&&Q.link))return;const{data:U}=await _(O,{method:"POST",body:{bucket:"qvgjz",path:l.value.link}},"$l09I6nLRfk"),H=l.value.link,Z=U.value;/\.(tr7|tiff)$/i.test(H)?n.value=Z:fotoRender.value=`data:image/jpeg;base64,${Z}`},Oe=b=>{const l=w.value.filter(U=>U.pessoa.id!==b.pessoa.id).map(U=>({id:U.pessoa.id,nome:U.pessoa.nome}));r.value=b.id,W.value=l,T.value=!0,x.value=b.pessoa.nome,a.value=b.pessoa.id},ze=b=>{Y.value=!0,d.value=b.id,x.value=b.pessoa.nome};async function qe(b){b.excluido=!b.excluido;try{await _(`${h}/${b.id}`,{method:"PUT",body:JSON.stringify({excluido:b.excluido})},"$PUt0nEhmBF")}catch(l){console.error("Erro ao excluir pessoa:",l)}}const Re=()=>{const b=m.query.origem||"criar",l=m.query.id;b==="atualizar"?A.push(`/os/atualizar/${l}`):A.push("/os/criar-registro")};return(b,l)=>{const U=Je,H=Be,Z=Ye,Q=Le,Fe=ce;return j(),ne(de,null,{default:t(()=>[e(P,{class:"mt-5"},{default:t(()=>[e(N,{cols:"3"},{default:t(()=>[e(te,{label:"Documento",modelValue:o(f).documento,"onUpdate:modelValue":l[0]||(l[0]=D=>o(f).documento=D)},null,8,["modelValue"])]),_:1}),e(N,{cols:"4"},{default:t(()=>[e(te,{label:"Pessoa",modelValue:o(f).nome,"onUpdate:modelValue":l[1]||(l[1]=D=>o(f).nome=D)},null,8,["modelValue"])]),_:1}),g("div",null,[g("img",{class:"mt-1",src:ge,style:{width:"40px",cursor:"pointer"},title:"Pesquisar Pessoa",onClick:ee})]),g("div",null,[g("img",{class:"mt-1 ml-2",src:me,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:fe})])]),_:1}),e(P,null,{default:t(()=>[e(N,{cols:"4"},{default:t(()=>[e(oe,{label:"Selecione a Pessoa",modelValue:o(f).pessoa,"onUpdate:modelValue":l[2]||(l[2]=D=>o(f).pessoa=D),items:o(V),"item-title":"nome","item-value":"id","return-object":"",required:""},null,8,["modelValue","items"])]),_:1}),e(N,{cols:"3"},{default:t(()=>[e(oe,{label:"Papel",modelValue:o(f).papeis,"onUpdate:modelValue":l[3]||(l[3]=D=>o(f).papeis=D),items:o(v),"item-title":"descricao","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1}),g("div",null,[g("img",{class:"mt-1",src:me,style:{width:"40px",cursor:"pointer"},title:"Criar Representante",onClick:Me})])]),_:1}),e(P,null,{default:t(()=>[e(N,null,{default:t(()=>[e(Ae,{style:{height:"465px"},headers:p,items:o(w)},{"item.actions":t(({item:D})=>[e(P,null,{default:t(()=>[g("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ve=>Pe(D),title:"Visualizar Ficha"},l[9]||(l[9]=[g("img",{style:{width:"30px",height:"30px"},src:ge,alt:"Visualizar"},null,-1)]),8,at),g("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ve=>ze(D),class:"mr-2",title:"Alterar Papel"},l[10]||(l[10]=[g("img",{style:{width:"30px",height:"30px"},src:He,alt:"Visualizar"},null,-1)]),8,st),g("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:ve=>qe(D),title:"Deletar Pessoa"},[D.excluido?(j(),G("img",nt)):(j(),G("img",lt))],8,rt),g("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:ve=>Oe(D),title:"Selecionar Representante"},l[11]||(l[11]=[g("img",{style:{width:"30px",height:"30px"},src:Ue,alt:"Visualizar"},null,-1)]),8,it)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1}),e(U,{show:o(L),onClose:l[4]||(l[4]=D=>L.value=!1)},null,8,["show"]),e(H,{representante_nome:o(x),representantes:o(W),ato_id:o(r),show:o(T),onClose:l[5]||(l[5]=D=>T.value=!1),onUpdateRepresentante:De},null,8,["representante_nome","representantes","ato_id","show"]),e(Z,{representante_nome:o(x),ato_token:o(s),ato_id:o(d),show:o(Y),onClose:l[6]||(l[6]=D=>Y.value=!1),onUpdatePapel:he},null,8,["representante_nome","ato_token","ato_id","show"]),e(ke,{modelValue:o(R),"onUpdate:modelValue":l[8]||(l[8]=D=>le(R)?R.value=D:null),width:"600"},{default:t(()=>[e(pe,{"max-width":"600",title:"Ficha"},{default:t(()=>[e(Q,{"tiff-url":o(n)},null,8,["tiff-url"]),e(I,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:l[7]||(l[7]=D=>R.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(P,null,{default:t(()=>[e(Fe,{onClick:Re},{default:t(()=>[e(I,{size:"large",color:"red"},{default:t(()=>l[12]||(l[12]=[J("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},ct={key:0,class:"loading-overlay"},ut="https://ej2services.syncfusion.com/production/web-services/api/documenteditor/",Ft={__name:"Minuta",emits:["page","doc"],setup(X,{emit:y}){je("DocumentEditorContainer",[Ze,We,Qe]);const $=K(),{$toast:A}=ae(),m=se(),i=re(),k=y;Se(`${$.public.docEditor}`);const M=`${$.public.managemant}/download`,S=`${$.public.managemant}/atos/files`,z=`${$.public.managemant}/subitituirModelo`,q=`${$.public.managemant}/upload`,h=c(null),u=c(!1),O=c("Ao executar a geração, a minuta atual será substituída e não poderá ser recuperada.Confirma ?"),C=c(!1),V=async a=>{try{const s=await fetch(a);if(!s.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await s.blob()}catch(s){return console.error(s),null}},w=async()=>{try{const{data:a}=await _(`${S}/${i.query.ato_token_edit}`,{method:"GET"},"$5jxI4TvFse");return a.value.link_ato}catch(a){console.error("Erro ao carregar o documento:",a),A.error(a)}},v=async()=>{C.value=!0;try{const a=await w(),{data:s,status:n}=await _(M,{method:"POST",body:{bucket:"qvgjz",path:a}},"$dvNFfvmIJC"),p=s.value,f=await V(p);if(f){const E=new FileReader;E.onload=()=>{const F=E.result;h.value.ej2Instances.documentEditor.open(F),k("doc",F)},E.readAsText(f)}}catch{console.error("Erro ao carregar o documento.")}finally{C.value=!1}},T=async()=>{const s=await h.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),n=new FileReader;n.onload=()=>{const p=n.result,E=h.value.ej2Instances.documentEditor.pageCount;k("page",E),k("doc",p)},n.readAsText(s)},L=async()=>{C.value=!0;try{const s=await h.value.ej2Instances.documentEditor.saveAsBlob("Sfdt"),n=new FormData;n.append("file",s,"anexo.sfdt"),n.append("cartorio_token",B("user-data").value.cartorio_token),n.append("token",i.query.ato_token_edit),n.append("tipo","ato_minuta");const{data:p,status:f}=await _(q,{method:"POST",body:n},"$xv11VtUdMy");if(f.value==="success"){A.success("Documento enviado!");const F=h.value.ej2Instances.documentEditor.pageCount;T(),k("page",F)}else A.error("Erro ao enviar documento para o sistema.")}catch(a){A.error("Erro ao salvar documento."),console.error(a)}finally{C.value=!1}},R=()=>{u.value=!1,Y()},Y=async()=>{r(!0);try{await W(),r(!0);const{data:a,status:s}=await _(z,{method:"POST",body:{ato_token:i.query.ato_token_edit}},"$zyzWHTXTBW");a.value&&x(a.value)}catch(a){console.error("Erro ao gerar a minuta:",a),A.error("Ocorreu um erro ao gerar a minuta.")}finally{r(!1)}},W=async()=>{try{const{data:a}=await _(M,{method:"POST",body:{bucket:"qvgjz",path:"provider/modeloAto.sfdt"}},"$KreLE0Ys81"),s=await V(a.value);if(s){const n=new FileReader;n.onload=()=>{const p=n.result;h.value.ej2Instances.documentEditor.open(p),k("doc",p)},n.readAsText(s)}}catch(a){console.error("Erro ao carregar o modelo de minuta:",a)}},x=a=>{const s=h.value.ej2Instances.documentEditor,n=p=>{for(const[f,E]of Object.entries(p))if(/^<<.+>>$/.test(f))try{s.search.findAll(f),s.search.searchResults.length>0&&s.search.searchResults.replaceAll(E)}catch(F){console.error(`Erro ao substituir o marcador ${f}:`,F)}else if(f==="partes"&&Array.isArray(E)&&E.length>0)for(const F of E)typeof F=="object"&&n(F)};n(a)},r=a=>{C.value=a},d=()=>{const a=i.query.origem||"criar",s=i.query.id;a==="atualizar"?m.push(`/os/atualizar/${s}`):m.push("/os/criar-registro")};return Ne(async()=>{await v(),T()}),(a,s)=>{const n=ce,p=Ee;return j(),G(Ve,null,[e(o(Te),{height:"900px",ref_key:"documentEditorContainer",ref:h,serviceUrl:ut,enableToolbar:!0,enableWordExport:!0},null,512),o(C)?(j(),G("div",ct,[e(Ie,{indeterminate:"",color:"white",size:"60",class:"loading-spinner"})])):Ce("",!0),e(P,{class:"ml-4 mt-4 mb-4"},{default:t(()=>[e(n,{class:"mr-4"},{default:t(()=>[e(I,{size:"large",onClick:d,color:"red"},{default:t(()=>s[2]||(s[2]=[J("Voltar")])),_:1})]),_:1}),e(I,{size:"large",color:"green",onClick:L,disabled:o(C)},{default:t(()=>s[3]||(s[3]=[J("Atualizar")])),_:1},8,["disabled"]),e(I,{class:"ml-4",size:"large",color:"blue",onClick:s[0]||(s[0]=f=>u.value=!0)},{default:t(()=>s[4]||(s[4]=[J("Gerar Minuta")])),_:1})]),_:1}),e(p,{onConfirm:R,condMessage:o(O),show:o(u),onClose:s[1]||(s[1]=f=>u.value=!1)},null,8,["condMessage","show"])],64)}}},dt=["innerHTML"],jt={__name:"Livro",props:{pages:{type:Number,required:!0},document:{type:String,required:!0}},async setup(X){let y,$;const A=X,m=K();Se(`${m.public.docEditor}`);const{$toast:i}=ae(),k=se(),M=re(),S=`${m.public.managemant}/download`,z=`${m.public.managemant}/atos/files`,q=`${m.public.managemant}/lavrarAto`,h=`${m.public.managemant}/listarEscrevente`,u=c(B("user-data").value.cartorio_token),O=B("auth_token").value,C=c("Ao lavrar esse ato, a operação não poderá ser desfeita. Confirma ?"),V=c(!1),w=c(null),v=c(null),T=c(null),L=c([]),R=ue({escrevente:null}),Y=async n=>{try{const p=await fetch(n);if(!p.ok)throw new Error("Erro ao baixar o arquivo do MinIO.");return await p.blob()}catch(p){return console.error(p),null}},W=async()=>{try{const{data:n}=await _(`${z}/${M.query.ato_token_edit}`,{method:"GET"},"$FnEbAJEARP");return n.value.link_ato}catch(n){console.error("Erro ao carregar o documento:",n),i.error(n)}},x=async()=>{try{const n=await W(),{data:p,status:f}=await _(S,{method:"POST",body:{bucket:"qvgjz",path:n}},"$7ljqltMqa0"),E=p.value,F=await Y(E);if(F){const ee=new FileReader;ee.onload=()=>{const fe=ee.result;T.value.ej2Instances.documentEditor.open(fe)},ee.readAsText(F)}}catch{i.error("Erro ao carregar o documento.")}};x();const r=async()=>{if(!R.escrevente){i.error("Selecione um escrevente para realizar a ação");return}try{const{data:n,status:p}=await _(q,{method:"POST",body:{ato_token:M.query.ato_token_edit,qtd_paginas:A.pages,escrevente_token:R.escrevente,usuario_token:O,cartorio_token:u}},"$OWxZSQkyX8");p.value==="success"?(w.value=n.value,v.value=n.value[0].selo,i.success("Ato lavrado com sucesso!")):i.error("Falha ao lavrar o ato.")}catch{i.error("Erro ao conectar com o servidor.")}},d=()=>{V.value=!1,r()},{data:a}=([y,$]=ie(()=>_(h,{method:"POST",body:{cartorio_token:u}},"$sMqfUUQcBM")),y=await y,$(),y);L.value=a.value[0].func_json_escreventes;const s=()=>{const n=M.query.origem||"criar",p=M.query.id;n==="atualizar"?k.push(`/os/atualizar/${p}`):k.push("/os/criar-registro")};return $e(()=>A.document,(n,p)=>{x()}),(n,p)=>{const f=Ee;return j(),G(Ve,null,[e(P,null,{default:t(()=>[e(N,null,{default:t(()=>[e(o(Te),{restrictEditing:!0,enableToolbar:!1,ref_key:"documentEditorContainer",ref:T,height:"850px",width:"850px"},null,512)]),_:1}),e(N,null,{default:t(()=>[e(oe,{class:"mt-15",label:"Tabelião/escrevente",modelValue:o(R).escrevente,"onUpdate:modelValue":p[0]||(p[0]=E=>o(R).escrevente=E),items:o(L),"item-title":"nome","item-value":"token",required:""},null,8,["modelValue","items"]),g("img",{onClick:p[1]||(p[1]=E=>V.value=!0),style:{height:"80px",width:"80px",cursor:"pointer","margin-top":"40px"},src:Xe}),o(w)?(j(),ne(pe,{key:0,width:"360px",class:"mr-16"},{default:t(()=>[e(P,null,{default:t(()=>[e(N,null,{default:t(()=>[e(xe,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[J(" Livro: "+ye(o(w)[0].livro_numero),1)]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(xe,{style:{"font-weight":"bold"},class:"pa-2 ma-2"},{default:t(()=>[J(" Folhas : "+ye(o(w)[0].pagina_inicial)+" A "+ye(o(w)[0].pagina_final),1)]),_:1})]),_:1})]),_:1}),g("div",{style:{border:"1px solid black","border-radius":"8px","padding-bottom":"20px","margin-top":"-10px"},class:"ml-2 mb-2 mr-2",innerHTML:o(v)},null,8,dt)]),_:1})):Ce("",!0)]),_:1})]),_:1}),e(I,{class:"mt-5 ml-7 mb-5",color:"red",size:"large",onClick:s},{default:t(()=>p[3]||(p[3]=[J("Voltar")])),_:1}),e(f,{show:o(V),condMessage:o(C),onClose:p[2]||(p[2]=E=>V.value=!1),onConfirm:d},null,8,["show","condMessage"])],64)}}},mt=["onClick"],pt={key:0,style:{width:"30px",height:"30px"},src:_e,alt:"Visualizar",title:"Reativar"},ft={key:1,src:be,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},Nt={__name:"Observacao",props:{ato_id:{type:Number,required:!0}},async setup(X){let y,$;const A=se(),m=re(),i=K(),{$toast:k}=ae(),M=`${i.public.managemant}/listarEscrevente`;`${i.public.managemant}`;const S=`${i.public.managemant}/createAtosObservacao`,z=`${i.public.managemant}/updateAtosObservacao`,q=`${i.public.managemant}/getAtosObservacaoById`,h=c(B("user-data").value.cartorio_token),u=c([]),O=c([]),C=[{title:"Data",align:"start",key:"created"},{title:"Escrevente",align:"start",key:"users.nome"},{title:"Observação",align:"start",key:"observacao"},{value:"actions"}],V=ue({observacao:""}),w={observacao:{required:et.withMessage("O campo é obrigatório",tt)}},v=ot(w,V),{data:T}=([y,$]=ie(()=>_(`${q}/${m.query.ato_id}`,{method:"GET"},"$HyzoO40swN")),y=await y,$(),y);u.value=T.value.map(x=>({...x,created:we(x.created,"dd/mm/yyyy hh:mm")}));async function L(){if(V.observacao.trim()===""){k.error("O campo de observação está vazio.");return}if(await v.value.$validate()){const{data:x,error:r,status:d}=await _(S,{method:"POST",body:{ato_id:m.query.ato_id,observacao:V.observacao,user_id:B("user-data").value.usuario_id}},"$gnHMo4uCXD");d.value==="success"&&(u.value.push({created:we(x.value.created,"dd/mm/yyyy hh:mm"),observacao:x.value.observacao,id:x.value.id,escrevente:B("user-data").value.nome}),V.observacao="",k.success("Observação registrada com sucesso"))}else k.error("Preencha os campos obrigatórios.")}async function R(x){x.excluido=!x.excluido;try{await _(`${z}/${x.id}`,{method:"PUT",body:JSON.stringify({excluido:x.excluido})},"$sP9AKdd3Ky")}catch(r){console.error("Erro ao excluir observação:",r)}}const{data:Y}=([y,$]=ie(()=>_(M,{method:"POST",body:{cartorio_token:h}},"$HL9pndqGh0")),y=await y,$(),y);O.value=Y.value[0].func_json_escreventes;const W=()=>{const x=m.query.origem||"criar",r=m.query.id;x==="atualizar"?A.push(`/os/atualizar/${r}`):A.push("/os/criar-registro")};return(x,r)=>{const d=ce;return j(),ne(de,null,{default:t(()=>[e(P,{class:"mt-5"},{default:t(()=>[e(te,{label:"Observação",modelValue:V.observacao,"onUpdate:modelValue":r[0]||(r[0]=a=>V.observacao=a),required:"","error-messages":o(v).observacao.$errors.length>0?o(v).observacao.$errors.map(a=>a.$message):[],onBlur:o(v).observacao.$touch,onInput:o(v).observacao.$touch},null,8,["modelValue","error-messages","onBlur","onInput"]),g("div",null,[g("img",{class:"btn-pointer ml-2",src:me,style:{width:"40px",cursor:"pointer"},title:"Criar Pessoa",onClick:L})])]),_:1}),e(P,null,{default:t(()=>[e(N,null,{default:t(()=>[e(Ae,{style:{height:"465px"},headers:C,items:u.value},{"item.actions":t(({item:a})=>[g("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:s=>R(a),title:"Deletar Observação"},[a.excluido?(j(),G("img",pt)):(j(),G("img",ft))],8,mt)]),_:1},8,["items"])]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(d,{onClick:W},{default:t(()=>[e(I,{size:"large",color:"red"},{default:t(()=>r[1]||(r[1]=[J("Voltar")])),_:1})]),_:1})]),_:1})]),_:1})}}},vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAACmpJREFUeJzlW3+MVNUV/r73ZmZnZ1zcFZdfggtrpFiroFVTC2qF0rQRFRPdmKa1xjRM/AFhhZ1ZljQzU2Oyv6QWTZOltJTUpuma2gKxxVDBRiSt2OpKtFCUXy4ILiC6uzPL7Lz79Y95S1Zclp3ZHWa1X/KSuZl7zjv3e/fde+5551ASBkNNTc04klfZtj0NwFgAnkEFCo80gBOS9jmOs7upqemjwTpzIAJCoZC3tLR0Dsm5AGZKGk+yGIAXAPNi9shBAHoBJCQdA9AGYFsgEHg1Go2mz+78GQKqqqp8kydPnuzz+RYCmC1pIskkgEMAjgLoBpDW+aZNgUCSyMzQoGv7FEnFJI9I2m6M2XDw4MHDra2tqTMyfWOJx+O+ZDJ5paS7SD4I4DiANyXttCzr7c7OzkPl5eWdsVisdzQTEIvFvB0dHSWBQKCC5DUAbiI5C8BYSet7e3s3tre37+0j4cz73NPTM9kYczeARwEckfRsKpXa+vTTTx/rf5NoNHohx5QV3AeTAnDCvf69cuXKzY7jzAPwOIDHfD6fKioq/gBgP+DOgFAo5C0rK1sMICTp03Q6/eOurq69LS0tiUINZiQRj8cD3d3d0y3LWovM69ESCASejUajaQsASktL5wCYDeC4pFVdXV1716xZkyyo1SOIWCyWDAaD/5X0MwAnSc7p7u6eDQAWALir/QQAb6ZSqa0tLS2J0fqe5wJJikajCUkvS3oLwETLsuYCgN3d3T0OwCJ3Bf1Lc3PzjoJam0fMnz+/a8uWLeNIXi3pkk2bNr1skbyK5HgAH5DcVWgj8w1jzC5jTDvJ8X6/f4Zl2/YVAAIAjnZ2dh4qtIEXAAdJfgggYNv2FR5Jl5L0AuguLy/vzFVrJBKZD+B2kmMknfEWScoYkwTwRjAY/FM0Gk2dW0v+UVJS8mkymeyS5JNUznA4/BOSPwTw64aGhoZsF7/a2tqLAfwGwMIhdD/sOM6DBw8e3Nba2urkYP+wQZKRSCQC4CFJv7Usy7KR8QeU7eBDoVBAUj2Aha74KQCHAbT3uw5LOgnAALjMtu1fVVZWLnAX3QuOfuOkZVn2sE52Y8aMuYbkfEki2SYp6jjOsbP7eTyeYkl3A1gKYAqAJ6qrq99AhqyCImsC+p7cfffd5502bdodAKYBgDHmd42NjRsHEX2ltrbWlvQYyWt8Pt+LS5YsWfDMM88Mi4Th+itDJqCurm66Meb+mpqaG0j6SJYC+DoAi+Rhkq3n05FKpSJer/dKAN8GMDMQCLwTDofbAOTqcisSibSTfKGhoWFzLmQMiYBwOHwFybUkb7Es67MWSPslPdLY2HjeLXTVqlXJ2tra5QDikhaSHEPylmyNPhuSFoTD4YcB/Dlb2SERYFnW3QBucpufSvrYsqxPjDFbJLU0NjbuHeoN6+vr34nH4w8kk8nbJD0E4Go32JILPAAmkZwg6eckN2Q7C4b6CkyR5CP5EYAHGhoaXsra1H6IRqMJAH91r5wRj8f9yWRyHYD7SV6+dOnSiwGcykaHdf4uAEnLXfwcY8yoOSKfOHFCkrr62sXFxXa2OoZEwJcZ//cEjHiImyRra2tLSeY9fF5cXFxE0t/Xdhzn0rq6ujMPVVLa7/d/Eo1Gzbl0jJiR8Xjc09PT861IJLLIGDOJZNbvY7YgSUnT+nnVzxljzoS+JTmJROJAbW1tU319fdtAOkaEgHg8biWTyccB/BRA0YV08/vfi+QNA/w3W9K85cuX397c3Lz7bPkRISCZTC4G8AQAn6RTJPdI6hkJ3cMByUskzQAw1uPxLARQf3afYROwYsWKqQDiyAx+v2VZK9Lp9OvuB5WCobe3l16v93uWZTUDGAPg4oH6DZsASXe6yg3JX/j9/ucHW3QuFOLxuJVIJC4DUCIpJen9gfoNaxuMx+MBSd8BAEkfAPjHaBg8AJw+fXosgG8i85A/AfD3gfoNi4Cenp6rSc5w4wF7U6nUu8PRN5JIp9NTSN4IACT/GQwGR3YGkKQx5joAlwOApFdWrVp1Mld9Iw3Lsr4r6RK3+ctzzcycCVi0aFExyXkAfCTTJAcLhlxQVFVV2QC+755f2vft27f5XH1zJqCsrOxSALcBgKTXi4uL38lV10ijsrLyZklfdZvPDRaAzZkASQskjXN//2y0LH4uHnaffpfjOIPOzJwIcJWHXFf0o6amphdy0ZMPRCKRSciE3CDpX+l0+sBg/XMiYNmyZTe4yQeQ9MdR9iF1PoCLJDkAdiQSieODdc6JANu2f4BMrlC3ZVnDig6NJEKhUIDkrQD8AD6WtKOlpaV3MJlcCJgAYK77e3dvb+9/ctCRF5SUlFwu6XoAlmVZR9Pp9Hm/dGdNAMlvIEOCkfTWyZMnR80HVa/XexXJrwCAMealofgl2RLgA3AzgDIAPSS3rlu3ruCnvj5IugNAMTIP57mhyGRFgKRSANeTtCV12bb9cg525gWhUMgL4C63uTMYDL49FLmsToNulMd2f7/45JNPfu47YKFQWlpaBaDc3ZHO6fqejZx2AUmOpDW5yOYDVVVVNsnFbvNDAEPemXJ1hNr279+/MxfZfGDq1KkzAVznNredOnVqyIeyrAlwp9jvC5XgMBBI3onM65yS9Eo2+Y25bIPHjTF/y1YuX6irqxsL4BY3LeeAMebNbORzeQVeN8a05yCXF6TT6a8BmO6eT/Z0dnZm5ZhlS0AawI6nnnrqRJZyeYF77r8NwGQAkLQ52/TeIW2DkrokOSSTkhQOh2/M5BkVDiQ9lZWVtwJYhsy55BjylR8AYJcb5g6SrAHwSLY3ygN8AMrhDp7ko/X19UeyVeIxxjgkRRcDHW0dx9lk2/YWAPcg4waXDdf6kYAbjN1nWdbioqKic4a9+sNNkyMAGWMcD8nTyKSweWKxmBeZfPvPoKmpqZvkvZFI5F5JN5MsGtGR5ADXGXvXcZznm5ubBz3z90csFvMmk0mPJAOgxyOpg2QKQLCjo6MEmUKDgW5oALS61xcWnZ2dY2zbvohkimSHRfJ9ZAqMJgYCgYpCG5hveL3eCpITkRnze5bjOLslHSM5pS/M9WWGMeZaZLbNo4lEYo/l1tW1SSoGcNPKlSvHF9bE/KG6unqi+7XIb4xpW716dUefI7SN5BGSsxzHmRePxwOFyuXNB0iypqYmWFRUNE/SLABHAGwFXE8wEAi8Kmk7MpWhj3d3d0+PxWK55u6NOixfvjxgjJkuqVpSmTFmezAYfA1wCYhGo2ljzAZJ6yVNtCxrbSKRuCccDk8orOnDR3V19UTbtu/xeDxrkYllru/t7d3QV0V6pnDSrRq90ufz3QngRwBOSnpL0k5jzK6enp4DX6TCyZKSkqnGmGtJ3ihplqQyy7LWp9PpjYcOHXqvr3Dyc6WzFRUVl9m2fRcyR8xJrv//gVtm8oUpnQUwCZnV3g/giDFmu6SN5yyd7Q8342uOMWYugJluUVUAmTQYz2hdIF3XOI2MN5sAcNQY0wZgazAYfO28xdMDYcmSJeV+v38GyUoAE0heJMmbjwEMFyR73dTZoyTfTyQSe1avXt0xmMz/AHO29RxBrcY5AAAAAElFTkSuQmCC",yt=["onClick"],gt=["onClick"],_t={key:0,style:{width:"30px",height:"30px"},src:_e,alt:"Visualizar",title:"Reativar"},bt={key:1,src:be,alt:"Excluir",class:"trash-icon",style:{width:"30px",height:"30px"},title:"Excluir"},It={__name:"Anexos",async setup(X){let y,$;const A=K(),{$toast:m}=ae(),i=se(),k=re(),M=`${A.public.biometria}/run-scanner`,S=`${A.public.managemant}/atos_anexos`,z=`${A.public.managemant}/atos_anexos`,q=`${A.public.managemant}/atos_anexos`,h=c(!1),u=c([]),O=ue({descricao:""}),C=[{title:"Documento",key:"descricao"},{text:"Ações",value:"actions"}],{data:V}=([y,$]=ie(()=>_(`${q}/${k.query.ato_id}`,{method:"GET"},"$AOZpbz65MA")),y=await y,$(),y);u.value=V.value;async function w(){try{await v(),await T()}catch(r){console.error("Erro ao executar scanner ou listar arquivos:",r)}}async function v(){try{const{data:r}=await _(M,{method:"GET"},"$KttjFhHivJ")}catch(r){m.error("Erro ao acionar o scanner:",r)}}async function T(){try{const{data:r,status:d}=await _("http://localhost:3500/uploadAnexo",{method:"POST",body:{tipo:"ato_translado",token:k.query.ato_token_edit,cartorio_token:B("user-data").value.cartorio_token}},"$TqQrsgxUkd")}catch(r){console.error("Erro ao enviar o arquivo:",r)}}async function L(){try{const r=document.createElement("input");r.type="file",r.accept="*/*",r.onchange=async d=>{const a=d.target.files[0];a&&console.log(a)},r.click()}catch(r){console.error("Erro ao abrir o explorador de arquivos:",r)}}const R=async()=>{h.value=!0},Y=async()=>{const{data:r,error:d,status:a}=await _(S,{method:"POST",body:{ato_id:k.query.ato_id,descricao:O.descricao,user_id:B("user-data").value.usuario_id,link:"sdfsdfsdf"}},"$KDhIYzGKzM");a.value==="success"&&(m.success("Anexo registrado com sucesso!"),u.value.push(r.value))};async function W(r){r.excluido=!r.excluido;try{await _(`${z}/${r.id}`,{method:"PUT",body:JSON.stringify({excluido:r.excluido})},"$cdoFBGO0Ti")}catch(d){console.error("Erro ao excluir pessoa:",d)}}const x=()=>{const r=k.query.origem||"criar",d=k.query.id;r==="atualizar"?i.push(`/os/atualizar/${d}`):i.push("/os/criar-registro")};return(r,d)=>{const a=ce;return j(),ne(de,null,{default:t(()=>[e(P,null,{default:t(()=>[e(N,{cols:"5",class:"mt-2"},{default:t(()=>[e(te,{modelValue:o(O).descricao,"onUpdate:modelValue":d[0]||(d[0]=s=>o(O).descricao=s),label:"Descrição"},null,8,["modelValue"])]),_:1}),g("div",{onClick:w,title:"Escanear"},d[3]||(d[3]=[g("img",{class:"mt-3",style:{width:"40px",height:"40px",cursor:"pointer"},src:Ge,alt:"Escanear"},null,-1)])),g("div",{onClick:L,title:"Criar"},d[4]||(d[4]=[g("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:vt,alt:"Criar"},null,-1)])),g("div",{onClick:Y,title:"Criar"},d[5]||(d[5]=[g("img",{class:"mt-3 ml-2",style:{width:"40px",height:"40px",cursor:"pointer"},src:me,alt:"Criar"},null,-1)]))]),_:1}),e(Ae,{headers:C,items:o(u),style:{height:"465px","max-width":"600px"}},{"item.actions":t(({item:s})=>[e(P,null,{default:t(()=>[g("div",{style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},class:"mr-2",onClick:n=>R(s),title:"Visualizar Anexo"},d[6]||(d[6]=[g("img",{style:{width:"30px",height:"30px"},src:ge,alt:"Visualizar"},null,-1)]),8,yt),g("div",{class:"mr-2",style:{display:"flex",cursor:"pointer","justify-content":"flex-end"},onClick:n=>W(s),title:"Deletar Pessoa"},[s.excluido?(j(),G("img",_t)):(j(),G("img",bt))],8,gt)]),_:2},1024)]),_:1},8,["items"]),e(ke,{modelValue:o(h),"onUpdate:modelValue":d[2]||(d[2]=s=>le(h)?h.value=s:null),width:"600"},{default:t(()=>[e(pe,{"max-width":"600",title:"Anexo"},{default:t(()=>[e(I,{class:"ms-auto mt-3 mb-3",text:"Fechar",size:"large",color:"red",onClick:d[1]||(d[1]=s=>h.value=!1)})]),_:1})]),_:1},8,["modelValue"]),e(a,{onClick:x},{default:t(()=>[e(I,{size:"large",color:"red"},{default:t(()=>d[7]||(d[7]=[J("Voltar")])),_:1})]),_:1})]),_:1})}}},Jt={__name:"TiposAtos",props:{show:Boolean,servicos:Array,tiposAtos:Array},emits:["close","save"],setup(X,{emit:y}){const A=c(X.show),m=c(""),i=c(""),k=K(),M=B("auth_token").value,S=c(B("user-data").value.cartorio_token).value,z=c([]),q=c([]),h=y,u=`${k.public.managemant}/tipoAtos`,O=async()=>{const{data:w}=await _(u,{method:"POST",body:{usuario_token:M,cartorio_token:S}},"$6VlNS7ylT6");z.value=w.value,z.value.length>0&&(m.value=z.value[0].token)},C=async w=>{const{data:v}=await _(u,{method:"POST",body:{usuario_token:M,cartorio_token:S,servico_token:w}},"$pRqAaiCpuA");q.value=v.value};$e(m,async w=>{w&&(await C(w),i.value=q.value.length>0?q.value[0]:null)});const V=()=>{A.value=!1,h("close")};return O(),(w,v)=>(j(),ne(ke,{persistent:"",modelValue:o(A),"onUpdate:modelValue":v[2]||(v[2]=T=>le(A)?A.value=T:null),"max-width":"500"},{default:t(()=>[e(pe,null,{default:t(()=>[e(de,null,{default:t(()=>[e(P,{class:"mt-1 mb-3",style:{"justify-content":"space-between"}},{default:t(()=>v[3]||(v[3]=[g("h1",{class:"ml-4"},"Tipos de Atos",-1)])),_:1}),v[4]||(v[4]=g("hr",{class:"mb-5"},null,-1)),e(oe,{class:"mb-5",label:"Selecione o Serviço",modelValue:o(m),"onUpdate:modelValue":v[0]||(v[0]=T=>le(m)?m.value=T:null),items:o(z),"item-title":"descricao","item-value":"token"},null,8,["modelValue","items"]),e(oe,{"item-title":"descricao","item-value":"token",class:"mb-5",label:"Selecione o Tipo de Ato",modelValue:o(i),"onUpdate:modelValue":v[1]||(v[1]=T=>le(i)?i.value=T:null),items:o(q)},null,8,["modelValue","items"])]),_:1}),e(Ke,null,{default:t(()=>[e(I,{style:{"background-color":"red",color:"white"},onClick:V},{default:t(()=>v[5]||(v[5]=[J("Voltar")])),_:1}),e(I,{style:{"background-color":"green",color:"white"},onClick:w.save},{default:t(()=>v[6]||(v[6]=[J("Salvar")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{Jt as _,qt as a,Rt as b,Ft as c,jt as d,Nt as e,It as f};
