import{_ as R,u as $,n as J,r as i,o as m,c as K,a as _,b as t,V as L,q as o,s as S,w as n,v as I,x as P,y as p,z as T,d as f,A as V,B as y,C as x,p as q,e as z,D as N}from"./Du0fKhEs.js";import{u as F}from"./D0_Ve3eL.js";import{V as j,a as w}from"./BBVAg6E7.js";const M=""+new URL("cartorio_logo.CfnnJMUp.jpeg",import.meta.url).href,b=c=>(q("data-v-16f6d2d4"),c=c(),z(),c),X={class:"container-main"},G={class:"container-form"},H=b(()=>_("div",{class:"text"},"Log in",-1)),Q=b(()=>_("a",{class:"text-decoration-none",rel:"noopener noreferrer",style:{color:"#429946"}}," Esqueceu a senha?",-1)),W=b(()=>_("div",{class:"background-image"},null,-1)),Y={__name:"index",setup(c){const B=$(),{$toast:D}=J(),l=i({senha:"",email:""}),u=i(!1),r=i(!1),v=i(!1),h=i(!1),d=i(!1),k=()=>{v.value=!1,h.value=!1,d.value=!1,r.value=!1},C=P().public.auth;console.log(C);const U=async()=>{const{data:g,status:e,error:a}=await F(`${C}/login`,{method:"POST",body:{senha:l.value.senha,email:l.value.email}},"$iX10IJN3fa");if(e.value==="success"){const s=g.value[0].func_autentica_acesso_v1[0].registro[0],E=N("user-data");E.value=E.value=JSON.stringify({nome:s.nome,usuario_id:s.id,cartorio_id:s.cartorios[0].cartorio_id,cartorio_nome:s.cartorios[0].cartorio_descricao,cartorio_token:s.cartorios[0].cartorio_token}),D.success("Login realizado com sucesso!");const A=g.value[0].func_autentica_acesso_v1[0].registro[0].token,O=N("auth_token");O.value=A,B.push("/")}else{e.value==="error"&&a.value.statusCode===500&&(d.value=!0);const s=a.value.data[0].func_autentica_acesso_v1[0];switch(s.status_mensagem){case"Esse email não está cadastrado no Durabil.":h.value=!0;break;case"Senha inválida.":v.value=!0;break;default:s.error==="Erro ao autenticar usuário"&&(d.value=!0);break}}};return(g,e)=>(m(),K("div",X,[_("div",G,[t(L,{class:"image",width:300,height:"230",src:M}),H,t(S,{autofocus:"",autocomplete:"email",type:"email",modelValue:o(l).email,"onUpdate:modelValue":e[0]||(e[0]=a=>o(l).email=a),"persistent-hint":"",class:"input",density:"compact",placeholder:"Email","prepend-inner-icon":"mdi-email-outline",variant:"outlined"},null,8,["modelValue"]),t(S,{modelValue:o(l).senha,"onUpdate:modelValue":e[1]||(e[1]=a=>o(l).senha=a),class:"input","append-inner-icon":o(u)?"mdi-eye-off":"mdi-eye",type:o(u)?"text":"password",density:"compact",placeholder:"Senha","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":e[2]||(e[2]=a=>u.value=!o(u))},null,8,["modelValue","append-inner-icon","type"]),t(j,{modelValue:o(r),"onUpdate:modelValue":e[4]||(e[4]=a=>I(r)?r.value=a:null),"max-width":"400",persistent:""},{activator:n(({props:a})=>[t(p,T({block:"",rounded:"",class:"button mb-10 mt-4"},a,{onClick:U,modelValue:o(r),"onUpdate:modelValue":e[3]||(e[3]=s=>I(r)?r.value=s:null)}),{default:n(()=>[f(" Acessar ")]),_:2},1040,["modelValue"])]),default:n(()=>[o(v)?(m(),V(w,{key:0,text:"Senha inválida."},{actions:n(()=>[t(y),t(p,{onClick:k,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[f(" OK ")]),_:1})]),_:1})):x("",!0),o(h)?(m(),V(w,{key:1,text:"Esse email não está cadastrado."},{actions:n(()=>[t(y),t(p,{onClick:k,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[f(" OK ")]),_:1})]),_:1})):x("",!0),o(d)?(m(),V(w,{key:2,text:"Erro no sistema, fora do ar."},{actions:n(()=>[t(y),t(p,{onClick:k,style:{"background-color":"#429946",color:"white"}},{default:n(()=>[f(" OK ")]),_:1})]),_:1})):x("",!0)]),_:1},8,["modelValue"]),Q]),W]))}},te=R(Y,[["__scopeId","data-v-16f6d2d4"]]);export{te as default};
