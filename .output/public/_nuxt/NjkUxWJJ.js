import{_ as I}from"./Cbc0Spl8.js";import{r as A,B as _,C as P,D as N,o as Y,c as b,b as e,w as a,F as z,z as F,E as J,G as M,x as f,A as B,H as E,I as W,J as K,d as j,a as l,K as q}from"./8Lc1Ye8d.js";import{a as Q}from"./BatLNKDS.js";import{_ as X,V as Z,a as $}from"./B__GP0ju.js";import{V as g,_ as G}from"./DzzenEPx.js";import{_ as ee}from"./37abXc2X.js";import{V as d}from"./DMyzBB-L.js";import{V as ae}from"./3wJ_PxiT.js";import{V as te}from"./DNLTjn2t.js";import{V as k}from"./B731R9lY.js";const se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATqSURBVHic7VtNbBtFFP7e2rGRCFZDBRJqoFRCHAAJkOiJHMCtjJwQiUs4AOKAiE2EhERvSAhygSOgSJS4BXHh1N4o1GCVVUVQD5w4IHFB0NC0HKBplSZS6p99HGgc73PGnlnPrieE7xS/fTN+++XNe7Pfjgkxo7hQzG5mW2UCXgDwCIDb+wzZAPAzQF/sH8udOP386Xqc8VGck+c/yR+Al/4awKNRxhPwEwfNZ/05/7Ll0Nrw4pq4uFDMDnLzAMDAY/BGzsycmslYDC2E2AjYzLbKGODmt8GPr167Pjv4PDsjHdfERHgR3GnA2YBS5fOz1ZVe4546WRz3gtYJAMW2keklAB/HEWdsGQDGQ50fdW4eAM7PVlfSTZRDUxEeth3eFuIjABjt/KBz81uovV67JEx3WIloB8RJwK5A3zaYXyxMs8fHiOkw+vdwV7AB4EcifPBdqfZVL8eeBBxZLLzPhLeshpY83vPLtbdVF5UE5BcL0yB8GU9MyYII06pMUNYA9vhYfCElCw7wpuqach9ATE+EDXjSL9UuWIwrNhytHJ0I4C21DYTDKt9eXSDUxnbLzQPAufK5H4RJ2Ub3fBv8n4BhBzBs7HkCtJ8G85UC9/fafdjzGdCLAO2nN9fBgHy6bENNAKGE/wAJDFzymEqq61qiaL5SWAZwX9uQSt/vv3p2efDw7CH/6eRBtJoXO0x/+OXawX7jNGsAr4c+Ba1RleewEDSacrd3Q2ecHgFEIQLA7BwBSAcypvUd/QT0CAjgPAFpTomYSIsAvX0A0TpCEq+nJODpyjNTBK4AYBBKfqlWTcKPxT+FiC1mgKgBnqfOAAIvAjgAYJwZlaT8ZFYGMmsV0CKARUHhgHqptONbfxBwb1J+TOGYyGN7RZBEBqBHBgwLLPQLBHo1QHMJyC4A5wggqVgTNnTG6S6BDWFwUB4XWUkWawCJnsoU35uaqCCIumRzCRCLguLgEpA1wGoRlDtBz3OPAIBEG7SZAYIAZnKPgK7daWCPgCa1xGTutUHIrJTPL8phOmh6kgDniiBYFGabBHgjaVFQ3FsCsgimuGVxJ7h5U7LpHAEkCUil7GVAJsg4TwBETLlczh4B1TeqNwE0OkyZOI+umaK4UMwCGOkw1XUPWJrI4iFG19bWnMmCulePpAYBBgSwmLSBlDOdgG/Lxk9A1/OAQ8JotyCqpwYBJkuAhMrqki7YJYiSVgsETAhwWBiNKogCRhkgJ1ULo0kjqiAKGHUBfWE0cUQURIGBimBPYTRRSEFUVw0CjNqgEBgcyoAuMYT1XosBRkvAXWE0qiAKmG2EHBZGowmiwCA1wCFhNKogCgzSBtVLYGXbRX0yw6ZfVw3QlMMAkwwQyrBSGL11sqTfyQy7fkIQhaddBLVPiRHROvP2G2KVMHrr7W2vd332/ZhHw2ddYsgAp4XRiILov0M1MdKiq8J0aH5+fujH7GZOzaTAONRpSzOv6o7XvoF9d+5bRrgV3r10z4UPJ45PjenOYRsTx6fGrl67/hGAuzrMN1Zp9aLuHEY/nT1SKXzGwCsmYxIH46T/Wk1dVAWMUpiD5jsA/W0eVWL4q0H0rskAIwL8Of8yEU0S8KdZXIngSsA8uVT+1ii2lOm3/H7m1ysPPvfA58xUB7AfQA4x/gS3DzYB/MLMlUaQefn7uW9+M53gH/TVyDpW2OO1AAAAAElFTkSuQmCC",oe=l("img",{src:$},null,-1),le=l("img",{style:{cursor:"pointer"},src:G,alt:"Excluir"},null,-1),ie=[le],ne=l("img",{style:{cursor:"pointer"},src:ee,alt:"Salvar"},null,-1),re=[ne],ce=l("img",{class:"btn-pointer",src:se,alt:"Excluir"},null,-1),de=l("img",{class:"mt-15",src:G,alt:"Sair"},null,-1),ue={__name:"Testamento",setup(me){const n=A(null),v=A([]),u=A(""),m=A(!1),r=A(1),H=_("auth_token").value,y=_("user-data").value.nome,D=`${F().public.managemant}/uploadFaceId`,{$toast:w}=P(),C=async()=>{const t=await navigator.mediaDevices.enumerateDevices();v.value=t.filter(s=>s.kind==="videoinput").map(s=>({deviceId:s.deviceId,label:s.label||`Camera ${v.value.length+1}`}))},S=async()=>{m.value=!0;try{await navigator.mediaDevices.getUserMedia({video:!0}),await C()}catch(t){console.error("Erro ao acessar dispositivos de mídia:",t)}},V=()=>{m.value=!1;const t=n.value.srcObject;t&&t.getTracks().forEach(i=>i.stop())},U=async()=>{if(u.value){const t=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:u.value}}});n.value.srcObject=t}},x=async()=>{const t=document.createElement("canvas"),s=t.getContext("2d"),i=n.value.videoWidth,o=n.value.videoHeight,c=i*r.value,h=o*r.value,O=(i-c)/2,L=(o-h)/2;t.width=i,t.height=o,s.drawImage(n.value,O,L,c,h),t.toBlob(async R=>{const p=new FormData;p.append("file",R,`${y}.jpg`),p.append("pessoa_token",H),p.append("bucket","cartorio-teste");const{status:T}=await Q(D,{method:"POST",body:p},"$YOrtzEAAm0");T.value==="success"?(w.success("Imagem enviada!"),V()):w.error("Erro ao enviar imagem para o sistema.")},"image/jpeg")};return N(async()=>{try{await navigator.mediaDevices.getUserMedia({video:!0}),await C()}catch(t){console.error("Erro ao acessar dispositivos de mídia:",t)}}),(t,s)=>{const i=I;return Y(),b(z,null,[e(g,{class:"d-flex align-items-center justify-space-between"},{default:a(()=>[e(d,{cols:"auto"},{default:a(()=>[e(J,{src:X,width:500,class:"mr-4"})]),_:1}),e(M),e(d,{cols:"auto"},{default:a(()=>[e(ae,{"max-width":"700",modelValue:f(m),"onUpdate:modelValue":s[2]||(s[2]=o=>B(m)?m.value=o:null)},{activator:a(({props:o})=>[e(E,W(o,{variant:"outlined",style:{width:"300px",height:"300px"},onClick:S}),{default:a(()=>[oe]),_:2},1040)]),default:a(({isActive:o})=>[e(te,{title:"Biometria"},{default:a(()=>[e(g,null,{default:a(()=>[e(d,null,{default:a(()=>[e(K,{items:f(v),modelValue:f(u),"onUpdate:modelValue":s[0]||(s[0]=c=>B(u)?u.value=c:null),"item-title":"label","item-value":"deviceId",label:"Selecionar Webcam"},null,8,["items","modelValue"])]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(d,null,{default:a(()=>[e(E,{onClick:U},{default:a(()=>[j("Exibir")]),_:1})]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(k,{style:{overflow:"hidden"}},{default:a(()=>[e(d,null,{default:a(()=>[l("video",{class:"ml-3",ref_key:"video",ref:n,width:"640",height:"480",autoplay:"",style:q({transform:`scale(${f(r)})`,transformOrigin:"center center"})},null,4)]),_:1})]),_:1})]),_:1}),e(k,null,{default:a(()=>[e(Z,{modelValue:f(r),"onUpdate:modelValue":s[1]||(s[1]=c=>B(r)?r.value=c:null),min:1,max:3,step:"0.1",label:"Zoom"},null,8,["modelValue"])]),_:1}),e(g,{class:"mt-10 justify-space-around"},{default:a(()=>[l("div",{onClick:V},ie),l("div",{onClick:x},re)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[ce]),_:1})]),_:1}),e(i,{to:"/pessoas/registros"},{default:a(()=>[de]),_:1})],64)}}},Ge=ue;export{Ge as default};
